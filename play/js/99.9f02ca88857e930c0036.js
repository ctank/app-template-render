"use strict";(self.webpackChunkapp_template_builder=self.webpackChunkapp_template_builder||[]).push([[99],{91286:function(t,e,i){i.d(e,{s:function(){return r}});i(77950),i(85940);var n=i(87263),a=i(27875),r={name:"FormComponentBase",components:{},inject:["onChange","onGetValue","onEvent"],props:{id:{type:String,default:function(){return""}},type:{type:String,default:function(){return""}},extras:{type:Object,default:function(){return{}}},placeholder:{type:String,default:function(){return"请输入"}},rules:{type:Array,default:function(){return[]}},fieldPath:{type:String,default:function(){return""}},componentMap:{type:Object,default:function(){return{}}},formData:{type:Object,default:function(){return{}}}},data:function(){return{}},computed:{value:{get:function(){var t="";return this.formData&&this.fieldPath&&(t=(0,n.g)(this.formData,this.fieldPath)),t},set:function(t){this.onChange(t,this.id)}},validProp:function(){return this.fieldPath.replace(/\//g,".")}},render:function(t,e,i,n,r,l){return(0,a.wg)(),(0,a.iD)("div")}}},69099:function(t,e,i){i.r(e),i.d(e,{default:function(){return s}});i(68995),i(18178),i(77950),i(48319),i(95342),i(58188),i(74083);var n=i(27875),a=i(50349),r=i(87263),l=i(91286),s=(0,n.aZ)({name:"Select",extends:l.s,props:{title:{type:String,default:function(){return""}},required:{type:Boolean,default:function(){return!1}}},data:function(){return{filterOptions:[],relateOptionFieldValue:""}},computed:{relateValue:function(){var t="";if(this.extras.relateOptionField){var e=this.componentMap[this.extras.relateOptionField];t=(0,r.g)(this.formData,e.fieldPath)}return t},multipleLimit:function(){var t=0;return this.extras.multiple&&(this.extras.minLimit||this.extras.maxLimit)&&(t=this.extras.maxLimit||0),t}},watch:{relateValue:function(){this.setFilterOptions()},"extras.options":function(){this.setFilterOptions()}},created:function(){this.setDefaultValue(),this.setRules()},mounted:function(){this.init()},methods:{init:function(){this.setFilterOptions()},setRules:function(){if(this.rules){var t=this.title;if(this.required&&this.rules.push({required:!0,message:"".concat(t,"不能为空"),trigger:"blur"}),this.extras){var e=parseInt(this.extras.minLimit),i=parseInt(this.extras.maxLimit);isNaN(e)||isNaN(i)?isNaN(e)?isNaN(i)||this.rules.push({validator:function(t,e,n){e&&e instanceof Array&&e.length>i?n("最多可选择".concat(i,"个选项")):n()},trigger:"change"}):this.rules.push({validator:function(t,i,n){i&&i instanceof Array&&i.length<e?n("至少选择".concat(e,"个选项")):n()},trigger:"change"}):this.rules.push({validator:function(t,n,a){n&&n instanceof Array&&(n.length<e||n.length>i)?a("选择的数量必须在".concat(e,"和").concat(i,"之间")):a()},trigger:"change"})}}},setDefaultValue:function(){if(!this.value||!this.value.length){var t="";if(this.extras.minLimit||this.extras.maxLimit){t=[];for(var e=0;e<this.extras.options.length;e++)this.extras.options[e].isDefault&&t.push(this.extras.options[e].value)}else for(var i=0;i<this.extras.options.length;i++)if(this.extras.options[i].isDefault){t=this.extras.options[i].value;break}t&&t.length&&this.onChange(t,this.id)}},setFilterOptions:function(){var t=this,e=[];if("api"===this.extras.dataSource){this.relateOptionFieldValue!==this.relateValue&&(this.relateOptionFieldValue=this.relateValue);var i=this.fieldPath.split("/");this.onGetValue({id:this.id,field:i[i.length-1]||"",relateValue:this.relateOptionFieldValue},(function(e){Array.isArray(e)&&setTimeout((function(){t.filterOptions=e}),0)}))}else if(this.extras.relateOptionField){var n=this.extras.relateAvailableOptions[this.relateValue];n&&n.length&&(e=this.extras.options.filter((function(t){return n.indexOf(t.value)>=0})))}else e=this.extras.options;this.filterOptions=e}}});s.render=function(t,e,i,r,l,s){var u=(0,n.up)("el-option"),o=(0,n.up)("el-select"),h=(0,n.up)("el-form-item");return(0,n.wg)(),(0,n.j4)(h,{label:t.title,class:(0,a.normalizeClass)(t.required?"is-required":""),prop:t.validProp,rules:t.rules},{default:(0,n.w5)((function(){return[(0,n.Wm)(o,{modelValue:t.value,"onUpdate:modelValue":e[0]||(e[0]=function(e){return t.value=e}),placeholder:t.placeholder,clearable:"",multiple:t.extras.multiple,"multiple-limit":t.multipleLimit},{default:(0,n.w5)((function(){return[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.filterOptions,(function(t,e){return(0,n.wg)(),(0,n.j4)(u,{key:"".concat(e,"-").concat(t.value),label:t.label,value:t.value},null,8,["label","value"])})),128))]})),_:1},8,["modelValue","placeholder","multiple","multiple-limit"])]})),_:1},8,["label","class","prop","rules"])}}}]);