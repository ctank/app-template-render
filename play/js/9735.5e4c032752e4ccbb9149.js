"use strict";(self.webpackChunkapp_template_builder=self.webpackChunkapp_template_builder||[]).push([[9735],{2633:function(n,e,t){t.r(e),t.d(e,{default:function(){return f}});t(26936);var o=t(27875),a=t(50349),i=t(14825),r=["onMouseenter"],l={class:"component-tab-panel__action"};t(43450),t(18178),t(74083);var c=t(24048),p=t.n(c),s=t(92041),u=t(42233),d=t(22267),m=(t(55164),{name:"TabPanel",extends:u.default,components:{draggable:p()},mixins:[s.Z],data:function(){return{value:""}},computed:{dragOptions:function(){return{animation:150,ghostClass:"drop-column--ghost",itemKey:"id",group:{name:"components"},filter:".drop-component--disabled"}}},methods:{handleComponentChange:function(n){var e=n.added;n.removed,n.moved;if(e){var t=e.element;if(this.componentMap[t.id]);else{var o=this.menuItemListByType[t.type];if(1===o.classify){for(var a=this.componentList.map((function(n){return n.title})),i=this.componentList.map((function(n){return n.fieldPaths})),r=1,l="".concat(o.name).concat(r);a.indexOf(l)>-1||i.indexOf(l)>-1;)r++,l="".concat(o.name).concat(r);this.componentMap[t.id]=new d.DesignerComponent(l,t.type,t.id)}else this.componentMap[t.id]=t}}},handleComponentHover:function(n){this.$store.dispatch("form/addHoverComponentId",n?n.id:"")},handleComponentLeave:function(){this.$store.dispatch("form/removeHoverComponentId")},handleComponentSelect:function(n){this.$emit("select",n)},handleComponentDel:function(n,e){this.$emit("delete",n,e)}}});var f=(0,t(94407).Z)(m,[["render",function(n,e,t,c,p,s){var u=(0,o.up)("input-element-render"),d=(0,o.up)("setting"),m=(0,o.up)("el-icon"),f=(0,o.up)("delete"),h=(0,o.up)("draggable");return(0,o.wg)(),(0,o.j4)(h,(0,o.dG)({class:"component-tab-panel",list:n.layouts},s.dragOptions,{onChange:s.handleComponentChange}),{item:(0,o.w5)((function(t){var c=t.element,p=t.index;return[(0,o._)("div",{class:(0,a.normalizeClass)(["component-tab-panel__item",{"component-tab-panel__item--active":c.id===n.currentComponentId,"component-tab-panel__item--hover":c.id===n.hoverComponentId}]),onMouseenter:(0,i.withModifiers)((function(n){return s.handleComponentHover(c)}),["stop"]),onMouseleave:e[0]||(e[0]=(0,i.withModifiers)((function(n){return s.handleComponentLeave()}),["stop"]))},[((0,o.wg)(),(0,o.j4)(u,{type:c.type,key:c.name,layout:c,layouts:n.layouts,componentMap:n.componentMap,componentList:n.componentList},null,8,["type","layout","layouts","componentMap","componentList"])),(0,o._)("div",l,[(0,o.Wm)(m,{class:"component-tab-panel__config mr-1",onClick:function(n){return s.handleComponentSelect(c)}},{default:(0,o.w5)((function(){return[(0,o.Wm)(d)]})),_:2},1032,["onClick"]),(0,o.Wm)(m,{class:"component-tab-panel__close",onClick:function(n){return s.handleComponentDel(c,p)}},{default:(0,o.w5)((function(){return[(0,o.Wm)(f)]})),_:2},1032,["onClick"])])],42,r)]})),_:1},16,["list","onChange"])}]])},18941:function(n,e,t){t.r(e),t.d(e,{default:function(){return i}});t(26936);var o=t(27875);var a={name:"Tabs",extends:t(42233).default,computed:{activeTab:function(){return Array.isArray(this.component.children)&&this.component.children[0]?this.component.children[0].id:""}}};var i=(0,t(94407).Z)(a,[["render",function(n,e,t,a,i,r){var l=(0,o.up)("input-element-render"),c=(0,o.up)("el-tab-pane"),p=(0,o.up)("el-tabs");return(0,o.wg)(),(0,o.j4)(p,{modelValue:r.activeTab,"onUpdate:modelValue":e[0]||(e[0]=function(n){return r.activeTab=n}),class:"component-tabs"},{default:(0,o.w5)((function(){return[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.component.children,(function(e,t){return(0,o.wg)(),(0,o.j4)(c,{key:e.id,label:e.title,name:e.id},{default:(0,o.w5)((function(){return[((0,o.wg)(),(0,o.j4)(l,{type:e.type,key:e.name,layout:e,layouts:e.children,componentMap:n.componentMap,componentList:n.componentList},null,8,["type","layout","layouts","componentMap","componentList"]))]})),_:2},1032,["label","name"])})),128))]})),_:1},8,["modelValue"])}]])},15198:function(n,e,t){t.r(e),t.d(e,{default:function(){return p}});var o=t(27875),a=t(50349),i={class:"component-wrapper component-text"},r={class:"component-label"},l={class:"component-content"};var c={name:"TextBox",extends:t(42233).default,data:function(){return{value:""}}};var p=(0,t(94407).Z)(c,[["render",function(n,e,t,c,p,s){var u=(0,o.up)("el-input");return(0,o.wg)(),(0,o.iD)("div",i,[(0,o._)("label",r,(0,a.toDisplayString)(n.component.title)+"：",1),(0,o._)("div",l,[(0,o.Wm)(u,{modelValue:p.value,"onUpdate:modelValue":e[0]||(e[0]=function(n){return p.value=n}),placeholder:n.component.placeholder,disabled:""},null,8,["modelValue","placeholder"])])])}]])},79701:function(n,e,t){t.r(e),t.d(e,{default:function(){return p}});var o=t(27875),a=t(50349),i={class:"component-wrapper component-textarea"},r={class:"component-label"},l={class:"component-content"};var c={name:"TextBox",extends:t(42233).default,data:function(){return{value:""}}};var p=(0,t(94407).Z)(c,[["render",function(n,e,t,c,p,s){var u=(0,o.up)("el-input");return(0,o.wg)(),(0,o.iD)("div",i,[(0,o._)("label",r,(0,a.toDisplayString)(n.component.title)+"：",1),(0,o._)("div",l,[(0,o.Wm)(u,{modelValue:p.value,"onUpdate:modelValue":e[0]||(e[0]=function(n){return p.value=n}),rows:n.component.rows,type:"textarea",placeholder:n.component.placeholder,disabled:""},null,8,["modelValue","rows","placeholder"])])])}]])},98133:function(n,e,t){t.d(e,{Z:function(){return v}});t(26936);var o=t(27875),a=t(50349),i=t(14825),r={class:"form-designer__content"},l=["onMouseenter"],c={class:"designer-components__action"},p={class:"form-designer__float"};t(43450),t(18178),t(74083),t(39529),t(31235),t(58188),t(1939);var s=t(40641),u=t(24048),d=t.n(u),m=t(92041),f=t(22267),h=t(325),g=t(13987),y={name:"DesignerContent",components:{draggable:d()},mixins:[m.Z],props:{layouts:{type:Array,default:function(){return[]}},componentMap:{type:Object,default:function(){return{}}},componentList:{type:Array,default:function(){return[]}},config:{type:Object,default:function(){return{}}}},data:function(){return{attrDialog:null,formAttrDialog:null}},computed:{currentComponentId:function(){return this.$store.state.form.currentComponentId||""},hoverComponentId:function(){return this.$store.state.form.hoverComponentIds[0]||""},dragOptions:function(){return{animation:150,ghostClass:"drop-component--ghost",itemKey:"id",group:{name:"components"},filter:".drop-component--disabled"}}},created:function(){this.initRenderComponent(),this.initRenderAttributes()},methods:{initRenderComponent:function(){var n=this;this.$App.component("input-element-render",{props:{type:{type:String,default:function(){return""}},layout:{type:Object,default:function(){return{}}},layouts:{type:Array,default:function(){return[]}},componentMap:{type:Object,default:function(){return{}}},componentList:{type:Array,default:function(){return[]}}},render:function(e){var a=e.type,i=e.layouts,r=e.layout,l=e.componentMap,c=e.componentList;if(a){var p=t(82041)("./".concat(a)).default;return(0,o.h)(p,{layout:r,layouts:i,componentMap:l,componentList:c,onSelect:n.handleComponentSelect,onDelete:n.handleComponentDel})}return(0,o.h)("div")}})},initRenderAttributes:function(){this.$App.component("component-attr-render",{props:{data:{type:Object,default:function(){return null}},componentList:{type:Array,default:function(){return[]}},componentMap:{type:Object,default:function(){return{}}}},render:function(n){var e=n.data,a=n.componentList,i=n.componentMap;if(e&&e.type){var r=t(68549)("./".concat(e.type)).default;return(0,o.h)(r,{data:e,componentList:a,componentMap:i})}return(0,o.h)("div")}})},handleComponentChange:function(n){var e=n.added;n.removed,n.moved;if(e){var t=e.element,o=this.menuItemListByType[t.type];if(1===o.classify){for(var a=this.componentList.map((function(n){return n.title})),i=this.componentList.map((function(n){return n.fieldPaths})),r=1,l="".concat(o.name).concat(r);a.indexOf(l)>-1||i.indexOf(l)>-1;)r++,l="".concat(o.name).concat(r);this.componentMap[t.id]=new f.DesignerComponent(l,t.type,t.id)}else this.componentMap[t.id]=t}},handleComponentHover:function(n){this.$store.dispatch("form/addHoverComponentId",n?n.id:"")},handleComponentLeave:function(){this.$store.dispatch("form/removeHoverComponentId")},handleFromAttrShow:function(){var n=this,e={config:this.config},o={confirm:function(e){n.config.name=e.name,n.config.api=e.api,n.$store.dispatch("dialogManager/closeDialog",n.formAttrDialog.key)},cancel:function(){n.$store.dispatch("dialogManager/closeDialog",n.formAttrDialog.key)}},a=(0,s.Xl)(t(862).default);this.formAttrDialog?(this.formAttrDialog.props=e,this.formAttrDialog.events=o,this.$store.dispatch("dialogManager/updateDialog",this.formAttrDialog)):(this.formAttrDialog=new g.V(a,e,o,{title:"表单属性",isDestroyByClose:!0,bodyHeight:350}),this.$store.dispatch("dialogManager/addDialog",this.formAttrDialog)),this.$store.dispatch("dialogManager/openDialog",this.formAttrDialog.key)},handleComponentSelect:function(n){var e=this,o={component:this.componentMap[n.id],componentMap:this.componentMap,componentList:this.componentList,config:this.config},a={confirm:function(n){e.componentMap[n.id]=n,h.LAYOUT_TYPES.includes(n.type)&&e.layouts.forEach((function(t,o){t.id===n.id&&(e.layouts[o]=n)})),e.$store.dispatch("dialogManager/closeDialog",e.attrDialog.key)},cancel:function(){e.$store.dispatch("dialogManager/closeDialog",e.attrDialog.key)}},i={title:"组件属性",isDestroyByClose:!0,footerTxt:n.id,bodyHeight:350},r=(0,s.Xl)(t(25574).default);this.attrDialog?(this.attrDialog.props=o,this.attrDialog.events=a,this.$store.dispatch("dialogManager/updateDialog",this.attrDialog)):(this.attrDialog=new g.V(r,o,a,i),this.$store.dispatch("dialogManager/addDialog",this.attrDialog)),this.$store.dispatch("dialogManager/openDialog",this.attrDialog.key)},handleComponentDel:function(n,e){this.$emit("delete",n,e)}}};var v=(0,t(94407).Z)(y,[["render",function(n,e,t,s,u,d){var m=(0,o.up)("input-element-render"),f=(0,o.up)("setting"),h=(0,o.up)("el-icon"),g=(0,o.up)("delete"),y=(0,o.up)("draggable"),v=(0,o.up)("el-button");return(0,o.wg)(),(0,o.iD)("div",r,[(0,o.Wm)(y,(0,o.dG)({class:"designer-components",list:t.layouts},d.dragOptions,{onChange:d.handleComponentChange}),{item:(0,o.w5)((function(n){var r=n.element,p=n.index;return[(0,o._)("div",{class:(0,a.normalizeClass)(["designer-components__item",{"designer-components__item--active":r.id===d.currentComponentId,"designer-components__item--hover":r.id===d.hoverComponentId}]),onMouseenter:(0,i.withModifiers)((function(n){return d.handleComponentHover(r)}),["stop"]),onMouseleave:e[0]||(e[0]=(0,i.withModifiers)((function(n){return d.handleComponentLeave()}),["stop"]))},[((0,o.wg)(),(0,o.j4)(m,{type:r.type,key:r.name,layout:r,layouts:t.layouts,componentMap:t.componentMap,componentList:t.componentList},null,8,["type","layout","layouts","componentMap","componentList"])),(0,o._)("div",c,[(0,o.Wm)(h,{class:"designer-components__config mr-1",onClick:function(n){return d.handleComponentSelect(r)}},{default:(0,o.w5)((function(){return[(0,o.Wm)(f)]})),_:2},1032,["onClick"]),(0,o.Wm)(h,{class:"designer-components__close",onClick:function(n){return d.handleComponentDel(r,p)}},{default:(0,o.w5)((function(){return[(0,o.Wm)(g)]})),_:2},1032,["onClick"])])],42,l)]})),_:1},16,["list","onChange"]),(0,o._)("div",p,[(0,o.Wm)(v,{circle:"",onClick:d.handleFromAttrShow},{default:(0,o.w5)((function(){return[(0,o.Wm)(h,null,{default:(0,o.w5)((function(){return[(0,o.Wm)(f)]})),_:1})]})),_:1},8,["onClick"])])])}]])}}]);