"use strict";(self.webpackChunkapp_template_builder=self.webpackChunkapp_template_builder||[]).push([[3486],{57804:function(e,t,a){a.r(t),a.d(t,{default:function(){return p}});a(58188),a(88233),a(18178);var l=a(27875),n=a(50349),r=(0,l.Uk)("两列"),u=(0,l.Uk)("三列"),o=(0,l.Uk)("四列"),i={class:"w-9/12"},d={class:"attribute-row__col text-center"};a(1939);var s=a(30621),c=a(22267),m={name:"RowAttr",extends:s.default,data:function(){return{rules:{},percentageOptions:{2:[[1,1],[1,2],[2,1],[1,3],[3,1]],3:[[1,1,1],[1,1,2],[2,1,1],[1,2,1]],4:[[1,1,1,1]]}}},watch:{"data.extras.size":function(e){this.handleSizeChange(e)}},methods:{getColTotal:function(e){var t=0;return Array.isArray(e)&&e.forEach((function(e){t+=e})),t},handlePercentageChange:function(e){this.data.extras.percentage=e},handleComponentDel:function(e){var t=this;e.forEach((function(e){e.children&&e.children.length?t.handleComponentDel(e.children):t.componentMap[e.id]&&delete t.componentMap[e.id]}))},handleSizeChange:function(e){this.data.extras.percentage=this.percentageOptions[e][0];var t=e-this.data.children.length;if(t>0)for(var a=0;a<t;a+=1)this.data.children.push(new c.DesignerLayout("","column"));else if(t<0)for(var l=0;l<Math.abs(t);l+=1){var n=this.data.children.pop();n.children.length&&this.handleComponentDel(n.children)}}}};const f=(0,a(94407).Z)(m,[["render",function(e,t,a,s,c,m){var f=(0,l.up)("el-radio-button"),p=(0,l.up)("el-radio-group"),h=(0,l.up)("el-form-item"),w=(0,l.up)("el-col"),b=(0,l.up)("el-row"),g=(0,l.up)("el-tab-pane"),x=(0,l.up)("el-tabs"),_=(0,l.up)("el-form");return(0,l.wg)(),(0,l.j4)(_,{ref:"form",class:"attribute-row",model:e.data.extras,rules:c.rules,"label-width":"90px","label-position":"left",size:"small"},{default:(0,l.w5)((function(){return[(0,l.Wm)(x,{modelValue:e.tabsActives,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.tabsActives=t})},{default:(0,l.w5)((function(){return[(0,l.Wm)(g,{label:"基础属性",name:"base"},{default:(0,l.w5)((function(){return[(0,l.Wm)(h,{label:"列数："},{default:(0,l.w5)((function(){return[(0,l.Wm)(p,{modelValue:e.data.extras.size,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.data.extras.size=t})},{default:(0,l.w5)((function(){return[(0,l.Wm)(f,{label:2},{default:(0,l.w5)((function(){return[r]})),_:1}),(0,l.Wm)(f,{label:3},{default:(0,l.w5)((function(){return[u]})),_:1}),(0,l.Wm)(f,{label:4},{default:(0,l.w5)((function(){return[o]})),_:1})]})),_:1},8,["modelValue"])]})),_:1}),(0,l.Wm)(h,{class:"attribute-row__percentage",label:"占比："},{default:(0,l.w5)((function(){return[(0,l._)("div",i,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(c.percentageOptions[e.data.extras.size||2],(function(t,a){return(0,l.wg)(),(0,l.j4)(b,{key:a,class:(0,n.normalizeClass)({"attribute-row__percentage--active":e.data.extras.percentage.toString()===t.toString()}),onClick:function(e){return m.handlePercentageChange(t)}},{default:(0,l.w5)((function(){return[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(t,(function(e,r){return(0,l.wg)(),(0,l.j4)(w,{key:"".concat(a,"-").concat(r),span:24/m.getColTotal(t)*e},{default:(0,l.w5)((function(){return[(0,l._)("div",d,(0,n.toDisplayString)(e)+" / "+(0,n.toDisplayString)(m.getColTotal(t)),1)]})),_:2},1032,["span"])})),128))]})),_:2},1032,["class","onClick"])})),128))])]})),_:1})]})),_:1})]})),_:1},8,["modelValue"])]})),_:1},8,["model","rules"])}]]);var p=f},1518:function(e,t,a){a.r(t),a.d(t,{default:function(){return f}});a(74083);var l=a(27875),n=a(50349),r={key:0,class:"custom-table mb-5"},u=(0,l._)("span",null,null,-1),o=(0,l._)("span",null,"数量限制：",-1),i=(0,l._)("i",{class:"iconfont icon-xiangqing"},null,-1),d={key:1,class:"text-center"},s={key:3,class:"text-right",style:{color:"#666"}},c={key:3,class:"custom-table mb-5"};a(58188),a(1939),a(68995),a(99805);var m={name:"SelectAttr",extends:a(30621).default,data:function(){return{isDisabeld:!1,rules:{}}},computed:{relateFieldOptions:function(){var e=this,t=[];return this.data.extras.relateOptionField&&this.componentList.forEach((function(a){if(a.id===e.data.extras.relateOptionField)return t=a.extras.options||[],!1})),t}},watch:{"data.id":function(){this.init()}},mounted:function(){this.init()},methods:{init:function(){this.data.placeholder||(this.data.placeholder="请选择")},addOption:function(e){var t=1,a=[];for(this.data.extras.options.forEach((function(e){a.push(parseInt(e.value))}));-1!==a.indexOf(t);)t++;var l={isDefault:!1,value:"".concat(t),label:"",color:null};e||0===e?this.data.extras.options.splice(e+1,0,l):this.data.extras.options.push(l)},deleteOption:function(e){this.data.extras.options.splice(e,1)},handleDataSourceChange:function(e){"api"===e?(this.data.extras.options=[],this.data.extras.relateOptionField="",this.data.extras.relateAvailableOptions={}):this.data.extras.options=[{isDefault:!1,value:"1",label:"选项一"},{isDefault:!1,value:"2",label:"选项二"},{isDefault:!1,value:"3",label:"选项三"}]}}};var f=(0,a(94407).Z)(m,[["render",function(e,t,a,m,f,p){var h=(0,l.up)("base-attr"),w=(0,l.up)("el-tab-pane"),b=(0,l.up)("el-option"),g=(0,l.up)("el-select"),x=(0,l.up)("el-form-item"),_=(0,l.up)("el-checkbox"),v=(0,l.up)("el-table-column"),k=(0,l.up)("el-input"),W=(0,l.up)("delete"),V=(0,l.up)("el-icon"),y=(0,l.up)("el-table"),C=(0,l.up)("el-switch"),D=(0,l.up)("el-popover"),O=(0,l.up)("row-split"),U=(0,l.up)("showConfig"),S=(0,l.up)("el-tabs"),z=(0,l.up)("el-form");return(0,l.wg)(),(0,l.j4)(z,{ref:"form",model:e.data.extras,rules:f.rules,"label-width":"90px","label-position":"left",size:"small"},{default:(0,l.w5)((function(){return[(0,l.Wm)(S,{modelValue:e.tabsActives,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.tabsActives=t})},{default:(0,l.w5)((function(){return[(0,l.Wm)(w,{label:"基础属性",name:"base"},{default:(0,l.w5)((function(){return[(0,l.Wm)(h,{data:e.data},null,8,["data"])]})),_:1}),(0,l.Wm)(w,{label:"业务属性",name:"extras"},{default:(0,l.w5)((function(){return[(0,l.Wm)(x,{label:"数据源：",class:"mb_2"},{default:(0,l.w5)((function(){return[(0,l.Wm)(g,{modelValue:e.data.extras.dataSource,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.data.extras.dataSource=t}),clearable:"",onChange:p.handleDataSourceChange},{default:(0,l.w5)((function(){return[(0,l.Wm)(b,{label:"配置",value:"custom"}),(0,l.Wm)(b,{label:"接口",value:"api"})]})),_:1},8,["modelValue","onChange"])]})),_:1}),"custom"===e.data.extras.dataSource?((0,l.wg)(),(0,l.iD)("div",r,[(0,l.Wm)(y,{"row-key":"value",prop:"options",data:e.data.extras.options,"max-height":506},{default:(0,l.w5)((function(){return[(0,l.Wm)(v,{"header-align":"center",align:"center",label:"默认值",width:"60px"},{default:(0,l.w5)((function(e){var t=e.row,a=e.$index;return[(0,l.Wm)(_,{"data-mark":"选择框_"+a,modelValue:t.isDefault,"onUpdate:modelValue":function(e){return t.isDefault=e},label:!0,size:"small"},{default:(0,l.w5)((function(){return[u]})),_:2},1032,["data-mark","modelValue","onUpdate:modelValue"])]})),_:1}),(0,l.Wm)(v,{"header-align":"center",align:"center",label:"选项值",width:"60px"},{default:(0,l.w5)((function(e){var t=e.row;return[(0,l.Wm)(k,{class:"w_100",prop:"value",modelValue:t.value,"onUpdate:modelValue":function(e){return t.value=e},size:"small"},null,8,["modelValue","onUpdate:modelValue"])]})),_:1}),(0,l.Wm)(v,{label:"选项名称"},{default:(0,l.w5)((function(e){var t=e.row;return[(0,l.Wm)(k,{class:"w_100",prop:"selectName",modelValue:t.label,"onUpdate:modelValue":function(e){return t.label=e},size:"small"},null,8,["modelValue","onUpdate:modelValue"])]})),_:1}),(0,l.Wm)(v,{"header-align":"center",align:"center",label:"操作",width:"50px"},{default:(0,l.w5)((function(e){var t=e.$index;return[(0,l.Wm)(V,{class:"custom-table__icon",onClick:function(e){return p.deleteOption(t)}},{default:(0,l.w5)((function(){return[(0,l.Wm)(W)]})),_:2},1032,["onClick"])]})),_:1})]})),_:1},8,["data"]),(0,l._)("div",{"data-mark":"添加选项按钮",class:"custom-table__button",onClick:t[1]||(t[1]=function(e){return p.addOption("")})}," +添加选项 ")])):(0,l.kq)("",!0),(0,l.Wm)(x,{label:"支持多选"},{default:(0,l.w5)((function(){return[(0,l.Wm)(C,{modelValue:e.data.extras.multiple,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.data.extras.multiple=t})},null,8,["modelValue"])]})),_:1}),e.data.extras.multiple?((0,l.wg)(),(0,l.j4)(x,{key:1},{label:(0,l.w5)((function(){return[o,(0,l.Wm)(D,{placement:"top-start",trigger:"hover",content:"为空代表单选"},{reference:(0,l.w5)((function(){return[i]})),_:1})]})),default:(0,l.w5)((function(){return[(0,l.Wm)(O,{colWidths:["calc((100% - 50px) / 2)","10px","calc((100% - 50px) / 2)","40px"]},{default:(0,l.w5)((function(a){return[0===a.data.index?((0,l.wg)(),(0,l.j4)(k,{key:0,class:"w_100",modelValue:e.data.extras.minLimit,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.data.extras.minLimit=t}),modelModifiers:{number:!0},type:"number",onkeypress:"return /^\\d$/.test(event.key)",placeholder:"最少"},null,8,["modelValue"])):(0,l.kq)("",!0),1===a.data.index?((0,l.wg)(),(0,l.iD)("div",d,"-")):(0,l.kq)("",!0),2===a.data.index?((0,l.wg)(),(0,l.j4)(k,{key:2,class:"w_100",modelValue:e.data.extras.maxLimit,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.data.extras.maxLimit=t}),modelModifiers:{number:!0},type:"number",onkeypress:"return /^\\d$/.test(event.key)",placeholder:"最多"},null,8,["modelValue"])):(0,l.kq)("",!0),3===a.data.index?((0,l.wg)(),(0,l.iD)("div",s,"个选项")):(0,l.kq)("",!0)]})),_:1},8,["colWidths"])]})),_:1})):(0,l.kq)("",!0),(0,l.Wm)(x,{label:"关联选项：",class:"mb_2"},{default:(0,l.w5)((function(){return[(0,l.Wm)(g,{modelValue:e.data.extras.relateOptionField,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.data.extras.relateOptionField=t}),class:"w_100",filterable:"",clearable:""},{default:(0,l.w5)((function(){return[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.componentList,(function(t){return(0,l.wg)(),(0,l.iD)(l.HY,null,[e.relateOptionTypes.indexOf(t.type)>=0&&t.id!==e.data.id?((0,l.wg)(),(0,l.j4)(b,{"data-mark":"关联选项字段",label:t.title,value:t.id,key:t.id},null,8,["label","value"])):(0,l.kq)("",!0)],64)})),256))]})),_:1},8,["modelValue"])]})),_:1}),"custom"===e.data.extras.dataSource?((0,l.wg)(),(0,l.j4)(x,{key:2,label:"关联可选项："})):(0,l.kq)("",!0),"custom"===e.data.extras.dataSource?((0,l.wg)(),(0,l.iD)("div",c,[(0,l.Wm)(y,{data:p.relateFieldOptions,"max-height":506},{default:(0,l.w5)((function(){return[(0,l.Wm)(v,{"header-align":"center",align:"center",label:"关联选项",width:"100px"},{default:(0,l.w5)((function(e){var t=e.row;return[(0,l.Uk)((0,n.toDisplayString)(t.label),1)]})),_:1}),(0,l.Wm)(v,{"header-align":"center",align:"center",label:"本组件可选项"},{default:(0,l.w5)((function(t){var a=t.row;return[((0,l.wg)(),(0,l.j4)(g,{class:"w_100",modelValue:e.data.extras.relateAvailableOptions[a.value],"onUpdate:modelValue":function(t){return e.data.extras.relateAvailableOptions[a.value]=t},key:a.label,appendToBody:"",multiple:"",size:"small"},{default:(0,l.w5)((function(){return[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(e.data.extras.options,(function(e){return(0,l.wg)(),(0,l.j4)(b,{label:e.label,value:e.value,key:e.value},null,8,["label","value"])})),128))]})),_:2},1032,["modelValue","onUpdate:modelValue"]))]})),_:1})]})),_:1},8,["data"])])):(0,l.kq)("",!0)]})),_:1}),(0,l.Wm)(w,{label:"显示设置",name:"show"},{default:(0,l.w5)((function(){return[(0,l.Wm)(U,{componentList:e.filterComponentList,config:e.data.extras.showConfig},null,8,["componentList","config"])]})),_:1}),(0,l.Wm)(w,{label:"只读设置",name:"readonly"},{default:(0,l.w5)((function(){return[(0,l.Wm)(U,{componentList:e.filterComponentList,config:e.data.extras.readonlyConfig},null,8,["componentList","config"])]})),_:1})]})),_:1},8,["modelValue"])]})),_:1},8,["model","rules"])}]])}}]);