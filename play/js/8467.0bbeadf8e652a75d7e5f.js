"use strict";(self.webpackChunkapp_template_builder=self.webpackChunkapp_template_builder||[]).push([[8467],{96896:function(e,t,i){i.d(t,{i:function(){return h}});var s=i(34441),n=i(54293),r=i(19846),o=i(56709),l=i(38431);class d{constructor(e,t,i){this.columns=e,this.getColumnSize=i,this.templateId=d.TemplateId,this.renderedTemplates=new Set;const s=new Map(t.map((e=>[e.templateId,e])));this.renderers=[];for(const t of e){const e=s.get(t.templateId);if(!e)throw new Error(`Table cell renderer for template id ${t.templateId} not found.`);this.renderers.push(e)}}renderTemplate(e){const t=(0,s.R3)(e,(0,s.$)(".monaco-table-tr")),i=[],n=[];for(let e=0;e<this.columns.length;e++){const r=this.renderers[e],o=(0,s.R3)(t,(0,s.$)(".monaco-table-td",{"data-col-index":e}));o.style.width=`${this.getColumnSize(e)}px`,i.push(o),n.push(r.renderTemplate(o))}const r={container:e,cellContainers:i,cellTemplateData:n};return this.renderedTemplates.add(r),r}renderElement(e,t,i,s){for(let n=0;n<this.columns.length;n++){const r=this.columns[n].project(e);this.renderers[n].renderElement(r,t,i.cellTemplateData[n],s)}}disposeElement(e,t,i,s){for(let n=0;n<this.columns.length;n++){const r=this.renderers[n];if(r.disposeElement){const o=this.columns[n].project(e);r.disposeElement(o,t,i.cellTemplateData[n],s)}}}disposeTemplate(e){for(let t=0;t<this.columns.length;t++){this.renderers[t].disposeTemplate(e.cellTemplateData[t])}(0,s.PO)(e.container),this.renderedTemplates.delete(e)}layoutColumn(e,t){for(const{cellContainers:i}of this.renderedTemplates)i[e].style.width=`${t}px`}}d.TemplateId="row";class a{constructor(e,t){this.column=e,this.index=t,this._onDidLayout=new o.Q5,this.onDidLayout=this._onDidLayout.event,this.element=(0,s.$)(".monaco-table-th",{"data-col-index":t,title:e.tooltip},e.label)}get minimumSize(){var e;return null!==(e=this.column.minimumWidth)&&void 0!==e?e:120}get maximumSize(){var e;return null!==(e=this.column.maximumWidth)&&void 0!==e?e:Number.POSITIVE_INFINITY}get onDidChange(){var e;return null!==(e=this.column.onDidChangeWidthConstraints)&&void 0!==e?e:o.ju.None}layout(e){this._onDidLayout.fire([this.index,e])}}class h{constructor(e,t,i,c,p,u){this.virtualDelegate=i,this.domId="table_id_"+ ++h.InstanceCount,this.disposables=new l.SL,this.cachedWidth=0,this.cachedHeight=0,this.domNode=(0,s.R3)(t,(0,s.$)(`.monaco-table.${this.domId}`));const m=c.map(((e,t)=>new a(e,t))),g={size:m.reduce(((e,t)=>e+t.column.weight),0),views:m.map((e=>({size:e.column.weight,view:e})))};this.splitview=this.disposables.add(new r.z(this.domNode,{orientation:1,scrollbarVisibility:2,getSashOrthogonalSize:()=>this.cachedHeight,descriptor:g})),this.splitview.el.style.height=`${i.headerRowHeight}px`,this.splitview.el.style.lineHeight=`${i.headerRowHeight}px`;const f=new d(c,p,(e=>this.splitview.getViewSize(e)));var v;this.list=this.disposables.add(new n.aV(e,this.domNode,(v=i,{getHeight(e){return v.getHeight(e)},getTemplateId(){return d.TemplateId}}),[f],u)),o.ju.any(...m.map((e=>e.onDidLayout)))((([e,t])=>f.layoutColumn(e,t)),null,this.disposables),this.splitview.onDidSashReset((e=>{const t=c.reduce(((e,t)=>e+t.weight),0),i=c[e].weight/t*this.cachedWidth;this.splitview.resizeView(e,i)}),null,this.disposables),this.styleElement=(0,s.dS)(this.domNode),this.style({})}get onDidChangeFocus(){return this.list.onDidChangeFocus}get onDidChangeSelection(){return this.list.onDidChangeSelection}get onMouseDblClick(){return this.list.onMouseDblClick}get onPointer(){return this.list.onPointer}get onDidFocus(){return this.list.onDidFocus}get onDidDispose(){return this.list.onDidDispose}updateOptions(e){this.list.updateOptions(e)}splice(e,t,i=[]){this.list.splice(e,t,i)}getHTMLElement(){return this.domNode}style(e){const t=[];t.push(`.monaco-table.${this.domId} > .monaco-split-view2 .monaco-sash.vertical::before {\n\t\t\ttop: ${this.virtualDelegate.headerRowHeight+1}px;\n\t\t\theight: calc(100% - ${this.virtualDelegate.headerRowHeight}px);\n\t\t}`),this.styleElement.textContent=t.join("\n"),this.list.style(e)}getSelectedElements(){return this.list.getSelectedElements()}getSelection(){return this.list.getSelection()}getFocus(){return this.list.getFocus()}dispose(){this.disposables.dispose()}}h.InstanceCount=0},23147:function(e,t,i){i.d(t,{Z:function(){return d}});var s=i(88305),n=i(407),r=i(86741),o=i(56709);const l={inputActiveOptionBorder:r.Il.fromHex("#007ACC00"),inputActiveOptionForeground:r.Il.fromHex("#FFFFFF"),inputActiveOptionBackground:r.Il.fromHex("#0E639C50")};class d extends s.${constructor(e){super(),this._onChange=this._register(new o.Q5),this.onChange=this._onChange.event,this._onKeyDown=this._register(new o.Q5),this.onKeyDown=this._onKeyDown.event,this._opts=Object.assign(Object.assign({},l),e),this._checked=this._opts.isChecked;const t=["monaco-custom-toggle"];this._opts.icon&&(this._icon=this._opts.icon,t.push(...n.dT.asClassNameArray(this._icon))),this._opts.actionClassName&&t.push(...this._opts.actionClassName.split(" ")),this._checked&&t.push("checked"),this.domNode=document.createElement("div"),this.domNode.title=this._opts.title,this.domNode.classList.add(...t),this._opts.notFocusable||(this.domNode.tabIndex=0),this.domNode.setAttribute("role","checkbox"),this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.setAttribute("aria-label",this._opts.title),this.applyStyles(),this.onclick(this.domNode,(e=>{this.enabled&&(this.checked=!this._checked,this._onChange.fire(!1),e.preventDefault())})),this.ignoreGesture(this.domNode),this.onkeydown(this.domNode,(e=>{if(10===e.keyCode||3===e.keyCode)return this.checked=!this._checked,this._onChange.fire(!0),e.preventDefault(),void e.stopPropagation();this._onKeyDown.fire(e)}))}get enabled(){return"true"!==this.domNode.getAttribute("aria-disabled")}focus(){this.domNode.focus()}get checked(){return this._checked}set checked(e){this._checked=e,this.domNode.setAttribute("aria-checked",String(this._checked)),this.domNode.classList.toggle("checked",this._checked),this.applyStyles()}width(){return 22}style(e){e.inputActiveOptionBorder&&(this._opts.inputActiveOptionBorder=e.inputActiveOptionBorder),e.inputActiveOptionForeground&&(this._opts.inputActiveOptionForeground=e.inputActiveOptionForeground),e.inputActiveOptionBackground&&(this._opts.inputActiveOptionBackground=e.inputActiveOptionBackground),this.applyStyles()}applyStyles(){this.domNode&&(this.domNode.style.borderColor=this._checked&&this._opts.inputActiveOptionBorder?this._opts.inputActiveOptionBorder.toString():"",this.domNode.style.color=this._checked&&this._opts.inputActiveOptionForeground?this._opts.inputActiveOptionForeground.toString():"inherit",this.domNode.style.backgroundColor=this._checked&&this._opts.inputActiveOptionBackground?this._opts.inputActiveOptionBackground.toString():"")}enable(){this.domNode.setAttribute("aria-disabled",String(!1))}disable(){this.domNode.setAttribute("aria-disabled",String(!0))}}},50275:function(e,t,i){i.d(t,{c:function(){return T},h:function(){return I}});var s=i(4102),n=i(7487),r=i(56402),o=i(54161),l=i(16201),d=i(13484),a=i(407),h=i(20996),c=i(56709),p=i(97865),u=i(38431),m=i(14818),g=function(e,t,i,s){return new(i||(i=Promise))((function(n,r){function o(e){try{d(s.next(e))}catch(e){r(e)}}function l(e){try{d(s.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,l)}d((s=s.apply(e,t||[])).next())}))};function f(e){return Object.assign(Object.assign({},e),{children:[],refreshPromise:void 0,stale:!0,slow:!1,collapsedByDefault:void 0})}function v(e,t){return!!t.parent&&(t.parent===e||v(e,t.parent))}class b{constructor(e){this.node=e}get element(){return this.node.element.element}get children(){return this.node.children.map((e=>new b(e)))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}}class C{constructor(e,t,i){this.renderer=e,this.nodeMapper=t,this.onDidChangeTwistieState=i,this.renderedNodes=new Map,this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,i,s){this.renderer.renderElement(this.nodeMapper.map(e),t,i.templateData,s)}renderTwistie(e,t){return e.slow?(t.classList.add(...a.lA.treeItemLoading.classNamesArray),!0):(t.classList.remove(...a.lA.treeItemLoading.classNamesArray),!1)}disposeElement(e,t,i,s){var n,r;null===(r=(n=this.renderer).disposeElement)||void 0===r||r.call(n,this.nodeMapper.map(e),t,i.templateData,s)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear()}}function y(e){return{browserEvent:e.browserEvent,elements:e.elements.map((e=>e.element))}}function D(e){return{browserEvent:e.browserEvent,element:e.element&&e.element.element,target:e.target}}class w extends s.kX{constructor(e){super(e.elements.map((e=>e.element))),this.data=e}}function N(e){return e instanceof s.kX?new w(e):e}class S{constructor(e){this.dnd=e}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map((e=>e.element)),t)}onDragStart(e,t){var i,s;null===(s=(i=this.dnd).onDragStart)||void 0===s||s.call(i,N(e),t)}onDragOver(e,t,i,s,n=!0){return this.dnd.onDragOver(N(e),t&&t.element,i,s)}drop(e,t,i,s){this.dnd.drop(N(e),t&&t.element,i,s)}onDragEnd(e){var t,i;null===(i=(t=this.dnd).onDragEnd)||void 0===i||i.call(t,e)}}function P(e){return e&&Object.assign(Object.assign({},e),{collapseByDefault:!0,identityProvider:e.identityProvider&&{getId(t){return e.identityProvider.getId(t.element)}},dnd:e.dnd&&new S(e.dnd),multipleSelectionController:e.multipleSelectionController&&{isSelectionSingleChangeEvent(t){return e.multipleSelectionController.isSelectionSingleChangeEvent(Object.assign(Object.assign({},t),{element:t.element}))},isSelectionRangeChangeEvent(t){return e.multipleSelectionController.isSelectionRangeChangeEvent(Object.assign(Object.assign({},t),{element:t.element}))}},accessibilityProvider:e.accessibilityProvider&&Object.assign(Object.assign({},e.accessibilityProvider),{getPosInSet:void 0,getSetSize:void 0,getRole:e.accessibilityProvider.getRole?t=>e.accessibilityProvider.getRole(t.element):()=>"treeitem",isChecked:e.accessibilityProvider.isChecked?t=>{var i;return!!(null===(i=e.accessibilityProvider)||void 0===i?void 0:i.isChecked(t.element))}:void 0,getAriaLabel(t){return e.accessibilityProvider.getAriaLabel(t.element)},getWidgetAriaLabel(){return e.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:e.accessibilityProvider.getWidgetRole?()=>e.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:e.accessibilityProvider.getAriaLevel&&(t=>e.accessibilityProvider.getAriaLevel(t.element)),getActiveDescendantId:e.accessibilityProvider.getActiveDescendantId&&(t=>e.accessibilityProvider.getActiveDescendantId(t.element))}),filter:e.filter&&{filter(t,i){return e.filter.filter(t.element,i)}},keyboardNavigationLabelProvider:e.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},e.keyboardNavigationLabelProvider),{getKeyboardNavigationLabel(t){return e.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(t.element)}}),sorter:void 0,expandOnlyOnTwistieClick:void 0===e.expandOnlyOnTwistieClick?void 0:"function"!=typeof e.expandOnlyOnTwistieClick?e.expandOnlyOnTwistieClick:t=>e.expandOnlyOnTwistieClick(t.element),additionalScrollHeight:e.additionalScrollHeight})}function O(e,t){t(e),e.children.forEach((e=>O(e,t)))}class T{constructor(e,t,i,s,n,r={}){this.user=e,this.dataSource=n,this.nodes=new Map,this.subTreeRefreshPromises=new Map,this.refreshPromises=new Map,this._onDidRender=new c.Q5,this._onDidChangeNodeSlowState=new c.Q5,this.nodeMapper=new l.VA((e=>new b(e))),this.disposables=new u.SL,this.identityProvider=r.identityProvider,this.autoExpandSingleChildren=void 0!==r.autoExpandSingleChildren&&r.autoExpandSingleChildren,this.sorter=r.sorter,this.collapseByDefault=r.collapseByDefault,this.tree=this.createTree(e,t,i,s,r),this.onDidChangeFindMode=this.tree.onDidChangeFindMode,this.root=f({element:void 0,parent:null,hasChildren:!0}),this.identityProvider&&(this.root=Object.assign(Object.assign({},this.root),{id:null})),this.nodes.set(null,this.root),this.tree.onDidChangeCollapseState(this._onDidChangeCollapseState,this,this.disposables)}get onDidChangeFocus(){return c.ju.map(this.tree.onDidChangeFocus,y)}get onDidChangeSelection(){return c.ju.map(this.tree.onDidChangeSelection,y)}get onMouseDblClick(){return c.ju.map(this.tree.onMouseDblClick,D)}get onPointer(){return c.ju.map(this.tree.onPointer,D)}get onDidFocus(){return this.tree.onDidFocus}get onDidChangeModel(){return this.tree.onDidChangeModel}get onDidChangeCollapseState(){return this.tree.onDidChangeCollapseState}get onDidChangeFindOpenState(){return this.tree.onDidChangeFindOpenState}get onDidDispose(){return this.tree.onDidDispose}createTree(e,t,i,s,r){const l=new n.cz(i),d=s.map((e=>new C(e,this.nodeMapper,this._onDidChangeNodeSlowState.event))),a=P(r)||{};return new o.H(e,t,l,d,a)}updateOptions(e={}){this.tree.updateOptions(e)}getHTMLElement(){return this.tree.getHTMLElement()}get scrollTop(){return this.tree.scrollTop}set scrollTop(e){this.tree.scrollTop=e}domFocus(){this.tree.domFocus()}layout(e,t){this.tree.layout(e,t)}style(e){this.tree.style(e)}getInput(){return this.root.element}setInput(e,t){return g(this,void 0,void 0,(function*(){this.refreshPromises.forEach((e=>e.cancel())),this.refreshPromises.clear(),this.root.element=e;const i=t&&{viewState:t,focus:[],selection:[]};yield this._updateChildren(e,!0,!1,i),i&&(this.tree.setFocus(i.focus),this.tree.setSelection(i.selection)),t&&"number"==typeof t.scrollTop&&(this.scrollTop=t.scrollTop)}))}_updateChildren(e=this.root.element,t=!0,i=!1,s,n){return g(this,void 0,void 0,(function*(){if(void 0===this.root.element)throw new l.ac(this.user,"Tree input not set");this.root.refreshPromise&&(yield this.root.refreshPromise,yield c.ju.toPromise(this._onDidRender.event));const r=this.getDataNode(e);if(yield this.refreshAndRenderNode(r,t,s,n),i)try{this.tree.rerender(r)}catch(e){}}))}rerender(e){if(void 0===e||e===this.root.element)return void this.tree.rerender();const t=this.getDataNode(e);this.tree.rerender(t)}getNode(e=this.root.element){const t=this.getDataNode(e),i=this.tree.getNode(t===this.root?null:t);return this.nodeMapper.map(i)}collapse(e,t=!1){const i=this.getDataNode(e);return this.tree.collapse(i===this.root?null:i,t)}expand(e,t=!1){return g(this,void 0,void 0,(function*(){if(void 0===this.root.element)throw new l.ac(this.user,"Tree input not set");this.root.refreshPromise&&(yield this.root.refreshPromise,yield c.ju.toPromise(this._onDidRender.event));const i=this.getDataNode(e);if(this.tree.hasElement(i)&&!this.tree.isCollapsible(i))return!1;if(i.refreshPromise&&(yield this.root.refreshPromise,yield c.ju.toPromise(this._onDidRender.event)),i!==this.root&&!i.refreshPromise&&!this.tree.isCollapsed(i))return!1;const s=this.tree.expand(i===this.root?null:i,t);return i.refreshPromise&&(yield this.root.refreshPromise,yield c.ju.toPromise(this._onDidRender.event)),s}))}setSelection(e,t){const i=e.map((e=>this.getDataNode(e)));this.tree.setSelection(i,t)}getSelection(){return this.tree.getSelection().map((e=>e.element))}setFocus(e,t){const i=e.map((e=>this.getDataNode(e)));this.tree.setFocus(i,t)}getFocus(){return this.tree.getFocus().map((e=>e.element))}reveal(e,t){this.tree.reveal(this.getDataNode(e),t)}getParentElement(e){const t=this.tree.getParentElement(this.getDataNode(e));return t&&t.element}getFirstElementChild(e=this.root.element){const t=this.getDataNode(e),i=this.tree.getFirstElementChild(t===this.root?null:t);return i&&i.element}getDataNode(e){const t=this.nodes.get(e===this.root.element?null:e);if(!t)throw new l.ac(this.user,`Data tree node not found: ${e}`);return t}refreshAndRenderNode(e,t,i,s){return g(this,void 0,void 0,(function*(){yield this.refreshNode(e,t,i),this.render(e,i,s)}))}refreshNode(e,t,i){return g(this,void 0,void 0,(function*(){let s;if(this.subTreeRefreshPromises.forEach(((n,r)=>{!s&&function(e,t){return e===t||v(e,t)||v(t,e)}(r,e)&&(s=n.then((()=>this.refreshNode(e,t,i))))})),s)return s;if(e!==this.root){if(this.tree.getNode(e).collapsed)return e.hasChildren=!!this.dataSource.hasChildren(e.element),void(e.stale=!0)}return this.doRefreshSubTree(e,t,i)}))}doRefreshSubTree(e,t,i){return g(this,void 0,void 0,(function*(){let s;e.refreshPromise=new Promise((e=>s=e)),this.subTreeRefreshPromises.set(e,e.refreshPromise),e.refreshPromise.finally((()=>{e.refreshPromise=void 0,this.subTreeRefreshPromises.delete(e)}));try{const n=yield this.doRefreshNode(e,t,i);e.stale=!1,yield d.jT.settled(n.map((e=>this.doRefreshSubTree(e,t,i))))}finally{s()}}))}doRefreshNode(e,t,i){return g(this,void 0,void 0,(function*(){let s;if(e.hasChildren=!!this.dataSource.hasChildren(e.element),e.hasChildren){const t=this.doGetChildren(e);if((0,m.TW)(t))s=Promise.resolve(t);else{const i=(0,d.Vs)(800);i.then((()=>{e.slow=!0,this._onDidChangeNodeSlowState.fire(e)}),(e=>null)),s=t.finally((()=>i.cancel()))}}else s=Promise.resolve(p.$.empty());try{const n=yield s;return this.setChildren(e,n,t,i)}catch(t){if(e!==this.root&&this.tree.hasElement(e)&&this.tree.collapse(e),(0,h.n2)(t))return[];throw t}finally{e.slow&&(e.slow=!1,this._onDidChangeNodeSlowState.fire(e))}}))}doGetChildren(e){let t=this.refreshPromises.get(e);if(t)return t;const i=this.dataSource.getChildren(e.element);return(0,m.TW)(i)?this.processChildren(i):(t=(0,d.PG)((()=>g(this,void 0,void 0,(function*(){return this.processChildren(yield i)})))),this.refreshPromises.set(e,t),t.finally((()=>{this.refreshPromises.delete(e)})))}_onDidChangeCollapseState({node:e,deep:t}){null!==e.element&&!e.collapsed&&e.element.stale&&(t?this.collapse(e.element.element):this.refreshAndRenderNode(e.element,!1).catch(h.dL))}setChildren(e,t,i,s){const n=[...t];if(0===e.children.length&&0===n.length)return[];const r=new Map,o=new Map;for(const t of e.children)if(r.set(t.element,t),this.identityProvider){const e=this.tree.isCollapsed(t);o.set(t.id,{node:t,collapsed:e})}const l=[],d=n.map((t=>{const n=!!this.dataSource.hasChildren(t);if(!this.identityProvider){const i=f({element:t,parent:e,hasChildren:n});return n&&this.collapseByDefault&&!this.collapseByDefault(t)&&(i.collapsedByDefault=!1,l.push(i)),i}const d=this.identityProvider.getId(t).toString(),a=o.get(d);if(a){const e=a.node;return r.delete(e.element),this.nodes.delete(e.element),this.nodes.set(t,e),e.element=t,e.hasChildren=n,i?a.collapsed?(e.children.forEach((e=>O(e,(e=>this.nodes.delete(e.element))))),e.children.splice(0,e.children.length),e.stale=!0):l.push(e):n&&this.collapseByDefault&&!this.collapseByDefault(t)&&(e.collapsedByDefault=!1,l.push(e)),e}const h=f({element:t,parent:e,id:d,hasChildren:n});return s&&s.viewState.focus&&s.viewState.focus.indexOf(d)>-1&&s.focus.push(h),s&&s.viewState.selection&&s.viewState.selection.indexOf(d)>-1&&s.selection.push(h),s&&s.viewState.expanded&&s.viewState.expanded.indexOf(d)>-1?l.push(h):n&&this.collapseByDefault&&!this.collapseByDefault(t)&&(h.collapsedByDefault=!1,l.push(h)),h}));for(const e of r.values())O(e,(e=>this.nodes.delete(e.element)));for(const e of d)this.nodes.set(e.element,e);return e.children.splice(0,e.children.length,...d),e!==this.root&&this.autoExpandSingleChildren&&1===d.length&&0===l.length&&(d[0].collapsedByDefault=!1,l.push(d[0])),l}render(e,t,i){const s=e.children.map((e=>this.asTreeElement(e,t))),n=i&&Object.assign(Object.assign({},i),{diffIdentityProvider:i.diffIdentityProvider&&{getId(e){return i.diffIdentityProvider.getId(e.element)}}});this.tree.setChildren(e===this.root?null:e,s,n),e!==this.root&&this.tree.setCollapsible(e,e.hasChildren),this._onDidRender.fire()}asTreeElement(e,t){if(e.stale)return{element:e,collapsible:e.hasChildren,collapsed:!0};let i;return i=!(t&&t.viewState.expanded&&e.id&&t.viewState.expanded.indexOf(e.id)>-1)&&e.collapsedByDefault,e.collapsedByDefault=void 0,{element:e,children:e.hasChildren?p.$.map(e.children,(e=>this.asTreeElement(e,t))):[],collapsible:e.hasChildren,collapsed:i}}processChildren(e){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),e}dispose(){this.disposables.dispose()}}class E{constructor(e){this.node=e}get element(){return{elements:this.node.element.elements.map((e=>e.element)),incompressible:this.node.element.incompressible}}get children(){return this.node.children.map((e=>new E(e)))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}}class _{constructor(e,t,i,s){this.renderer=e,this.nodeMapper=t,this.compressibleNodeMapperProvider=i,this.onDidChangeTwistieState=s,this.renderedNodes=new Map,this.disposables=[],this.templateId=e.templateId}renderTemplate(e){return{templateData:this.renderer.renderTemplate(e)}}renderElement(e,t,i,s){this.renderer.renderElement(this.nodeMapper.map(e),t,i.templateData,s)}renderCompressedElements(e,t,i,s){this.renderer.renderCompressedElements(this.compressibleNodeMapperProvider().map(e),t,i.templateData,s)}renderTwistie(e,t){return e.slow?(t.classList.add(...a.lA.treeItemLoading.classNamesArray),!0):(t.classList.remove(...a.lA.treeItemLoading.classNamesArray),!1)}disposeElement(e,t,i,s){var n,r;null===(r=(n=this.renderer).disposeElement)||void 0===r||r.call(n,this.nodeMapper.map(e),t,i.templateData,s)}disposeCompressedElements(e,t,i,s){var n,r;null===(r=(n=this.renderer).disposeCompressedElements)||void 0===r||r.call(n,this.compressibleNodeMapperProvider().map(e),t,i.templateData,s)}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}dispose(){this.renderedNodes.clear(),this.disposables=(0,u.B9)(this.disposables)}}class I extends T{constructor(e,t,i,s,n,r,o={}){super(e,t,i,n,r,o),this.compressionDelegate=s,this.compressibleNodeMapper=new l.VA((e=>new E(e))),this.filter=o.filter}createTree(e,t,i,s,r){const l=new n.cz(i),d=s.map((e=>new _(e,this.nodeMapper,(()=>this.compressibleNodeMapper),this._onDidChangeNodeSlowState.event))),a=function(e){const t=e&&P(e);return t&&Object.assign(Object.assign({},t),{keyboardNavigationLabelProvider:t.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},t.keyboardNavigationLabelProvider),{getCompressedNodeKeyboardNavigationLabel(t){return e.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(t.map((e=>e.element)))}})})}(r)||{};return new o.h(e,t,l,d,a)}asTreeElement(e,t){return Object.assign({incompressible:this.compressionDelegate.isIncompressible(e.element)},super.asTreeElement(e,t))}updateOptions(e={}){this.tree.updateOptions(e)}render(e,t){if(!this.identityProvider)return super.render(e,t);const i=e=>this.identityProvider.getId(e).toString(),s=e=>{const t=new Set;for(const s of e){const e=this.tree.getCompressedTreeNode(s===this.root?null:s);if(e.element)for(const s of e.element.elements)t.add(i(s.element))}return t},n=s(this.tree.getSelection()),r=s(this.tree.getFocus());super.render(e,t);const o=this.getSelection();let l=!1;const d=this.getFocus();let a=!1;const h=e=>{const t=e.element;if(t)for(let e=0;e<t.elements.length;e++){const s=i(t.elements[e].element),h=t.elements[t.elements.length-1].element;n.has(s)&&-1===o.indexOf(h)&&(o.push(h),l=!0),r.has(s)&&-1===d.indexOf(h)&&(d.push(h),a=!0)}e.children.forEach(h)};h(this.tree.getCompressedTreeNode(e===this.root?null:e)),l&&this.setSelection(o),a&&this.setFocus(d)}processChildren(e){return this.filter&&(e=p.$.filter(e,(e=>{const t=this.filter.filter(e,1),i="boolean"==typeof(s=t)?s?1:0:(0,r.gB)(s)?(0,r.aG)(s.visibility):(0,r.aG)(s);var s;if(2===i)throw new Error("Recursive tree visibility not supported in async data compressed trees");return 1===i}))),super.processChildren(e)}}},87302:function(e,t,i){i.d(t,{UE:function(){return g}});var s=i(6622),n=i(16201),r=i(56709),o=i(97865);function l(e){return{element:{elements:[e.element],incompressible:e.incompressible||!1},children:o.$.map(o.$.from(e.children),l),collapsible:e.collapsible,collapsed:e.collapsed}}function d(e){const t=[e.element],i=e.incompressible||!1;let s,n;for(;[n,s]=o.$.consume(o.$.from(e.children),2),1===n.length&&!n[0].incompressible;)e=n[0],t.push(e.element);return{element:{elements:t,incompressible:i},children:o.$.map(o.$.concat(n,s),d),collapsible:e.collapsible,collapsed:e.collapsed}}function a(e,t=0){let i;return i=t<e.element.elements.length-1?[a(e,t+1)]:o.$.map(o.$.from(e.children),(e=>a(e,0))),0===t&&e.element.incompressible?{element:e.element.elements[t],children:i,incompressible:!0,collapsible:e.collapsible,collapsed:e.collapsed}:{element:e.element.elements[t],children:i,collapsible:e.collapsible,collapsed:e.collapsed}}function h(e){return a(e,0)}function c(e,t,i){return e.element===t?Object.assign(Object.assign({},e),{children:i}):Object.assign(Object.assign({},e),{children:o.$.map(o.$.from(e.children),(e=>c(e,t,i)))})}class p{constructor(e,t,i={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.model=new s.F(e,t,i),this.enabled=void 0===i.compressionEnabled||i.compressionEnabled,this.identityProvider=i.identityProvider}get onDidSplice(){return this.model.onDidSplice}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get onDidChangeRenderNodeCount(){return this.model.onDidChangeRenderNodeCount}setChildren(e,t=o.$.empty(),i){const s=i.diffIdentityProvider&&(n=i.diffIdentityProvider,{getId(e){return e.elements.map((e=>n.getId(e).toString())).join("\0")}});var n;if(null===e){const e=o.$.map(t,this.enabled?d:l);return void this._setChildren(null,e,{diffIdentityProvider:s,diffDepth:1/0})}const r=this.nodes.get(e);if(!r)throw new Error("Unknown compressed tree node");const a=this.model.getNode(r),p=this.model.getParentNodeLocation(r),u=this.model.getNode(p),m=c(h(a),e,t),g=(this.enabled?d:l)(m),f=u.children.map((e=>e===a?g:e));this._setChildren(u.element,f,{diffIdentityProvider:s,diffDepth:a.depth-u.depth})}setCompressionEnabled(e){if(e===this.enabled)return;this.enabled=e;const t=this.model.getNode().children,i=o.$.map(t,h),s=o.$.map(i,e?d:l);this._setChildren(null,s,{diffIdentityProvider:this.identityProvider,diffDepth:1/0})}_setChildren(e,t,i){const s=new Set;this.model.setChildren(e,t,Object.assign(Object.assign({},i),{onDidCreateNode:e=>{for(const t of e.element.elements)s.add(t),this.nodes.set(t,e.element)},onDidDeleteNode:e=>{for(const t of e.element.elements)s.has(t)||this.nodes.delete(t)}}))}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getCompressedNode(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getCompressedNode(e);return this.model.getListRenderCount(t)}getNode(e){if(void 0===e)return this.model.getNode();const t=this.getCompressedNode(e);return this.model.getNode(t)}getNodeLocation(e){const t=this.model.getNodeLocation(e);return null===t?null:t.elements[t.elements.length-1]}getParentNodeLocation(e){const t=this.getCompressedNode(e),i=this.model.getParentNodeLocation(t);return null===i?null:i.elements[i.elements.length-1]}getFirstElementChild(e){const t=this.getCompressedNode(e);return this.model.getFirstElementChild(t)}isCollapsible(e){const t=this.getCompressedNode(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const i=this.getCompressedNode(e);return this.model.setCollapsible(i,t)}isCollapsed(e){const t=this.getCompressedNode(e);return this.model.isCollapsed(t)}setCollapsed(e,t,i){const s=this.getCompressedNode(e);return this.model.setCollapsed(s,t,i)}expandTo(e){const t=this.getCompressedNode(e);this.model.expandTo(t)}rerender(e){const t=this.getCompressedNode(e);this.model.rerender(t)}refilter(){this.model.refilter()}getCompressedNode(e){if(null===e)return null;const t=this.nodes.get(e);if(!t)throw new n.ac(this.user,`Tree element not found: ${e}`);return t}}const u=e=>e[e.length-1];class m{constructor(e,t){this.unwrapper=e,this.node=t}get element(){return null===this.node.element?null:this.unwrapper(this.node.element)}get children(){return this.node.children.map((e=>new m(this.unwrapper,e)))}get depth(){return this.node.depth}get visibleChildrenCount(){return this.node.visibleChildrenCount}get visibleChildIndex(){return this.node.visibleChildIndex}get collapsible(){return this.node.collapsible}get collapsed(){return this.node.collapsed}get visible(){return this.node.visible}get filterData(){return this.node.filterData}}class g{constructor(e,t,i={}){this.rootRef=null,this.elementMapper=i.elementMapper||u;const s=e=>this.elementMapper(e.elements);this.nodeMapper=new n.VA((e=>new m(s,e))),this.model=new p(e,function(e,t){return{splice(i,s,n){t.splice(i,s,n.map((t=>e.map(t))))},updateElementHeight(e,i){t.updateElementHeight(e,i)}}}(this.nodeMapper,t),function(e,t){return Object.assign(Object.assign({},t),{identityProvider:t.identityProvider&&{getId(i){return t.identityProvider.getId(e(i))}},sorter:t.sorter&&{compare(e,i){return t.sorter.compare(e.elements[0],i.elements[0])}},filter:t.filter&&{filter(i,s){return t.filter.filter(e(i),s)}}})}(s,i))}get onDidSplice(){return r.ju.map(this.model.onDidSplice,(({insertedNodes:e,deletedNodes:t})=>({insertedNodes:e.map((e=>this.nodeMapper.map(e))),deletedNodes:t.map((e=>this.nodeMapper.map(e)))})))}get onDidChangeCollapseState(){return r.ju.map(this.model.onDidChangeCollapseState,(({node:e,deep:t})=>({node:this.nodeMapper.map(e),deep:t})))}get onDidChangeRenderNodeCount(){return r.ju.map(this.model.onDidChangeRenderNodeCount,(e=>this.nodeMapper.map(e)))}setChildren(e,t=o.$.empty(),i={}){this.model.setChildren(e,t,i)}setCompressionEnabled(e){this.model.setCompressionEnabled(e)}has(e){return this.model.has(e)}getListIndex(e){return this.model.getListIndex(e)}getListRenderCount(e){return this.model.getListRenderCount(e)}getNode(e){return this.nodeMapper.map(this.model.getNode(e))}getNodeLocation(e){return e.element}getParentNodeLocation(e){return this.model.getParentNodeLocation(e)}getFirstElementChild(e){const t=this.model.getFirstElementChild(e);return null==t?t:this.elementMapper(t.elements)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}setCollapsed(e,t,i){return this.model.setCollapsed(e,t,i)}expandTo(e){return this.model.expandTo(e)}rerender(e){return this.model.rerender(e)}refilter(){return this.model.refilter()}getCompressedTreeNode(e=null){return this.model.getNode(e)}}}}]);