"use strict";(self.webpackChunkapp_template_builder=self.webpackChunkapp_template_builder||[]).push([[2411],{2433:function(e,t,n){n.d(t,{S:function(){return h}});var i=n(17416),o=n(8453),r=n(50038),s=n(57841),u=n(50282),a=n(29173),l=n(54425),d=n(89026),g=n(14),c=function(e,t,n,i){var o,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,i);else for(var u=e.length-1;u>=0;u--)(o=e[u])&&(s=(r<3?o(s):r>3?o(t,n,s):o(t,n))||s);return r>3&&s&&Object.defineProperty(t,n,s),s},L=function(e,t){return function(n,i){t(n,i,e)}};let h=class{constructor(e,t,n,i){this._languageConfigurationService=i,this._selection=e,this._isMovingDown=t,this._autoIndent=n,this._selectionId=null,this._moveEndLineSelectionShrink=!1}getEditOperations(e,t){const n=e.getLineCount();if(this._isMovingDown&&this._selection.endLineNumber===n)return void(this._selectionId=t.trackSelection(this._selection));if(!this._isMovingDown&&1===this._selection.startLineNumber)return void(this._selectionId=t.trackSelection(this._selection));this._moveEndPositionDown=!1;let o=this._selection;o.startLineNumber<o.endLineNumber&&1===o.endColumn&&(this._moveEndPositionDown=!0,o=o.setEndPosition(o.endLineNumber-1,e.getLineMaxColumn(o.endLineNumber-1)));const{tabSize:u,indentSize:a,insertSpaces:g}=e.getOptions(),c=this.buildIndentConverter(u,a,g),L={tokenization:{getLineTokens:t=>e.tokenization.getLineTokens(t),getLanguageId:()=>e.getLanguageId(),getLanguageIdAtPosition:(t,n)=>e.getLanguageIdAtPosition(t,n)},getLineContent:null};if(o.startLineNumber===o.endLineNumber&&1===e.getLineMaxColumn(o.startLineNumber)){const n=o.startLineNumber,i=this._isMovingDown?n+1:n-1;1===e.getLineMaxColumn(i)?t.addEditOperation(new r.e(1,1,1,1),null):(t.addEditOperation(new r.e(n,1,n,1),e.getLineContent(i)),t.addEditOperation(new r.e(i,1,i,e.getLineMaxColumn(i)),null)),o=new s.Y(i,1,i,1)}else{let n,s;if(this._isMovingDown){n=o.endLineNumber+1,s=e.getLineContent(n),t.addEditOperation(new r.e(n-1,e.getLineMaxColumn(n-1),n,e.getLineMaxColumn(n)),null);let a=s;if(this.shouldAutoIndent(e,o)){const h=this.matchEnterRule(e,c,u,n,o.startLineNumber-1);if(null!==h){const t=i.V8(e.getLineContent(n)),o=h+l.Y(t,u),r=l.J(o,u,g);a=r+this.trimLeft(s)}else{L.getLineContent=t=>t===o.startLineNumber?e.getLineContent(n):e.getLineContent(t);const t=(0,d.n8)(this._autoIndent,L,e.getLanguageIdAtPosition(n,1),o.startLineNumber,c,this._languageConfigurationService);if(null!==t){const o=i.V8(e.getLineContent(n)),r=l.Y(t,u);if(r!==l.Y(o,u)){const e=l.J(r,u,g);a=e+this.trimLeft(s)}}}t.addEditOperation(new r.e(o.startLineNumber,1,o.startLineNumber,1),a+"\n");const f=this.matchEnterRuleMovingDown(e,c,u,o.startLineNumber,n,a);if(null!==f)0!==f&&this.getIndentEditsOfMovingBlock(e,t,o,u,g,f);else{L.getLineContent=t=>t===o.startLineNumber?a:t>=o.startLineNumber+1&&t<=o.endLineNumber+1?e.getLineContent(t-1):e.getLineContent(t);const r=(0,d.n8)(this._autoIndent,L,e.getLanguageIdAtPosition(n,1),o.startLineNumber+1,c,this._languageConfigurationService);if(null!==r){const n=i.V8(e.getLineContent(o.startLineNumber)),s=l.Y(r,u),a=l.Y(n,u);if(s!==a){const n=s-a;this.getIndentEditsOfMovingBlock(e,t,o,u,g,n)}}}}else t.addEditOperation(new r.e(o.startLineNumber,1,o.startLineNumber,1),a+"\n")}else if(n=o.startLineNumber-1,s=e.getLineContent(n),t.addEditOperation(new r.e(n,1,n+1,1),null),t.addEditOperation(new r.e(o.endLineNumber,e.getLineMaxColumn(o.endLineNumber),o.endLineNumber,e.getLineMaxColumn(o.endLineNumber)),"\n"+s),this.shouldAutoIndent(e,o)){L.getLineContent=t=>t===n?e.getLineContent(o.startLineNumber):e.getLineContent(t);const r=this.matchEnterRule(e,c,u,o.startLineNumber,o.startLineNumber-2);if(null!==r)0!==r&&this.getIndentEditsOfMovingBlock(e,t,o,u,g,r);else{const r=(0,d.n8)(this._autoIndent,L,e.getLanguageIdAtPosition(o.startLineNumber,1),n,c,this._languageConfigurationService);if(null!==r){const n=i.V8(e.getLineContent(o.startLineNumber)),s=l.Y(r,u),a=l.Y(n,u);if(s!==a){const n=s-a;this.getIndentEditsOfMovingBlock(e,t,o,u,g,n)}}}}}this._selectionId=t.trackSelection(o)}buildIndentConverter(e,t,n){return{shiftIndent:i=>o.U.shiftIndent(i,i.length+1,e,t,n),unshiftIndent:i=>o.U.unshiftIndent(i,i.length+1,e,t,n)}}parseEnterResult(e,t,n,o,r){if(r){let s=r.indentation;r.indentAction===u.wU.None||r.indentAction===u.wU.Indent?s=r.indentation+r.appendText:r.indentAction===u.wU.IndentOutdent?s=r.indentation:r.indentAction===u.wU.Outdent&&(s=t.unshiftIndent(r.indentation)+r.appendText);const a=e.getLineContent(o);if(this.trimLeft(a).indexOf(this.trimLeft(s))>=0){const r=i.V8(e.getLineContent(o));let u=i.V8(s);const a=(0,d.tI)(e,o,this._languageConfigurationService);null!==a&&2&a&&(u=t.unshiftIndent(u));return l.Y(u,n)-l.Y(r,n)}}return null}matchEnterRuleMovingDown(e,t,n,o,s,u){if(i.ow(u)>=0){const i=e.getLineMaxColumn(s),u=(0,g.A)(this._autoIndent,e,new r.e(s,i,s,i),this._languageConfigurationService);return this.parseEnterResult(e,t,n,o,u)}{let s=o-1;for(;s>=1;){const t=e.getLineContent(s);if(i.ow(t)>=0)break;s--}if(s<1||o>e.getLineCount())return null;const u=e.getLineMaxColumn(s),a=(0,g.A)(this._autoIndent,e,new r.e(s,u,s,u),this._languageConfigurationService);return this.parseEnterResult(e,t,n,o,a)}}matchEnterRule(e,t,n,o,s,u){let a=s;for(;a>=1;){let t;t=a===s&&void 0!==u?u:e.getLineContent(a);if(i.ow(t)>=0)break;a--}if(a<1||o>e.getLineCount())return null;const l=e.getLineMaxColumn(a),d=(0,g.A)(this._autoIndent,e,new r.e(a,l,a,l),this._languageConfigurationService);return this.parseEnterResult(e,t,n,o,d)}trimLeft(e){return e.replace(/^\s+/,"")}shouldAutoIndent(e,t){if(this._autoIndent<4)return!1;if(!e.tokenization.isCheapToTokenize(t.startLineNumber))return!1;const n=e.getLanguageIdAtPosition(t.startLineNumber,1);return n===e.getLanguageIdAtPosition(t.endLineNumber,1)&&null!==this._languageConfigurationService.getLanguageConfiguration(n).indentRulesSupport}getIndentEditsOfMovingBlock(e,t,n,o,s,u){for(let a=n.startLineNumber;a<=n.endLineNumber;a++){const d=e.getLineContent(a),g=i.V8(d),c=l.Y(g,o)+u,L=l.J(c,o,s);L!==g&&(t.addEditOperation(new r.e(a,1,a,g.length+1),L),a===n.endLineNumber&&n.endColumn<=g.length+1&&""===L&&(this._moveEndLineSelectionShrink=!0))}}computeCursorState(e,t){let n=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(n=n.setEndPosition(n.endLineNumber+1,1)),this._moveEndLineSelectionShrink&&n.startLineNumber<n.endLineNumber&&(n=n.setEndPosition(n.endLineNumber,2)),n}};h=c([L(3,a.c_)],h)},37614:function(e,t,n){n.d(t,{i:function(){return r}});var i=n(19083),o=n(50038);class r{constructor(e,t){this.selection=e,this.descending=t,this.selectionId=null}static getCollator(){return r._COLLATOR||(r._COLLATOR=new Intl.Collator),r._COLLATOR}getEditOperations(e,t){const n=function(e,t,n){const r=s(e,t,n);if(!r)return null;return i.h.replace(new o.e(r.startLineNumber,1,r.endLineNumber,e.getLineMaxColumn(r.endLineNumber)),r.after.join("\n"))}(e,this.selection,this.descending);n&&t.addEditOperation(n.range,n.text),this.selectionId=t.trackSelection(this.selection)}computeCursorState(e,t){return t.getTrackedSelection(this.selectionId)}static canRun(e,t,n){if(null===e)return!1;const i=s(e,t,n);if(!i)return!1;for(let e=0,t=i.before.length;e<t;e++)if(i.before[e]!==i.after[e])return!0;return!1}}function s(e,t,n){const i=t.startLineNumber;let o=t.endLineNumber;if(1===t.endColumn&&o--,i>=o)return null;const s=[];for(let t=i;t<=o;t++)s.push(e.getLineContent(t));let u=s.slice(0);return u.sort(r.getCollator().compare),!0===n&&(u=u.reverse()),{startLineNumber:i,endLineNumber:o,before:s,after:u}}r._COLLATOR=null}}]);