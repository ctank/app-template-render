"use strict";(self.webpackChunkapp_template_builder=self.webpackChunkapp_template_builder||[]).push([[804],{29502:function(e,i,t){t.d(i,{F:function(){return l}});var n=t(14527),s=t(56709),o=t(38431),r=t(23127),d=t(50038);const a={followsCaret:!0,ignoreCharChanges:!0,alwaysRevealFirst:!0};class l extends o.JT{constructor(e,i={}){super(),this._onDidUpdate=this._register(new s.Q5),this._editor=e,this._options=r.jB(i,a,!1),this.disposed=!1,this.nextIdx=-1,this.ranges=[],this.ignoreSelectionChange=!1,this.revealFirst=Boolean(this._options.alwaysRevealFirst),this._register(this._editor.onDidDispose((()=>this.dispose()))),this._register(this._editor.onDidUpdateDiff((()=>this._onDiffUpdated()))),this._options.followsCaret&&this._register(this._editor.getModifiedEditor().onDidChangeCursorPosition((e=>{this.ignoreSelectionChange||(this.nextIdx=-1)}))),this._options.alwaysRevealFirst&&this._register(this._editor.getModifiedEditor().onDidChangeModel((e=>{this.revealFirst=!0}))),this._init()}_init(){this._editor.getLineChanges()}_onDiffUpdated(){this._init(),this._compute(this._editor.getLineChanges()),this.revealFirst&&null!==this._editor.getLineChanges()&&(this.revealFirst=!1,this.nextIdx=-1,this.next(1))}_compute(e){this.ranges=[],e&&e.forEach((e=>{!this._options.ignoreCharChanges&&e.charChanges?e.charChanges.forEach((e=>{this.ranges.push({rhs:!0,range:new d.e(e.modifiedStartLineNumber,e.modifiedStartColumn,e.modifiedEndLineNumber,e.modifiedEndColumn)})})):0===e.modifiedEndLineNumber?this.ranges.push({rhs:!0,range:new d.e(e.modifiedStartLineNumber,1,e.modifiedStartLineNumber+1,1)}):this.ranges.push({rhs:!0,range:new d.e(e.modifiedStartLineNumber,1,e.modifiedEndLineNumber+1,1)})})),this.ranges.sort(((e,i)=>d.e.compareRangesUsingStarts(e.range,i.range))),this._onDidUpdate.fire(this)}_initIdx(e){let i=!1;const t=this._editor.getPosition();if(t){for(let n=0,s=this.ranges.length;n<s&&!i;n++){const s=this.ranges[n].range;t.isBeforeOrEqual(s.getStartPosition())&&(this.nextIdx=n+(e?0:-1),i=!0)}i||(this.nextIdx=e?0:this.ranges.length-1),this.nextIdx<0&&(this.nextIdx=this.ranges.length-1)}else this.nextIdx=0}_move(e,i){if(n.ok(!this.disposed,"Illegal State - diff navigator has been disposed"),!this.canNavigate())return;-1===this.nextIdx?this._initIdx(e):e?(this.nextIdx+=1,this.nextIdx>=this.ranges.length&&(this.nextIdx=0)):(this.nextIdx-=1,this.nextIdx<0&&(this.nextIdx=this.ranges.length-1));const t=this.ranges[this.nextIdx];this.ignoreSelectionChange=!0;try{const e=t.range.getStartPosition();this._editor.setPosition(e),this._editor.revealRangeInCenter(t.range,i)}finally{this.ignoreSelectionChange=!1}}canNavigate(){return this.ranges&&this.ranges.length>0}next(e=0){this._move(!0,e)}previous(e=0){this._move(!1,e)}dispose(){super.dispose(),this.ranges=[],this.disposed=!0}}},11441:function(e,i,t){t.d(i,{j:function(){return P}});var n,s=t(26386),o=t(34441),r=t(34733),d=t(67235),a=t(28638),l=t(98299),h=t(38431),f=t(71344),c=t(55298),g=t(5603),u=t(70054),m=t(10403),p=t(8964),_=t(44411),b=t(19054),w=t(71278),v=t(70499),N=t(92537),C=t(58566),L=t(407),E=t(89528),x=t(47626),y=function(e,i,t,n){var s,o=arguments.length,r=o<3?i:null===n?n=Object.getOwnPropertyDescriptor(i,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,i,t,n);else for(var d=e.length-1;d>=0;d--)(s=e[d])&&(r=(o<3?s(r):o>3?s(i,t,r):s(i,t))||r);return o>3&&r&&Object.defineProperty(i,t,r),r},S=function(e,i){return function(t,n){i(t,n,e)}},D=function(e,i,t,n){return new(t||(t=Promise))((function(s,o){function r(e){try{a(n.next(e))}catch(e){o(e)}}function d(e){try{a(n.throw(e))}catch(e){o(e)}}function a(e){var i;e.done?s(e.value):(i=e.value,i instanceof t?i:new t((function(e){e(i)}))).then(r,d)}a((n=n.apply(e,i||[])).next())}))};class R{constructor(e,i,t,n){this.originalLineStart=e,this.originalLineEnd=i,this.modifiedLineStart=t,this.modifiedLineEnd=n}getType(){return 0===this.originalLineStart?1:0===this.modifiedLineStart?2:0}}class I{constructor(e){this.entries=e}}const A=(0,E.q5)("diff-review-insert",L.lA.add,s.NC("diffReviewInsertIcon","Icon for 'Insert' in diff review.")),O=(0,E.q5)("diff-review-remove",L.lA.remove,s.NC("diffReviewRemoveIcon","Icon for 'Remove' in diff review.")),M=(0,E.q5)("diff-review-close",L.lA.close,s.NC("diffReviewCloseIcon","Icon for 'Close' in diff review."));let P=class e extends h.JT{constructor(e,i){super(),this._languageService=i,this._width=0,this._diffEditor=e,this._isVisible=!1,this.shadow=(0,r.X)(document.createElement("div")),this.shadow.setClassName("diff-review-shadow"),this.actionBarContainer=(0,r.X)(document.createElement("div")),this.actionBarContainer.setClassName("diff-review-actions"),this._actionBar=this._register(new d.o(this.actionBarContainer.domNode)),this._actionBar.push(new l.aU("diffreview.close",s.NC("label.close","Close"),"close-diff-review "+C.kS.asClassName(M),!0,(()=>D(this,void 0,void 0,(function*(){return this.hide()})))),{label:!1,icon:!0}),this.domNode=(0,r.X)(document.createElement("div")),this.domNode.setClassName("diff-review monaco-editor-background"),this._content=(0,r.X)(document.createElement("div")),this._content.setClassName("diff-review-content"),this._content.setAttribute("role","code"),this.scrollbar=this._register(new a.s$(this._content.domNode,{})),this.domNode.domNode.appendChild(this.scrollbar.getDomNode()),this._register(e.onDidUpdateDiff((()=>{this._isVisible&&(this._diffs=this._compute(),this._render())}))),this._register(e.getModifiedEditor().onDidChangeCursorPosition((()=>{this._isVisible&&this._render()}))),this._register(o.mu(this.domNode.domNode,"click",(e=>{e.preventDefault();const i=o.Fx(e.target,"diff-review-row");i&&this._goToRow(i)}))),this._register(o.mu(this.domNode.domNode,"keydown",(e=>{(e.equals(18)||e.equals(2066)||e.equals(530))&&(e.preventDefault(),this._goToRow(this._getNextRow())),(e.equals(16)||e.equals(2064)||e.equals(528))&&(e.preventDefault(),this._goToRow(this._getPrevRow())),(e.equals(9)||e.equals(2057)||e.equals(521)||e.equals(1033))&&(e.preventDefault(),this.hide()),(e.equals(10)||e.equals(3))&&(e.preventDefault(),this.accept())}))),this._diffs=[],this._currentDiff=null}prev(){let e=0;if(this._isVisible||(this._diffs=this._compute()),this._isVisible){let i=-1;for(let e=0,t=this._diffs.length;e<t;e++)if(this._diffs[e]===this._currentDiff){i=e;break}e=this._diffs.length+i-1}else e=this._findDiffIndex(this._diffEditor.getPosition());if(0===this._diffs.length)return;e%=this._diffs.length;const i=this._diffs[e].entries;this._diffEditor.setPosition(new p.L(i[0].modifiedLineStart,1)),this._diffEditor.setSelection({startColumn:1,startLineNumber:i[0].modifiedLineStart,endColumn:1073741824,endLineNumber:i[i.length-1].modifiedLineEnd}),this._isVisible=!0,this._diffEditor.doLayout(),this._render(),this._goToRow(this._getNextRow())}next(){let e=0;if(this._isVisible||(this._diffs=this._compute()),this._isVisible){let i=-1;for(let e=0,t=this._diffs.length;e<t;e++)if(this._diffs[e]===this._currentDiff){i=e;break}e=i+1}else e=this._findDiffIndex(this._diffEditor.getPosition());if(0===this._diffs.length)return;e%=this._diffs.length;const i=this._diffs[e].entries;this._diffEditor.setPosition(new p.L(i[0].modifiedLineStart,1)),this._diffEditor.setSelection({startColumn:1,startLineNumber:i[0].modifiedLineStart,endColumn:1073741824,endLineNumber:i[i.length-1].modifiedLineEnd}),this._isVisible=!0,this._diffEditor.doLayout(),this._render(),this._goToRow(this._getNextRow())}accept(){let e=-1;const i=this._getCurrentFocusedRow();if(i){const t=parseInt(i.getAttribute("data-line"),10);isNaN(t)||(e=t)}this.hide(),-1!==e&&(this._diffEditor.setPosition(new p.L(e,1)),this._diffEditor.revealPosition(new p.L(e,1),1))}hide(){this._isVisible=!1,this._diffEditor.updateOptions({readOnly:!1}),this._diffEditor.focus(),this._diffEditor.doLayout(),this._render()}_getPrevRow(){const e=this._getCurrentFocusedRow();return e?e.previousElementSibling?e.previousElementSibling:e:this._getFirstRow()}_getNextRow(){const e=this._getCurrentFocusedRow();return e?e.nextElementSibling?e.nextElementSibling:e:this._getFirstRow()}_getFirstRow(){return this.domNode.domNode.querySelector(".diff-review-row")}_getCurrentFocusedRow(){const e=document.activeElement;return e&&/diff-review-row/.test(e.className)?e:null}_goToRow(e){const i=this._getCurrentFocusedRow();e.tabIndex=0,e.focus(),i&&i!==e&&(i.tabIndex=-1),this.scrollbar.scanDomNode()}isVisible(){return this._isVisible}layout(e,i,t){this._width=i,this.shadow.setTop(e-6),this.shadow.setWidth(i),this.shadow.setHeight(this._isVisible?6:0),this.domNode.setTop(e),this.domNode.setWidth(i),this.domNode.setHeight(t),this._content.setHeight(t),this._content.setWidth(i),this._isVisible?(this.actionBarContainer.setAttribute("aria-hidden","false"),this.actionBarContainer.setDisplay("block")):(this.actionBarContainer.setAttribute("aria-hidden","true"),this.actionBarContainer.setDisplay("none"))}_compute(){const i=this._diffEditor.getLineChanges();if(!i||0===i.length)return[];const t=this._diffEditor.getOriginalEditor().getModel(),n=this._diffEditor.getModifiedEditor().getModel();return t&&n?e._mergeAdjacent(i,t.getLineCount(),n.getLineCount()):[]}static _mergeAdjacent(e,i,t){if(!e||0===e.length)return[];const n=[];let s=0;for(let o=0,r=e.length;o<r;o++){const d=e[o],a=d.originalStartLineNumber,l=d.originalEndLineNumber,h=d.modifiedStartLineNumber,f=d.modifiedEndLineNumber,c=[];let g=0;{const i=0===l?a:a-1,t=0===f?h:h-1;let n=1,s=1;if(o>0){const i=e[o-1];n=0===i.originalEndLineNumber?i.originalStartLineNumber+1:i.originalEndLineNumber+1,s=0===i.modifiedEndLineNumber?i.modifiedStartLineNumber+1:i.modifiedEndLineNumber+1}let r=i-3+1,d=t-3+1;if(r<n){const e=n-r;r+=e,d+=e}if(d<s){const e=s-d;r+=e,d+=e}c[g++]=new R(r,i,d,t)}0!==l&&(c[g++]=new R(a,l,0,0)),0!==f&&(c[g++]=new R(0,0,h,f));{const n=0===l?a+1:l+1,s=0===f?h+1:f+1;let d=i,u=t;if(o+1<r){const i=e[o+1];d=0===i.originalEndLineNumber?i.originalStartLineNumber:i.originalStartLineNumber-1,u=0===i.modifiedEndLineNumber?i.modifiedStartLineNumber:i.modifiedStartLineNumber-1}let m=n+3-1,p=s+3-1;if(m>d){const e=d-m;m+=e,p+=e}if(p>u){const e=u-p;m+=e,p+=e}c[g++]=new R(n,m,s,p)}n[s++]=new I(c)}let o=n[0].entries;const r=[];let d=0;for(let e=1,i=n.length;e<i;e++){const i=n[e].entries,t=o[o.length-1],s=i[0];0===t.getType()&&0===s.getType()&&s.originalLineStart<=t.originalLineEnd?(o[o.length-1]=new R(t.originalLineStart,s.originalLineEnd,t.modifiedLineStart,s.modifiedLineEnd),o=o.concat(i.slice(1))):(r[d++]=new I(o),o=i)}return r[d++]=new I(o),r}_findDiffIndex(e){const i=e.lineNumber;for(let e=0,t=this._diffs.length;e<t;e++){const t=this._diffs[e].entries;if(i<=t[t.length-1].modifiedLineEnd)return e}return 0}_render(){const i=this._diffEditor.getOriginalEditor().getOptions(),t=this._diffEditor.getModifiedEditor().getOptions(),n=this._diffEditor.getOriginalEditor().getModel(),r=this._diffEditor.getModifiedEditor().getModel(),d=n.getOptions(),a=r.getOptions();if(!this._isVisible||!n||!r)return o.PO(this._content.domNode),this._currentDiff=null,void this.scrollbar.scanDomNode();this._diffEditor.updateOptions({readOnly:!0});const l=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs[l]===this._currentDiff)return;this._currentDiff=this._diffs[l];const h=this._diffs[l].entries,c=document.createElement("div");c.className="diff-review-table",c.setAttribute("role","list"),c.setAttribute("aria-label",'Difference review. Use "Stage | Unstage | Revert Selected Ranges" commands'),(0,f.N)(c,t.get(46));let g=0,u=0,m=0,p=0;for(let e=0,i=h.length;e<i;e++){const i=h[e],t=i.originalLineStart,n=i.originalLineEnd,s=i.modifiedLineStart,o=i.modifiedLineEnd;0!==t&&(0===g||t<g)&&(g=t),0!==n&&(0===u||n>u)&&(u=n),0!==s&&(0===m||s<m)&&(m=s),0!==o&&(0===p||o>p)&&(p=o)}const _=document.createElement("div");_.className="diff-review-row";const b=document.createElement("div");b.className="diff-review-cell diff-review-summary";const w=u-g+1,v=p-m+1;b.appendChild(document.createTextNode(`${l+1}/${this._diffs.length}: @@ -${g},${w} +${m},${v} @@`)),_.setAttribute("data-line",String(m));const N=e=>0===e?s.NC("no_lines_changed","no lines changed"):1===e?s.NC("one_line_changed","1 line changed"):s.NC("more_lines_changed","{0} lines changed",e),C=N(w),L=N(v);_.setAttribute("aria-label",s.NC({key:"header",comment:["This is the ARIA label for a git diff header.","A git diff header looks like this: @@ -154,12 +159,39 @@.","That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.","Variables 0 and 1 refer to the diff index out of total number of diffs.","Variables 2 and 4 will be numbers (a line number).",'Variables 3 and 5 will be "no lines changed", "1 line changed" or "X lines changed", localized separately.']},"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}",l+1,this._diffs.length,g,C,m,L)),_.appendChild(b),_.setAttribute("role","listitem"),c.appendChild(_);const E=t.get(61);let x=m;for(let s=0,o=h.length;s<o;s++){const o=h[s];e._renderSection(c,o,x,E,this._width,i,n,d,t,r,a,this._languageService.languageIdCodec),0!==o.modifiedLineStart&&(x=o.modifiedLineEnd)}o.PO(this._content.domNode),this._content.domNode.appendChild(c),this.scrollbar.scanDomNode()}static _renderSection(i,t,n,o,r,d,a,l,h,f,c,g){const u=t.getType();let m="diff-review-row",p="";let _=null;switch(u){case 1:m="diff-review-row line-insert",p=" char-insert",_=A;break;case 2:m="diff-review-row line-delete",p=" char-delete",_=O}const b=t.originalLineStart,w=t.originalLineEnd,v=t.modifiedLineStart,N=t.modifiedLineEnd,L=Math.max(N-v,w-b),E=d.get(133),x=E.glyphMarginWidth+E.lineNumbersWidth,y=h.get(133),S=10+y.glyphMarginWidth+y.lineNumbersWidth;for(let t=0;t<=L;t++){const w=0===b?0:b+t,N=0===v?0:v+t,L=document.createElement("div");L.style.minWidth=r+"px",L.className=m,L.setAttribute("role","listitem"),0!==N&&(n=N),L.setAttribute("data-line",String(n));const E=document.createElement("div");E.className="diff-review-cell",E.style.height=`${o}px`,L.appendChild(E);const y=document.createElement("span");y.style.width=x+"px",y.style.minWidth=x+"px",y.className="diff-review-line-number"+p,0!==w?y.appendChild(document.createTextNode(String(w))):y.innerText=" ",E.appendChild(y);const D=document.createElement("span");D.style.width=S+"px",D.style.minWidth=S+"px",D.style.paddingRight="10px",D.className="diff-review-line-number"+p,0!==N?D.appendChild(document.createTextNode(String(N))):D.innerText=" ",E.appendChild(D);const R=document.createElement("span");if(R.className="diff-review-spacer",_){const e=document.createElement("span");e.className=C.kS.asClassName(_),e.innerText="  ",R.appendChild(e)}else R.innerText="  ";let I;if(E.appendChild(R),0!==N){let i=this._renderLine(f,h,c.tabSize,N,g);e._ttPolicy&&(i=e._ttPolicy.createHTML(i)),E.insertAdjacentHTML("beforeend",i),I=f.getLineContent(N)}else{let i=this._renderLine(a,d,l.tabSize,w,g);e._ttPolicy&&(i=e._ttPolicy.createHTML(i)),E.insertAdjacentHTML("beforeend",i),I=a.getLineContent(w)}0===I.length&&(I=s.NC("blankLine","blank"));let A="";switch(u){case 0:A=w===N?s.NC({key:"unchangedLine",comment:["The placeholders are contents of the line and should not be translated."]},"{0} unchanged line {1}",I,w):s.NC("equalLine","{0} original line {1} modified line {2}",I,w,N);break;case 1:A=s.NC("insertLine","+ {0} modified line {1}",I,N);break;case 2:A=s.NC("deleteLine","- {0} original line {1}",I,w)}L.setAttribute("aria-label",A),i.appendChild(L)}}static _renderLine(e,i,t,n,s){const o=e.getLineContent(n),r=i.get(46),d=m.A.createEmpty(o,s),a=w.wA.isBasicASCII(o,e.mightContainNonBasicASCII()),l=w.wA.containsRTL(o,a,e.mightContainRTL());return(0,b.tF)(new b.IJ(r.isMonospace&&!i.get(29),r.canUseHalfwidthRightwardsArrow,o,!1,a,l,0,d,[],t,0,r.spaceWidth,r.middotWidth,r.wsmiddotWidth,i.get(107),i.get(90),i.get(85),i.get(47)!==u.n0.OFF,null)).html}};P._ttPolicy=null===(n=window.trustedTypes)||void 0===n?void 0:n.createPolicy("diffReview",{createHTML:e=>e}),P=y([S(1,x.O)],P),(0,C.Ic)(((e,i)=>{const t=e.getColor(_.hw);t&&i.addRule(`.monaco-diff-editor .diff-review-line-number { color: ${t}; }`);const n=e.getColor(N._wn);n&&i.addRule(`.monaco-diff-editor .diff-review-shadow { box-shadow: ${n} 0 -6px 6px -6px inset; }`)}));class T extends c.R6{constructor(){super({id:"editor.action.diffReview.next",label:s.NC("editor.action.diffReview.next","Go to Next Difference"),alias:"Go to Next Difference",precondition:v.Ao.has("isInDiffEditor"),kbOpts:{kbExpr:null,primary:65,weight:100}})}run(e,i){const t=F(e);t&&t.diffReviewNext()}}class k extends c.R6{constructor(){super({id:"editor.action.diffReview.prev",label:s.NC("editor.action.diffReview.prev","Go to Previous Difference"),alias:"Go to Previous Difference",precondition:v.Ao.has("isInDiffEditor"),kbOpts:{kbExpr:null,primary:1089,weight:100}})}run(e,i){const t=F(e);t&&t.diffReviewPrev()}}function F(e){const i=e.get(g.$),t=i.listDiffEditors(),n=i.getActiveCodeEditor();if(!n)return null;for(let e=0,i=t.length;e<i;e++){const i=t[e];if(i.getModifiedEditor().getId()===n.getId()||i.getOriginalEditor().getId()===n.getId())return i}return null}(0,c.Qr)(T),(0,c.Qr)(k)},77957:function(e,i,t){t.d(i,{H:function(){return p}});var n=t(23127),s=t(5603),o=t(55852),r=t(80793),d=t(70499),a=t(44333),l=t(97968),h=t(58566),f=t(18708),c=t(29173),g=t(35921),u=function(e,i,t,n){var s,o=arguments.length,r=o<3?i:null===n?n=Object.getOwnPropertyDescriptor(i,t):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,i,t,n);else for(var d=e.length-1;d>=0;d--)(s=e[d])&&(r=(o<3?s(r):o>3?s(i,t,r):s(i,t))||r);return o>3&&r&&Object.defineProperty(i,t,r),r},m=function(e,i){return function(t,n){i(t,n,e)}};let p=class extends o.Gm{constructor(e,i,t,n,s,o,r,d,a,l,h,f){super(e,Object.assign(Object.assign({},t.getRawOptions()),{overflowWidgetsDomNode:t.getOverflowWidgetsDomNode()}),{},n,s,o,r,d,a,l,h,f),this._parentEditor=t,this._overwriteOptions=i,super.updateOptions(this._overwriteOptions),this._register(t.onDidChangeConfiguration((e=>this._onParentConfigurationChanged(e))))}getParentEditor(){return this._parentEditor}_onParentConfigurationChanged(e){super.updateOptions(this._parentEditor.getRawOptions()),super.updateOptions(this._overwriteOptions)}updateOptions(e){n.jB(this._overwriteOptions,e,!0),super.updateOptions(this._overwriteOptions)}};p=u([m(3,a.TG),m(4,s.$),m(5,r.Hy),m(6,d.i6),m(7,h.XE),m(8,l.lT),m(9,f.F),m(10,c.c_),m(11,g.p)],p)},26630:function(e,i,t){t.d(i,{t:function(){return h}});var n=t(26386),s=t(34441),o=t(98299),r=t(38431),d=t(50038),a=t(407),l=function(e,i,t,n){return new(t||(t=Promise))((function(s,o){function r(e){try{a(n.next(e))}catch(e){o(e)}}function d(e){try{a(n.throw(e))}catch(e){o(e)}}function a(e){var i;e.done?s(e.value):(i=e.value,i instanceof t?i:new t((function(e){e(i)}))).then(r,d)}a((n=n.apply(e,i||[])).next())}))};class h extends r.JT{constructor(e,i,t,r,h,f){super(),this._viewZoneId=e,this._marginDomNode=i,this.editor=t,this.diff=r,this._contextMenuService=h,this._clipboardService=f,this._visibility=!1,this._marginDomNode.style.zIndex="10",this._diffActions=document.createElement("div"),this._diffActions.className=a.lA.lightBulb.classNames+" lightbulb-glyph",this._diffActions.style.position="absolute";const c=t.getOption(61),g=t.getModel().getEOL();this._diffActions.style.right="0px",this._diffActions.style.visibility="hidden",this._diffActions.style.height=`${c}px`,this._diffActions.style.lineHeight=`${c}px`,this._marginDomNode.appendChild(this._diffActions);const u=[],m=0===r.modifiedEndLineNumber;u.push(new o.aU("diff.clipboard.copyDeletedContent",m?r.originalEndLineNumber>r.modifiedStartLineNumber?n.NC("diff.clipboard.copyDeletedLinesContent.label","Copy deleted lines"):n.NC("diff.clipboard.copyDeletedLinesContent.single.label","Copy deleted line"):r.originalEndLineNumber>r.modifiedStartLineNumber?n.NC("diff.clipboard.copyChangedLinesContent.label","Copy changed lines"):n.NC("diff.clipboard.copyChangedLinesContent.single.label","Copy changed line"),void 0,!0,(()=>l(this,void 0,void 0,(function*(){const e=new d.e(r.originalStartLineNumber,1,r.originalEndLineNumber+1,1),i=r.originalModel.getValueInRange(e);yield this._clipboardService.writeText(i)})))));let p,_=0;r.originalEndLineNumber>r.modifiedStartLineNumber&&(p=new o.aU("diff.clipboard.copyDeletedLineContent",m?n.NC("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",r.originalStartLineNumber):n.NC("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",r.originalStartLineNumber),void 0,!0,(()=>l(this,void 0,void 0,(function*(){const e=r.originalModel.getLineContent(r.originalStartLineNumber+_);if(""===e){const e=r.originalModel.getEndOfLineSequence();yield this._clipboardService.writeText(0===e?"\n":"\r\n")}else yield this._clipboardService.writeText(e)})))),u.push(p));t.getOption(83)||u.push(new o.aU("diff.inline.revertChange",n.NC("diff.inline.revertChange.label","Revert this change"),void 0,!0,(()=>l(this,void 0,void 0,(function*(){const e=new d.e(r.originalStartLineNumber,1,r.originalEndLineNumber,r.originalModel.getLineMaxColumn(r.originalEndLineNumber)),i=r.originalModel.getValueInRange(e);if(0===r.modifiedEndLineNumber){const e=t.getModel().getLineMaxColumn(r.modifiedStartLineNumber);t.executeEdits("diffEditor",[{range:new d.e(r.modifiedStartLineNumber,e,r.modifiedStartLineNumber,e),text:g+i}])}else{const e=t.getModel().getLineMaxColumn(r.modifiedEndLineNumber);t.executeEdits("diffEditor",[{range:new d.e(r.modifiedStartLineNumber,1,r.modifiedEndLineNumber,e),text:i}])}})))));const b=(e,i)=>{this._contextMenuService.showContextMenu({getAnchor:()=>({x:e,y:i}),getActions:()=>(p&&(p.label=m?n.NC("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",r.originalStartLineNumber+_):n.NC("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",r.originalStartLineNumber+_)),u),autoSelectFirstItem:!0})};this._register(s.mu(this._diffActions,"mousedown",(e=>{const{top:i,height:t}=s.i(this._diffActions),n=Math.floor(c/3);e.preventDefault(),b(e.posx,i+t+n)}))),this._register(t.onMouseMove((e=>{if(8===e.target.type||5===e.target.type){e.target.detail.viewZoneId===this._viewZoneId?(this.visibility=!0,_=this._updateLightBulbPosition(this._marginDomNode,e.event.browserEvent.y,c)):this.visibility=!1}else this.visibility=!1}))),this._register(t.onMouseDown((e=>{if(e.event.rightButton&&(8===e.target.type||5===e.target.type)){e.target.detail.viewZoneId===this._viewZoneId&&(e.event.preventDefault(),_=this._updateLightBulbPosition(this._marginDomNode,e.event.browserEvent.y,c),b(e.event.posx,e.event.posy+c))}})))}get visibility(){return this._visibility}set visibility(e){this._visibility!==e&&(this._visibility=e,this._diffActions.style.visibility=e?"visible":"hidden")}_updateLightBulbPosition(e,i,t){const{top:n}=s.i(e),o=i-n,r=Math.floor(o/t),d=r*t;if(this._diffActions.style.top=`${d}px`,this.diff.viewLineCounts){let e=0;for(let i=0;i<this.diff.viewLineCounts.length;i++)if(e+=this.diff.viewLineCounts[i],r<e)return i}return r}}}}]);