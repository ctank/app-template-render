"use strict";(self.webpackChunkapp_template_builder=self.webpackChunkapp_template_builder||[]).push([[836],{51627:function(e,t,n){n.d(t,{s:function(){return a}});n(77950),n(85940),n(39529),n(31235);var r=n(23316),i=n(27875),a={name:"ViewComponentBase",components:{},inject:["onChange","onGetValue","onEvent"],props:{id:{type:String,default:function(){return""}},type:{type:String,default:function(){return""}},extras:{type:Object,default:function(){return{}}},showTitle:{type:Boolean,default:function(){return!1}},title:{type:String,default:function(){return""}},dataPath:{type:String,default:function(){return""}},componentMap:{type:Object,default:function(){return{}}},viewData:{type:Object,default:function(){return{}}},permissions:{type:Array,default:function(){return["*"]}}},data:function(){return{}},computed:{value:{get:function(){var e="";return this.viewData&&this.dataPath&&(e=(0,r.a)(this.viewData,this.dataPath)),e},set:function(e){this.$emit("change",e,this.id)}},validProp:function(){return this.fieldPath.replace(/\//g,".")},isAdmin:function(){return!(this.permissions&&(!Array.isArray(this.permissions)||"*"!==this.permissions[0]))}},watch:{},methods:{checkPermission:function(e){return!(e&&!this.permissions.includes(e))}},render:function(e,t,n,r,a,o){return(0,i.wg)(),(0,i.iD)("div")}}},36836:function(e,t,n){n.r(t),n.d(t,{default:function(){return c}});n(34769),n(34115),n(95342),n(58188),n(68625),n(1939),n(62775),n(76555),n(95094),n(39529),n(31235);var r=n(27875),i=n(50349),a=n(14825),o=n(51627),l=n(23316);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=(0,r.aZ)({name:"TreeView",extends:o.s,data:function(){return{filterText:""}},computed:{defaultProps:function(){var e=this;return{children:this.extras.childrenField||"children",label:this.extras.titleField||"label",disabled:this.extras.disabledField||"disabled",class:function(t,n){if(t[e.extras.disabledField||"disabled"])return"atp-treeview__node--disabled"}}}},watch:{filterText:function(e){this.$refs.treeRef.filter(e)}},methods:{filterNode:function(e,t){return!e||t.label.includes(e)},getComponentDisplay:function(e,t){return(0,l.g)(t.showConfig,e)},getValueByPath:function(e,t){var n=(0,l.a)(t,e.fieldPath);if("option"!==e.fieldType)return n;for(var r=0;r<e.fieldFormat.length;r++)if(e.fieldFormat[r].value===n){n=e.fieldFormat[r].label;break}return n},handleNodeDrag:function(e,t){this.extras.draggableEvent&&this.onEvent(this.extras.draggableEvent,s(s({},t),{},{eventType:e,data:this.value}))},handleBtnClick:function(e,t){this.onEvent(e,t)}}}),p={class:"atp-treeview"},f={key:0,class:"atp-treeview__title"},g={class:"atp-treeview__node"},h={key:0,class:"atp-treeview__node-title"},v={key:1,class:"atp-treeview__node-title"},y={class:"atp-treeview__node-action"};c.render=function(e,t,n,o,l,d){var s=(0,r.up)("el-input"),u=(0,r.up)("el-button"),c=(0,r.up)("el-tree");return(0,r.wg)(),(0,r.iD)("div",p,[e.showTitle?((0,r.wg)(),(0,r.iD)("div",f,(0,i.toDisplayString)(e.title),1)):(0,r.kq)("",!0),e.extras.filter?((0,r.wg)(),(0,r.j4)(s,{key:1,class:"atp-treeview__search",modelValue:e.filterText,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.filterText=t})},null,8,["modelValue"])):(0,r.kq)("",!0),(0,r.Wm)(c,{ref:"treeRef",class:"filter-tree",data:e.value,props:e.defaultProps,draggable:e.extras.draggable||!1,"default-expand-all":e.extras.expandAll||!1,"filter-node-method":e.filterNode,onNodeDragStart:t[1]||(t[1]=function(t,n){e.handleNodeDrag("dragStart",{draggingNode:t,event:n})}),onNodeDragEnter:t[2]||(t[2]=function(t,n,r){e.handleNodeDrag("dragEnter",{draggingNode:t,dropNode:n,event:r})}),onNodeDragLeave:t[3]||(t[3]=function(t,n,r){e.handleNodeDrag("dragLeave",{draggingNode:t,dropNode:n,event:r})}),onNodeDragOver:t[4]||(t[4]=function(t,n,r){e.handleNodeDrag("dragOver",{draggingNode:t,dropNode:n,event:r})}),onNodeDragEnd:t[5]||(t[5]=function(t,n,r,i){e.handleNodeDrag("dragEnd",{draggingNode:t,dropNode:n,dropType:r,event:i})}),onNodeDrop:t[6]||(t[6]=function(t,n,r,i){e.handleNodeDrag("drop",{draggingNode:t,dropNode:n,dropType:r,event:i})})},{default:(0,r.w5)((function(t){var n=t.node,o=t.data;return[(0,r._)("div",g,[e.extras.displaySet&&e.extras.displaySet.length?((0,r.wg)(),(0,r.iD)("div",h,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.extras.displaySet,(function(t,n){return(0,r.wg)(),(0,r.iD)(r.HY,null,["option"===t.fieldType?((0,r.wg)(),(0,r.iD)("span",{class:"mr-1",key:"tree-option-".concat(n)},(0,i.toDisplayString)(e.getValueByPath(t,o)),1)):((0,r.wg)(),(0,r.iD)("span",{class:"mr-1",key:"tree-text-".concat(n)},(0,i.toDisplayString)(e.getValueByPath(t,o)),1))],64)})),256))])):((0,r.wg)(),(0,r.iD)("div",v,(0,i.toDisplayString)(n.label),1)),(0,r._)("div",y,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(e.extras.operations,(function(t){return(0,r.wg)(),(0,r.iD)(r.HY,null,[e.getComponentDisplay(o,t)&&(e.isAdmin||e.checkPermission(t.permission))?((0,r.wg)(),(0,r.j4)(u,{key:t.buttonEvent,type:t.buttonType,onClick:(0,a.withModifiers)((function(n){return e.handleBtnClick(t.buttonEvent,o)}),["stop"]),size:"small"},{default:(0,r.w5)((function(){return[(0,r.Uk)((0,i.toDisplayString)(t.buttonName),1)]})),_:2},1032,["type","onClick"])):(0,r.kq)("",!0)],64)})),256))])])]})),_:1},8,["data","props","draggable","default-expand-all","filter-node-method"])])}}}]);