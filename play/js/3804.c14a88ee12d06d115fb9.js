"use strict";(self.webpackChunkapp_template_builder=self.webpackChunkapp_template_builder||[]).push([[3804],{69905:function(e,t,i){i.r(t),i.d(t,{CommonFindController:function(){return N},FindController:function(){return D},MatchFindAction:function(){return M},NextMatchFindAction:function(){return y},NextSelectionMatchFindAction:function(){return T},PreviousMatchFindAction:function(){return E},PreviousSelectionMatchFindAction:function(){return W},SelectionMatchFindAction:function(){return k},StartFindAction:function(){return w},StartFindReplaceAction:function(){return L},StartFindWithArgsAction:function(){return I},StartFindWithSelectionAction:function(){return A},getSelectionSearchString:function(){return O}});var o=i(13484),n=i(38431),r=i(17416),s=i(55298),a=i(21081),c=i(58244),l=i(37762),d=i(48444),h=i(75644),g=i(26386),u=i(21208),p=i(51941),_=i(70499),m=i(36953),S=i(55495),f=i(97968),v=i(75295),b=i(58566),F=function(e,t,i,o){var n,r=arguments.length,s=r<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,i,s):n(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},R=function(e,t){return function(i,o){t(i,o,e)}},C=function(e,t,i,o){return new(i||(i=Promise))((function(n,r){function s(e){try{c(o.next(e))}catch(e){r(e)}}function a(e){try{c(o.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((o=o.apply(e,t||[])).next())}))};function O(e,t="single",i=!1){if(!e.hasModel())return null;const o=e.getSelection();if("single"===t&&o.startLineNumber===o.endLineNumber||"multiple"===t)if(o.isEmpty()){const t=e.getConfiguredWordAtPosition(o.getStartPosition());if(t&&!1===i)return t.word}else if(e.getModel().getValueLengthInRange(o)<524288)return e.getModel().getValueInRange(o);return null}let N=class e extends n.JT{constructor(e,t,i,n){super(),this._editor=e,this._findWidgetVisible=c.a_.bindTo(t),this._contextKeyService=t,this._storageService=i,this._clipboardService=n,this._updateHistoryDelayer=new o.vp(500),this._state=this._register(new d.P),this.loadQueryState(),this._register(this._state.onFindReplaceStateChange((e=>this._onStateChanged(e)))),this._model=null,this._register(this._editor.onDidChangeModel((()=>{const e=this._editor.getModel()&&this._state.isRevealed;this.disposeModel(),this._state.change({searchScope:null,matchCase:this._storageService.getBoolean("editor.matchCase",1,!1),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,!1),isRegex:this._storageService.getBoolean("editor.isRegex",1,!1),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,!1)},!1),e&&this._start({forceRevealReplace:!1,seedSearchStringFromSelection:"none",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!1,updateSearchScope:!1,loop:this._editor.getOption(37).loop})})))}get editor(){return this._editor}static get(t){return t.getContribution(e.ID)}dispose(){this.disposeModel(),super.dispose()}disposeModel(){this._model&&(this._model.dispose(),this._model=null)}_onStateChanged(e){this.saveQueryState(e),e.isRevealed&&(this._state.isRevealed?this._findWidgetVisible.set(!0):(this._findWidgetVisible.reset(),this.disposeModel())),e.searchString&&this.setGlobalBufferTerm(this._state.searchString)}saveQueryState(e){e.isRegex&&this._storageService.store("editor.isRegex",this._state.actualIsRegex,1,0),e.wholeWord&&this._storageService.store("editor.wholeWord",this._state.actualWholeWord,1,0),e.matchCase&&this._storageService.store("editor.matchCase",this._state.actualMatchCase,1,0),e.preserveCase&&this._storageService.store("editor.preserveCase",this._state.actualPreserveCase,1,0)}loadQueryState(){this._state.change({matchCase:this._storageService.getBoolean("editor.matchCase",1,this._state.matchCase),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,this._state.wholeWord),isRegex:this._storageService.getBoolean("editor.isRegex",1,this._state.isRegex),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,this._state.preserveCase)},!1)}isFindInputFocused(){return!!c.qm.getValue(this._contextKeyService)}getState(){return this._state}closeFindWidget(){this._state.change({isRevealed:!1,searchScope:null},!1),this._editor.focus()}toggleCaseSensitive(){this._state.change({matchCase:!this._state.matchCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleWholeWords(){this._state.change({wholeWord:!this._state.wholeWord},!1),this._state.isRevealed||this.highlightFindOptions()}toggleRegex(){this._state.change({isRegex:!this._state.isRegex},!1),this._state.isRevealed||this.highlightFindOptions()}togglePreserveCase(){this._state.change({preserveCase:!this._state.preserveCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleSearchScope(){if(this._state.searchScope)this._state.change({searchScope:null},!0);else if(this._editor.hasModel()){const e=this._editor.getSelections();e.map((e=>(1===e.endColumn&&e.endLineNumber>e.startLineNumber&&(e=e.setEndPosition(e.endLineNumber-1,this._editor.getModel().getLineMaxColumn(e.endLineNumber-1))),e.isEmpty()?null:e))).filter((e=>!!e)),e.length&&this._state.change({searchScope:e},!0)}}setSearchString(e){this._state.isRegex&&(e=r.ec(e)),this._state.change({searchString:e},!1)}highlightFindOptions(e=!1){}_start(e,t){return C(this,void 0,void 0,(function*(){if(this.disposeModel(),!this._editor.hasModel())return;const i=Object.assign(Object.assign({},t),{isRevealed:!0});if("single"===e.seedSearchStringFromSelection){const t=O(this._editor,e.seedSearchStringFromSelection,e.seedSearchStringFromNonEmptySelection);t&&(this._state.isRegex?i.searchString=r.ec(t):i.searchString=t)}else if("multiple"===e.seedSearchStringFromSelection&&!e.updateSearchScope){const t=O(this._editor,e.seedSearchStringFromSelection);t&&(i.searchString=t)}if(!i.searchString&&e.seedSearchStringFromGlobalClipboard){const e=yield this.getGlobalBufferTerm();if(!this._editor.hasModel())return;e&&(i.searchString=e)}if(e.forceRevealReplace||i.isReplaceRevealed?i.isReplaceRevealed=!0:this._findWidgetVisible.get()||(i.isReplaceRevealed=!1),e.updateSearchScope){const e=this._editor.getSelections();e.some((e=>!e.isEmpty()))&&(i.searchScope=e)}i.loop=e.loop,this._state.change(i,!1),this._model||(this._model=new c.Xu(this._editor,this._state))}))}start(e,t){return this._start(e,t)}moveToNextMatch(){return!!this._model&&(this._model.moveToNextMatch(),!0)}moveToPrevMatch(){return!!this._model&&(this._model.moveToPrevMatch(),!0)}replace(){return!!this._model&&(this._model.replace(),!0)}replaceAll(){return!!this._model&&(this._model.replaceAll(),!0)}selectAllMatches(){return!!this._model&&(this._model.selectAllMatches(),this._editor.focus(),!0)}getGlobalBufferTerm(){return C(this,void 0,void 0,(function*(){return this._editor.getOption(37).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()?this._clipboardService.readFindText():""}))}setGlobalBufferTerm(e){this._editor.getOption(37).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()&&this._clipboardService.writeFindText(e)}};N.ID="editor.contrib.findController",N=F([R(1,_.i6),R(2,v.Uy),R(3,p.p)],N);let D=class extends N{constructor(e,t,i,o,n,r,s,a){super(e,i,s,a),this._contextViewService=t,this._keybindingService=o,this._themeService=n,this._notificationService=r,this._widget=null,this._findOptionsWidget=null}_start(e,t){const i=Object.create(null,{_start:{get:()=>super._start}});return C(this,void 0,void 0,(function*(){this._widget||this._createFindWidget();const o=this._editor.getSelection();let n=!1;switch(this._editor.getOption(37).autoFindInSelection){case"always":n=!0;break;case"never":n=!1;break;case"multiline":n=!!o&&o.startLineNumber!==o.endLineNumber;break}e.updateSearchScope=e.updateSearchScope||n,yield i._start.call(this,e,t),this._widget&&(2===e.shouldFocus?this._widget.focusReplaceInput():1===e.shouldFocus&&this._widget.focusFindInput())}))}highlightFindOptions(e=!1){this._widget||this._createFindWidget(),this._state.isRevealed&&!e?this._widget.highlightFindOptions():this._findOptionsWidget.highlightFindOptions()}_createFindWidget(){this._widget=this._register(new h.V4(this._editor,this,this._state,this._contextViewService,this._keybindingService,this._contextKeyService,this._themeService,this._storageService,this._notificationService)),this._findOptionsWidget=this._register(new l.D(this._editor,this._state,this._keybindingService,this._themeService))}};D=F([R(1,m.u),R(2,_.i6),R(3,S.d),R(4,b.XE),R(5,f.lT),R(6,v.Uy),R(7,p.p)],D);const w=(0,s.rn)(new s.jY({id:c.kR.StartFindAction,label:g.NC("startFindAction","Find"),alias:"Find",precondition:_.Ao.or(a.u.focus,_.Ao.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2084,weight:100},menuOpts:{menuId:u.eH.MenubarEditMenu,group:"3_find",title:g.NC({key:"miFind",comment:["&& denotes a mnemonic"]},"&&Find"),order:1}}));w.addImplementation(0,((e,t,i)=>{const o=N.get(t);return!!o&&o.start({forceRevealReplace:!1,seedSearchStringFromSelection:"never"!==t.getOption(37).seedSearchStringFromSelection?"single":"none",seedSearchStringFromNonEmptySelection:"selection"===t.getOption(37).seedSearchStringFromSelection,seedSearchStringFromGlobalClipboard:t.getOption(37).globalFindClipboard,shouldFocus:1,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(37).loop})}));const x={description:"Open a new In-Editor Find Widget.",args:[{name:"Open a new In-Editor Find Widget args",schema:{properties:{searchString:{type:"string"},replaceString:{type:"string"},regex:{type:"boolean"},regexOverride:{type:"number",description:g.NC("actions.find.isRegexOverride",'Overrides "Use Regular Expression" flag.\nThe flag will not be saved for the future.\n0: Do Nothing\n1: True\n2: False')},wholeWord:{type:"boolean"},wholeWordOverride:{type:"number",description:g.NC("actions.find.wholeWordOverride",'Overrides "Match Whole Word" flag.\nThe flag will not be saved for the future.\n0: Do Nothing\n1: True\n2: False')},matchCase:{type:"boolean"},matchCaseOverride:{type:"number",description:g.NC("actions.find.matchCaseOverride",'Overrides "Math Case" flag.\nThe flag will not be saved for the future.\n0: Do Nothing\n1: True\n2: False')},preserveCase:{type:"boolean"},preserveCaseOverride:{type:"number",description:g.NC("actions.find.preserveCaseOverride",'Overrides "Preserve Case" flag.\nThe flag will not be saved for the future.\n0: Do Nothing\n1: True\n2: False')},findInSelection:{type:"boolean"}}}}]};class I extends s.R6{constructor(){super({id:c.kR.StartFindWithArgs,label:g.NC("startFindWithArgsAction","Find With Arguments"),alias:"Find With Arguments",precondition:void 0,kbOpts:{kbExpr:null,primary:0,weight:100},description:x})}run(e,t,i){return C(this,void 0,void 0,(function*(){const e=N.get(t);if(e){const o=i?{searchString:i.searchString,replaceString:i.replaceString,isReplaceRevealed:void 0!==i.replaceString,isRegex:i.isRegex,wholeWord:i.matchWholeWord,matchCase:i.isCaseSensitive,preserveCase:i.preserveCase}:{};yield e.start({forceRevealReplace:!1,seedSearchStringFromSelection:0===e.getState().searchString.length&&"never"!==t.getOption(37).seedSearchStringFromSelection?"single":"none",seedSearchStringFromNonEmptySelection:"selection"===t.getOption(37).seedSearchStringFromSelection,seedSearchStringFromGlobalClipboard:!0,shouldFocus:1,shouldAnimate:!0,updateSearchScope:(null==i?void 0:i.findInSelection)||!1,loop:t.getOption(37).loop},o),e.setGlobalBufferTerm(e.getState().searchString)}}))}}class A extends s.R6{constructor(){super({id:c.kR.StartFindWithSelection,label:g.NC("startFindWithSelectionAction","Find With Selection"),alias:"Find With Selection",precondition:void 0,kbOpts:{kbExpr:null,primary:0,mac:{primary:2083},weight:100}})}run(e,t){return C(this,void 0,void 0,(function*(){const e=N.get(t);e&&(yield e.start({forceRevealReplace:!1,seedSearchStringFromSelection:"multiple",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(37).loop}),e.setGlobalBufferTerm(e.getState().searchString))}))}}class M extends s.R6{run(e,t){return C(this,void 0,void 0,(function*(){const e=N.get(t);e&&!this._run(e)&&(yield e.start({forceRevealReplace:!1,seedSearchStringFromSelection:0===e.getState().searchString.length&&"never"!==t.getOption(37).seedSearchStringFromSelection?"single":"none",seedSearchStringFromNonEmptySelection:"selection"===t.getOption(37).seedSearchStringFromSelection,seedSearchStringFromGlobalClipboard:!0,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(37).loop}),this._run(e))}))}}class y extends M{constructor(){super({id:c.kR.NextMatchFindAction,label:g.NC("findNextMatchAction","Find Next"),alias:"Find Next",precondition:void 0,kbOpts:[{kbExpr:a.u.focus,primary:61,mac:{primary:2085,secondary:[61]},weight:100},{kbExpr:_.Ao.and(a.u.focus,c.qm),primary:3,weight:100}]})}_run(e){return!!e.moveToNextMatch()&&(e.editor.pushUndoStop(),!0)}}class E extends M{constructor(){super({id:c.kR.PreviousMatchFindAction,label:g.NC("findPreviousMatchAction","Find Previous"),alias:"Find Previous",precondition:void 0,kbOpts:[{kbExpr:a.u.focus,primary:1085,mac:{primary:3109,secondary:[1085]},weight:100},{kbExpr:_.Ao.and(a.u.focus,c.qm),primary:1027,weight:100}]})}_run(e){return e.moveToPrevMatch()}}class k extends s.R6{run(e,t){return C(this,void 0,void 0,(function*(){const e=N.get(t);if(!e)return;const i="selection"===t.getOption(37).seedSearchStringFromSelection;let o=null;"never"!==t.getOption(37).seedSearchStringFromSelection&&(o=O(t,"single",i)),o&&e.setSearchString(o),this._run(e)||(yield e.start({forceRevealReplace:!1,seedSearchStringFromSelection:"never"!==t.getOption(37).seedSearchStringFromSelection?"single":"none",seedSearchStringFromNonEmptySelection:i,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(37).loop}),this._run(e))}))}}class T extends k{constructor(){super({id:c.kR.NextSelectionMatchFindAction,label:g.NC("nextSelectionMatchFindAction","Find Next Selection"),alias:"Find Next Selection",precondition:void 0,kbOpts:{kbExpr:a.u.focus,primary:2109,weight:100}})}_run(e){return e.moveToNextMatch()}}class W extends k{constructor(){super({id:c.kR.PreviousSelectionMatchFindAction,label:g.NC("previousSelectionMatchFindAction","Find Previous Selection"),alias:"Find Previous Selection",precondition:void 0,kbOpts:{kbExpr:a.u.focus,primary:3133,weight:100}})}_run(e){return e.moveToPrevMatch()}}const L=(0,s.rn)(new s.jY({id:c.kR.StartFindReplaceAction,label:g.NC("startReplace","Replace"),alias:"Replace",precondition:_.Ao.or(a.u.focus,_.Ao.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2086,mac:{primary:2596},weight:100},menuOpts:{menuId:u.eH.MenubarEditMenu,group:"3_find",title:g.NC({key:"miReplace",comment:["&& denotes a mnemonic"]},"&&Replace"),order:2}}));L.addImplementation(0,((e,t,i)=>{if(!t.hasModel()||t.getOption(83))return!1;const o=N.get(t);if(!o)return!1;const n=t.getSelection(),r=o.isFindInputFocused(),s=!n.isEmpty()&&n.startLineNumber===n.endLineNumber&&"never"!==t.getOption(37).seedSearchStringFromSelection&&!r,a=r||s?2:1;return o.start({forceRevealReplace:!0,seedSearchStringFromSelection:s?"single":"none",seedSearchStringFromNonEmptySelection:"selection"===t.getOption(37).seedSearchStringFromSelection,seedSearchStringFromGlobalClipboard:"never"!==t.getOption(37).seedSearchStringFromSelection,shouldFocus:a,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(37).loop})})),(0,s._K)(N.ID,D),(0,s.Qr)(I),(0,s.Qr)(A),(0,s.Qr)(y),(0,s.Qr)(E),(0,s.Qr)(T),(0,s.Qr)(W);const P=s._l.bindToContribution(N.get);(0,s.fK)(new P({id:c.kR.CloseFindWidgetCommand,precondition:c.a_,handler:e=>e.closeFindWidget(),kbOpts:{weight:105,kbExpr:_.Ao.and(a.u.focus,_.Ao.not("isComposing")),primary:9,secondary:[1033]}})),(0,s.fK)(new P({id:c.kR.ToggleCaseSensitiveCommand,precondition:void 0,handler:e=>e.toggleCaseSensitive(),kbOpts:{weight:105,kbExpr:a.u.focus,primary:c.Dt.primary,mac:c.Dt.mac,win:c.Dt.win,linux:c.Dt.linux}})),(0,s.fK)(new P({id:c.kR.ToggleWholeWordCommand,precondition:void 0,handler:e=>e.toggleWholeWords(),kbOpts:{weight:105,kbExpr:a.u.focus,primary:c.CP.primary,mac:c.CP.mac,win:c.CP.win,linux:c.CP.linux}})),(0,s.fK)(new P({id:c.kR.ToggleRegexCommand,precondition:void 0,handler:e=>e.toggleRegex(),kbOpts:{weight:105,kbExpr:a.u.focus,primary:c.LM.primary,mac:c.LM.mac,win:c.LM.win,linux:c.LM.linux}})),(0,s.fK)(new P({id:c.kR.ToggleSearchScopeCommand,precondition:void 0,handler:e=>e.toggleSearchScope(),kbOpts:{weight:105,kbExpr:a.u.focus,primary:c.M9.primary,mac:c.M9.mac,win:c.M9.win,linux:c.M9.linux}})),(0,s.fK)(new P({id:c.kR.TogglePreserveCaseCommand,precondition:void 0,handler:e=>e.togglePreserveCase(),kbOpts:{weight:105,kbExpr:a.u.focus,primary:c.mt.primary,mac:c.mt.mac,win:c.mt.win,linux:c.mt.linux}})),(0,s.fK)(new P({id:c.kR.ReplaceOneAction,precondition:c.a_,handler:e=>e.replace(),kbOpts:{weight:105,kbExpr:a.u.focus,primary:3094}})),(0,s.fK)(new P({id:c.kR.ReplaceOneAction,precondition:c.a_,handler:e=>e.replace(),kbOpts:{weight:105,kbExpr:_.Ao.and(a.u.focus,c.P$),primary:3}})),(0,s.fK)(new P({id:c.kR.ReplaceAllAction,precondition:c.a_,handler:e=>e.replaceAll(),kbOpts:{weight:105,kbExpr:a.u.focus,primary:2563}})),(0,s.fK)(new P({id:c.kR.ReplaceAllAction,precondition:c.a_,handler:e=>e.replaceAll(),kbOpts:{weight:105,kbExpr:_.Ao.and(a.u.focus,c.P$),primary:void 0,mac:{primary:2051}}})),(0,s.fK)(new P({id:c.kR.SelectAllMatchesAction,precondition:c.a_,handler:e=>e.selectAllMatches(),kbOpts:{weight:105,kbExpr:a.u.focus,primary:515}}))},19970:function(e,t,i){i.d(t,{t:function(){return c}});var o=i(50038),n=i(41913),r=i(132),s=i(92537),a=i(58566);class c{constructor(e){this._editor=e,this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null,this._startPosition=this._editor.getPosition()}dispose(){this._editor.removeDecorations(this._allDecorations()),this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}reset(){this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}getCount(){return this._decorations.length}getFindScope(){return this._findScopeDecorationIds[0]?this._editor.getModel().getDecorationRange(this._findScopeDecorationIds[0]):null}getFindScopes(){if(this._findScopeDecorationIds.length){const e=this._findScopeDecorationIds.map((e=>this._editor.getModel().getDecorationRange(e))).filter((e=>!!e));if(e.length)return e}return null}getStartPosition(){return this._startPosition}setStartPosition(e){this._startPosition=e,this.setCurrentFindMatch(null)}_getDecorationIndex(e){const t=this._decorations.indexOf(e);return t>=0?t+1:1}getCurrentMatchesPosition(e){const t=this._editor.getModel().getDecorationsInRange(e);for(const e of t){const t=e.options;if(t===c._FIND_MATCH_DECORATION||t===c._CURRENT_FIND_MATCH_DECORATION)return this._getDecorationIndex(e.id)}return 0}setCurrentFindMatch(e){let t=null,i=0;if(e)for(let o=0,n=this._decorations.length;o<n;o++){const n=this._editor.getModel().getDecorationRange(this._decorations[o]);if(e.equalsRange(n)){t=this._decorations[o],i=o+1;break}}return null===this._highlightedDecorationId&&null===t||this._editor.changeDecorations((e=>{if(null!==this._highlightedDecorationId&&(e.changeDecorationOptions(this._highlightedDecorationId,c._FIND_MATCH_DECORATION),this._highlightedDecorationId=null),null!==t&&(this._highlightedDecorationId=t,e.changeDecorationOptions(this._highlightedDecorationId,c._CURRENT_FIND_MATCH_DECORATION)),null!==this._rangeHighlightDecorationId&&(e.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),null!==t){let i=this._editor.getModel().getDecorationRange(t);if(i.startLineNumber!==i.endLineNumber&&1===i.endColumn){const e=i.endLineNumber-1,t=this._editor.getModel().getLineMaxColumn(e);i=new o.e(i.startLineNumber,i.startColumn,e,t)}this._rangeHighlightDecorationId=e.addDecoration(i,c._RANGE_HIGHLIGHT_DECORATION)}})),i}set(e,t){this._editor.changeDecorations((i=>{let n=c._FIND_MATCH_DECORATION;const r=[];if(e.length>1e3){n=c._FIND_MATCH_NO_OVERVIEW_DECORATION;const t=this._editor.getModel().getLineCount(),i=this._editor.getLayoutInfo().height/t,s=Math.max(2,Math.ceil(3/i));let a=e[0].range.startLineNumber,l=e[0].range.endLineNumber;for(let t=1,i=e.length;t<i;t++){const i=e[t].range;l+s>=i.startLineNumber?i.endLineNumber>l&&(l=i.endLineNumber):(r.push({range:new o.e(a,1,l,1),options:c._FIND_MATCH_ONLY_OVERVIEW_DECORATION}),a=i.startLineNumber,l=i.endLineNumber)}r.push({range:new o.e(a,1,l,1),options:c._FIND_MATCH_ONLY_OVERVIEW_DECORATION})}const s=new Array(e.length);for(let t=0,i=e.length;t<i;t++)s[t]={range:e[t].range,options:n};this._decorations=i.deltaDecorations(this._decorations,s),this._overviewRulerApproximateDecorations=i.deltaDecorations(this._overviewRulerApproximateDecorations,r),this._rangeHighlightDecorationId&&(i.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),this._findScopeDecorationIds.length&&(this._findScopeDecorationIds.forEach((e=>i.removeDecoration(e))),this._findScopeDecorationIds=[]),(null==t?void 0:t.length)&&(this._findScopeDecorationIds=t.map((e=>i.addDecoration(e,c._FIND_SCOPE_DECORATION))))}))}matchBeforePosition(e){if(0===this._decorations.length)return null;for(let t=this._decorations.length-1;t>=0;t--){const i=this._decorations[t],o=this._editor.getModel().getDecorationRange(i);if(o&&!(o.endLineNumber>e.lineNumber)){if(o.endLineNumber<e.lineNumber)return o;if(!(o.endColumn>e.column))return o}}return this._editor.getModel().getDecorationRange(this._decorations[this._decorations.length-1])}matchAfterPosition(e){if(0===this._decorations.length)return null;for(let t=0,i=this._decorations.length;t<i;t++){const i=this._decorations[t],o=this._editor.getModel().getDecorationRange(i);if(o&&!(o.startLineNumber<e.lineNumber)){if(o.startLineNumber>e.lineNumber)return o;if(!(o.startColumn<e.column))return o}}return this._editor.getModel().getDecorationRange(this._decorations[0])}_allDecorations(){let e=[];return e=e.concat(this._decorations),e=e.concat(this._overviewRulerApproximateDecorations),this._findScopeDecorationIds.length&&e.push(...this._findScopeDecorationIds),this._rangeHighlightDecorationId&&e.push(this._rangeHighlightDecorationId),e}}c._CURRENT_FIND_MATCH_DECORATION=r.qx.register({description:"current-find-match",stickiness:1,zIndex:13,className:"currentFindMatch",showIfCollapsed:!0,overviewRuler:{color:(0,a.EN)(s.Fm_),position:n.sh.Center},minimap:{color:(0,a.EN)(s.SUY),position:n.F5.Inline}}),c._FIND_MATCH_DECORATION=r.qx.register({description:"find-match",stickiness:1,zIndex:10,className:"findMatch",showIfCollapsed:!0,overviewRuler:{color:(0,a.EN)(s.Fm_),position:n.sh.Center},minimap:{color:(0,a.EN)(s.SUY),position:n.F5.Inline}}),c._FIND_MATCH_NO_OVERVIEW_DECORATION=r.qx.register({description:"find-match-no-overview",stickiness:1,className:"findMatch",showIfCollapsed:!0}),c._FIND_MATCH_ONLY_OVERVIEW_DECORATION=r.qx.register({description:"find-match-only-overview",stickiness:1,overviewRuler:{color:(0,a.EN)(s.Fm_),position:n.sh.Center}}),c._RANGE_HIGHLIGHT_DECORATION=r.qx.register({description:"find-range-highlight",stickiness:1,className:"rangeHighlight",isWholeLine:!0}),c._FIND_SCOPE_DECORATION=r.qx.register({description:"find-scope",className:"findScope",isWholeLine:!0})}}]);