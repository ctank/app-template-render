"use strict";(self.webpackChunkapp_template_builder=self.webpackChunkapp_template_builder||[]).push([[7850],{26748:function(e,t,i){i.r(t),i.d(t,{DragAndDropController:function(){return h}});var n=i(38431),o=i(11138),s=i(55298),r=i(8964),l=i(50038),c=i(57841),a=i(132);class d{constructor(e,t,i){this.selection=e,this.targetPosition=t,this.copy=i,this.targetSelection=null}getEditOperations(e,t){const i=e.getValueInRange(this.selection);this.copy||t.addEditOperation(this.selection,null),t.addEditOperation(new l.e(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column),i),!this.selection.containsPosition(this.targetPosition)||this.copy&&(this.selection.getEndPosition().equals(this.targetPosition)||this.selection.getStartPosition().equals(this.targetPosition))?this.copy?this.targetSelection=new c.Y(this.targetPosition.lineNumber,this.targetPosition.column,this.selection.endLineNumber-this.selection.startLineNumber+this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn):this.targetPosition.lineNumber>this.selection.endLineNumber?this.targetSelection=new c.Y(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn):this.targetPosition.lineNumber<this.selection.endLineNumber?this.targetSelection=new c.Y(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber+this.selection.endLineNumber-this.selection.startLineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn):this.selection.endColumn<=this.targetPosition.column?this.targetSelection=new c.Y(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,(this.selection.startLineNumber,this.selection.endLineNumber,this.targetPosition.column-this.selection.endColumn+this.selection.startColumn),this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column:this.selection.endColumn):this.targetSelection=new c.Y(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column+this.selection.endColumn-this.selection.startColumn):this.targetSelection=this.selection}computeCursorState(e,t){return this.targetSelection}}function u(e){return o.dz?e.altKey:e.ctrlKey}class h extends n.JT{constructor(e){super(),this._editor=e,this._dndDecorationIds=this._editor.createDecorationsCollection(),this._register(this._editor.onMouseDown((e=>this._onEditorMouseDown(e)))),this._register(this._editor.onMouseUp((e=>this._onEditorMouseUp(e)))),this._register(this._editor.onMouseDrag((e=>this._onEditorMouseDrag(e)))),this._register(this._editor.onMouseDrop((e=>this._onEditorMouseDrop(e)))),this._register(this._editor.onMouseDropCanceled((()=>this._onEditorMouseDropCanceled()))),this._register(this._editor.onKeyDown((e=>this.onEditorKeyDown(e)))),this._register(this._editor.onKeyUp((e=>this.onEditorKeyUp(e)))),this._register(this._editor.onDidBlurEditorWidget((()=>this.onEditorBlur()))),this._register(this._editor.onDidBlurEditorText((()=>this.onEditorBlur()))),this._mouseDown=!1,this._modifierPressed=!1,this._dragSelection=null}onEditorBlur(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1}onEditorKeyDown(e){this._editor.getOption(31)&&!this._editor.getOption(18)&&(u(e)&&(this._modifierPressed=!0),this._mouseDown&&u(e)&&this._editor.updateOptions({mouseStyle:"copy"}))}onEditorKeyUp(e){this._editor.getOption(31)&&!this._editor.getOption(18)&&(u(e)&&(this._modifierPressed=!1),this._mouseDown&&e.keyCode===h.TRIGGER_KEY_VALUE&&this._editor.updateOptions({mouseStyle:"default"}))}_onEditorMouseDown(e){this._mouseDown=!0}_onEditorMouseUp(e){this._mouseDown=!1,this._editor.updateOptions({mouseStyle:"text"})}_onEditorMouseDrag(e){const t=e.target;if(null===this._dragSelection){const e=(this._editor.getSelections()||[]).filter((e=>t.position&&e.containsPosition(t.position)));if(1!==e.length)return;this._dragSelection=e[0]}u(e.event)?this._editor.updateOptions({mouseStyle:"copy"}):this._editor.updateOptions({mouseStyle:"default"}),t.position&&(this._dragSelection.containsPosition(t.position)?this._removeDecoration():this.showAt(t.position))}_onEditorMouseDropCanceled(){this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}_onEditorMouseDrop(e){if(e.target&&(this._hitContent(e.target)||this._hitMargin(e.target))&&e.target.position){const t=new r.L(e.target.position.lineNumber,e.target.position.column);if(null===this._dragSelection){let i=null;if(e.event.shiftKey){const e=this._editor.getSelection();if(e){const{selectionStartLineNumber:n,selectionStartColumn:o}=e;i=[new c.Y(n,o,t.lineNumber,t.column)]}}else i=(this._editor.getSelections()||[]).map((e=>e.containsPosition(t)?new c.Y(t.lineNumber,t.column,t.lineNumber,t.column):e));this._editor.setSelections(i||[],"mouse",3)}else(!this._dragSelection.containsPosition(t)||(u(e.event)||this._modifierPressed)&&(this._dragSelection.getEndPosition().equals(t)||this._dragSelection.getStartPosition().equals(t)))&&(this._editor.pushUndoStop(),this._editor.executeCommand(h.ID,new d(this._dragSelection,t,u(e.event)||this._modifierPressed)),this._editor.pushUndoStop())}this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}showAt(e){this._dndDecorationIds.set([{range:new l.e(e.lineNumber,e.column,e.lineNumber,e.column),options:h._DECORATION_OPTIONS}]),this._editor.revealPosition(e,1)}_removeDecoration(){this._dndDecorationIds.clear()}_hitContent(e){return 6===e.type||7===e.type}_hitMargin(e){return 2===e.type||3===e.type||4===e.type}dispose(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1,super.dispose()}}h.ID="editor.contrib.dragAndDrop",h.TRIGGER_KEY_VALUE=o.dz?6:5,h._DECORATION_OPTIONS=a.qx.register({description:"dnd-target",className:"dnd-target"}),(0,s._K)(h.ID,h)},30233:function(e,t,i){i.r(t);var n=i(97464),o=i(14818),s=i(28919),r=i(91223),l=i(79931),c=i(80793),a=function(e,t,i,n){return new(i||(i=Promise))((function(o,s){function r(e){try{c(n.next(e))}catch(e){s(e)}}function l(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,l)}c((n=n.apply(e,t||[])).next())}))};c.P0.registerCommand("_executeDocumentSymbolProvider",(function(e,...t){return a(this,void 0,void 0,(function*(){const[i]=t;(0,o.p_)(s.o.isUri(i));const c=e.get(l.Je),a=e.get(r.S),d=yield a.createModelReference(i);try{return(yield c.getOrCreate(d.object.textEditorModel,n.T.None)).getTopLevelSymbols()}finally{d.dispose()}}))}))},79931:function(e,t,i){i.d(t,{C3:function(){return D},Je:function(){return P},sT:function(){return b}});var n=i(16308),o=i(97464),s=i(20996),r=i(97865),l=i(39832),c=i(8964),a=i(50038),d=i(69060),u=i(44333),h=i(53061),p=i(65041),m=i(38431),g=i(35921),f=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},_=function(e,t){return function(i,n){t(i,n,e)}},v=function(e,t,i,n){return new(i||(i=Promise))((function(o,s){function r(e){try{c(n.next(e))}catch(e){s(e)}}function l(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,l)}c((n=n.apply(e,t||[])).next())}))};class y{remove(){var e;null===(e=this.parent)||void 0===e||e.children.delete(this.id)}static findId(e,t){let i;"string"==typeof e?i=`${t.id}/${e}`:(i=`${t.id}/${e.name}`,void 0!==t.children.get(i)&&(i=`${t.id}/${e.name}_${e.range.startLineNumber}_${e.range.startColumn}`));let n=i;for(let e=0;void 0!==t.children.get(n);e++)n=`${i}_${e}`;return n}static empty(e){return 0===e.children.size}}class b extends y{constructor(e,t,i){super(),this.id=e,this.parent=t,this.symbol=i,this.children=new Map}}class S extends y{constructor(e,t,i,n){super(),this.id=e,this.parent=t,this.label=i,this.order=n,this.children=new Map}}class D extends y{constructor(e){super(),this.uri=e,this.id="root",this.parent=void 0,this._groups=new Map,this.children=new Map,this.id="root",this.parent=void 0}static create(e,t,i){const r=new o.A(i),l=new D(t.uri),c=e.ordered(t),a=c.map(((e,i)=>{var n;const o=y.findId(`provider_${i}`,l),c=new S(o,l,null!==(n=e.displayName)&&void 0!==n?n:"Unknown Outline Provider",i);return Promise.resolve(e.provideDocumentSymbols(t,r.token)).then((e=>{for(const t of e||[])D._makeOutlineElement(t,c);return c}),(e=>((0,s.Cp)(e),c))).then((e=>{y.empty(e)?e.remove():l._groups.set(o,e)}))})),d=e.onDidChange((()=>{const i=e.ordered(t);(0,n.fS)(i,c)||r.cancel()}));return Promise.all(a).then((()=>r.token.isCancellationRequested&&!i.isCancellationRequested?D.create(e,t,i):l._compact())).finally((()=>{d.dispose()}))}static _makeOutlineElement(e,t){const i=y.findId(e,t),n=new b(i,t,e);if(e.children)for(const t of e.children)D._makeOutlineElement(t,n);t.children.set(n.id,n)}_compact(){let e=0;for(const[t,i]of this._groups)0===i.children.size?this._groups.delete(t):e+=1;if(1!==e)this.children=this._groups;else{const e=r.$.first(this._groups.values());for(const[,t]of e.children)t.parent=this,this.children.set(t.id,t)}return this}getTopLevelSymbols(){const e=[];for(const t of this.children.values())t instanceof b?e.push(t.symbol):e.push(...r.$.map(t.children.values(),(e=>e.symbol)));return e.sort(((e,t)=>a.e.compareRangesUsingStarts(e.range,t.range)))}asListOfDocumentSymbols(){const e=this.getTopLevelSymbols(),t=[];return D._flattenDocumentSymbols(t,e,""),t.sort(((e,t)=>c.L.compare(a.e.getStartPosition(e.range),a.e.getStartPosition(t.range))||c.L.compare(a.e.getEndPosition(t.range),a.e.getEndPosition(e.range))))}static _flattenDocumentSymbols(e,t,i){for(const n of t)e.push({kind:n.kind,tags:n.tags,name:n.name,detail:n.detail,containerName:n.containerName||i,range:n.range,selectionRange:n.selectionRange,children:void 0}),n.children&&D._flattenDocumentSymbols(e,n.children,n.name)}}const P=(0,u.yh)("IOutlineModelService");let w=class{constructor(e,t,i){this._languageFeaturesService=e,this._disposables=new m.SL,this._cache=new l.z6(10,.7),this._debounceInformation=t.for(e.documentSymbolProvider,"DocumentSymbols",{min:350}),this._disposables.add(i.onModelRemoved((e=>{this._cache.delete(e.id)})))}dispose(){this._disposables.dispose()}getOrCreate(e,t){return v(this,void 0,void 0,(function*(){const i=this._languageFeaturesService.documentSymbolProvider,s=i.ordered(e);let r=this._cache.get(e.id);if(!r||r.versionId!==e.getVersionId()||!(0,n.fS)(r.provider,s)){const t=new o.A;r={versionId:e.getVersionId(),provider:s,promiseCnt:0,source:t,promise:D.create(i,e,t.token),model:void 0},this._cache.set(e.id,r);const n=Date.now();r.promise.then((t=>{r.model=t,this._debounceInformation.update(e,Date.now()-n)})).catch((t=>{this._cache.delete(e.id)}))}if(r.model)return r.model;r.promiseCnt+=1;const l=t.onCancellationRequested((()=>{0==--r.promiseCnt&&(r.source.cancel(),this._cache.delete(e.id))}));try{return yield r.promise}finally{l.dispose()}}))}};w=f([_(0,g.p),_(1,d.A),_(2,p.q)],w),(0,h.z)(P,w,!0)},90680:function(e,t,i){i.r(t),i.d(t,{DropIntoEditorController:function(){return w}});var n=i(13484),o=i(31837),s=i(38431),r=i(9161),l=i(6227),c=i(28919),a=i(48115),d=i(55298),u=i(53028),h=i(50038),p=i(57841),m=i(35921),g=i(16614),f=i(31046),_=i(35366),v=i(26386),y=i(79969),b=i(83799),S=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},D=function(e,t){return function(i,n){t(i,n,e)}},P=function(e,t,i,n){return new(i||(i=Promise))((function(o,s){function r(e){try{c(n.next(e))}catch(e){s(e)}}function l(e){try{c(n.throw(e))}catch(e){s(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,l)}c((n=n.apply(e,t||[])).next())}))};let w=class extends s.JT{constructor(e,t,i,n,o){super(),this._bulkEditService=t,this._languageFeaturesService=i,this._progressService=n,this._register(e.onDropIntoEditor((t=>this.onDropIntoEditor(e,t.position,t.event)))),this._languageFeaturesService.documentOnDropEditProvider.register("*",new C(o))}onDropIntoEditor(e,t,i){return P(this,void 0,void 0,(function*(){if(!i.dataTransfer||!e.hasModel())return;const o=e.getModel(),s=o.getVersionId(),r=yield this.extractDataTransferData(i);if(0===r.size)return;if(e.getModel().getVersionId()!==s)return;const l=new g.Dl(e,1);try{const i=this._languageFeaturesService.documentOnDropEditProvider.ordered(o),c=yield this._progressService.withProgress({location:15,delay:750,title:(0,v.NC)("dropProgressTitle","Running drop handlers..."),cancellable:!0},(()=>(0,n.eP)((()=>P(this,void 0,void 0,(function*(){for(const e of i){const i=yield e.provideDocumentOnDropEdits(o,t,r,l.token);if(l.token.isCancellationRequested)return;if(i)return i}})))(),l.token)),(()=>{l.cancel()}));if(l.token.isCancellationRequested||e.getModel().getVersionId()!==s)return;if(c){const i=new h.e(t.lineNumber,t.column,t.lineNumber,t.column);return(0,f.performSnippetEdit)(e,"string"==typeof c.insertText?_.Yj.escape(c.insertText):c.insertText.snippet,[p.Y.fromRange(i,0)]),void(c.additionalEdit&&(yield this._bulkEditService.apply(u.fo.convert(c.additionalEdit),{editor:e})))}}finally{l.dispose()}}))}extractDataTransferData(e){return P(this,void 0,void 0,(function*(){if(!e.dataTransfer)return new o.Hl;const t=(0,a.Bo)(e.dataTransfer);return(0,a.dR)(t,e),t}))}};w.ID="editor.contrib.dropIntoEditorController",w=S([D(1,u.vu),D(2,m.p),D(3,y.R9),D(4,b.ec)],w);let C=class{constructor(e){this._workspaceContextService=e}provideDocumentOnDropEdits(e,t,i,n){var o;return P(this,void 0,void 0,(function*(){const e=i.get(r.v.uriList);if(e){const t=yield e.asString(),i=this.getUriListInsertText(t);if(i)return{insertText:i}}const t=null!==(o=i.get("text"))&&void 0!==o?o:i.get(r.v.text);if(t){return{insertText:yield t.asString()}}}))}getUriListInsertText(e){const t=[];for(const i of a.Z0.parse(e))try{t.push(c.o.parse(i))}catch(e){}if(t.length)return t.map((e=>{const t=this._workspaceContextService.getWorkspaceFolder(e);if(t){const i=(0,l.lX)(t.uri,e);if(i)return i}return e.fsPath})).join(" ")}};C=S([D(0,b.ec)],C),(0,d._K)(w.ID,w)},16614:function(e,t,i){i.d(t,{yy:function(){return f},Dl:function(){return _},YQ:function(){return v}});var n=i(17416),o=i(50038),s=i(97464),r=i(38431),l=i(55298),c=i(70499),a=i(17979),d=i(44333),u=i(53061),h=i(26386);const p=(0,d.yh)("IEditorCancelService"),m=new c.uy("cancellableOperation",!1,(0,h.NC)("cancellableOperation","Whether the editor runs a cancellable operation, e.g. like 'Peek References'"));(0,u.z)(p,class{constructor(){this._tokens=new WeakMap}add(e,t){let i,n=this._tokens.get(e);return n||(n=e.invokeWithinContext((e=>({key:m.bindTo(e.get(c.i6)),tokens:new a.S}))),this._tokens.set(e,n)),n.key.set(!0),i=n.tokens.push(t),()=>{i&&(i(),n.key.set(!n.tokens.isEmpty()),i=void 0)}}cancel(e){const t=this._tokens.get(e);if(!t)return;const i=t.tokens.pop();i&&(i.cancel(),t.key.set(!t.tokens.isEmpty()))}},!0);class g extends s.A{constructor(e,t){super(t),this.editor=e,this._unregister=e.invokeWithinContext((t=>t.get(p).add(e,this)))}dispose(){this._unregister(),super.dispose()}}(0,l.fK)(new class extends l._l{constructor(){super({id:"editor.cancelOperation",kbOpts:{weight:100,primary:9},precondition:m})}runEditorCommand(e,t){e.get(p).cancel(t)}});class f{constructor(e,t){if(this.flags=t,0!=(1&this.flags)){const t=e.getModel();this.modelVersionId=t?n.WU("{0}#{1}",t.uri.toString(),t.getVersionId()):null}else this.modelVersionId=null;0!=(4&this.flags)?this.position=e.getPosition():this.position=null,0!=(2&this.flags)?this.selection=e.getSelection():this.selection=null,0!=(8&this.flags)?(this.scrollLeft=e.getScrollLeft(),this.scrollTop=e.getScrollTop()):(this.scrollLeft=-1,this.scrollTop=-1)}_equals(e){if(!(e instanceof f))return!1;const t=e;return this.modelVersionId===t.modelVersionId&&(this.scrollLeft===t.scrollLeft&&this.scrollTop===t.scrollTop&&(!(!this.position&&t.position||this.position&&!t.position||this.position&&t.position&&!this.position.equals(t.position))&&!(!this.selection&&t.selection||this.selection&&!t.selection||this.selection&&t.selection&&!this.selection.equalsRange(t.selection))))}validate(e){return this._equals(new f(e,this.flags))}}class _ extends g{constructor(e,t,i,n){super(e,n),this._listener=new r.SL,4&t&&this._listener.add(e.onDidChangeCursorPosition((e=>{i&&o.e.containsPosition(i,e.position)||this.cancel()}))),2&t&&this._listener.add(e.onDidChangeCursorSelection((e=>{i&&o.e.containsRange(i,e.selection)||this.cancel()}))),8&t&&this._listener.add(e.onDidScrollChange((e=>this.cancel()))),1&t&&(this._listener.add(e.onDidChangeModel((e=>this.cancel()))),this._listener.add(e.onDidChangeModelContent((e=>this.cancel()))))}dispose(){this._listener.dispose(),super.dispose()}}class v extends s.A{constructor(e,t){super(t),this._listener=e.onDidChangeContent((()=>this.cancel()))}dispose(){this._listener.dispose(),super.dispose()}}}}]);