"use strict";(self.webpackChunkapp_template_builder=self.webpackChunkapp_template_builder||[]).push([[698],{91286:function(e,t,a){a.d(t,{s:function(){return n}});a(77950),a(85940);var i=a(87263),r=a(27875),n={name:"FormComponentBase",components:{},inject:["onChange","onGetValue","onEvent"],props:{id:{type:String,default:function(){return""}},type:{type:String,default:function(){return""}},extras:{type:Object,default:function(){return{}}},placeholder:{type:String,default:function(){return"请输入"}},rules:{type:Array,default:function(){return[]}},fieldPath:{type:String,default:function(){return""}},componentMap:{type:Object,default:function(){return{}}},formData:{type:Object,default:function(){return{}}}},data:function(){return{}},computed:{value:{get:function(){var e="";return this.formData&&this.fieldPath&&(e=(0,i.g)(this.formData,this.fieldPath)),e},set:function(e){this.onChange(e,this.id)}},validProp:function(){return this.fieldPath.replace(/\//g,".")}},render:function(e,t,a,i,n,u){return(0,r.wg)(),(0,r.iD)("div")}}},42698:function(e,t,a){a.r(t),a.d(t,{default:function(){return d}});a(71245),a(18178),a(39529),a(31235);var i=a(27875),r=a(50349),n=a(87263),u=a(91286),s=a(28879),l=function(e,t){var a=e.type,i=e.value;if("null"===a)return null;if("fixed"===a)return s(i);if("field"===a)return t?s(t):null;var r=s();if("now"===a)return r;if(i&&Number(i)>0){if("before"===a)return r.subtract(Number(i)+1,"d");if("after"===a)return r.add(Number(i),"d")}},o=function(e,t){for(var a=[],i=e;i<=t;i++)a.push(i);return a},d=(0,i.aZ)({name:"DataTime",extends:u.s,props:{title:{type:String,default:function(){return""}},required:{type:Boolean,default:function(){return!1}},placeholder:{type:String,default:function(){return""}}},data:function(){return{formats:{datePicker:["YYYY-MM-DD HH:mm:ss","YYYY-MM-DD HH:mm","YYYY-MM-DD","YYYY-MM","YYYY"],timePicker:["HH:mm:ss","HH:mm"],timeSelect:["HH:mm"]}}},computed:{datePickerType:function(){var e=this.extras,t=e.format,a=e.isRange;switch(t){case"YYYY-MM-DD HH:mm:ss":case"YYYY-MM-DD HH:mm":return a?"datetimerange":"datetime";case"YYYY-MM-DD":return a?"daterange":"date";case"YYYY-MM":return a?"monthrange":"month";case"YYYY":return"year"}},minDateTime:function(){return l(this.extras.min,"field"===this.extras.min.type?this.getRelateValue(this.extras.min.value):"")},maxDateTime:function(){return l(this.extras.max,"field"===this.extras.max.type?this.getRelateValue(this.extras.max.value):"")}},created:function(){this.setDefaultValue()},mounted:function(){this.init()},methods:{init:function(){},setDefaultValue:function(){this.extras.defaultValue&&!this.value&&this.onChange(this.extras.defaultValue,this.id)},getRelateValue:function(e){var t="";if(e){var a=this.componentMap[e];t=(0,n.g)(this.formData,a.fieldPath)}return t},disabledDate:function(e){var t=!1;return this.maxDateTime&&!s(e).isBefore(this.maxDateTime)&&(t=!0),this.minDateTime&&!s(e).isAfter(this.minDateTime)&&(t=!0),t},disabledTime:function(e,t,a,i){var r=i.hour,u=i.minute,s=(0,n.h)(e),l=(0,n.h)(t);this.minDateTime&&(s="second"===a&&r===this.minDateTime.hour()&&u===this.minDateTime.minute()?this.minDateTime.second()-1:"minute"===a&&r===this.minDateTime.hour()?this.minDateTime.minute()-1:this.minDateTime.hour()-1),this.maxDateTime&&(l="second"===a&&r===this.maxDateTime.hour()&&u===this.maxDateTime.minute()?this.maxDateTime.second()+1:"minute"===a&&r===this.maxDateTime.hour()?this.maxDateTime.minute()+1:this.maxDateTime.hour()+1);var d=[];s>e&&(d=o(e,s));var m=[];return l<t&&(m=o(l,t)),d.concat(m)},disabledHours:function(){return this.disabledTime(0,23,"hour",{})},disabledMinutes:function(e){return this.disabledTime(0,59,"minute",{hour:e})},disabledSeconds:function(e,t){return this.disabledTime(0,59,"second",{hour:e,minute:t})}}});d.render=function(e,t,a,n,u,s){var l=(0,i.up)("el-date-picker"),o=(0,i.up)("el-time-picker"),d=(0,i.up)("el-time-select"),m=(0,i.up)("el-form-item");return(0,i.wg)(),(0,i.j4)(m,{label:e.title,class:(0,r.normalizeClass)([e.required?"is-required":"","atr-datetime"]),prop:e.validProp,rules:e.rules},{default:(0,i.w5)((function(){return[e.formats.datePicker.includes(e.extras.format)?((0,i.wg)(),(0,i.j4)(l,{key:0,modelValue:e.value,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.value=t}),type:e.datePickerType,format:e.extras.format,valueFormat:e.extras.format,"disabled-date":e.disabledDate,placeholder:e.placeholder},null,8,["modelValue","type","format","valueFormat","disabled-date","placeholder"])):e.formats.timePicker.includes(e.extras.format)&&!e.extras.isSelect?((0,i.wg)(),(0,i.j4)(o,{key:1,modelValue:e.value,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.value=t}),format:e.extras.format,valueFormat:e.extras.format,isRange:e.extras.isRange,"disabled-hours":e.disabledHours,"disabled-minutes":e.disabledMinutes,"disabled-seconds":e.disabledSeconds,placeholder:e.placeholder},null,8,["modelValue","format","valueFormat","isRange","disabled-hours","disabled-minutes","disabled-seconds","placeholder"])):((0,i.wg)(),(0,i.j4)(d,{key:2,modelValue:e.value,"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.value=t}),start:e.extras.min.value||"00:00",end:e.extras.max.value||"23:59",step:e.extras.timeStep||"00:01",placeholder:e.placeholder},null,8,["modelValue","start","end","step","placeholder"]))]})),_:1},8,["label","class","prop","rules"])}}}]);