"use strict";(self.webpackChunkapp_template_builder=self.webpackChunkapp_template_builder||[]).push([[5371],{13385:function(e,t,i){i.d(t,{J:function(){return L},d:function(){return I}});var s=i(34441),n=i(19846),r=i(86741),o=i(56709),a=i(38431),h=i(5007),l=i(6227),d=i(77957),c=i(50038),u=i(132),_=i(29173),g=i(90638),p=i(47626),f=i(91223),v=i(38623),m=i(12139),w=i(26386),C=i(44333),y=i(55495),S=i(18680),b=i(67502),R=i(58566),M=i(48900),D=i(32498),x=function(e,t,i,s){var n,r=arguments.length,o=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(r<3?n(o):r>3?n(t,i,o):n(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o},N=function(e,t){return function(i,s){t(i,s,e)}},O=function(e,t,i,s){return new(i||(i=Promise))((function(n,r){function o(e){try{h(s.next(e))}catch(e){r(e)}}function a(e){try{h(s.throw(e))}catch(e){r(e)}}function h(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}h((s=s.apply(e,t||[])).next())}))};class k{constructor(e,t){this._editor=e,this._model=t,this._decorations=new Map,this._decorationIgnoreSet=new Set,this._callOnDispose=new a.SL,this._callOnModelChange=new a.SL,this._callOnDispose.add(this._editor.onDidChangeModel((()=>this._onModelChanged()))),this._onModelChanged()}dispose(){this._callOnModelChange.dispose(),this._callOnDispose.dispose(),this.removeDecorations()}_onModelChanged(){this._callOnModelChange.clear();const e=this._editor.getModel();if(e)for(const t of this._model.references)if(t.uri.toString()===e.uri.toString())return void this._addDecorations(t.parent)}_addDecorations(e){if(!this._editor.hasModel())return;this._callOnModelChange.add(this._editor.getModel().onDidChangeDecorations((()=>this._onDecorationChanged())));const t=[],i=[];for(let s=0,n=e.children.length;s<n;s++){const n=e.children[s];this._decorationIgnoreSet.has(n.id)||n.uri.toString()===this._editor.getModel().uri.toString()&&(t.push({range:n.range,options:k.DecorationOptions}),i.push(s))}this._editor.changeDecorations((s=>{const n=s.deltaDecorations([],t);for(let t=0;t<n.length;t++)this._decorations.set(n[t],e.children[i[t]])}))}_onDecorationChanged(){const e=[],t=this._editor.getModel();if(t){for(const[i,s]of this._decorations){const n=t.getDecorationRange(i);if(!n)continue;let r=!1;if(!c.e.equalsRange(n,s.range)){if(c.e.spansMultipleLines(n))r=!0;else{s.range.endColumn-s.range.startColumn!==n.endColumn-n.startColumn&&(r=!0)}r?(this._decorationIgnoreSet.add(s.id),e.push(i)):s.range=n}}for(let t=0,i=e.length;t<i;t++)this._decorations.delete(e[t]);this._editor.removeDecorations(e)}}removeDecorations(){this._editor.removeDecorations([...this._decorations.keys()]),this._decorations.clear()}}k.DecorationOptions=u.qx.register({description:"reference-decoration",stickiness:1,className:"reference-decoration"});class L{constructor(){this.ratio=.7,this.heightInLines=18}static fromJSON(e){let t,i;try{const s=JSON.parse(e);t=s.ratio,i=s.heightInLines}catch(e){}return{ratio:t||.7,heightInLines:i||18}}}class E extends b.ls{}let I=class extends m.vk{constructor(e,t,i,n,r,h,l,d,c,u,_,g){super(e,{showFrame:!1,showArrow:!0,isResizeable:!0,isAccessible:!0,supportOnTitleClick:!0},h),this._defaultTreeKeyboardSupport=t,this.layoutData=i,this._textModelResolverService=r,this._instantiationService=h,this._peekViewService=l,this._uriLabel=d,this._undoRedoService=c,this._keybindingService=u,this._languageService=_,this._languageConfigurationService=g,this._disposeOnNewModel=new a.SL,this._callOnDispose=new a.SL,this._onDidSelectReference=new o.Q5,this.onDidSelectReference=this._onDidSelectReference.event,this._dim=new s.Ro(0,0),this._applyTheme(n.getColorTheme()),this._callOnDispose.add(n.onDidColorThemeChange(this._applyTheme.bind(this))),this._peekViewService.addExclusiveWidget(e,this),this.create()}dispose(){this.setModel(void 0),this._callOnDispose.dispose(),this._disposeOnNewModel.dispose(),(0,a.B9)(this._preview),(0,a.B9)(this._previewNotAvailableMessage),(0,a.B9)(this._tree),(0,a.B9)(this._previewModelReference),this._splitView.dispose(),super.dispose()}_applyTheme(e){const t=e.getColor(m.SC)||r.Il.transparent;this.style({arrowColor:t,frameColor:t,headerBackgroundColor:e.getColor(m.KY)||r.Il.transparent,primaryHeadingColor:e.getColor(m.IH),secondaryHeadingColor:e.getColor(m.R7)})}show(e){super.show(e,this.layoutData.heightInLines||18)}focusOnReferenceTree(){this._tree.domFocus()}focusOnPreviewEditor(){this._preview.focus()}isPreviewEditorFocused(){return this._preview.hasTextFocus()}_onTitleClick(e){this._preview&&this._preview.getModel()&&this._onDidSelectReference.fire({element:this._getFocusedReference(),kind:e.ctrlKey||e.metaKey||e.altKey?"side":"open",source:"title"})}_fillBody(e){this.setCssClass("reference-zone-widget"),this._messageContainer=s.R3(e,s.$("div.messages")),s.Cp(this._messageContainer),this._splitView=new n.z(e,{orientation:1}),this._previewContainer=s.R3(e,s.$("div.preview.inline"));this._preview=this._instantiationService.createInstance(d.H,this._previewContainer,{scrollBeyondLastLine:!1,scrollbar:{verticalScrollbarSize:14,horizontal:"auto",useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,alwaysConsumeMouseWheel:!1},overviewRulerLanes:2,fixedOverflowWidgets:!0,minimap:{enabled:!1}},this.editor),s.Cp(this._previewContainer),this._previewNotAvailableMessage=new u.yO(w.NC("missingPreviewMessage","no preview available"),g.bd,u.yO.DEFAULT_CREATION_OPTIONS,null,this._undoRedoService,this._languageService,this._languageConfigurationService),this._treeContainer=s.R3(e,s.$("div.ref-tree.inline"));const t={keyboardSupport:this._defaultTreeKeyboardSupport,accessibilityProvider:new v.QC,keyboardNavigationLabelProvider:this._instantiationService.createInstance(v.vn),identityProvider:new v.EZ,openOnSingleClick:!0,selectionNavigation:!0,overrideStyles:{listBackground:m.M8}};this._defaultTreeKeyboardSupport&&this._callOnDispose.add(s.mu(this._treeContainer,"keydown",(e=>{e.equals(9)&&(this._keybindingService.dispatchEvent(e,e.target),e.stopPropagation())}),!0)),this._tree=this._instantiationService.createInstance(E,"ReferencesWidget",this._treeContainer,new v.bu,[this._instantiationService.createInstance(v.U$),this._instantiationService.createInstance(v.vr)],this._instantiationService.createInstance(v.o2),t),this._splitView.addView({onDidChange:o.ju.None,element:this._previewContainer,minimumSize:200,maximumSize:Number.MAX_VALUE,layout:e=>{this._preview.layout({height:this._dim.height,width:e})}},n.M.Distribute),this._splitView.addView({onDidChange:o.ju.None,element:this._treeContainer,minimumSize:100,maximumSize:Number.MAX_VALUE,layout:e=>{this._treeContainer.style.height=`${this._dim.height}px`,this._treeContainer.style.width=`${e}px`,this._tree.layout(this._dim.height,e)}},n.M.Distribute),this._disposables.add(this._splitView.onDidSashChange((()=>{this._dim.width&&(this.layoutData.ratio=this._splitView.getViewSize(0)/this._dim.width)}),void 0));const i=(e,t)=>{e instanceof D.WX&&("show"===t&&this._revealReference(e,!1),this._onDidSelectReference.fire({element:e,kind:t,source:"tree"}))};this._tree.onDidOpen((e=>{e.sideBySide?i(e.element,"side"):e.editorOptions.pinned?i(e.element,"goto"):i(e.element,"show")})),s.Cp(this._treeContainer)}_onWidth(e){this._dim&&this._doLayoutBody(this._dim.height,e)}_doLayoutBody(e,t){super._doLayoutBody(e,t),this._dim=new s.Ro(t,e),this.layoutData.heightInLines=this._viewZone?this._viewZone.heightInLines:this.layoutData.heightInLines,this._splitView.layout(t),this._splitView.resizeView(0,t*this.layoutData.ratio)}setSelection(e){return this._revealReference(e,!0).then((()=>{this._model&&(this._tree.setSelection([e]),this._tree.setFocus([e]))}))}setModel(e){return this._disposeOnNewModel.clear(),this._model=e,this._model?this._onNewModel():Promise.resolve()}_onNewModel(){return this._model?this._model.isEmpty?(this.setTitle(""),this._messageContainer.innerText=w.NC("noResults","No results"),s.$Z(this._messageContainer),Promise.resolve(void 0)):(s.Cp(this._messageContainer),this._decorationsManager=new k(this._preview,this._model),this._disposeOnNewModel.add(this._decorationsManager),this._disposeOnNewModel.add(this._model.onDidChangeReferenceRange((e=>this._tree.rerender(e)))),this._disposeOnNewModel.add(this._preview.onMouseDown((e=>{const{event:t,target:i}=e;if(2!==t.detail)return;const s=this._getFocusedReference();s&&this._onDidSelectReference.fire({element:{uri:s.uri,range:i.range},kind:t.ctrlKey||t.metaKey||t.altKey?"side":"open",source:"editor"})}))),this.container.classList.add("results-loaded"),s.$Z(this._treeContainer),s.$Z(this._previewContainer),this._splitView.layout(this._dim.width),this.focusOnReferenceTree(),this._tree.setInput(1===this._model.groups.length?this._model.groups[0]:this._model)):Promise.resolve(void 0)}_getFocusedReference(){const[e]=this._tree.getFocus();return e instanceof D.WX?e:e instanceof D.F2&&e.children.length>0?e.children[0]:void 0}revealReference(e){return O(this,void 0,void 0,(function*(){yield this._revealReference(e,!1),this._onDidSelectReference.fire({element:e,kind:"goto",source:"tree"})}))}_revealReference(e,t){return O(this,void 0,void 0,(function*(){if(this._revealedReference===e)return;this._revealedReference=e,e.uri.scheme!==h.lg.inMemory?this.setTitle((0,l.Hx)(e.uri),this._uriLabel.getUriLabel((0,l.XX)(e.uri))):this.setTitle(w.NC("peekView.alternateTitle","References"));const i=this._textModelResolverService.createModelReference(e.uri);this._tree.getInput()===e.parent||(t&&this._tree.reveal(e.parent),yield this._tree.expand(e.parent)),this._tree.reveal(e);const s=yield i;if(!this._model)return void s.dispose();(0,a.B9)(this._previewModelReference);const n=s.object;if(n){const t=this._preview.getModel()===n.textEditorModel?0:1,i=c.e.lift(e.range).collapseToStart();this._previewModelReference=s,this._preview.setModel(n.textEditorModel),this._preview.setSelection(i),this._preview.revealRangeInCenter(i,t)}else this._preview.setModel(this._previewNotAvailableMessage),s.dispose()}))}};I=x([N(3,R.XE),N(4,f.S),N(5,C.TG),N(6,m.Fw),N(7,S.e),N(8,M.tJ),N(9,y.d),N(10,p.O),N(11,_.c_)],I)},32498:function(e,t,i){i.d(t,{F2:function(){return p},WX:function(){return _},oQ:function(){return f}});var s=i(20996),n=i(56709),r=i(6100),o=i(38431),a=i(39832),h=i(6227),l=i(17416),d=i(50038),c=i(26386),u=function(e,t,i,s){return new(i||(i=Promise))((function(n,r){function o(e){try{h(s.next(e))}catch(e){r(e)}}function a(e){try{h(s.throw(e))}catch(e){r(e)}}function h(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(o,a)}h((s=s.apply(e,t||[])).next())}))};class _{constructor(e,t,i,s){this.isProviderFirst=e,this.parent=t,this.link=i,this._rangeCallback=s,this.id=r.a.nextId()}get uri(){return this.link.uri}get range(){var e,t;return null!==(t=null!==(e=this._range)&&void 0!==e?e:this.link.targetSelectionRange)&&void 0!==t?t:this.link.range}set range(e){this._range=e,this._rangeCallback(this)}get ariaMessage(){var e;const t=null===(e=this.parent.getPreview(this))||void 0===e?void 0:e.preview(this.range);return t?(0,c.NC)({key:"aria.oneReference.preview",comment:["Placeholders are: 0: filename, 1:line number, 2: column number, 3: preview snippet of source code"]},"symbol in {0} on line {1} at column {2}, {3}",(0,h.EZ)(this.uri),this.range.startLineNumber,this.range.startColumn,t.value):(0,c.NC)("aria.oneReference","symbol in {0} on line {1} at column {2}",(0,h.EZ)(this.uri),this.range.startLineNumber,this.range.startColumn)}}class g{constructor(e){this._modelReference=e}dispose(){this._modelReference.dispose()}preview(e,t=8){const i=this._modelReference.object.textEditorModel;if(!i)return;const{startLineNumber:s,startColumn:n,endLineNumber:r,endColumn:o}=e,a=i.getWordUntilPosition({lineNumber:s,column:n-t}),h=new d.e(s,a.startColumn,s,n),l=new d.e(r,o,r,1073741824),c=i.getValueInRange(h).replace(/^\s+/,""),u=i.getValueInRange(e);return{value:c+u+i.getValueInRange(l).replace(/\s+$/,""),highlight:{start:c.length,end:c.length+u.length}}}}class p{constructor(e,t){this.parent=e,this.uri=t,this.children=[],this._previews=new a.Y9}dispose(){(0,o.B9)(this._previews.values()),this._previews.clear()}getPreview(e){return this._previews.get(e.uri)}get ariaMessage(){const e=this.children.length;return 1===e?(0,c.NC)("aria.fileReferences.1","1 symbol in {0}, full path {1}",(0,h.EZ)(this.uri),this.uri.fsPath):(0,c.NC)("aria.fileReferences.N","{0} symbols in {1}, full path {2}",e,(0,h.EZ)(this.uri),this.uri.fsPath)}resolve(e){return u(this,void 0,void 0,(function*(){if(0!==this._previews.size)return this;for(const t of this.children)if(!this._previews.has(t.uri))try{const i=yield e.createModelReference(t.uri);this._previews.set(t.uri,new g(i))}catch(e){(0,s.dL)(e)}return this}))}}class f{constructor(e,t){this.groups=[],this.references=[],this._onDidChangeReferenceRange=new n.Q5,this.onDidChangeReferenceRange=this._onDidChangeReferenceRange.event,this._links=e,this._title=t;const[i]=e;let s;e.sort(f._compareReferences);for(const t of e)if(s&&h.SF.isEqual(s.uri,t.uri,!0)||(s=new p(this,t.uri),this.groups.push(s)),0===s.children.length||0!==f._compareReferences(t,s.children[s.children.length-1])){const e=new _(i===t,s,t,(e=>this._onDidChangeReferenceRange.fire(e)));this.references.push(e),s.children.push(e)}}dispose(){(0,o.B9)(this.groups),this._onDidChangeReferenceRange.dispose(),this.groups.length=0}clone(){return new f(this._links,this._title)}get title(){return this._title}get isEmpty(){return 0===this.groups.length}get ariaMessage(){return this.isEmpty?(0,c.NC)("aria.result.0","No results found"):1===this.references.length?(0,c.NC)("aria.result.1","Found 1 symbol in {0}",this.references[0].uri.fsPath):1===this.groups.length?(0,c.NC)("aria.result.n1","Found {0} symbols in {1}",this.references.length,this.groups[0].uri.fsPath):(0,c.NC)("aria.result.nm","Found {0} symbols in {1} files",this.references.length,this.groups.length)}nextOrPreviousReference(e,t){const{parent:i}=e;let s=i.children.indexOf(e);const n=i.children.length,r=i.parent.groups.length;return 1===r||t&&s+1<n||!t&&s>0?(s=t?(s+1)%n:(s+n-1)%n,i.children[s]):(s=i.parent.groups.indexOf(i),t?(s=(s+1)%r,i.parent.groups[s].children[0]):(s=(s+r-1)%r,i.parent.groups[s].children[i.parent.groups[s].children.length-1]))}nearestReference(e,t){const i=this.references.map(((i,s)=>({idx:s,prefixLen:l.Mh(i.uri.toString(),e.toString()),offsetDist:100*Math.abs(i.range.startLineNumber-t.lineNumber)+Math.abs(i.range.startColumn-t.column)}))).sort(((e,t)=>e.prefixLen>t.prefixLen?-1:e.prefixLen<t.prefixLen?1:e.offsetDist<t.offsetDist?-1:e.offsetDist>t.offsetDist?1:0))[0];if(i)return this.references[i.idx]}referenceAt(e,t){for(const i of this.references)if(i.uri.toString()===e.toString()&&d.e.containsPosition(i.range,t))return i}firstReference(){for(const e of this.references)if(e.isProviderFirst)return e;return this.references[0]}static _compareReferences(e,t){return h.SF.compare(e.uri,t.uri)||d.e.compareRangesUsingStarts(e.range,t.range)}}},57544:function(e,t,i){i.d(t,{_:function(){return w}});var s=i(56709),n=i(38431),r=i(6227),o=i(55298),a=i(5603),h=i(50038),l=i(26386),d=i(70499),c=i(53061),u=i(44333),_=i(55495),g=i(47679),p=i(97968),f=function(e,t,i,s){var n,r=arguments.length,o=r<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(o=(r<3?n(o):r>3?n(t,i,o):n(t,i))||o);return r>3&&o&&Object.defineProperty(t,i,o),o},v=function(e,t){return function(i,s){t(i,s,e)}};const m=new d.uy("hasSymbols",!1,(0,l.NC)("hasSymbols","Whether there are symbol locations that can be navigated via keyboard-only.")),w=(0,u.yh)("ISymbolNavigationService");let C=class{constructor(e,t,i,s){this._editorService=t,this._notificationService=i,this._keybindingService=s,this._currentModel=void 0,this._currentIdx=-1,this._ignoreEditorChange=!1,this._ctxHasSymbols=m.bindTo(e)}reset(){var e,t;this._ctxHasSymbols.reset(),null===(e=this._currentState)||void 0===e||e.dispose(),null===(t=this._currentMessage)||void 0===t||t.dispose(),this._currentModel=void 0,this._currentIdx=-1}put(e){const t=e.parent.parent;if(t.references.length<=1)return void this.reset();this._currentModel=t,this._currentIdx=t.references.indexOf(e),this._ctxHasSymbols.set(!0),this._showMessage();const i=new y(this._editorService),s=i.onDidChange((e=>{if(this._ignoreEditorChange)return;const i=this._editorService.getActiveCodeEditor();if(!i)return;const s=i.getModel(),n=i.getPosition();if(!s||!n)return;let o=!1,a=!1;for(const e of t.references)if((0,r.Xy)(e.uri,s.uri))o=!0,a=a||h.e.containsPosition(e.range,n);else if(o)break;o&&a||this.reset()}));this._currentState=(0,n.F8)(i,s)}revealNext(e){if(!this._currentModel)return Promise.resolve();this._currentIdx+=1,this._currentIdx%=this._currentModel.references.length;const t=this._currentModel.references[this._currentIdx];return this._showMessage(),this._ignoreEditorChange=!0,this._editorService.openCodeEditor({resource:t.uri,options:{selection:h.e.collapseToStart(t.range),selectionRevealType:3}},e).finally((()=>{this._ignoreEditorChange=!1}))}_showMessage(){var e;null===(e=this._currentMessage)||void 0===e||e.dispose();const t=this._keybindingService.lookupKeybinding("editor.gotoNextSymbolFromResult"),i=t?(0,l.NC)("location.kb","Symbol {0} of {1}, {2} for next",this._currentIdx+1,this._currentModel.references.length,t.getLabel()):(0,l.NC)("location","Symbol {0} of {1}",this._currentIdx+1,this._currentModel.references.length);this._currentMessage=this._notificationService.status(i)}};C=f([v(0,d.i6),v(1,a.$),v(2,p.lT),v(3,_.d)],C),(0,c.z)(w,C,!0),(0,o.fK)(new class extends o._l{constructor(){super({id:"editor.gotoNextSymbolFromResult",precondition:m,kbOpts:{weight:100,primary:70}})}runEditorCommand(e,t){return e.get(w).revealNext(t)}}),g.W.registerCommandAndKeybindingRule({id:"editor.gotoNextSymbolFromResult.cancel",weight:100,when:m,primary:9,handler(e){e.get(w).reset()}});let y=class{constructor(e){this._listener=new Map,this._disposables=new n.SL,this._onDidChange=new s.Q5,this.onDidChange=this._onDidChange.event,this._disposables.add(e.onCodeEditorRemove(this._onDidRemoveEditor,this)),this._disposables.add(e.onCodeEditorAdd(this._onDidAddEditor,this)),e.listCodeEditors().forEach(this._onDidAddEditor,this)}dispose(){this._disposables.dispose(),this._onDidChange.dispose(),(0,n.B9)(this._listener.values())}_onDidAddEditor(e){this._listener.set(e,(0,n.F8)(e.onDidChangeCursorPosition((t=>this._onDidChange.fire({editor:e}))),e.onDidChangeModelContent((t=>this._onDidChange.fire({editor:e})))))}_onDidRemoveEditor(e){var t;null===(t=this._listener.get(e))||void 0===t||t.dispose(),this._listener.delete(e)}};y=f([v(0,a.$)],y)}}]);