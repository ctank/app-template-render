"use strict";(self.webpackChunkapp_template_builder=self.webpackChunkapp_template_builder||[]).push([[4242],{56462:function(e,t,i){i.d(t,{O:function(){return n}});const n="editor.action.inlineSuggest.commit"},39841:function(e,t,i){i.d(t,{Kp:function(){return S},L8:function(){return w},a5:function(){return b},i3:function(){return I}});var n=i(56709),o=i(38431),s=i(17416),r=i(55298),l=i(61669),a=i(21081),d=i(54070),c=i(60213),u=i(26386),h=i(70499),g=i(44333),v=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},m=function(e,t){return function(i,n){t(i,n,e)}},p=function(e,t,i,n){return new(i||(i=Promise))((function(o,s){function r(e){try{a(n.next(e))}catch(e){s(e)}}function l(e){try{a(n.throw(e))}catch(e){s(e)}}function a(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,l)}a((n=n.apply(e,t||[])).next())}))};let S=class e extends o.JT{constructor(e,t){super(),this.editor=e,this.instantiationService=t,this.triggeredExplicitly=!1,this.activeController=this._register(new o.XK),this.activeModelDidChangeEmitter=this._register(new n.Q5),this._register(this.editor.onDidChangeModel((()=>{this.updateModelController()}))),this._register(this.editor.onDidChangeConfiguration((e=>{e.hasChanged(108)&&this.updateModelController(),e.hasChanged(57)&&this.updateModelController()}))),this.updateModelController()}static get(t){return t.getContribution(e.ID)}get activeModel(){var e;return null===(e=this.activeController.value)||void 0===e?void 0:e.model}updateModelController(){const e=this.editor.getOption(108),t=this.editor.getOption(57);this.activeController.value=void 0,this.activeController.value=this.editor.hasModel()&&(e.preview||t.enabled||this.triggeredExplicitly)?this.instantiationService.createInstance(f,this.editor):void 0,this.activeModelDidChangeEmitter.fire()}shouldShowHoverAt(e){var t;return(null===(t=this.activeModel)||void 0===t?void 0:t.shouldShowHoverAt(e))||!1}shouldShowHoverAtViewZone(e){var t,i;return(null===(i=null===(t=this.activeController.value)||void 0===t?void 0:t.widget)||void 0===i?void 0:i.shouldShowHoverAtViewZone(e))||!1}trigger(){var e;this.triggeredExplicitly=!0,this.activeController.value||this.updateModelController(),null===(e=this.activeModel)||void 0===e||e.triggerInlineCompletion()}commit(){var e;null===(e=this.activeModel)||void 0===e||e.commitInlineCompletion()}hide(){var e;null===(e=this.activeModel)||void 0===e||e.hideInlineCompletion()}showNextInlineCompletion(){var e;null===(e=this.activeModel)||void 0===e||e.showNextInlineCompletion()}showPreviousInlineCompletion(){var e;null===(e=this.activeModel)||void 0===e||e.showPreviousInlineCompletion()}hasMultipleInlineCompletions(){var e;return p(this,void 0,void 0,(function*(){const t=yield null===(e=this.activeModel)||void 0===e?void 0:e.hasMultipleInlineCompletions();return void 0!==t&&t}))}};S.inlineSuggestionVisible=new h.uy("inlineSuggestionVisible",!1,u.NC("inlineSuggestionVisible","Whether an inline suggestion is visible")),S.inlineSuggestionHasIndentation=new h.uy("inlineSuggestionHasIndentation",!1,u.NC("inlineSuggestionHasIndentation","Whether the inline suggestion starts with whitespace")),S.inlineSuggestionHasIndentationLessThanTabSize=new h.uy("inlineSuggestionHasIndentationLessThanTabSize",!0,u.NC("inlineSuggestionHasIndentationLessThanTabSize","Whether the inline suggestion starts with whitespace that is less than what would be inserted by tab")),S.ID="editor.contrib.ghostTextController",S=v([m(1,g.TG)],S);class C{constructor(e){this.contextKeyService=e,this.inlineCompletionVisible=S.inlineSuggestionVisible.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentation=S.inlineSuggestionHasIndentation.bindTo(this.contextKeyService),this.inlineCompletionSuggestsIndentationLessThanTabSize=S.inlineSuggestionHasIndentationLessThanTabSize.bindTo(this.contextKeyService)}}let f=class extends o.JT{constructor(e,t,i){super(),this.editor=e,this.instantiationService=t,this.contextKeyService=i,this.contextKeys=new C(this.contextKeyService),this.model=this._register(this.instantiationService.createInstance(d.AC,this.editor)),this.widget=this._register(this.instantiationService.createInstance(c.W,this.editor,this.model)),this._register((0,o.OF)((()=>{this.contextKeys.inlineCompletionVisible.set(!1),this.contextKeys.inlineCompletionSuggestsIndentation.set(!1),this.contextKeys.inlineCompletionSuggestsIndentationLessThanTabSize.set(!0)}))),this._register(this.model.onDidChange((()=>{this.updateContextKeys()}))),this.updateContextKeys()}updateContextKeys(){var e;this.contextKeys.inlineCompletionVisible.set(void 0!==(null===(e=this.model.activeInlineCompletionsModel)||void 0===e?void 0:e.ghostText));let t=!1,i=!0;const n=this.model.inlineCompletionsModel.ghostText;if(this.model.activeInlineCompletionsModel&&n&&n.parts.length>0){const{column:e,lines:o}=n.parts[0],r=o[0];if(e<=this.editor.getModel().getLineIndentColumn(n.lineNumber)){let e=(0,s.LC)(r);-1===e&&(e=r.length-1),t=e>0;const n=this.editor.getModel().getOptions().tabSize;i=l.i.visibleColumnFromColumn(r,e+1,n)<n}}this.contextKeys.inlineCompletionSuggestsIndentation.set(t),this.contextKeys.inlineCompletionSuggestsIndentationLessThanTabSize.set(i)}};f=v([m(1,g.TG),m(2,h.i6)],f);class w extends r.R6{constructor(){super({id:w.ID,label:u.NC("action.inlineSuggest.showNext","Show Next Inline Suggestion"),alias:"Show Next Inline Suggestion",precondition:h.Ao.and(a.u.writable,S.inlineSuggestionVisible),kbOpts:{weight:100,primary:601}})}run(e,t){return p(this,void 0,void 0,(function*(){const e=S.get(t);e&&(e.showNextInlineCompletion(),t.focus())}))}}w.ID="editor.action.inlineSuggest.showNext";class b extends r.R6{constructor(){super({id:b.ID,label:u.NC("action.inlineSuggest.showPrevious","Show Previous Inline Suggestion"),alias:"Show Previous Inline Suggestion",precondition:h.Ao.and(a.u.writable,S.inlineSuggestionVisible),kbOpts:{weight:100,primary:599}})}run(e,t){return p(this,void 0,void 0,(function*(){const e=S.get(t);e&&(e.showPreviousInlineCompletion(),t.focus())}))}}b.ID="editor.action.inlineSuggest.showPrevious";class I extends r.R6{constructor(){super({id:"editor.action.inlineSuggest.trigger",label:u.NC("action.inlineSuggest.trigger","Trigger Inline Suggestion"),alias:"Trigger Inline Suggestion",precondition:a.u.writable})}run(e,t){return p(this,void 0,void 0,(function*(){const e=S.get(t);e&&e.trigger()}))}}},20126:function(e,t,i){i.d(t,{l:function(){return b}});var n=i(34441),o=i(69008),s=i(38431),r=i(65137),l=i(50038),a=i(47626),d=i(72223),c=i(39841),u=i(26386),h=i(18708),g=i(21208),v=i(80793),m=i(70499),p=i(48786),S=i(56462),C=function(e,t,i,n){var o,s=arguments.length,r=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(r=(s<3?o(r):s>3?o(t,i,r):o(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},f=function(e,t){return function(i,n){t(i,n,e)}};class w{constructor(e,t,i){this.owner=e,this.range=t,this.controller=i}isValidForHoverAnchor(e){return 1===e.type&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}hasMultipleSuggestions(){return this.controller.hasMultipleInlineCompletions()}get commands(){var e,t,i;return(null===(i=null===(t=null===(e=this.controller.activeModel)||void 0===e?void 0:e.activeInlineCompletionsModel)||void 0===t?void 0:t.completionSession.value)||void 0===i?void 0:i.commands)||[]}}let b=class{constructor(e,t,i,n,o,s,r){this._editor=e,this._commandService=t,this._menuService=i,this._contextKeyService=n,this._languageService=o,this._openerService=s,this.accessibilityService=r,this.hoverOrdinal=3}suggestHoverAnchor(e){const t=c.Kp.get(this._editor);if(!t)return null;const i=e.target;if(8===i.type){const e=i.detail;if(t.shouldShowHoverAtViewZone(e.viewZoneId))return new d.YM(1e3,this,l.e.fromPositions(e.positionBefore||e.position,e.positionBefore||e.position))}if(7===i.type&&t.shouldShowHoverAt(i.range))return new d.YM(1e3,this,i.range);if(6===i.type){if(i.detail.mightBeForeignElement&&t.shouldShowHoverAt(i.range))return new d.YM(1e3,this,i.range)}return null}computeSync(e,t){const i=c.Kp.get(this._editor);return i&&i.shouldShowHoverAt(e.range)?[new w(this,e.range,i)]:[]}renderHoverParts(e,t){const i=new s.SL,n=t[0];this.accessibilityService.isScreenReaderOptimized()&&this.renderScreenReaderText(e,n,i);const o=i.add(this._menuService.createMenu(g.eH.InlineCompletionsActions,this._contextKeyService)),r=e.statusBar.addAction({label:u.NC("showNextInlineSuggestion","Next"),commandId:c.L8.ID,run:()=>this._commandService.executeCommand(c.L8.ID)}),l=e.statusBar.addAction({label:u.NC("showPreviousInlineSuggestion","Previous"),commandId:c.a5.ID,run:()=>this._commandService.executeCommand(c.a5.ID)});e.statusBar.addAction({label:u.NC("acceptInlineSuggestion","Accept"),commandId:S.O,run:()=>this._commandService.executeCommand(S.O)});const a=[r,l];for(const e of a)e.setEnabled(!1);n.hasMultipleSuggestions().then((e=>{for(const t of a)t.setEnabled(e)}));for(const t of n.commands)e.statusBar.addAction({label:t.title,commandId:t.id,run:()=>this._commandService.executeCommand(t.id,...t.arguments||[])});for(const[t,i]of o.getActions())for(const t of i)t instanceof g.U8&&e.statusBar.addAction({label:t.label,commandId:t.item.id,run:()=>this._commandService.executeCommand(t.item.id)});return i}renderScreenReaderText(e,t,i){var s,l;const a=n.$,d=a("div.hover-row.markdown-hover"),c=n.R3(d,a("div.hover-contents")),h=i.add(new r.$({editor:this._editor},this._languageService,this._openerService)),g=null===(l=null===(s=t.controller.activeModel)||void 0===s?void 0:s.inlineCompletionsModel)||void 0===l?void 0:l.ghostText;if(g){const t=this._editor.getModel().getLineContent(g.lineNumber);(t=>{i.add(h.onDidRenderAsync((()=>{c.className="hover-contents code-hover-contents",e.onContentsChanged()})));const n=u.NC("inlineSuggestionFollows","Suggestion:"),s=i.add(h.render((new o.W5).appendText(n).appendCodeblock("text",t)));c.replaceChildren(s.element)})(g.renderForScreenReader(t))}e.fragment.appendChild(d)}};b=C([f(1,v.Hy),f(2,g.co),f(3,m.i6),f(4,a.O),f(5,p.v4),f(6,h.F)],b)}}]);