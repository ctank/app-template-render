"use strict";(self.webpackChunkapp_template_builder=self.webpackChunkapp_template_builder||[]).push([[326],{27527:function(t,e,n){n.d(e,{s:function(){return o}});n(77950),n(85940);var i=n(87263),a=n(27875),o={name:"ViewComponentBase",components:{},inject:["onChange","onGetValue","onEvent"],props:{id:{type:String,default:function(){return""}},type:{type:String,default:function(){return""}},extras:{type:Object,default:function(){return{}}},showTitle:{type:String,default:function(){return"请输入"}},title:{type:String,default:function(){return""}},dataPath:{type:String,default:function(){return""}},componentMap:{type:Object,default:function(){return{}}},viewData:{type:Object,default:function(){return{}}}},data:function(){return{}},computed:{value:{get:function(){var t="";return this.viewData&&this.dataPath&&(t=(0,i.g)(this.viewData,this.dataPath)),t},set:function(t){this.$emit("change",t,this.id)}},validProp:function(){return this.fieldPath.replace(/\//g,".")}},watch:{},methods:{},render:function(t,e,n,i,o,r){return(0,a.wg)(),(0,a.iD)("div")}}},87326:function(t,e,n){n.r(e),n.d(e,{default:function(){return f}});n(18178),n(77950),n(21850),n(85940),n(32501),n(68995),n(16781),n(49228),n(58188);var i=n(27527),a=n(87263),o=n(27875),r=n(50349),l={name:"Tag",props:{color:{type:String,default:function(){return"#000000"}},hit:{type:Boolean,default:function(){return!1}}},computed:{style:function(){return"color:".concat(this.color,";background-color:").concat(this.hex2Rgba(this.color,.1),";")}},methods:{hex2Rgba:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(/^#([0-9A-Fa-f]{3}|[0-9A-Fa-f]{6})$/.test(t)){var n=t.toLowerCase().replace(/\#/g,""),i=n.length;if(3==i){for(var a="",o=0;o<i;o++)a+=n.slice(o,o+1).concat(n.slice(o,o+1));n=a}var r=[];for(o=0;o<6;o+=2){var l=n.slice(o,o+2);r.push(parseInt("0x"+l))}return"rgba(".concat(r.join(","),",").concat(e,")")}}},render:function(t,e,n,i,a,l){return(0,o.wg)(),(0,o.iD)("span",{class:"atp-tag",style:(0,r.normalizeStyle)(l.style)},[(0,o.WI)(t.$slots,"default")],4)}},u=n(28879),c={name:"ColumnContent",components:{Tag:l},props:{row:{type:Object,default:function(){return null}},column:{type:Object,default:function(){return null}}},computed:{config:function(){var t=this.row[this.column.fieldPath]||"",e={content:"",isTag:!1,color:""};if("text"===this.column.fieldType)e.content=t;else if("datetime"===this.column.fieldType)e.content=u(t).format(this.column.format||"YYYY-MM-DD HH:mm:ss");else if("option"===this.column.fieldType){var n=(this.column.options||[]).find((function(e){return e.value===t}));n&&(e.content=n.label,n.color&&(e.isTag=!0,e.color=n.color))}return e}}},s={class:"atp-listview__column"},g={key:0};c.render=function(t,e,n,i,a,l){var u=(0,o.up)("tag");return(0,o.wg)(),(0,o.iD)("div",s,[l.config.isTag?((0,o.wg)(),(0,o.j4)(u,{key:1,color:l.config.color},{default:(0,o.w5)((function(){return[(0,o.Uk)((0,r.toDisplayString)(l.config.content),1)]})),_:1},8,["color"])):((0,o.wg)(),(0,o.iD)("span",g,(0,r.toDisplayString)(l.config.content),1))])};var f={name:"ListView",extends:i.s,components:{ColumnContent:c},data:function(){return{}},computed:{tableStyle:function(){var t={border:!1,stripe:!1};switch(this.extras.tableStyle){case"borderNoStripe":t.border=!0,t.stripe=!1;break;case"borderStripe":t.border=!0,t.stripe=!0;break;case"noBorderNoStripe":t.border=!1,t.stripe=!1;break;case"noBorderStripe":t.border=!1,t.stripe=!0}return t},pagination:function(){return this.viewData.pagination?this.viewData.pagination:{total:0,pageSize:10,currentPage:1}}},methods:{getComponentDisplay:function(t,e){var n=!0;if(e&&Array.isArray(e.showConfig)&&e.showConfig.length){n=!1;for(var i=0;i<e.showConfig.length;i+=1)if(!n)for(var o=0;o<e.showConfig[i].length;o+=1){var r=e.showConfig[i][o],l=r.field,u=r.value,c=r.logic,s=t[l]||"";switch(c){case"0":n=!(0,a.k)(s,u);break;case"1":n=!!(0,a.k)(s,u)}}}return n},handleBtnClick:function(t){var e={};if(this.extras.checkBox){var n=this.$refs.listViewTable;e.selections=n.getSelectionRows()||[]}this.onEvent(t,e)},handleColBtnClick:function(t,e){this.onEvent(t,e)},handlePaginationCurrentChange:function(t){this.onEvent("currentChange",t)},handlePaginationSizeChange:function(t){this.onEvent("sizeChange",t)}}},p={class:"atp-listview"},d={class:"atp-listview__action"},h={key:0,class:"atp-listview__title"};f.render=function(t,e,n,i,a,l){var u=(0,o.up)("el-button"),c=(0,o.up)("el-table-column"),s=(0,o.up)("column-content"),g=(0,o.up)("el-table"),f=(0,o.up)("el-pagination");return(0,o.wg)(),(0,o.iD)("div",p,[(0,o._)("div",d,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.extras.operations,(function(t){return(0,o.wg)(),(0,o.j4)(u,{key:t.buttonEvent,type:t.buttonType,onClick:function(e){return l.handleBtnClick(t.buttonEvent)}},{default:(0,o.w5)((function(){return[(0,o.Uk)((0,r.toDisplayString)(t.buttonName),1)]})),_:2},1032,["type","onClick"])})),128))]),t.showTitle?((0,o.wg)(),(0,o.iD)("div",h,(0,r.toDisplayString)(t.title),1)):(0,o.kq)("",!0),(0,o.Wm)(g,{data:t.viewData[t.dataPath],style:{width:"100%"},border:l.tableStyle.border,stripe:l.tableStyle.stripe,ref:"listViewTable"},{default:(0,o.w5)((function(){return[t.extras.checkBox?((0,o.wg)(),(0,o.j4)(c,{key:0,type:"selection",fixed:"left",width:40,align:"center"})):(0,o.kq)("",!0),t.extras.showNum?((0,o.wg)(),(0,o.j4)(c,{key:1,label:"序号",fixed:"left",width:60,align:"center"},{default:(0,o.w5)((function(t){var e=t.$index;return[(0,o.Uk)((0,r.toDisplayString)(e+1),1)]})),_:1})):(0,o.kq)("",!0),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.extras.columns,(function(t,e){return(0,o.wg)(),(0,o.iD)(o.HY,null,["field"===t.type?((0,o.wg)(),(0,o.j4)(c,{key:"field-".concat(e),label:t.label,width:t.width||"",align:t.align||"left"},{default:(0,o.w5)((function(e){var n=e.row;e.$index;return[(0,o.Wm)(s,{row:n,column:t},null,8,["row","column"])]})),_:2},1032,["label","width","align"])):((0,o.wg)(),(0,o.j4)(c,{fixed:"right",key:"button-".concat(e),label:t.label,width:t.width||"",align:t.align||"left"},{default:(0,o.w5)((function(e){var n=e.row;e.$index;return[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(t.actionConfig,(function(t){return(0,o.wg)(),(0,o.iD)(o.HY,null,[l.getComponentDisplay(n,t)?((0,o.wg)(),(0,o.j4)(u,{key:t.buttonEvent,type:t.buttonType,link:"",onClick:function(e){return l.handleColBtnClick(t.buttonEvent,n)}},{default:(0,o.w5)((function(){return[(0,o.Uk)((0,r.toDisplayString)(t.buttonName),1)]})),_:2},1032,["type","onClick"])):(0,o.kq)("",!0)],64)})),256))]})),_:2},1032,["label","width","align"]))],64)})),256))]})),_:1},8,["data","border","stripe"]),t.extras.showPagination?((0,o.wg)(),(0,o.j4)(f,{key:1,small:"",background:"",class:"atp-listview__pagination","page-sizes":t.extras.pageSize,layout:"sizes, prev, pager, next",total:l.pagination.total,currentPage:l.pagination.currentPage,"onUpdate:currentPage":e[0]||(e[0]=function(t){return l.pagination.currentPage=t}),pageSize:l.pagination.pageSize,"onUpdate:pageSize":e[1]||(e[1]=function(t){return l.pagination.pageSize=t}),onSizeChange:l.handlePaginationSizeChange,onCurrentChange:l.handlePaginationCurrentChange},null,8,["page-sizes","total","currentPage","pageSize","onSizeChange","onCurrentChange"])):(0,o.kq)("",!0)])}}}]);