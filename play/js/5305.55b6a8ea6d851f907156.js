"use strict";(self.webpackChunkapp_template_builder=self.webpackChunkapp_template_builder||[]).push([[5305],{66440:function(e,t,n){n.d(t,{A:function(){return k}});var a=n(16012),s=n(93375),i=n(75616),r=n(71177),l=function(e,t,n,a){var s,i=arguments.length,r=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,n,a);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(r=(i<3?s(r):i>3?s(t,n,r):s(t,n))||r);return i>3&&r&&Object.defineProperty(t,n,r),r},o=function(e,t){return function(n,a){t(n,a,e)}};class u{constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}static create(e,t){return this._INSTANCE.create(e,t)}create(e,t){if(null!==e&&e.depth>=this._maxCacheDepth)return new h(e,t);let n=h.getStackElementId(e);n.length>0&&(n+="|"),n+=t;let a=this._entries[n];return a||(a=new h(e,t),this._entries[n]=a,a)}}u._INSTANCE=new u(5);class h{constructor(e,t){this.parent=e,this.state=t,this.depth=(this.parent?this.parent.depth:0)+1}static getStackElementId(e){let t="";for(;null!==e;)t.length>0&&(t+="|"),t+=e.state,e=e.parent;return t}static _equals(e,t){for(;null!==e&&null!==t;){if(e===t)return!0;if(e.state!==t.state)return!1;e=e.parent,t=t.parent}return null===e&&null===t}equals(e){return h._equals(this,e)}push(e){return u.create(this,e)}pop(){return this.parent}popall(){let e=this;for(;e.parent;)e=e.parent;return e}switchTo(e){return u.create(this.parent,e)}}class g{constructor(e,t){this.languageId=e,this.state=t}equals(e){return this.languageId===e.languageId&&this.state.equals(e.state)}clone(){return this.state.clone()===this.state?this:new g(this.languageId,this.state)}}class d{constructor(e){this._maxCacheDepth=e,this._entries=Object.create(null)}static create(e,t){return this._INSTANCE.create(e,t)}create(e,t){if(null!==t)return new c(e,t);if(null!==e&&e.depth>=this._maxCacheDepth)return new c(e,t);const n=h.getStackElementId(e);let a=this._entries[n];return a||(a=new c(e,null),this._entries[n]=a,a)}}d._INSTANCE=new d(5);class c{constructor(e,t){this.stack=e,this.embeddedLanguageData=t}clone(){return(this.embeddedLanguageData?this.embeddedLanguageData.clone():null)===this.embeddedLanguageData?this:d.create(this.stack,this.embeddedLanguageData)}equals(e){return e instanceof c&&(!!this.stack.equals(e.stack)&&(null===this.embeddedLanguageData&&null===e.embeddedLanguageData||null!==this.embeddedLanguageData&&null!==e.embeddedLanguageData&&this.embeddedLanguageData.equals(e.embeddedLanguageData)))}}class f{constructor(){this._tokens=[],this._languageId=null,this._lastTokenType=null,this._lastTokenLanguage=null}enterLanguage(e){this._languageId=e}emit(e,t){this._lastTokenType===t&&this._lastTokenLanguage===this._languageId||(this._lastTokenType=t,this._lastTokenLanguage=this._languageId,this._tokens.push(new a.WU(e,t,this._languageId)))}nestedLanguageTokenize(e,t,n,s){const i=n.languageId,r=n.state,l=a.RW.get(i);if(!l)return this.enterLanguage(i),this.emit(s,""),r;const o=l.tokenize(e,t,r);if(0!==s)for(const e of o.tokens)this._tokens.push(new a.WU(e.offset+s,e.type,e.language));else this._tokens=this._tokens.concat(o.tokens);return this._lastTokenType=null,this._lastTokenLanguage=null,this._languageId=null,o.endState}finalize(e){return new a.hG(this._tokens,e)}}class _{constructor(e,t){this._languageService=e,this._theme=t,this._prependTokens=null,this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0}enterLanguage(e){this._currentLanguageId=this._languageService.languageIdCodec.encodeLanguageId(e)}emit(e,t){const n=this._theme.match(this._currentLanguageId,t);this._lastTokenMetadata!==n&&(this._lastTokenMetadata=n,this._tokens.push(e),this._tokens.push(n))}static _merge(e,t,n){const a=null!==e?e.length:0,s=t.length,i=null!==n?n.length:0;if(0===a&&0===s&&0===i)return new Uint32Array(0);if(0===a&&0===s)return n;if(0===s&&0===i)return e;const r=new Uint32Array(a+s+i);null!==e&&r.set(e);for(let e=0;e<s;e++)r[a+e]=t[e];return null!==n&&r.set(n,a+s),r}nestedLanguageTokenize(e,t,n,s){const i=n.languageId,r=n.state,l=a.RW.get(i);if(!l)return this.enterLanguage(i),this.emit(s,""),r;const o=l.tokenizeEncoded(e,t,r);if(0!==s)for(let e=0,t=o.tokens.length;e<t;e+=2)o.tokens[e]+=s;return this._prependTokens=_._merge(this._prependTokens,this._tokens,o.tokens),this._tokens=[],this._currentLanguageId=0,this._lastTokenMetadata=0,o.endState}finalize(e){return new a.DI(_._merge(this._prependTokens,this._tokens,null),e)}}let k=class e{constructor(e,t,n,s,i){this._configurationService=i,this._languageService=e,this._standaloneThemeService=t,this._languageId=n,this._lexer=s,this._embeddedLanguages=Object.create(null),this.embeddedLoaded=Promise.resolve(void 0);let r=!1;this._tokenizationRegistryListener=a.RW.onDidChange((e=>{if(r)return;let t=!1;for(let n=0,a=e.changedLanguages.length;n<a;n++){const a=e.changedLanguages[n];if(this._embeddedLanguages[a]){t=!0;break}}t&&(r=!0,a.RW.fire([this._languageId]),r=!1)})),this._maxTokenizationLineLength=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:this._languageId}),this._configurationService.onDidChangeConfiguration((e=>{e.affectsConfiguration("editor.maxTokenizationLineLength")&&(this._maxTokenizationLineLength=this._configurationService.getValue("editor.maxTokenizationLineLength",{overrideIdentifier:this._languageId}))}))}dispose(){this._tokenizationRegistryListener.dispose()}getLoadStatus(){const t=[];for(const n in this._embeddedLanguages){const s=a.RW.get(n);if(s){if(s instanceof e){const e=s.getLoadStatus();!1===e.loaded&&t.push(e.promise)}}else a.RW.isResolved(n)||t.push(a.RW.getOrCreate(n))}return 0===t.length?{loaded:!0}:{loaded:!1,promise:Promise.all(t).then((e=>{}))}}getInitialState(){const e=u.create(null,this._lexer.start);return d.create(e,null)}tokenize(e,t,n){if(e.length>=this._maxTokenizationLineLength)return(0,s.Ri)(this._languageId,n);const a=new f,i=this._tokenize(e,t,n,a);return a.finalize(i)}tokenizeEncoded(e,t,n){if(e.length>=this._maxTokenizationLineLength)return(0,s.Dy)(this._languageService.languageIdCodec.encodeLanguageId(this._languageId),n);const a=new _(this._languageService,this._standaloneThemeService.getColorTheme().tokenTheme),i=this._tokenize(e,t,n,a);return a.finalize(i)}_tokenize(e,t,n,a){return n.embeddedLanguageData?this._nestedTokenize(e,t,n,0,a):this._myTokenize(e,t,n,0,a)}_findLeavingNestedLanguageOffset(e,t){let n=this._lexer.tokenizer[t.stack.state];if(!n&&(n=i.DG(this._lexer,t.stack.state),!n))throw i.Tr(this._lexer,"tokenizer state is not defined: "+t.stack.state);let a=-1,s=!1;for(const t of n){if(!i.j(t.action)||"@pop"!==t.action.nextEmbedded)continue;s=!0;let n=t.regex;const r=t.regex.source;if("^(?:"===r.substr(0,4)&&")"===r.substr(r.length-1,1)){const e=(n.ignoreCase?"i":"")+(n.unicode?"u":"");n=new RegExp(r.substr(4,r.length-5),e)}const l=e.search(n);-1===l||0!==l&&t.matchOnlyAtLineStart||(-1===a||l<a)&&(a=l)}if(!s)throw i.Tr(this._lexer,'no rule containing nextEmbedded: "@pop" in tokenizer embedded state: '+t.stack.state);return a}_nestedTokenize(e,t,n,a,s){const i=this._findLeavingNestedLanguageOffset(e,n);if(-1===i){const i=s.nestedLanguageTokenize(e,t,n.embeddedLanguageData,a);return d.create(n.stack,new g(n.embeddedLanguageData.languageId,i))}const r=e.substring(0,i);r.length>0&&s.nestedLanguageTokenize(r,!1,n.embeddedLanguageData,a);const l=e.substring(i);return this._myTokenize(l,t,n,a+i,s)}_safeRuleName(e){return e?e.name:"(unknown)"}_myTokenize(e,t,n,a,s){s.enterLanguage(this._languageId);const r=e.length,l=t&&this._lexer.includeLF?e+"\n":e,o=l.length;let u=n.embeddedLanguageData,h=n.stack,g=0,c=null,f=!0;for(;f||g<o;){const n=g,_=h.depth,k=c?c.groups.length:0,m=h.state;let L=null,T=null,b=null,x=null,w=null;if(c){L=c.matches;const e=c.groups.shift();T=e.matched,b=e.action,x=c.rule,0===c.groups.length&&(c=null)}else{if(!f&&g>=o)break;f=!1;let e=this._lexer.tokenizer[m];if(!e&&(e=i.DG(this._lexer,m),!e))throw i.Tr(this._lexer,"tokenizer state is not defined: "+m);const t=l.substr(g);for(const n of e)if((0===g||!n.matchOnlyAtLineStart)&&(L=t.match(n.regex),L)){T=L[0],b=n.action;break}}if(L||(L=[""],T=""),b||(g<o&&(L=[l.charAt(g)],T=L[0]),b=this._lexer.defaultToken),null===T)break;for(g+=T.length;i.v5(b)&&i.j(b)&&b.test;)b=b.test(T,L,m,g===o);let I=null;if("string"==typeof b||Array.isArray(b))I=b;else if(b.group)I=b.group;else if(null!==b.token&&void 0!==b.token){if(I=b.tokenSubst?i.kF(this._lexer,b.token,T,L,m):b.token,b.nextEmbedded)if("@pop"===b.nextEmbedded){if(!u)throw i.Tr(this._lexer,"cannot pop embedded language if not inside one");u=null}else{if(u)throw i.Tr(this._lexer,"cannot enter embedded language from within an embedded language");w=i.kF(this._lexer,b.nextEmbedded,T,L,m)}if(b.goBack&&(g=Math.max(0,g-b.goBack)),b.switchTo&&"string"==typeof b.switchTo){let e=i.kF(this._lexer,b.switchTo,T,L,m);if("@"===e[0]&&(e=e.substr(1)),!i.DG(this._lexer,e))throw i.Tr(this._lexer,"trying to switch to a state '"+e+"' that is undefined in rule: "+this._safeRuleName(x));h=h.switchTo(e)}else{if(b.transform&&"function"==typeof b.transform)throw i.Tr(this._lexer,"action.transform not supported");if(b.next)if("@push"===b.next){if(h.depth>=this._lexer.maxStack)throw i.Tr(this._lexer,"maximum tokenizer stack size reached: ["+h.state+","+h.parent.state+",...]");h=h.push(m)}else if("@pop"===b.next){if(h.depth<=1)throw i.Tr(this._lexer,"trying to pop an empty stack in rule: "+this._safeRuleName(x));h=h.pop()}else if("@popall"===b.next)h=h.popall();else{let e=i.kF(this._lexer,b.next,T,L,m);if("@"===e[0]&&(e=e.substr(1)),!i.DG(this._lexer,e))throw i.Tr(this._lexer,"trying to set a next state '"+e+"' that is undefined in rule: "+this._safeRuleName(x));h=h.push(e)}}b.log&&"string"==typeof b.log&&i.cM(this._lexer,this._lexer.languageId+": "+i.kF(this._lexer,b.log,T,L,m))}if(null===I)throw i.Tr(this._lexer,"lexer rule has no well-defined action in rule: "+this._safeRuleName(x));const z=n=>{const i=this._languageService.getLanguageIdByLanguageName(n)||this._languageService.getLanguageIdByMimeType(n)||n,r=this._getNestedEmbeddedLanguageData(i);if(g<o){const n=e.substr(g);return this._nestedTokenize(n,t,d.create(h,r),a+g,s)}return d.create(h,r)};if(Array.isArray(I)){if(c&&c.groups.length>0)throw i.Tr(this._lexer,"groups cannot be nested: "+this._safeRuleName(x));if(L.length!==I.length+1)throw i.Tr(this._lexer,"matched number of groups does not match the number of actions in rule: "+this._safeRuleName(x));let e=0;for(let t=1;t<L.length;t++)e+=L[t].length;if(e!==T.length)throw i.Tr(this._lexer,"with groups, all characters should be matched in consecutive groups in rule: "+this._safeRuleName(x));c={rule:x,matches:L,groups:[]};for(let e=0;e<I.length;e++)c.groups[e]={action:I[e],matched:L[e+1]};g-=T.length}else{{if("@rematch"===I&&(g-=T.length,T="",L=null,I="",null!==w))return z(w);if(0===T.length){if(0===o||_!==h.depth||m!==h.state||(c?c.groups.length:0)!==k)continue;throw i.Tr(this._lexer,"no progress in tokenizer in rule: "+this._safeRuleName(x))}let e=null;if(i.HD(I)&&0===I.indexOf("@brackets")){const t=I.substr("@brackets".length),n=p(this._lexer,T);if(!n)throw i.Tr(this._lexer,"@brackets token returned but no bracket defined as: "+T);e=i.Nw(n.token+t)}else{const t=""===I?"":I+this._lexer.tokenPostfix;e=i.Nw(t)}n<r&&s.emit(n+a,e)}if(null!==w)return z(w)}}return d.create(h,u)}_getNestedEmbeddedLanguageData(e){if(!this._languageService.isRegisteredLanguageId(e))return new g(e,s.TJ);e!==this._languageId&&(a.RW.getOrCreate(e),this._embeddedLanguages[e]=!0);const t=a.RW.get(e);return new g(e,t?t.getInitialState():s.TJ)}};function p(e,t){if(!t)return null;t=i.ve(e,t);const n=e.brackets;for(const e of n){if(e.open===t)return{token:e.token,bracketType:1};if(e.close===t)return{token:e.token,bracketType:-1}}return null}k=l([o(4,r.Ui)],k)},96444:function(e,t,n){n.d(t,{Z:function(){return a}});const a=(0,n(44333).yh)("themeService")}}]);