"use strict";(self.webpackChunkapp_template_builder=self.webpackChunkapp_template_builder||[]).push([[2775],{48723:function(e,t,i){i.d(t,{u:function(){return o}});var n=i(7487),r=i(6622);class o extends n.CH{constructor(e,t,i,n,r,o={}){super(e,t,i,n,o),this.user=e,this.dataSource=r,this.identityProvider=o.identityProvider}createModel(e,t,i){return new r.F(e,t,i)}}},56402:function(e,t,i){i.d(t,{X:function(){return p},aG:function(){return h},gB:function(){return a}});var n=i(16201),r=i(16308),o=i(13484),s=i(99731),l=i(56709),d=i(97865);function a(e){return"object"==typeof e&&"visibility"in e&&"data"in e}function h(e){switch(e){case!0:return 1;case!1:return 0;default:return e}}function c(e){return"boolean"==typeof e.collapsible}class p{constructor(e,t,i,n={}){this.user=e,this.list=t,this.rootRef=[],this.eventBufferer=new l.E7,this._onDidChangeCollapseState=new l.Q5,this.onDidChangeCollapseState=this.eventBufferer.wrapEvent(this._onDidChangeCollapseState.event),this._onDidChangeRenderNodeCount=new l.Q5,this.onDidChangeRenderNodeCount=this.eventBufferer.wrapEvent(this._onDidChangeRenderNodeCount.event),this._onDidSplice=new l.Q5,this.onDidSplice=this._onDidSplice.event,this.refilterDelayer=new o.vp(o.ne),this.collapseByDefault=void 0!==n.collapseByDefault&&n.collapseByDefault,this.filter=n.filter,this.autoExpandSingleChildren=void 0!==n.autoExpandSingleChildren&&n.autoExpandSingleChildren,this.root={parent:void 0,element:i,children:[],depth:0,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:!1,collapsed:!1,renderNodeCount:0,visibility:1,visible:!0,filterData:void 0}}splice(e,t,i=d.$.empty(),r={}){if(0===e.length)throw new n.ac(this.user,"Invalid tree location");r.diffIdentityProvider?this.spliceSmart(r.diffIdentityProvider,e,t,i,r):this.spliceSimple(e,t,i,r)}spliceSmart(e,t,i,n,r,o){var l;void 0===n&&(n=d.$.empty()),void 0===o&&(o=null!==(l=r.diffDepth)&&void 0!==l?l:0);const{parentNode:a}=this.getParentNodeWithListIndex(t);if(!a.lastDiffIds)return this.spliceSimple(t,i,n,r);const h=[...n],c=t[t.length-1],p=new s.Hs({getElements:()=>a.lastDiffIds},{getElements:()=>[...a.children.slice(0,c),...h,...a.children.slice(c+i)].map((t=>e.getId(t.element).toString()))}).ComputeDiff(!1);if(p.quitEarly)return a.lastDiffIds=void 0,this.spliceSimple(t,i,h,r);const u=t.slice(0,-1),f=(t,i,n)=>{if(o>0)for(let s=0;s<n;s++)t--,i--,this.spliceSmart(e,[...u,t,0],Number.MAX_SAFE_INTEGER,h[i].children,r,o-1)};let g=Math.min(a.children.length,c+i),m=h.length;for(const e of p.changes.sort(((e,t)=>t.originalStart-e.originalStart)))f(g,m,g-(e.originalStart+e.originalLength)),g=e.originalStart,m=e.modifiedStart-c,this.spliceSimple([...u,g],e.originalLength,d.$.slice(h,m,m+e.modifiedLength),r);f(g,m,g)}spliceSimple(e,t,i=d.$.empty(),{onDidCreateNode:n,onDidDeleteNode:o,diffIdentityProvider:s}){const{parentNode:l,listIndex:a,revealed:h,visible:c}=this.getParentNodeWithListIndex(e),p=[],u=d.$.map(i,(e=>this.createTreeNode(e,l,l.visible?1:0,h,p,n))),f=e[e.length-1],g=l.children.length>0;let m=0;for(let e=f;e>=0&&e<l.children.length;e--){const t=l.children[e];if(t.visible){m=t.visibleChildIndex;break}}const v=[];let C=0,N=0;for(const e of u)v.push(e),N+=e.renderNodeCount,e.visible&&(e.visibleChildIndex=m+C++);const b=(0,r.db)(l.children,f,t,v);s?l.lastDiffIds?(0,r.db)(l.lastDiffIds,f,t,v.map((e=>s.getId(e.element).toString()))):l.lastDiffIds=l.children.map((e=>s.getId(e.element).toString())):l.lastDiffIds=void 0;let y=0;for(const e of b)e.visible&&y++;if(0!==y)for(let e=f+v.length;e<l.children.length;e++){const t=l.children[e];t.visible&&(t.visibleChildIndex-=y)}if(l.visibleChildrenCount+=C-y,h&&c){const e=b.reduce(((e,t)=>e+(t.visible?t.renderNodeCount:0)),0);this._updateAncestorsRenderNodeCount(l,N-e),this.list.splice(a,e,p)}if(b.length>0&&o){const e=t=>{o(t),t.children.forEach(e)};b.forEach(e)}this._onDidSplice.fire({insertedNodes:v,deletedNodes:b});const w=l.children.length>0;g!==w&&this.setCollapsible(e.slice(0,-1),w);let S=l;for(;S;){if(2===S.visibility){this.refilterDelayer.trigger((()=>this.refilter()));break}S=S.parent}}rerender(e){if(0===e.length)throw new n.ac(this.user,"Invalid tree location");const{node:t,listIndex:i,revealed:r}=this.getTreeNodeWithListIndex(e);t.visible&&r&&this.list.splice(i,1,[t])}has(e){return this.hasTreeNode(e)}getListIndex(e){const{listIndex:t,visible:i,revealed:n}=this.getTreeNodeWithListIndex(e);return i&&n?t:-1}getListRenderCount(e){return this.getTreeNode(e).renderNodeCount}isCollapsible(e){return this.getTreeNode(e).collapsible}setCollapsible(e,t){const i=this.getTreeNode(e);void 0===t&&(t=!i.collapsible);const n={collapsible:t};return this.eventBufferer.bufferEvents((()=>this._setCollapseState(e,n)))}isCollapsed(e){return this.getTreeNode(e).collapsed}setCollapsed(e,t,i){const n=this.getTreeNode(e);void 0===t&&(t=!n.collapsed);const r={collapsed:t,recursive:i||!1};return this.eventBufferer.bufferEvents((()=>this._setCollapseState(e,r)))}_setCollapseState(e,t){const{node:i,listIndex:n,revealed:r}=this.getTreeNodeWithListIndex(e),o=this._setListNodeCollapseState(i,n,r,t);if(i!==this.root&&this.autoExpandSingleChildren&&o&&!c(t)&&i.collapsible&&!i.collapsed&&!t.recursive){let n=-1;for(let e=0;e<i.children.length;e++){if(i.children[e].visible){if(n>-1){n=-1;break}n=e}}n>-1&&this._setCollapseState([...e,n],t)}return o}_setListNodeCollapseState(e,t,i,n){const r=this._setNodeCollapseState(e,n,!1);if(!i||!e.visible||!r)return r;const o=e.renderNodeCount,s=this.updateNodeAfterCollapseChange(e),l=o-(-1===t?0:1);return this.list.splice(t+1,l,s.slice(1)),r}_setNodeCollapseState(e,t,i){let n;if(e===this.root?n=!1:(c(t)?(n=e.collapsible!==t.collapsible,e.collapsible=t.collapsible):e.collapsible?(n=e.collapsed!==t.collapsed,e.collapsed=t.collapsed):n=!1,n&&this._onDidChangeCollapseState.fire({node:e,deep:i})),!c(t)&&t.recursive)for(const i of e.children)n=this._setNodeCollapseState(i,t,!0)||n;return n}expandTo(e){this.eventBufferer.bufferEvents((()=>{let t=this.getTreeNode(e);for(;t.parent;)t=t.parent,e=e.slice(0,e.length-1),t.collapsed&&this._setCollapseState(e,{collapsed:!1,recursive:!1})}))}refilter(){const e=this.root.renderNodeCount,t=this.updateNodeAfterFilterChange(this.root);this.list.splice(0,e,t),this.refilterDelayer.cancel()}createTreeNode(e,t,i,n,r,o){const s={parent:t,element:e.element,children:[],depth:t.depth+1,visibleChildrenCount:0,visibleChildIndex:-1,collapsible:"boolean"==typeof e.collapsible?e.collapsible:void 0!==e.collapsed,collapsed:void 0===e.collapsed?this.collapseByDefault:e.collapsed,renderNodeCount:1,visibility:1,visible:!0,filterData:void 0},l=this._filterNode(s,i);s.visibility=l,n&&r.push(s);const a=e.children||d.$.empty(),h=n&&0!==l&&!s.collapsed,c=d.$.map(a,(e=>this.createTreeNode(e,s,l,h,r,o)));let p=0,u=1;for(const e of c)s.children.push(e),u+=e.renderNodeCount,e.visible&&(e.visibleChildIndex=p++);return s.collapsible=s.collapsible||s.children.length>0,s.visibleChildrenCount=p,s.visible=2===l?p>0:1===l,s.visible?s.collapsed||(s.renderNodeCount=u):(s.renderNodeCount=0,n&&r.pop()),null==o||o(s),s}updateNodeAfterCollapseChange(e){const t=e.renderNodeCount,i=[];return this._updateNodeAfterCollapseChange(e,i),this._updateAncestorsRenderNodeCount(e.parent,i.length-t),i}_updateNodeAfterCollapseChange(e,t){if(!1===e.visible)return 0;if(t.push(e),e.renderNodeCount=1,!e.collapsed)for(const i of e.children)e.renderNodeCount+=this._updateNodeAfterCollapseChange(i,t);return this._onDidChangeRenderNodeCount.fire(e),e.renderNodeCount}updateNodeAfterFilterChange(e){const t=e.renderNodeCount,i=[];return this._updateNodeAfterFilterChange(e,e.visible?1:0,i),this._updateAncestorsRenderNodeCount(e.parent,i.length-t),i}_updateNodeAfterFilterChange(e,t,i,n=!0){let r;if(e!==this.root){if(r=this._filterNode(e,t),0===r)return e.visible=!1,e.renderNodeCount=0,!1;n&&i.push(e)}const o=i.length;e.renderNodeCount=e===this.root?0:1;let s=!1;if(e.collapsed&&0===r)e.visibleChildrenCount=0;else{let t=0;for(const o of e.children)s=this._updateNodeAfterFilterChange(o,r,i,n&&!e.collapsed)||s,o.visible&&(o.visibleChildIndex=t++);e.visibleChildrenCount=t}return e!==this.root&&(e.visible=2===r?s:1===r,e.visibility=r),e.visible?e.collapsed||(e.renderNodeCount+=i.length-o):(e.renderNodeCount=0,n&&i.pop()),this._onDidChangeRenderNodeCount.fire(e),e.visible}_updateAncestorsRenderNodeCount(e,t){if(0!==t)for(;e;)e.renderNodeCount+=t,this._onDidChangeRenderNodeCount.fire(e),e=e.parent}_filterNode(e,t){const i=this.filter?this.filter.filter(e.element,t):1;return"boolean"==typeof i?(e.filterData=void 0,i?1:0):a(i)?(e.filterData=i.data,h(i.visibility)):(e.filterData=void 0,h(i))}hasTreeNode(e,t=this.root){if(!e||0===e.length)return!0;const[i,...n]=e;return!(i<0||i>t.children.length)&&this.hasTreeNode(n,t.children[i])}getTreeNode(e,t=this.root){if(!e||0===e.length)return t;const[i,...r]=e;if(i<0||i>t.children.length)throw new n.ac(this.user,"Invalid tree location");return this.getTreeNode(r,t.children[i])}getTreeNodeWithListIndex(e){if(0===e.length)return{node:this.root,listIndex:-1,revealed:!0,visible:!1};const{parentNode:t,listIndex:i,revealed:r,visible:o}=this.getParentNodeWithListIndex(e),s=e[e.length-1];if(s<0||s>t.children.length)throw new n.ac(this.user,"Invalid tree location");const l=t.children[s];return{node:l,listIndex:i,revealed:r,visible:o&&l.visible}}getParentNodeWithListIndex(e,t=this.root,i=0,r=!0,o=!0){const[s,...l]=e;if(s<0||s>t.children.length)throw new n.ac(this.user,"Invalid tree location");for(let e=0;e<s;e++)i+=t.children[e].renderNodeCount;return r=r&&!t.collapsed,o=o&&t.visible,0===l.length?{parentNode:t,listIndex:i,revealed:r,visible:o}:this.getParentNodeWithListIndex(l,t.children[s],i+1,r,o)}getNode(e=[]){return this.getTreeNode(e)}getNodeLocation(e){const t=[];let i=e;for(;i.parent;)t.push(i.parent.children.indexOf(i)),i=i.parent;return t.reverse()}getParentNodeLocation(e){return 0===e.length?void 0:1===e.length?[]:(0,r.JH)(e)[0]}getFirstElementChild(e){const t=this.getTreeNode(e);if(0!==t.children.length)return t.children[0].element}}},54161:function(e,t,i){i.d(t,{H:function(){return a},h:function(){return c}});var n=i(7487),r=i(87302),o=i(6622),s=i(4848),l=i(97865),d=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var l=e.length-1;l>=0;l--)(r=e[l])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s};class a extends n.CH{constructor(e,t,i,n,r={}){super(e,t,i,n,r),this.user=e}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}setChildren(e,t=l.$.empty(),i){this.model.setChildren(e,t,i)}rerender(e){void 0!==e?this.model.rerender(e):this.view.rerender()}hasElement(e){return this.model.has(e)}createModel(e,t,i){return new o.F(e,t,i)}}class h{constructor(e,t){this._compressedTreeNodeProvider=e,this.renderer=t,this.templateId=t.templateId,t.onDidChangeTwistieState&&(this.onDidChangeTwistieState=t.onDidChangeTwistieState)}get compressedTreeNodeProvider(){return this._compressedTreeNodeProvider()}renderTemplate(e){return{compressedTreeNode:void 0,data:this.renderer.renderTemplate(e)}}renderElement(e,t,i,n){const r=this.compressedTreeNodeProvider.getCompressedTreeNode(e.element);1===r.element.elements.length?(i.compressedTreeNode=void 0,this.renderer.renderElement(e,t,i.data,n)):(i.compressedTreeNode=r,this.renderer.renderCompressedElements(r,t,i.data,n))}disposeElement(e,t,i,n){var r,o,s,l;i.compressedTreeNode?null===(o=(r=this.renderer).disposeCompressedElements)||void 0===o||o.call(r,i.compressedTreeNode,t,i.data,n):null===(l=(s=this.renderer).disposeElement)||void 0===l||l.call(s,e,t,i.data,n)}disposeTemplate(e){this.renderer.disposeTemplate(e.data)}renderTwistie(e,t){return!!this.renderer.renderTwistie&&this.renderer.renderTwistie(e,t)}}d([s.H],h.prototype,"compressedTreeNodeProvider",null);class c extends a{constructor(e,t,i,n,r={}){const o=()=>this;super(e,t,i,n.map((e=>new h(o,e))),function(e,t){return t&&Object.assign(Object.assign({},t),{keyboardNavigationLabelProvider:t.keyboardNavigationLabelProvider&&{getKeyboardNavigationLabel(i){let n;try{n=e().getCompressedTreeNode(i)}catch(e){return t.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(i)}return 1===n.element.elements.length?t.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(i):t.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(n.element.elements)}}})}(o,r))}setChildren(e,t=l.$.empty(),i){this.model.setChildren(e,t,i)}createModel(e,t,i){return new r.UE(e,t,i)}updateOptions(e={}){super.updateOptions(e),void 0!==e.compressionEnabled&&this.model.setCompressionEnabled(e.compressionEnabled)}getCompressedTreeNode(e=null){return this.model.getCompressedTreeNode(e)}}},6622:function(e,t,i){i.d(t,{F:function(){return s}});var n=i(56402),r=i(16201),o=i(97865);class s{constructor(e,t,i={}){this.user=e,this.rootRef=null,this.nodes=new Map,this.nodesByIdentity=new Map,this.model=new n.X(e,t,null,i),this.onDidSplice=this.model.onDidSplice,this.onDidChangeCollapseState=this.model.onDidChangeCollapseState,this.onDidChangeRenderNodeCount=this.model.onDidChangeRenderNodeCount,i.sorter&&(this.sorter={compare(e,t){return i.sorter.compare(e.element,t.element)}}),this.identityProvider=i.identityProvider}setChildren(e,t=o.$.empty(),i={}){const n=this.getElementLocation(e);this._setChildren(n,this.preserveCollapseState(t),i)}_setChildren(e,t=o.$.empty(),i){const n=new Set,r=new Set;this.model.splice([...e,0],Number.MAX_VALUE,t,Object.assign(Object.assign({},i),{onDidCreateNode:e=>{var t;if(null===e.element)return;const o=e;if(n.add(o.element),this.nodes.set(o.element,o),this.identityProvider){const e=this.identityProvider.getId(o.element).toString();r.add(e),this.nodesByIdentity.set(e,o)}null===(t=i.onDidCreateNode)||void 0===t||t.call(i,o)},onDidDeleteNode:e=>{var t;if(null===e.element)return;const o=e;if(n.has(o.element)||this.nodes.delete(o.element),this.identityProvider){const e=this.identityProvider.getId(o.element).toString();r.has(e)||this.nodesByIdentity.delete(e)}null===(t=i.onDidDeleteNode)||void 0===t||t.call(i,o)}}))}preserveCollapseState(e=o.$.empty()){return this.sorter&&(e=[...e].sort(this.sorter.compare.bind(this.sorter))),o.$.map(e,(e=>{let t=this.nodes.get(e.element);if(!t&&this.identityProvider){const i=this.identityProvider.getId(e.element).toString();t=this.nodesByIdentity.get(i)}if(!t)return Object.assign(Object.assign({},e),{children:this.preserveCollapseState(e.children)});const i="boolean"==typeof e.collapsible?e.collapsible:t.collapsible,n=void 0!==e.collapsed?e.collapsed:t.collapsed;return Object.assign(Object.assign({},e),{collapsible:i,collapsed:n,children:this.preserveCollapseState(e.children)})}))}rerender(e){const t=this.getElementLocation(e);this.model.rerender(t)}getFirstElementChild(e=null){const t=this.getElementLocation(e);return this.model.getFirstElementChild(t)}has(e){return this.nodes.has(e)}getListIndex(e){const t=this.getElementLocation(e);return this.model.getListIndex(t)}getListRenderCount(e){const t=this.getElementLocation(e);return this.model.getListRenderCount(t)}isCollapsible(e){const t=this.getElementLocation(e);return this.model.isCollapsible(t)}setCollapsible(e,t){const i=this.getElementLocation(e);return this.model.setCollapsible(i,t)}isCollapsed(e){const t=this.getElementLocation(e);return this.model.isCollapsed(t)}setCollapsed(e,t,i){const n=this.getElementLocation(e);return this.model.setCollapsed(n,t,i)}expandTo(e){const t=this.getElementLocation(e);this.model.expandTo(t)}refilter(){this.model.refilter()}getNode(e=null){if(null===e)return this.model.getNode(this.model.rootRef);const t=this.nodes.get(e);if(!t)throw new r.ac(this.user,`Tree element not found: ${e}`);return t}getNodeLocation(e){return e.element}getParentNodeLocation(e){if(null===e)throw new r.ac(this.user,"Invalid getParentNodeLocation call");const t=this.nodes.get(e);if(!t)throw new r.ac(this.user,`Tree element not found: ${e}`);const i=this.model.getNodeLocation(t),n=this.model.getParentNodeLocation(i);return this.model.getNode(n).element}getElementLocation(e){if(null===e)return[];const t=this.nodes.get(e);if(!t)throw new r.ac(this.user,`Tree element not found: ${e}`);return this.model.getNodeLocation(t)}}},16201:function(e,t,i){var n;i.d(t,{VA:function(){return o},ac:function(){return r},sD:function(){return n}}),function(e){e[e.Unknown=0]="Unknown",e[e.Twistie=1]="Twistie",e[e.Element=2]="Element",e[e.Filter=3]="Filter"}(n||(n={}));class r extends Error{constructor(e,t){super(`TreeError [${e}] ${t}`)}}class o{constructor(e){this.fn=e,this._map=new WeakMap}map(e){let t=this._map.get(e);return t||(t=this.fn(e),this._map.set(e,t)),t}}},88305:function(e,t,i){i.d(t,{$:function(){return d}});var n=i(34441),r=i(6544),o=i(24677),s=i(80265),l=i(38431);class d extends l.JT{onclick(e,t){this._register(n.nm(e,n.tw.CLICK,(e=>t(new o.n(e)))))}onmousedown(e,t){this._register(n.nm(e,n.tw.MOUSE_DOWN,(e=>t(new o.n(e)))))}onmouseover(e,t){this._register(n.nm(e,n.tw.MOUSE_OVER,(e=>t(new o.n(e)))))}onmouseleave(e,t){this._register(n.nm(e,n.tw.MOUSE_LEAVE,(e=>t(new o.n(e)))))}onkeydown(e,t){this._register(n.nm(e,n.tw.KEY_DOWN,(e=>t(new r.y(e)))))}onkeyup(e,t){this._register(n.nm(e,n.tw.KEY_UP,(e=>t(new r.y(e)))))}oninput(e,t){this._register(n.nm(e,n.tw.INPUT,t))}onblur(e,t){this._register(n.nm(e,n.tw.BLUR,t))}onfocus(e,t){this._register(n.nm(e,n.tw.FOCUS,t))}ignoreGesture(e){s.o.ignoreTarget(e)}}}}]);