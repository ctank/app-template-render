"use strict";(self.webpackChunkapp_template_builder=self.webpackChunkapp_template_builder||[]).push([[9729],{20303:function(t,e,n){n.d(e,{Iq:function(){return p},ZP:function(){return m},rp:function(){return N},sB:function(){return g}});var i,o=n(31396),r=n(85253),s=n(11159),l=n(8964),a=n(50038),u=n(61669),c=n(34441),f=n(81831);class h{constructor(t=null){this.hitTarget=t,this.type=0}}class d{constructor(t,e,n){this.position=t,this.spanNode=e,this.injectedText=n,this.type=1}}!function(t){t.createFromDOMInfo=function(t,e,n){const i=t.getPositionFromDOMInfo(e,n);return i?new d(i,e,null):new h(e)}}(i||(i={}));class g{constructor(t,e){this.lastViewCursorsRenderData=t,this.lastTextareaPosition=e}}class m{static _deduceRage(t,e=null){return!e&&t?new a.e(t.lineNumber,t.column,t.lineNumber,t.column):null!=e?e:null}static createUnknown(t,e,n){return{type:0,element:t,mouseColumn:e,position:n,range:this._deduceRage(n)}}static createTextarea(t,e){return{type:1,element:t,mouseColumn:e,position:null,range:null}}static createMargin(t,e,n,i,o,r){return{type:t,element:e,mouseColumn:n,position:i,range:o,detail:r}}static createViewZone(t,e,n,i,o){return{type:t,element:e,mouseColumn:n,position:i,range:this._deduceRage(i),detail:o}}static createContentText(t,e,n,i,o){return{type:6,element:t,mouseColumn:e,position:n,range:this._deduceRage(n,i),detail:o}}static createContentEmpty(t,e,n,i){return{type:7,element:t,mouseColumn:e,position:n,range:this._deduceRage(n),detail:i}}static createContentWidget(t,e,n){return{type:9,element:t,mouseColumn:e,position:null,range:null,detail:n}}static createScrollbar(t,e,n){return{type:11,element:t,mouseColumn:e,position:n,range:this._deduceRage(n)}}static createOverlayWidget(t,e,n){return{type:12,element:t,mouseColumn:e,position:null,range:null,detail:n}}static createOutsideEditor(t,e){return{type:13,element:null,mouseColumn:t,position:e,range:this._deduceRage(e)}}static _typeToString(t){return 1===t?"TEXTAREA":2===t?"GUTTER_GLYPH_MARGIN":3===t?"GUTTER_LINE_NUMBERS":4===t?"GUTTER_LINE_DECORATIONS":5===t?"GUTTER_VIEW_ZONE":6===t?"CONTENT_TEXT":7===t?"CONTENT_EMPTY":8===t?"CONTENT_VIEW_ZONE":9===t?"CONTENT_WIDGET":10===t?"OVERVIEW_RULER":11===t?"SCROLLBAR":12===t?"OVERLAY_WIDGET":"UNKNOWN"}static toString(t){return this._typeToString(t.type)+": "+t.position+" - "+t.range+" - "+JSON.stringify(t.detail)}}class C{static isTextArea(t){return 2===t.length&&3===t[0]&&6===t[1]}static isChildOfViewLines(t){return t.length>=4&&3===t[0]&&7===t[3]}static isStrictChildOfViewLines(t){return t.length>4&&3===t[0]&&7===t[3]}static isChildOfScrollableElement(t){return t.length>=2&&3===t[0]&&5===t[1]}static isChildOfMinimap(t){return t.length>=2&&3===t[0]&&8===t[1]}static isChildOfContentWidgets(t){return t.length>=4&&3===t[0]&&1===t[3]}static isChildOfOverflowingContentWidgets(t){return t.length>=1&&2===t[0]}static isChildOfOverlayWidgets(t){return t.length>=2&&3===t[0]&&4===t[1]}}class p{constructor(t,e,n){this.viewModel=t.viewModel;const i=t.configuration.options;this.layoutInfo=i.get(133),this.viewDomNode=e.viewDomNode,this.lineHeight=i.get(61),this.stickyTabStops=i.get(106),this.typicalHalfwidthCharacterWidth=i.get(46).typicalHalfwidthCharacterWidth,this.lastRenderData=n,this._context=t,this._viewHelper=e}getZoneAtCoord(t){return p.getZoneAtCoord(this._context,t)}static getZoneAtCoord(t,e){const n=t.viewLayout.getWhitespaceAtVerticalOffset(e);if(n){const i=n.verticalOffset+n.height/2,o=t.viewModel.getLineCount();let r,s=null,a=null;return n.afterLineNumber!==o&&(a=new l.L(n.afterLineNumber+1,1)),n.afterLineNumber>0&&(s=new l.L(n.afterLineNumber,t.viewModel.getLineMaxColumn(n.afterLineNumber))),r=null===a?s:null===s?a:e<i?s:a,{viewZoneId:n.id,afterLineNumber:n.afterLineNumber,positionBefore:s,positionAfter:a,position:r}}return null}getFullLineRangeAtCoord(t){if(this._context.viewLayout.isAfterLines(t)){const t=this._context.viewModel.getLineCount(),e=this._context.viewModel.getLineMaxColumn(t);return{range:new a.e(t,e,t,e),isAfterLines:!0}}const e=this._context.viewLayout.getLineNumberAtVerticalOffset(t),n=this._context.viewModel.getLineMaxColumn(e);return{range:new a.e(e,1,e,n),isAfterLines:!1}}getLineNumberAtVerticalOffset(t){return this._context.viewLayout.getLineNumberAtVerticalOffset(t)}isAfterLines(t){return this._context.viewLayout.isAfterLines(t)}isInTopPadding(t){return this._context.viewLayout.isInTopPadding(t)}isInBottomPadding(t){return this._context.viewLayout.isInBottomPadding(t)}getVerticalOffsetForLineNumber(t){return this._context.viewLayout.getVerticalOffsetForLineNumber(t)}findAttribute(t,e){return p._findAttribute(t,e,this._viewHelper.viewDomNode)}static _findAttribute(t,e,n){for(;t&&t!==document.body;){if(t.hasAttribute&&t.hasAttribute(e))return t.getAttribute(e);if(t===n)return null;t=t.parentNode}return null}getLineWidth(t){return this._viewHelper.getLineWidth(t)}visibleRangeForPosition(t,e){return this._viewHelper.visibleRangeForPosition(t,e)}getPositionFromDOMInfo(t,e){return this._viewHelper.getPositionFromDOMInfo(t,e)}getCurrentScrollTop(){return this._context.viewLayout.getCurrentScrollTop()}getCurrentScrollLeft(){return this._context.viewLayout.getCurrentScrollLeft()}}class w extends class{constructor(t,e,n,i){this.editorPos=e,this.pos=n,this.relativePos=i,this.mouseVerticalOffset=Math.max(0,t.getCurrentScrollTop()+this.relativePos.y),this.mouseContentHorizontalOffset=t.getCurrentScrollLeft()+this.relativePos.x-t.layoutInfo.contentLeft,this.isInMarginArea=this.relativePos.x<t.layoutInfo.contentLeft&&this.relativePos.x>=t.layoutInfo.glyphMarginLeft,this.isInContentArea=!this.isInMarginArea,this.mouseColumn=Math.max(0,N._getMouseColumn(this.mouseContentHorizontalOffset,t.typicalHalfwidthCharacterWidth))}}{constructor(t,e,n,i,o){super(t,e,n,i),this._ctx=t,o?(this.target=o,this.targetPath=r.K.collect(o,t.viewDomNode)):(this.target=null,this.targetPath=new Uint8Array(0))}toString(){return`pos(${this.pos.x},${this.pos.y}), editorPos(${this.editorPos.x},${this.editorPos.y}), relativePos(${this.relativePos.x},${this.relativePos.y}), mouseVerticalOffset: ${this.mouseVerticalOffset}, mouseContentHorizontalOffset: ${this.mouseContentHorizontalOffset}\n\ttarget: ${this.target?this.target.outerHTML:null}`}_getMouseColumn(t=null){return t&&t.column<this._ctx.viewModel.getLineMaxColumn(t.lineNumber)?u.i.visibleColumnFromColumn(this._ctx.viewModel.getLineContent(t.lineNumber),t.column,this._ctx.viewModel.model.getOptions().tabSize)+1:this.mouseColumn}fulfillUnknown(t=null){return m.createUnknown(this.target,this._getMouseColumn(t),t)}fulfillTextarea(){return m.createTextarea(this.target,this._getMouseColumn())}fulfillMargin(t,e,n,i){return m.createMargin(t,this.target,this._getMouseColumn(e),e,n,i)}fulfillViewZone(t,e,n){return m.createViewZone(t,this.target,this._getMouseColumn(e),e,n)}fulfillContentText(t,e,n){return m.createContentText(this.target,this._getMouseColumn(t),t,e,n)}fulfillContentEmpty(t,e){return m.createContentEmpty(this.target,this._getMouseColumn(t),t,e)}fulfillContentWidget(t){return m.createContentWidget(this.target,this._getMouseColumn(),t)}fulfillScrollbar(t){return m.createScrollbar(this.target,this._getMouseColumn(t),t)}fulfillOverlayWidget(t){return m.createOverlayWidget(this.target,this._getMouseColumn(),t)}withTarget(t){return new w(this._ctx,this.editorPos,this.pos,this.relativePos,t)}}const T={isAfterLines:!0};function _(t){return{isAfterLines:!1,horizontalDistanceToText:t}}class N{constructor(t,e){this._context=t,this._viewHelper=e}mouseTargetIsWidget(t){const e=t.target,n=r.K.collect(e,this._viewHelper.viewDomNode);return!(!C.isChildOfContentWidgets(n)&&!C.isChildOfOverflowingContentWidgets(n))||!!C.isChildOfOverlayWidgets(n)}createMouseTarget(t,e,n,i,o){const r=new p(this._context,this._viewHelper,t),s=new w(r,e,n,i,o);try{return N._createMouseTarget(r,s,!1)}catch(t){return s.fulfillUnknown()}}static _createMouseTarget(t,e,n){if(null===e.target){if(n)return e.fulfillUnknown();const i=N._doHitTest(t,e);return 1===i.type?N.createMouseTargetFromHitTestPosition(t,e,i.spanNode,i.position,i.injectedText):this._createMouseTarget(t,e.withTarget(i.hitTarget),!0)}const i=e;let o=null;return o=o||N._hitTestContentWidget(t,i),o=o||N._hitTestOverlayWidget(t,i),o=o||N._hitTestMinimap(t,i),o=o||N._hitTestScrollbarSlider(t,i),o=o||N._hitTestViewZone(t,i),o=o||N._hitTestMargin(t,i),o=o||N._hitTestViewCursor(t,i),o=o||N._hitTestTextArea(t,i),o=o||N._hitTestViewLines(t,i,n),o=o||N._hitTestScrollbar(t,i),o||e.fulfillUnknown()}static _hitTestContentWidget(t,e){if(C.isChildOfContentWidgets(e.targetPath)||C.isChildOfOverflowingContentWidgets(e.targetPath)){const n=t.findAttribute(e.target,"widgetId");return n?e.fulfillContentWidget(n):e.fulfillUnknown()}return null}static _hitTestOverlayWidget(t,e){if(C.isChildOfOverlayWidgets(e.targetPath)){const n=t.findAttribute(e.target,"widgetId");return n?e.fulfillOverlayWidget(n):e.fulfillUnknown()}return null}static _hitTestViewCursor(t,e){if(e.target){const n=t.lastRenderData.lastViewCursorsRenderData;for(const t of n)if(e.target===t.domNode)return e.fulfillContentText(t.position,null,{mightBeForeignElement:!1,injectedText:null})}if(e.isInContentArea){const n=t.lastRenderData.lastViewCursorsRenderData,i=e.mouseContentHorizontalOffset,o=e.mouseVerticalOffset;for(const r of n){if(i<r.contentLeft)continue;if(i>r.contentLeft+r.width)continue;const n=t.getVerticalOffsetForLineNumber(r.position.lineNumber);if(n<=o&&o<=n+r.height)return e.fulfillContentText(r.position,null,{mightBeForeignElement:!1,injectedText:null})}}return null}static _hitTestViewZone(t,e){const n=t.getZoneAtCoord(e.mouseVerticalOffset);if(n){const t=e.isInContentArea?8:5;return e.fulfillViewZone(t,n.position,n)}return null}static _hitTestTextArea(t,e){return C.isTextArea(e.targetPath)?t.lastRenderData.lastTextareaPosition?e.fulfillContentText(t.lastRenderData.lastTextareaPosition,null,{mightBeForeignElement:!1,injectedText:null}):e.fulfillTextarea():null}static _hitTestMargin(t,e){if(e.isInMarginArea){const n=t.getFullLineRangeAtCoord(e.mouseVerticalOffset),i=n.range.getStartPosition();let o=Math.abs(e.relativePos.x);const r={isAfterLines:n.isAfterLines,glyphMarginLeft:t.layoutInfo.glyphMarginLeft,glyphMarginWidth:t.layoutInfo.glyphMarginWidth,lineNumbersWidth:t.layoutInfo.lineNumbersWidth,offsetX:o};return o-=t.layoutInfo.glyphMarginLeft,o<=t.layoutInfo.glyphMarginWidth?e.fulfillMargin(2,i,n.range,r):(o-=t.layoutInfo.glyphMarginWidth,o<=t.layoutInfo.lineNumbersWidth?e.fulfillMargin(3,i,n.range,r):(o-=t.layoutInfo.lineNumbersWidth,e.fulfillMargin(4,i,n.range,r)))}return null}static _hitTestViewLines(t,e,n){if(!C.isChildOfViewLines(e.targetPath))return null;if(t.isInTopPadding(e.mouseVerticalOffset))return e.fulfillContentEmpty(new l.L(1,1),T);if(t.isAfterLines(e.mouseVerticalOffset)||t.isInBottomPadding(e.mouseVerticalOffset)){const n=t.viewModel.getLineCount(),i=t.viewModel.getLineMaxColumn(n);return e.fulfillContentEmpty(new l.L(n,i),T)}if(n){if(C.isStrictChildOfViewLines(e.targetPath)){const n=t.getLineNumberAtVerticalOffset(e.mouseVerticalOffset);if(0===t.viewModel.getLineLength(n)){const i=t.getLineWidth(n),o=_(e.mouseContentHorizontalOffset-i);return e.fulfillContentEmpty(new l.L(n,1),o)}const i=t.getLineWidth(n);if(e.mouseContentHorizontalOffset>=i){const o=_(e.mouseContentHorizontalOffset-i),r=new l.L(n,t.viewModel.getLineMaxColumn(n));return e.fulfillContentEmpty(r,o)}}return e.fulfillUnknown()}const i=N._doHitTest(t,e);return 1===i.type?N.createMouseTargetFromHitTestPosition(t,e,i.spanNode,i.position,i.injectedText):this._createMouseTarget(t,e.withTarget(i.hitTarget),!0)}static _hitTestMinimap(t,e){if(C.isChildOfMinimap(e.targetPath)){const n=t.getLineNumberAtVerticalOffset(e.mouseVerticalOffset),i=t.viewModel.getLineMaxColumn(n);return e.fulfillScrollbar(new l.L(n,i))}return null}static _hitTestScrollbarSlider(t,e){if(C.isChildOfScrollableElement(e.targetPath)&&e.target&&1===e.target.nodeType){const n=e.target.className;if(n&&/\b(slider|scrollbar)\b/.test(n)){const n=t.getLineNumberAtVerticalOffset(e.mouseVerticalOffset),i=t.viewModel.getLineMaxColumn(n);return e.fulfillScrollbar(new l.L(n,i))}}return null}static _hitTestScrollbar(t,e){if(C.isChildOfScrollableElement(e.targetPath)){const n=t.getLineNumberAtVerticalOffset(e.mouseVerticalOffset),i=t.viewModel.getLineMaxColumn(n);return e.fulfillScrollbar(new l.L(n,i))}return null}getMouseColumn(t){const e=this._context.configuration.options,n=e.get(133),i=this._context.viewLayout.getCurrentScrollLeft()+t.x-n.contentLeft;return N._getMouseColumn(i,e.get(46).typicalHalfwidthCharacterWidth)}static _getMouseColumn(t,e){if(t<0)return 1;return Math.round(t/e)+1}static createMouseTargetFromHitTestPosition(t,e,n,i,o){const r=i.lineNumber,s=i.column,u=t.getLineWidth(r);if(e.mouseContentHorizontalOffset>u){const t=_(e.mouseContentHorizontalOffset-u);return e.fulfillContentEmpty(i,t)}const c=t.visibleRangeForPosition(r,s);if(!c)return e.fulfillUnknown(i);const f=c.left;if(e.mouseContentHorizontalOffset===f)return e.fulfillContentText(i,null,{mightBeForeignElement:!!o,injectedText:o});const h=[];if(h.push({offset:c.left,column:s}),s>1){const e=t.visibleRangeForPosition(r,s-1);e&&h.push({offset:e.left,column:s-1})}if(s<t.viewModel.getLineMaxColumn(r)){const e=t.visibleRangeForPosition(r,s+1);e&&h.push({offset:e.left,column:s+1})}h.sort(((t,e)=>t.offset-e.offset));const d=e.pos.toClientCoordinates(),g=n.getBoundingClientRect(),m=g.left<=d.clientX&&d.clientX<=g.right;for(let t=1;t<h.length;t++){const n=h[t-1],i=h[t];if(n.offset<=e.mouseContentHorizontalOffset&&e.mouseContentHorizontalOffset<=i.offset){const t=new a.e(r,n.column,r,i.column),s=Math.abs(n.offset-e.mouseContentHorizontalOffset)<Math.abs(i.offset-e.mouseContentHorizontalOffset)?new l.L(r,n.column):new l.L(r,i.column);return e.fulfillContentText(s,t,{mightBeForeignElement:!m||!!o,injectedText:o})}}return e.fulfillContentText(i,null,{mightBeForeignElement:!m||!!o,injectedText:o})}static _doHitTestWithCaretRangeFromPoint(t,e){const n=t.getLineNumberAtVerticalOffset(e.mouseVerticalOffset),i=t.getVerticalOffsetForLineNumber(n)+Math.floor(t.lineHeight/2);let r=e.pos.y+(i-e.mouseVerticalOffset);r<=e.editorPos.y&&(r=e.editorPos.y+1),r>=e.editorPos.y+e.editorPos.height&&(r=e.editorPos.y+e.editorPos.height-1);const s=new o.YN(e.pos.x,r),l=this._actualDoHitTestWithCaretRangeFromPoint(t,s.toClientCoordinates());return 1===l.type?l:this._actualDoHitTestWithCaretRangeFromPoint(t,e.pos.toClientCoordinates())}static _actualDoHitTestWithCaretRangeFromPoint(t,e){const n=c.Ay(t.viewDomNode);let o;if(o=n?void 0===n.caretRangeFromPoint?function(t,e,n){const i=document.createRange();let o=t.elementFromPoint(e,n);if(null!==o){for(;o&&o.firstChild&&o.firstChild.nodeType!==o.firstChild.TEXT_NODE&&o.lastChild&&o.lastChild.firstChild;)o=o.lastChild;const t=o.getBoundingClientRect(),n=window.getComputedStyle(o,null).getPropertyValue("font"),r=o.innerText;let s,l=t.left,a=0;if(e>t.left+t.width)a=r.length;else{const t=v.getInstance();for(let i=0;i<r.length+1;i++){if(s=t.getCharWidth(r.charAt(i),n)/2,l+=s,e<l){a=i;break}l+=s}}i.setStart(o.firstChild,a),i.setEnd(o.firstChild,a)}return i}(n,e.clientX,e.clientY):n.caretRangeFromPoint(e.clientX,e.clientY):document.caretRangeFromPoint(e.clientX,e.clientY),!o||!o.startContainer)return new h;const r=o.startContainer;if(r.nodeType===r.TEXT_NODE){const e=r.parentNode,n=e?e.parentNode:null,l=n?n.parentNode:null;return(l&&l.nodeType===l.ELEMENT_NODE?l.className:null)===s.Nt.CLASS_NAME?i.createFromDOMInfo(t,e,o.startOffset):new h(r.parentNode)}if(r.nodeType===r.ELEMENT_NODE){const e=r.parentNode,n=e?e.parentNode:null;return(n&&n.nodeType===n.ELEMENT_NODE?n.className:null)===s.Nt.CLASS_NAME?i.createFromDOMInfo(t,r,r.textContent.length):new h(r)}return new h}static _doHitTestWithCaretPositionFromPoint(t,e){const n=document.caretPositionFromPoint(e.clientX,e.clientY);if(n.offsetNode.nodeType===n.offsetNode.TEXT_NODE){const e=n.offsetNode.parentNode,o=e?e.parentNode:null,r=o?o.parentNode:null;return(r&&r.nodeType===r.ELEMENT_NODE?r.className:null)===s.Nt.CLASS_NAME?i.createFromDOMInfo(t,n.offsetNode.parentNode,n.offset):new h(n.offsetNode.parentNode)}if(n.offsetNode.nodeType===n.offsetNode.ELEMENT_NODE){const e=n.offsetNode.parentNode,o=e&&e.nodeType===e.ELEMENT_NODE?e.className:null,r=e?e.parentNode:null,l=r&&r.nodeType===r.ELEMENT_NODE?r.className:null;if(o===s.Nt.CLASS_NAME){const e=n.offsetNode.childNodes[Math.min(n.offset,n.offsetNode.childNodes.length-1)];if(e)return i.createFromDOMInfo(t,e,0)}else if(l===s.Nt.CLASS_NAME)return i.createFromDOMInfo(t,n.offsetNode,0)}return new h(n.offsetNode)}static _snapToSoftTabBoundary(t,e){const n=e.getLineContent(t.lineNumber),{tabSize:i}=e.model.getOptions(),o=f.l.atomicPosition(n,t.column-1,i,2);return-1!==o?new l.L(t.lineNumber,o+1):t}static _doHitTest(t,e){let n=new h;if("function"==typeof document.caretRangeFromPoint?n=this._doHitTestWithCaretRangeFromPoint(t,e):document.caretPositionFromPoint&&(n=this._doHitTestWithCaretPositionFromPoint(t,e.pos.toClientCoordinates())),1===n.type){const e=t.viewModel.getInjectedTextAt(n.position),i=t.viewModel.normalizePosition(n.position,2);!e&&i.equals(n.position)||(n=new d(i,n.spanNode,e))}return 1===n.type&&t.stickyTabStops&&(n=new d(this._snapToSoftTabBoundary(n.position,t.viewModel),n.spanNode,n.injectedText)),n}}class v{constructor(){this._cache={},this._canvas=document.createElement("canvas")}static getInstance(){return v._INSTANCE||(v._INSTANCE=new v),v._INSTANCE}getCharWidth(t,e){const n=t+e;if(this._cache[n])return this._cache[n];const i=this._canvas.getContext("2d");i.font=e;const o=i.measureText(t).width;return this._cache[n]=o,o}}v._INSTANCE=null},46020:function(t,e,n){n.d(e,{a:function(){return d}});var i=n(34441),o=n(11138),r=n(80265),s=n(38431),l=n(94456),a=n(31396),u=n(83092),c=n(10521);class f extends l.S{constructor(t,e,n){super(t,e,n),this._register(r.o.addTarget(this.viewHelper.linesContentDomNode)),this._register(i.nm(this.viewHelper.linesContentDomNode,r.t.Tap,(t=>this.onTap(t)))),this._register(i.nm(this.viewHelper.linesContentDomNode,r.t.Change,(t=>this.onChange(t)))),this._register(i.nm(this.viewHelper.linesContentDomNode,r.t.Contextmenu,(t=>this._onContextMenu(new a.gy(t,!1,this.viewHelper.viewDomNode),!1)))),this._lastPointerType="mouse",this._register(i.nm(this.viewHelper.linesContentDomNode,"pointerdown",(t=>{const e=t.pointerType;this._lastPointerType="mouse"!==e?"touch"===e?"touch":"pen":"mouse"})));const o=new a.tC(this.viewHelper.viewDomNode);this._register(o.onPointerMove(this.viewHelper.viewDomNode,(t=>this._onMouseMove(t)))),this._register(o.onPointerUp(this.viewHelper.viewDomNode,(t=>this._onMouseUp(t)))),this._register(o.onPointerLeave(this.viewHelper.viewDomNode,(t=>this._onMouseLeave(t)))),this._register(o.onPointerDown(this.viewHelper.viewDomNode,((t,e)=>this._onMouseDown(t,e))))}onTap(t){if(!t.initialTarget||!this.viewHelper.linesContentDomNode.contains(t.initialTarget))return;t.preventDefault(),this.viewHelper.focusTextArea();const e=this._createMouseTarget(new a.gy(t,!1,this.viewHelper.viewDomNode),!1);e.position&&this.viewController.dispatchMouse({position:e.position,mouseColumn:e.position.column,startedOnLineNumbers:!1,mouseDownCount:t.tapCount,inSelectionMode:!1,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,leftButton:!1,middleButton:!1,onInjectedText:6===e.type&&null!==e.detail.injectedText})}onChange(t){"touch"===this._lastPointerType&&this._context.viewModel.viewLayout.deltaScrollNow(-t.translationX,-t.translationY)}_onMouseDown(t,e){"touch"!==t.browserEvent.pointerType&&super._onMouseDown(t,e)}}class h extends l.S{constructor(t,e,n){super(t,e,n),this._register(r.o.addTarget(this.viewHelper.linesContentDomNode)),this._register(i.nm(this.viewHelper.linesContentDomNode,r.t.Tap,(t=>this.onTap(t)))),this._register(i.nm(this.viewHelper.linesContentDomNode,r.t.Change,(t=>this.onChange(t)))),this._register(i.nm(this.viewHelper.linesContentDomNode,r.t.Contextmenu,(t=>this._onContextMenu(new a.gy(t,!1,this.viewHelper.viewDomNode),!1))))}onTap(t){t.preventDefault(),this.viewHelper.focusTextArea();const e=this._createMouseTarget(new a.gy(t,!1,this.viewHelper.viewDomNode),!1);if(e.position){const t=document.createEvent("CustomEvent");t.initEvent(c.pd.Tap,!1,!0),this.viewHelper.dispatchTextAreaEvent(t),this.viewController.moveTo(e.position)}}onChange(t){this._context.viewModel.viewLayout.deltaScrollNow(-t.translationX,-t.translationY)}}class d extends s.JT{constructor(t,e,n){super(),o.gn&&u.D.pointerEvents?this.handler=this._register(new f(t,e,n)):window.TouchEvent?this.handler=this._register(new h(t,e,n)):this.handler=this._register(new l.S(t,e,n))}getTargetAtClientPoint(t,e){return this.handler.getTargetAtClientPoint(t,e)}}}}]);