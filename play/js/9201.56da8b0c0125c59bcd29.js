"use strict";(self.webpackChunkapp_template_builder=self.webpackChunkapp_template_builder||[]).push([[9201],{33024:function(e,t,i){i.d(t,{A9:function(){return L},GI:function(){return D},ZJ:function(){return N},_y:function(){return b},i5:function(){return R},kL:function(){return x},tG:function(){return T},wg:function(){return M}});var s=i(97464),o=i(20996),n=i(4538),r=i(38431),d=i(69344),h=i(14818),l=i(28919),a=i(8964),g=i(50038),u=i(91223),c=i(35366),_=i(26386),p=i(21208),m=i(80793),f=i(70499),w=i(35921),v=i(33623),S=function(e,t,i,s){return new(i||(i=Promise))((function(o,n){function r(e){try{h(s.next(e))}catch(e){n(e)}}function d(e){try{h(s.throw(e))}catch(e){n(e)}}function h(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,d)}h((s=s.apply(e,t||[])).next())}))};const b={Visible:v.iX,HasFocusedSuggestion:new f.uy("suggestWidgetHasFocusedSuggestion",!1,(0,_.NC)("suggestWidgetHasSelection","Whether any suggestion is focused")),DetailsVisible:new f.uy("suggestWidgetDetailsVisible",!1,(0,_.NC)("suggestWidgetDetailsVisible","Whether suggestion details are visible")),MultipleSuggestions:new f.uy("suggestWidgetMultipleSuggestions",!1,(0,_.NC)("suggestWidgetMultipleSuggestions","Whether there are multiple suggestions to pick from")),MakesTextEdit:new f.uy("suggestionMakesTextEdit",!0,(0,_.NC)("suggestionMakesTextEdit","Whether inserting the current suggestion yields in a change or has everything already been typed")),AcceptSuggestionsOnEnter:new f.uy("acceptSuggestionOnEnter",!0,(0,_.NC)("acceptSuggestionOnEnter","Whether suggestions are inserted when pressing Enter")),HasInsertAndReplaceRange:new f.uy("suggestionHasInsertAndReplaceRange",!1,(0,_.NC)("suggestionHasInsertAndReplaceRange","Whether the current suggestion has insert and replace behaviour")),InsertMode:new f.uy("suggestionInsertMode",void 0,{type:"string",description:(0,_.NC)("suggestionInsertMode","Whether the default behaviour is to insert or replace")}),CanResolve:new f.uy("suggestionCanResolve",!1,(0,_.NC)("suggestionCanResolve","Whether the current suggestion supports to resolve further details"))},D=new p.eH("suggestWidgetStatusBar");class C{constructor(e,t,i,s){this.position=e,this.completion=t,this.container=i,this.provider=s,this.isInvalid=!1,this.score=n.CL.Default,this.distance=0,this.textLabel="string"==typeof t.label?t.label:t.label.label,this.labelLow=this.textLabel.toLowerCase(),this.isInvalid=!this.textLabel,this.sortTextLow=t.sortText&&t.sortText.toLowerCase(),this.filterTextLow=t.filterText&&t.filterText.toLowerCase(),this.extensionId=t.extensionId,g.e.isIRange(t.range)?(this.editStart=new a.L(t.range.startLineNumber,t.range.startColumn),this.editInsertEnd=new a.L(t.range.endLineNumber,t.range.endColumn),this.editReplaceEnd=new a.L(t.range.endLineNumber,t.range.endColumn),this.isInvalid=this.isInvalid||g.e.spansMultipleLines(t.range)||t.range.startLineNumber!==e.lineNumber):(this.editStart=new a.L(t.range.insert.startLineNumber,t.range.insert.startColumn),this.editInsertEnd=new a.L(t.range.insert.endLineNumber,t.range.insert.endColumn),this.editReplaceEnd=new a.L(t.range.replace.endLineNumber,t.range.replace.endColumn),this.isInvalid=this.isInvalid||g.e.spansMultipleLines(t.range.insert)||g.e.spansMultipleLines(t.range.replace)||t.range.insert.startLineNumber!==e.lineNumber||t.range.replace.startLineNumber!==e.lineNumber||t.range.insert.startColumn!==t.range.replace.startColumn),"function"!=typeof s.resolveCompletionItem&&(this._resolveCache=Promise.resolve(),this._isResolved=!0)}get isResolved(){return!!this._isResolved}resolve(e){return S(this,void 0,void 0,(function*(){if(!this._resolveCache){const t=e.onCancellationRequested((()=>{this._resolveCache=void 0,this._isResolved=!1}));this._resolveCache=Promise.resolve(this.provider.resolveCompletionItem(this.completion,e)).then((e=>{Object.assign(this.completion,e),this._isResolved=!0,t.dispose()}),(e=>{(0,o.n2)(e)&&(this._resolveCache=void 0,this._isResolved=!1)}))}return this._resolveCache}))}}class L{constructor(e=2,t=new Set,i=new Set,s=!0){this.snippetSortOrder=e,this.kindFilter=t,this.providerFilter=i,this.showDeprecated=s}}let y;function N(){return y}L.default=new L;class W{constructor(e,t,i,s){this.items=e,this.needsClipboard=t,this.durations=i,this.disposable=s}}function x(e,t,i,n=L.default,h={triggerKind:0},l=s.T.None){return S(this,void 0,void 0,(function*(){const s=new d.G(!0);i=i.clone();const a=t.getWordAtPosition(i),u=a?new g.e(i.lineNumber,a.startColumn,i.lineNumber,a.endColumn):g.e.fromPositions(i),_={replace:u,insert:u.setEndPosition(i.lineNumber,i.column)},p=[],m=new r.SL,f=[];let w=!1;const v=(e,t,s)=>{var o,d,h;let l=!1;if(!t)return l;for(const s of t.suggestions)if(!n.kindFilter.has(s.kind)){if(!n.showDeprecated&&(null===(o=null==s?void 0:s.tags)||void 0===o?void 0:o.includes(1)))continue;s.range||(s.range=_),s.sortText||(s.sortText="string"==typeof s.label?s.label:s.label.label),!w&&s.insertTextRules&&4&s.insertTextRules&&(w=c.Yj.guessNeedsClipboard(s.insertText)),p.push(new C(i,s,t,e)),l=!0}return(0,r.Wf)(t)&&m.add(t),f.push({providerName:null!==(d=e._debugDisplayName)&&void 0!==d?d:"unknown_provider",elapsedProvider:null!==(h=t.duration)&&void 0!==h?h:-1,elapsedOverall:s.elapsed()}),l},b=(()=>S(this,void 0,void 0,(function*(){})))();for(const s of e.orderedGroups(t)){let e=!1;if(yield Promise.all(s.map((s=>S(this,void 0,void 0,(function*(){if(!(n.providerFilter.size>0)||n.providerFilter.has(s))try{const o=new d.G(!0),n=yield s.provideCompletionItems(t,i,h,l);e=v(s,n,o)||e}catch(e){(0,o.Cp)(e)}}))))),e||l.isCancellationRequested)break}return yield b,l.isCancellationRequested?(m.dispose(),Promise.reject(new o.FU)):new W(p.sort(M(n.snippetSortOrder)),w,{entries:f,elapsed:s.elapsed()},m)}))}function P(e,t){if(e.sortTextLow&&t.sortTextLow){if(e.sortTextLow<t.sortTextLow)return-1;if(e.sortTextLow>t.sortTextLow)return 1}return e.textLabel<t.textLabel?-1:e.textLabel>t.textLabel?1:e.completion.kind-t.completion.kind}const k=new Map;function M(e){return k.get(e)}function R(e,t){var i;null===(i=e.getContribution("editor.contrib.suggestController"))||void 0===i||i.triggerSuggest((new Set).add(t),void 0,!0)}k.set(0,(function(e,t){if(e.completion.kind!==t.completion.kind){if(27===e.completion.kind)return-1;if(27===t.completion.kind)return 1}return P(e,t)})),k.set(2,(function(e,t){if(e.completion.kind!==t.completion.kind){if(27===e.completion.kind)return 1;if(27===t.completion.kind)return-1}return P(e,t)})),k.set(1,P),m.P0.registerCommand("_executeCompletionItemProvider",((e,...t)=>S(void 0,void 0,void 0,(function*(){const[i,o,n,r]=t;(0,h.p_)(l.o.isUri(i)),(0,h.p_)(a.L.isIPosition(o)),(0,h.p_)("string"==typeof n||!n),(0,h.p_)("number"==typeof r||!r);const{completionProvider:d}=e.get(w.p),g=yield e.get(u.S).createModelReference(i);try{const e={incomplete:!1,suggestions:[]},t=[],i=yield x(d,g.object.textEditorModel,a.L.lift(o),void 0,{triggerCharacter:n,triggerKind:n?1:0});for(const o of i.items)t.length<(null!=r?r:0)&&t.push(o.resolve(s.T.None)),e.incomplete=e.incomplete||o.container.incomplete,e.suggestions.push(o.completion);try{return yield Promise.all(t),e}finally{setTimeout((()=>i.disposable.dispose()),100)}}finally{g.dispose()}}))));class T{static isAllOff(e){return"off"===e.other&&"off"===e.comments&&"off"===e.strings}static isAllOn(e){return"on"===e.other&&"on"===e.comments&&"on"===e.strings}static valueFor(e,t){switch(t){case 1:return e.comments;case 2:return e.strings;default:return e.other}}}},47913:function(e,t,i){i.d(t,{XZ:function(){return M}});var s=i(34441),o=(i(47397),i(54293)),n=i(13484),r=i(20996),d=i(56709),h=i(38431),l=i(98726),a=i(17416),g=i(77957),u=i(98538),c=(i(65654),i(26386)),_=i(70499),p=i(44333),m=i(75295),f=i(92537),w=i(83003),v=i(49914),S=i(58566),b=i(42718),D=i(33024),C=i(10976),L=i(75250),y=function(e,t,i,s){var o,n=arguments.length,r=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var d=e.length-1;d>=0;d--)(o=e[d])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r},N=function(e,t){return function(i,s){t(i,s,e)}},W=function(e,t,i,s){return new(i||(i=Promise))((function(o,n){function r(e){try{h(s.next(e))}catch(e){n(e)}}function d(e){try{h(s.throw(e))}catch(e){n(e)}}function h(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,d)}h((s=s.apply(e,t||[])).next())}))};(0,f.P6G)("editorSuggestWidget.background",{dark:f.D0T,light:f.D0T,hcDark:f.D0T,hcLight:f.D0T},c.NC("editorSuggestWidgetBackground","Background color of the suggest widget.")),(0,f.P6G)("editorSuggestWidget.border",{dark:f.D1_,light:f.D1_,hcDark:f.D1_,hcLight:f.D1_},c.NC("editorSuggestWidgetBorder","Border color of the suggest widget."));const x=(0,f.P6G)("editorSuggestWidget.foreground",{dark:f.NOs,light:f.NOs,hcDark:f.NOs,hcLight:f.NOs},c.NC("editorSuggestWidgetForeground","Foreground color of the suggest widget.")),P=((0,f.P6G)("editorSuggestWidget.selectedForeground",{dark:f.NPS,light:f.NPS,hcDark:f.NPS,hcLight:f.NPS},c.NC("editorSuggestWidgetSelectedForeground","Foreground color of the selected entry in the suggest widget.")),(0,f.P6G)("editorSuggestWidget.selectedIconForeground",{dark:f.cbQ,light:f.cbQ,hcDark:f.cbQ,hcLight:f.cbQ},c.NC("editorSuggestWidgetSelectedIconForeground","Icon foreground color of the selected entry in the suggest widget.")),(0,f.P6G)("editorSuggestWidget.selectedBackground",{dark:f.Vqd,light:f.Vqd,hcDark:f.Vqd,hcLight:f.Vqd},c.NC("editorSuggestWidgetSelectedBackground","Background color of the selected entry in the suggest widget.")));(0,f.P6G)("editorSuggestWidget.highlightForeground",{dark:f.Gwp,light:f.Gwp,hcDark:f.Gwp,hcLight:f.Gwp},c.NC("editorSuggestWidgetHighlightForeground","Color of the match highlights in the suggest widget.")),(0,f.P6G)("editorSuggestWidget.focusHighlightForeground",{dark:f.PX0,light:f.PX0,hcDark:f.PX0,hcLight:f.PX0},c.NC("editorSuggestWidgetFocusHighlightForeground","Color of the match highlights in the suggest widget when an item is focused.")),(0,f.P6G)("editorSuggestWidgetStatus.foreground",{dark:(0,f.ZnX)(x,.5),light:(0,f.ZnX)(x,.5),hcDark:(0,f.ZnX)(x,.5),hcLight:(0,f.ZnX)(x,.5)},c.NC("editorSuggestWidgetStatusForeground","Foreground color of the suggest widget status."));class k{constructor(e,t){this._service=e,this._key=`suggestWidget.size/${t.getEditorType()}/${t instanceof g.H}`}restore(){var e;const t=null!==(e=this._service.get(this._key,0))&&void 0!==e?e:"";try{const e=JSON.parse(t);if(s.Ro.is(e))return s.Ro.lift(e)}catch(e){}}store(e){this._service.store(this._key,JSON.stringify(e),0,1)}reset(){this._service.remove(this._key,0)}}let M=class e{constructor(e,t,i,r,l){this.editor=e,this._storageService=t,this._state=0,this._isAuto=!1,this._ignoreFocusEvents=!1,this._forceRenderingAbove=!1,this._explainMode=!1,this._showTimeout=new n._F,this._disposables=new h.SL,this._onDidSelect=new d.Q5,this._onDidFocus=new d.Q5,this._onDidHide=new d.Q5,this._onDidShow=new d.Q5,this.onDidSelect=this._onDidSelect.event,this.onDidFocus=this._onDidFocus.event,this.onDidHide=this._onDidHide.event,this.onDidShow=this._onDidShow.event,this._onDetailsKeydown=new d.Q5,this.onDetailsKeyDown=this._onDetailsKeydown.event,this.element=new b.f,this.element.domNode.classList.add("editor-widget","suggest-widget"),this._contentWidget=new R(this,e),this._persistedSize=new k(t,e);class g{constructor(e,t,i=!1,s=!1){this.persistedSize=e,this.currentSize=t,this.persistHeight=i,this.persistWidth=s}}let _;this._disposables.add(this.element.onDidWillResize((()=>{this._contentWidget.lockPreference(),_=new g(this._persistedSize.restore(),this.element.size)}))),this._disposables.add(this.element.onDidResize((e=>{var t,i,o,n;if(this._resize(e.dimension.width,e.dimension.height),_&&(_.persistHeight=_.persistHeight||!!e.north||!!e.south,_.persistWidth=_.persistWidth||!!e.east||!!e.west),e.done){if(_){const{itemHeight:e,defaultSize:r}=this.getLayoutInfo(),d=Math.round(e/2);let{width:h,height:l}=this.element.size;(!_.persistHeight||Math.abs(_.currentSize.height-l)<=d)&&(l=null!==(i=null===(t=_.persistedSize)||void 0===t?void 0:t.height)&&void 0!==i?i:r.height),(!_.persistWidth||Math.abs(_.currentSize.width-h)<=d)&&(h=null!==(n=null===(o=_.persistedSize)||void 0===o?void 0:o.width)&&void 0!==n?n:r.width),this._persistedSize.store(new s.Ro(h,l))}this._contentWidget.unlockPreference(),_=void 0}}))),this._messageElement=s.R3(this.element.domNode,s.$(".message")),this._listElement=s.R3(this.element.domNode,s.$(".tree"));const p=l.createInstance(C.Re,this.editor);p.onDidClose(this.toggleDetails,this,this._disposables),this._details=new C.mh(p,this.editor);const m=()=>this.element.domNode.classList.toggle("no-icons",!this.editor.getOption(108).showIcons);m();const v=l.createInstance(L.zi,this.editor);this._disposables.add(v),this._disposables.add(v.onDidToggleDetails((()=>this.toggleDetails()))),this._list=new o.aV("SuggestWidget",this._listElement,{getHeight:e=>this.getLayoutInfo().itemHeight,getTemplateId:e=>"suggestion"},[v],{alwaysConsumeMouseWheel:!0,useShadows:!1,mouseSupport:!1,multipleSelectionSupport:!1,accessibilityProvider:{getRole:()=>"option",getWidgetAriaLabel:()=>c.NC("suggest","Suggest"),getWidgetRole:()=>"listbox",getAriaLabel:e=>{let t=e.textLabel;if("string"!=typeof e.completion.label){const{detail:i,description:s}=e.completion.label;i&&s?t=c.NC("label.full","{0}{1}, {2}",t,i,s):i?t=c.NC("label.detail","{0}{1}",t,i):s&&(t=c.NC("label.desc","{0}, {1}",t,s))}if(!e.isResolved||!this._isDetailsVisible())return t;const{documentation:i,detail:s}=e.completion,o=a.WU("{0}{1}",s||"",i?"string"==typeof i?i:i.value:"");return c.NC("ariaCurrenttSuggestionReadDetails","{0}, docs: {1}",t,o)}}}),this._status=l.createInstance(u.I,this.element.domNode);const S=()=>this.element.domNode.classList.toggle("with-status-bar",this.editor.getOption(108).showStatusBar);S(),this._disposables.add((0,w.Jl)(this._list,r,{listInactiveFocusBackground:P,listInactiveFocusOutline:f.xL1})),this._disposables.add(r.onDidColorThemeChange((e=>this._onThemeChange(e)))),this._onThemeChange(r.getColorTheme()),this._disposables.add(this._list.onMouseDown((e=>this._onListMouseDownOrTap(e)))),this._disposables.add(this._list.onTap((e=>this._onListMouseDownOrTap(e)))),this._disposables.add(this._list.onDidChangeSelection((e=>this._onListSelection(e)))),this._disposables.add(this._list.onDidChangeFocus((e=>this._onListFocus(e)))),this._disposables.add(this.editor.onDidChangeCursorSelection((()=>this._onCursorSelectionChanged()))),this._disposables.add(this.editor.onDidChangeConfiguration((e=>{e.hasChanged(108)&&(S(),m())}))),this._ctxSuggestWidgetVisible=D._y.Visible.bindTo(i),this._ctxSuggestWidgetDetailsVisible=D._y.DetailsVisible.bindTo(i),this._ctxSuggestWidgetMultipleSuggestions=D._y.MultipleSuggestions.bindTo(i),this._ctxSuggestWidgetHasFocusedSuggestion=D._y.HasFocusedSuggestion.bindTo(i),this._disposables.add(s.mu(this._details.widget.domNode,"keydown",(e=>{this._onDetailsKeydown.fire(e)}))),this._disposables.add(this.editor.onMouseDown((e=>this._onEditorMouseDown(e))))}dispose(){var e;this._details.widget.dispose(),this._details.dispose(),this._list.dispose(),this._status.dispose(),this._disposables.dispose(),null===(e=this._loadingTimeout)||void 0===e||e.dispose(),this._showTimeout.dispose(),this._contentWidget.dispose(),this.element.dispose()}_onEditorMouseDown(e){this._details.widget.domNode.contains(e.target.element)?this._details.widget.domNode.focus():this.element.domNode.contains(e.target.element)&&this.editor.focus()}_onCursorSelectionChanged(){0!==this._state&&this._contentWidget.layout()}_onListMouseDownOrTap(e){void 0!==e.element&&void 0!==e.index&&(e.browserEvent.preventDefault(),e.browserEvent.stopPropagation(),this._select(e.element,e.index))}_onListSelection(e){e.elements.length&&this._select(e.elements[0],e.indexes[0])}_select(e,t){const i=this._completionModel;i&&(this._onDidSelect.fire({item:e,index:t,model:i}),this.editor.focus())}_onThemeChange(e){this._details.widget.borderWidth=(0,v.c3)(e.type)?2:1}_onListFocus(e){var t;if(this._ignoreFocusEvents)return;if(!e.elements.length)return this._currentSuggestionDetails&&(this._currentSuggestionDetails.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=void 0),this.editor.setAriaOptions({activeDescendant:void 0}),void this._ctxSuggestWidgetHasFocusedSuggestion.set(!1);if(!this._completionModel)return;this._ctxSuggestWidgetHasFocusedSuggestion.set(!0);const i=e.elements[0],s=e.indexes[0];i!==this._focusedItem&&(null===(t=this._currentSuggestionDetails)||void 0===t||t.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=i,this._list.reveal(s),this._currentSuggestionDetails=(0,n.PG)((e=>W(this,void 0,void 0,(function*(){const t=(0,n.Vg)((()=>{this._isDetailsVisible()&&this.showDetails(!0)}),250),s=e.onCancellationRequested((()=>t.dispose())),o=yield i.resolve(e);return t.dispose(),s.dispose(),o})))),this._currentSuggestionDetails.then((()=>{s>=this._list.length||i!==this._list.element(s)||(this._ignoreFocusEvents=!0,this._list.splice(s,1,[i]),this._list.setFocus([s]),this._ignoreFocusEvents=!1,this._isDetailsVisible()?this.showDetails(!1):this.element.domNode.classList.remove("docs-side"),this.editor.setAriaOptions({activeDescendant:(0,L.i1)(s)}))})).catch(r.dL)),this._onDidFocus.fire({item:i,index:s,model:this._completionModel})}_setState(t){if(this._state!==t)switch(this._state=t,this.element.domNode.classList.toggle("frozen",4===t),this.element.domNode.classList.remove("message"),t){case 0:s.Cp(this._messageElement,this._listElement,this._status.element),this._details.hide(!0),this._status.hide(),this._contentWidget.hide(),this._ctxSuggestWidgetVisible.reset(),this._ctxSuggestWidgetMultipleSuggestions.reset(),this._ctxSuggestWidgetHasFocusedSuggestion.reset(),this._showTimeout.cancel(),this.element.domNode.classList.remove("visible"),this._list.splice(0,this._list.length),this._focusedItem=void 0,this._cappedHeight=void 0,this._explainMode=!1;break;case 1:this.element.domNode.classList.add("message"),this._messageElement.textContent=e.LOADING_MESSAGE,s.Cp(this._listElement,this._status.element),s.$Z(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0;break;case 2:this.element.domNode.classList.add("message"),this._messageElement.textContent=e.NO_SUGGESTIONS_MESSAGE,s.Cp(this._listElement,this._status.element),s.$Z(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0;break;case 3:case 4:s.Cp(this._messageElement),s.$Z(this._listElement,this._status.element),this._show();break;case 5:s.Cp(this._messageElement),s.$Z(this._listElement,this._status.element),this._details.show(),this._show()}}_show(){this._status.show(),this._contentWidget.show(),this._layout(this._persistedSize.restore()),this._ctxSuggestWidgetVisible.set(!0),this._showTimeout.cancelAndSet((()=>{this.element.domNode.classList.add("visible"),this._onDidShow.fire(this)}),100)}showTriggered(e,t){0===this._state&&(this._contentWidget.setPosition(this.editor.getPosition()),this._isAuto=!!e,this._isAuto||(this._loadingTimeout=(0,n.Vg)((()=>this._setState(1)),t)))}showSuggestions(e,t,i,s){var o,n;if(this._contentWidget.setPosition(this.editor.getPosition()),null===(o=this._loadingTimeout)||void 0===o||o.dispose(),null===(n=this._currentSuggestionDetails)||void 0===n||n.cancel(),this._currentSuggestionDetails=void 0,this._completionModel!==e&&(this._completionModel=e),i&&2!==this._state&&0!==this._state)return void this._setState(4);const r=this._completionModel.items.length,d=0===r;if(this._ctxSuggestWidgetMultipleSuggestions.set(r>1),d)return this._setState(s?0:2),void(this._completionModel=void 0);this._focusedItem=void 0,this._list.splice(0,this._list.length,this._completionModel.items),this._setState(i?4:3),t>=0&&(this._list.reveal(t,0),this._list.setFocus([t])),this._layout(this.element.size),this._details.widget.domNode.classList.remove("focused")}selectNextPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageDown(),!0;case 1:return!this._isAuto;default:return this._list.focusNextPage(),!0}}selectNext(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusNext(1,!0),!0}}selectLast(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollBottom(),!0;case 1:return!this._isAuto;default:return this._list.focusLast(),!0}}selectPreviousPage(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageUp(),!0;case 1:return!this._isAuto;default:return this._list.focusPreviousPage(),!0}}selectPrevious(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusPrevious(1,!0),!1}}selectFirst(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollTop(),!0;case 1:return!this._isAuto;default:return this._list.focusFirst(),!0}}getFocusedItem(){if(0!==this._state&&2!==this._state&&1!==this._state&&this._completionModel)return{item:this._list.getFocusedElements()[0],index:this._list.getFocus()[0],model:this._completionModel}}toggleDetailsFocus(){5===this._state?(this._setState(3),this._details.widget.domNode.classList.remove("focused")):3===this._state&&this._isDetailsVisible()&&(this._setState(5),this._details.widget.domNode.classList.add("focused"))}toggleDetails(){this._isDetailsVisible()?(this._ctxSuggestWidgetDetailsVisible.set(!1),this._setDetailsVisible(!1),this._details.hide(),this.element.domNode.classList.remove("shows-details")):!(0,C.nJ)(this._list.getFocusedElements()[0])&&!this._explainMode||3!==this._state&&5!==this._state&&4!==this._state||(this._ctxSuggestWidgetDetailsVisible.set(!0),this._setDetailsVisible(!0),this.showDetails(!1))}showDetails(e){this._details.show(),e?this._details.widget.renderLoading():this._details.widget.renderItem(this._list.getFocusedElements()[0],this._explainMode),this._positionDetails(),this.editor.focus(),this.element.domNode.classList.add("shows-details")}toggleExplainMode(){this._list.getFocusedElements()[0]&&(this._explainMode=!this._explainMode,this._isDetailsVisible()?this.showDetails(!1):this.toggleDetails())}resetPersistedSize(){this._persistedSize.reset()}hideWidget(){var e;null===(e=this._loadingTimeout)||void 0===e||e.dispose(),this._setState(0),this._onDidHide.fire(this),this.element.clearSashHoverState();const t=this._persistedSize.restore(),i=Math.ceil(4.3*this.getLayoutInfo().itemHeight);t&&t.height<i&&this._persistedSize.store(t.with(void 0,i))}isFrozen(){return 4===this._state}_afterRender(e){null!==e?2!==this._state&&1!==this._state&&(this._isDetailsVisible()&&this._details.show(),this._positionDetails()):this._isDetailsVisible()&&this._details.hide()}_layout(e){var t,i,o;if(!this.editor.hasModel())return;if(!this.editor.getDomNode())return;const n=s.D6(document.body),r=this.getLayoutInfo();e||(e=r.defaultSize);let d=e.height,h=e.width;if(this._status.element.style.lineHeight=`${r.itemHeight}px`,2===this._state||1===this._state)d=r.itemHeight+r.borderHeight,h=r.defaultSize.width/2,this.element.enableSashes(!1,!1,!1,!1),this.element.minSize=this.element.maxSize=new s.Ro(h,d),this._contentWidget.setPreference(2);else{const l=n.width-r.borderHeight-2*r.horizontalPadding;h>l&&(h=l);const a=this._completionModel?this._completionModel.stats.pLabelLen*r.typicalHalfwidthCharacterWidth:h,g=r.statusBarHeight+this._list.contentHeight+r.borderHeight,u=r.itemHeight+r.statusBarHeight,c=s.i(this.editor.getDomNode()),_=this.editor.getScrolledVisiblePosition(this.editor.getPosition()),p=c.top+_.top+_.height,m=Math.min(n.height-p-r.verticalPadding,g),f=c.top+_.top-r.verticalPadding,w=Math.min(f,g);let v=Math.min(Math.max(w,m)+r.borderHeight,g);d===(null===(t=this._cappedHeight)||void 0===t?void 0:t.capped)&&(d=this._cappedHeight.wanted),d<u&&(d=u),d>v&&(d=v);const S=150;d>m||this._forceRenderingAbove&&f>S?(this._contentWidget.setPreference(1),this.element.enableSashes(!0,!0,!1,!1),v=w):(this._contentWidget.setPreference(2),this.element.enableSashes(!1,!0,!0,!1),v=m),this.element.preferredSize=new s.Ro(a,r.defaultSize.height),this.element.maxSize=new s.Ro(l,v),this.element.minSize=new s.Ro(220,u),this._cappedHeight=d===g?{wanted:null!==(o=null===(i=this._cappedHeight)||void 0===i?void 0:i.wanted)&&void 0!==o?o:e.height,capped:d}:void 0}this._resize(h,d)}_resize(e,t){const{width:i,height:s}=this.element.maxSize;e=Math.min(i,e),t=Math.min(s,t);const{statusBarHeight:o}=this.getLayoutInfo();this._list.layout(t-o,e),this._listElement.style.height=t-o+"px",this.element.layout(t,e),this._contentWidget.layout(),this._positionDetails()}_positionDetails(){var e;this._isDetailsVisible()&&this._details.placeAtAnchor(this.element.domNode,2===(null===(e=this._contentWidget.getPosition())||void 0===e?void 0:e.preference[0]))}getLayoutInfo(){const e=this.editor.getOption(46),t=(0,l.uZ)(this.editor.getOption(110)||e.lineHeight,8,1e3),i=this.editor.getOption(108).showStatusBar&&2!==this._state&&1!==this._state?t:0,o=this._details.widget.borderWidth,n=2*o;return{itemHeight:t,statusBarHeight:i,borderWidth:o,borderHeight:n,typicalHalfwidthCharacterWidth:e.typicalHalfwidthCharacterWidth,verticalPadding:22,horizontalPadding:14,defaultSize:new s.Ro(430,i+12*t+n)}}_isDetailsVisible(){return this._storageService.getBoolean("expandSuggestionDocs",0,!1)}_setDetailsVisible(e){this._storageService.store("expandSuggestionDocs",e,0,0)}forceRenderingAbove(){this._forceRenderingAbove||(this._forceRenderingAbove=!0,this._layout(this._persistedSize.restore()))}stopForceRenderingAbove(){this._forceRenderingAbove=!1}};M.LOADING_MESSAGE=c.NC("suggestWidget.loading","Loading..."),M.NO_SUGGESTIONS_MESSAGE=c.NC("suggestWidget.noSuggestions","No suggestions."),M=y([N(1,m.Uy),N(2,_.i6),N(3,S.XE),N(4,p.TG)],M);class R{constructor(e,t){this._widget=e,this._editor=t,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._preferenceLocked=!1,this._added=!1,this._hidden=!1}dispose(){this._added&&(this._added=!1,this._editor.removeContentWidget(this))}getId(){return"editor.widget.suggestWidget"}getDomNode(){return this._widget.element.domNode}show(){this._hidden=!1,this._added||(this._added=!0,this._editor.addContentWidget(this))}hide(){this._hidden||(this._hidden=!0,this.layout())}layout(){this._editor.layoutContentWidget(this)}getPosition(){return!this._hidden&&this._position&&this._preference?{position:this._position,preference:[this._preference]}:null}beforeRender(){const{height:e,width:t}=this._widget.element.size,{borderWidth:i,horizontalPadding:o}=this._widget.getLayoutInfo();return new s.Ro(t+2*i+o,e+2*i)}afterRender(e){this._widget._afterRender(e)}setPreference(e){this._preferenceLocked||(this._preference=e)}lockPreference(){this._preferenceLocked=!0}unlockPreference(){this._preferenceLocked=!1}setPosition(e){this._position=e}}}}]);