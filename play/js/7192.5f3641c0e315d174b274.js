"use strict";(self.webpackChunkapp_template_builder=self.webpackChunkapp_template_builder||[]).push([[7192],{32061:function(e,t,i){i.d(t,{_:function(){return l},t:function(){return r}});var o=i(16308),s=i(4538),n=i(17416);class r{constructor(e,t){this.leadingLineContent=e,this.characterCountDelta=t}}class l{constructor(e,t,i,o,n,r,d=s.mX.default,a){this.clipboardText=a,this._snippetCompareFn=l._compareCompletionItems,this._items=e,this._column=t,this._wordDistance=o,this._options=n,this._refilterKind=1,this._lineContext=i,this._fuzzyScoreOptions=d,"top"===r?this._snippetCompareFn=l._compareCompletionItemsSnippetsUp:"bottom"===r&&(this._snippetCompareFn=l._compareCompletionItemsSnippetsDown)}get lineContext(){return this._lineContext}set lineContext(e){this._lineContext.leadingLineContent===e.leadingLineContent&&this._lineContext.characterCountDelta===e.characterCountDelta||(this._refilterKind=this._lineContext.characterCountDelta<e.characterCountDelta&&this._filteredItems?2:1,this._lineContext=e)}get items(){return this._ensureCachedState(),this._filteredItems}get allProvider(){return this._ensureCachedState(),this._providerInfo.keys()}get incomplete(){this._ensureCachedState();const e=new Set;for(const[t,i]of this._providerInfo)i&&e.add(t);return e}adopt(e){const t=[];for(let i=0;i<this._items.length;)e.has(this._items[i].provider)?i++:(t.push(this._items[i]),this._items[i]=this._items[this._items.length-1],this._items.pop());return this._refilterKind=1,t}get stats(){return this._ensureCachedState(),this._stats}_ensureCachedState(){0!==this._refilterKind&&this._createCachedState()}_createCachedState(){this._providerInfo=new Map;const e=[],{leadingLineContent:t,characterCountDelta:i}=this._lineContext;let r="",l="";const d=1===this._refilterKind?this._items:this._filteredItems,a=[],c=!this._options.filterGraceful||d.length>2e3?s.EW:s.l7;for(let o=0;o<d.length;o++){const u=d[o];if(u.isInvalid)continue;this._providerInfo.set(u.provider,Boolean(u.container.incomplete));const g=u.position.column-u.editStart.column,h=g+i-(u.position.column-this._column);if(r.length!==h&&(r=0===h?"":t.slice(-h),l=r.toLowerCase()),u.word=r,0===h)u.score=s.CL.Default;else{let e=0;for(;e<g;){const t=r.charCodeAt(e);if(32!==t&&9!==t)break;e+=1}if(e>=h)u.score=s.CL.Default;else if("string"==typeof u.completion.filterText){const t=c(r,l,e,u.completion.filterText,u.filterTextLow,0,this._fuzzyScoreOptions);if(!t)continue;0===(0,n.zY)(u.completion.filterText,u.textLabel)?u.score=t:(u.score=(0,s.jB)(r,l,e,u.textLabel,u.labelLow,0),u.score[0]=t[0])}else{const t=c(r,l,e,u.textLabel,u.labelLow,0,this._fuzzyScoreOptions);if(!t)continue;u.score=t}}u.idx=o,u.distance=this._wordDistance.distance(u.position,u.completion),a.push(u),e.push(u.textLabel.length)}this._filteredItems=a.sort(this._snippetCompareFn),this._refilterKind=0,this._stats={pLabelLen:e.length?(0,o.HW)(e.length-.85,e,((e,t)=>e-t)):0}}static _compareCompletionItems(e,t){return e.score[0]>t.score[0]?-1:e.score[0]<t.score[0]?1:e.distance<t.distance?-1:e.distance>t.distance?1:e.idx<t.idx?-1:e.idx>t.idx?1:0}static _compareCompletionItemsSnippetsDown(e,t){if(e.completion.kind!==t.completion.kind){if(27===e.completion.kind)return 1;if(27===t.completion.kind)return-1}return l._compareCompletionItems(e,t)}static _compareCompletionItemsSnippetsUp(e,t){if(e.completion.kind!==t.completion.kind){if(27===e.completion.kind)return-1;if(27===t.completion.kind)return 1}return l._compareCompletionItems(e,t)}}},9907:function(e,t,i){i.r(t),i.d(t,{SuggestController:function(){return G},TriggerSuggestAction:function(){return U}});var o=i(16644),s=i(16308),n=i(13484),r=i(97464),l=i(20996),d=i(56709),a=i(21994),c=i(38431),u=i(11138),g=i(69344),h=i(14818),p=i(48423),m=i(55298),_=i(19083),f=i(8964),v=i(50038),S=i(21081),y=i(31046),x=i(35366),b=i(32905),w=i(3408),C=i(26386),I=i(80793),D=i(70499),T=i(44333),k=i(59271),O=i(33024),A=function(e,t,i,o){var s,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(r=(n<3?s(r):n>3?s(t,i,r):s(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r},P=function(e,t){return function(i,o){t(i,o,e)}};let E=class e{constructor(t,i){this._editor=t,this._index=0,this._ckOtherSuggestions=e.OtherSuggestions.bindTo(i)}dispose(){this.reset()}reset(){var e;this._ckOtherSuggestions.reset(),null===(e=this._listener)||void 0===e||e.dispose(),this._model=void 0,this._acceptNext=void 0,this._ignore=!1}set({model:t,index:i},o){if(0===t.items.length)return void this.reset();e._moveIndex(!0,t,i)!==i?(this._acceptNext=o,this._model=t,this._index=i,this._listener=this._editor.onDidChangeCursorPosition((()=>{this._ignore||this.reset()})),this._ckOtherSuggestions.set(!0)):this.reset()}static _moveIndex(e,t,i){let o=i;for(;o=(o+t.items.length+(e?1:-1))%t.items.length,o!==i&&t.items[o].completion.additionalTextEdits;);return o}next(){this._move(!0)}prev(){this._move(!1)}_move(t){if(this._model)try{this._ignore=!0,this._index=e._moveIndex(t,this._model,this._index),this._acceptNext({index:this._index,item:this._model.items[this._index],model:this._model})}finally{this._ignore=!1}}};E.OtherSuggestions=new D.uy("hasOtherSuggestions",!1),E=A([P(1,D.i6)],E);var N=i(55224);class M{constructor(e,t,i){this._disposables=new c.SL,this._disposables.add(t.onDidShow((()=>this._onItem(t.getFocusedItem())))),this._disposables.add(t.onDidFocus(this._onItem,this)),this._disposables.add(t.onDidHide(this.reset,this)),this._disposables.add(e.onWillType((o=>{if(this._active&&!t.isFrozen()){const t=o.charCodeAt(o.length-1);this._active.acceptCharacters.has(t)&&e.getOption(0)&&i(this._active.item)}})))}_onItem(e){if(!e||!(0,s.Of)(e.item.completion.commitCharacters))return void this.reset();if(this._active&&this._active.item.item===e.item)return;const t=new N.q;for(const i of e.item.completion.commitCharacters)i.length>0&&t.add(i.charCodeAt(0));this._active={acceptCharacters:t,item:e}}reset(){this._active=void 0}dispose(){this._disposables.dispose()}}var R=i(89183),F=i(23918),L=i(47913),K=i(68554),V=i(6227),z=i(32916),B=function(e,t,i,o){var s,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(r=(n<3?s(r):n>3?s(t,i,r):s(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r},W=function(e,t){return function(i,o){t(i,o,e)}};class j{constructor(e,t){this._model=e,this._position=t;if(e.getLineMaxColumn(t.lineNumber)!==t.column){const i=e.getOffsetAt(t),o=e.getPositionAt(i+1);this._marker=e.deltaDecorations([],[{range:v.e.fromPositions(t,o),options:{description:"suggest-line-suffix",stickiness:1}}])}}dispose(){this._marker&&!this._model.isDisposed()&&this._model.deltaDecorations(this._marker,[])}delta(e){if(this._model.isDisposed()||this._position.lineNumber!==e.lineNumber)return 0;if(this._marker){const t=this._model.getDecorationRange(this._marker[0]);return this._model.getOffsetAt(t.getStartPosition())-this._model.getOffsetAt(e)}return this._model.getLineMaxColumn(e.lineNumber)-e.column}}let G=class e{constructor(e,t,i,o,s,r,l){this._memoryService=t,this._commandService=i,this._contextKeyService=o,this._instantiationService=s,this._logService=r,this._telemetryService=l,this._lineSuffix=new c.XK,this._toDispose=new c.SL,this._selectors=new q((e=>e.priority)),this._telemetryGate=0,this.editor=e,this.model=s.createInstance(R.U,this.editor);const d=O._y.InsertMode.bindTo(o);d.set(e.getOption(108).insertMode),this.model.onDidTrigger((()=>d.set(e.getOption(108).insertMode))),this.widget=this._toDispose.add(new n.Ue((()=>{const e=this._instantiationService.createInstance(L.XZ,this.editor);this._toDispose.add(e),this._toDispose.add(e.onDidSelect((e=>this._insertSuggestion(e,0)),this));const t=new M(this.editor,e,(e=>this._insertSuggestion(e,2)));this._toDispose.add(t),this._toDispose.add(this.model.onDidSuggest((e=>{0===e.completionModel.items.length&&t.reset()})));const i=O._y.MakesTextEdit.bindTo(this._contextKeyService),o=O._y.HasInsertAndReplaceRange.bindTo(this._contextKeyService),s=O._y.CanResolve.bindTo(this._contextKeyService);return this._toDispose.add((0,c.OF)((()=>{i.reset(),o.reset(),s.reset()}))),this._toDispose.add(e.onDidFocus((({item:e})=>{const t=this.editor.getPosition(),n=e.editStart.column,r=t.column;let l=!0;if(!("smart"!==this.editor.getOption(1)||2!==this.model.state||e.completion.additionalTextEdits||4&e.completion.insertTextRules||r-n!==e.completion.insertText.length)){l=this.editor.getModel().getValueInRange({startLineNumber:t.lineNumber,startColumn:n,endLineNumber:t.lineNumber,endColumn:r})!==e.completion.insertText}i.set(l),o.set(!f.L.equals(e.editInsertEnd,e.editReplaceEnd)),s.set(Boolean(e.provider.resolveCompletionItem)||Boolean(e.completion.documentation)||e.completion.detail!==e.completion.label)}))),this._toDispose.add(e.onDetailsKeyDown((e=>{e.toKeybinding().equals(new a.QC(!0,!1,!1,!1,33))||u.dz&&e.toKeybinding().equals(new a.QC(!1,!1,!1,!0,33))?e.stopPropagation():e.toKeybinding().isModifierKey()||this.editor.focus()}))),e}))),this._overtypingCapturer=this._toDispose.add(new n.Ue((()=>this._toDispose.add(new F.K(this.editor,this.model))))),this._alternatives=this._toDispose.add(new n.Ue((()=>this._toDispose.add(new E(this.editor,this._contextKeyService))))),this._toDispose.add(s.createInstance(w.p,e)),this._toDispose.add(this.model.onDidTrigger((e=>{this.widget.value.showTriggered(e.auto,e.shy?250:50),this._lineSuffix.value=new j(this.editor.getModel(),e.position)}))),this._toDispose.add(this.model.onDidSuggest((e=>{if(e.shy)return;let t=-1;if(!e.noSelect){for(const i of this._selectors.itemsOrderedByPriorityDesc)if(t=i.select(this.editor.getModel(),this.editor.getPosition(),e.completionModel.items),-1!==t)break;-1===t&&(t=this._memoryService.select(this.editor.getModel(),this.editor.getPosition(),e.completionModel.items))}this.widget.value.showSuggestions(e.completionModel,t,e.isFrozen,e.auto)}))),this._toDispose.add(this.model.onDidCancel((e=>{e.retrigger||this.widget.value.hideWidget()}))),this._toDispose.add(this.editor.onDidBlurEditorWidget((()=>{this.model.cancel(),this.model.clear()})));const g=O._y.AcceptSuggestionsOnEnter.bindTo(o),h=()=>{const e=this.editor.getOption(1);g.set("on"===e||"smart"===e)};this._toDispose.add(this.editor.onDidChangeConfiguration((()=>h()))),h()}static get(t){return t.getContribution(e.ID)}dispose(){this._alternatives.dispose(),this._toDispose.dispose(),this.widget.dispose(),this.model.dispose(),this._lineSuffix.dispose()}_insertSuggestion(e,t){if(!e||!e.item)return this._alternatives.value.reset(),this.model.cancel(),void this.model.clear();if(!this.editor.hasModel())return;const i=y.SnippetController2.get(this.editor);if(!i)return;const o=this.editor.getModel(),s=o.getAlternativeVersionId(),{item:n}=e,d=[],a=new r.A;1&t||this.editor.pushUndoStop();const c=this.getOverwriteInfo(n,Boolean(8&t));if(this._memoryService.memorize(o,this.editor.getPosition(),n),Array.isArray(n.completion.additionalTextEdits)){const e=p.Z.capture(this.editor);this.editor.executeEdits("suggestController.additionalTextEdits.sync",n.completion.additionalTextEdits.map((e=>_.h.replaceMove(v.e.lift(e.range),e.text)))),e.restoreRelativeVerticalPositionOfCursor(this.editor)}else if(!n.isResolved){const e=new g.G(!0);let i;const s=o.onDidChangeContent((e=>{if(e.isFlush)return a.cancel(),void s.dispose();for(const t of e.changes){const e=v.e.getEndPosition(t.range);i&&!f.L.isBefore(e,i)||(i=e)}})),r=t;t|=2;let l=!1;const c=this.editor.onWillType((()=>{c.dispose(),l=!0,2&r||this.editor.pushUndoStop()}));d.push(n.resolve(a.token).then((()=>{if(!n.completion.additionalTextEdits||a.token.isCancellationRequested)return!1;if(i&&n.completion.additionalTextEdits.some((e=>f.L.isBefore(i,v.e.getStartPosition(e.range)))))return!1;l&&this.editor.pushUndoStop();const e=p.Z.capture(this.editor);return this.editor.executeEdits("suggestController.additionalTextEdits.async",n.completion.additionalTextEdits.map((e=>_.h.replaceMove(v.e.lift(e.range),e.text)))),e.restoreRelativeVerticalPositionOfCursor(this.editor),!l&&2&r||this.editor.pushUndoStop(),!0})).then((t=>{this._logService.trace("[suggest] async resolving of edits DONE (ms, applied?)",e.elapsed(),t),s.dispose(),c.dispose()})))}let{insertText:u}=n.completion;4&n.completion.insertTextRules||(u=x.Yj.escape(u)),i.insert(u,{overwriteBefore:c.overwriteBefore,overwriteAfter:c.overwriteAfter,undoStopBefore:!1,undoStopAfter:!1,adjustWhitespace:!(1&n.completion.insertTextRules),clipboardText:e.model.clipboardText,overtypingCapturer:this._overtypingCapturer.value}),2&t||this.editor.pushUndoStop(),n.completion.command?n.completion.command.id===U.id?this.model.trigger({auto:!0,shy:!1,noSelect:!1},!0):(d.push(this._commandService.executeCommand(n.completion.command.id,...n.completion.command.arguments?[...n.completion.command.arguments]:[]).catch(l.dL)),this.model.cancel()):this.model.cancel(),4&t&&this._alternatives.value.set(e,(e=>{for(a.cancel();o.canUndo();){s!==o.getAlternativeVersionId()&&o.undo(),this._insertSuggestion(e,3|(8&t?8:0));break}})),this._alertCompletionItem(n),Promise.all(d).finally((()=>{this._reportSuggestionAcceptedTelemetry(n,o,e),this.model.clear(),a.dispose()}))}_reportSuggestionAcceptedTelemetry(e,t,i){var o;if(this._telemetryGate++%100!=0)return;const s=e.extensionId?e.extensionId.value:(null!==(o=i.item.provider._debugDisplayName)&&void 0!==o?o:"unknown").split("(",1)[0].toLowerCase();this._telemetryService.publicLog2("suggest.acceptedSuggestion",{providerId:s,kind:e.completion.kind,basenameHash:(0,z.vp)((0,V.EZ)(t.uri)).toString(16),languageId:t.getLanguageId(),fileExtension:(0,V.DZ)(t.uri)})}getOverwriteInfo(e,t){(0,h.p_)(this.editor.hasModel());let i="replace"===this.editor.getOption(108).insertMode;t&&(i=!i);const o=e.position.column-e.editStart.column,s=(i?e.editReplaceEnd.column:e.editInsertEnd.column)-e.position.column;return{overwriteBefore:o+(this.editor.getPosition().column-e.position.column),overwriteAfter:s+(this._lineSuffix.value?this._lineSuffix.value.delta(this.editor.getPosition()):0)}}_alertCompletionItem(e){if((0,s.Of)(e.completion.additionalTextEdits)){const t=C.NC("aria.alert.snippet","Accepting '{0}' made {1} additional edits",e.textLabel,e.completion.additionalTextEdits.length);(0,o.Z9)(t)}}triggerSuggest(e,t,i,o){this.editor.hasModel()&&(this.model.trigger({auto:null!=t&&t,shy:!1,noSelect:null!=o&&o},!1,e,void 0,i),this.editor.revealPosition(this.editor.getPosition(),0),this.editor.focus())}triggerSuggestAndAcceptBest(e){if(!this.editor.hasModel())return;const t=this.editor.getPosition(),i=()=>{t.equals(this.editor.getPosition())&&this._commandService.executeCommand(e.fallback)},o=e=>{if(4&e.completion.insertTextRules||e.completion.additionalTextEdits)return!0;const t=this.editor.getPosition(),i=e.editStart.column,o=t.column;if(o-i!==e.completion.insertText.length)return!0;return this.editor.getModel().getValueInRange({startLineNumber:t.lineNumber,startColumn:i,endLineNumber:t.lineNumber,endColumn:o})!==e.completion.insertText};d.ju.once(this.model.onDidTrigger)((e=>{const t=[];d.ju.any(this.model.onDidTrigger,this.model.onDidCancel)((()=>{(0,c.B9)(t),i()}),void 0,t),this.model.onDidSuggest((({completionModel:e})=>{if((0,c.B9)(t),0===e.items.length)return void i();const s=this._memoryService.select(this.editor.getModel(),this.editor.getPosition(),e.items),n=e.items[s];o(n)?(this.editor.pushUndoStop(),this._insertSuggestion({index:s,item:n,model:e},7)):i()}),void 0,t)})),this.model.trigger({auto:!1,shy:!0,noSelect:!1}),this.editor.revealPosition(t,0),this.editor.focus()}acceptSelectedSuggestion(e,t){const i=this.widget.value.getFocusedItem();let o=0;e&&(o|=4),t&&(o|=8),this._insertSuggestion(i,o)}acceptNextSuggestion(){this._alternatives.value.next()}acceptPrevSuggestion(){this._alternatives.value.prev()}cancelSuggestWidget(){this.model.cancel(),this.model.clear(),this.widget.value.hideWidget()}selectNextSuggestion(){this.widget.value.selectNext()}selectNextPageSuggestion(){this.widget.value.selectNextPage()}selectLastSuggestion(){this.widget.value.selectLast()}selectPrevSuggestion(){this.widget.value.selectPrevious()}selectPrevPageSuggestion(){this.widget.value.selectPreviousPage()}selectFirstSuggestion(){this.widget.value.selectFirst()}toggleSuggestionDetails(){this.widget.value.toggleDetails()}toggleExplainMode(){this.widget.value.toggleExplainMode()}toggleSuggestionFocus(){this.widget.value.toggleDetailsFocus()}resetWidgetSize(){this.widget.value.resetPersistedSize()}forceRenderingAbove(){this.widget.value.forceRenderingAbove()}stopForceRenderingAbove(){this.widget.isInitialized&&this.widget.value.stopForceRenderingAbove()}registerSelector(e){return this._selectors.register(e)}};G.ID="editor.contrib.suggestController",G=B([W(1,b.Fh),W(2,I.Hy),W(3,D.i6),W(4,T.TG),W(5,k.VZ),W(6,K.b)],G);class q{constructor(e){this.prioritySelector=e,this._items=new Array}register(e){if(-1!==this._items.indexOf(e))throw new Error("Value is already registered");return this._items.push(e),this._items.sort(((e,t)=>this.prioritySelector(t)-this.prioritySelector(e))),{dispose:()=>{const t=this._items.indexOf(e);t>=0&&this._items.splice(t,1)}}}get itemsOrderedByPriorityDesc(){return this._items}}class U extends m.R6{constructor(){super({id:U.id,label:C.NC("suggest.trigger.label","Trigger Suggest"),alias:"Trigger Suggest",precondition:D.Ao.and(S.u.writable,S.u.hasCompletionItemProvider),kbOpts:{kbExpr:S.u.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[521,2087]},weight:100}})}run(e,t,i){const o=G.get(t);if(!o)return;let s,n;i&&"object"==typeof i&&(!0===i.auto&&(s=!0),!0===i.noSelection&&(n=!0)),o.triggerSuggest(void 0,s,void 0,n)}}U.id="editor.action.triggerSuggest",(0,m._K)(G.ID,G),(0,m.Qr)(U);const H=190,Z=m._l.bindToContribution(G.get);(0,m.fK)(new Z({id:"acceptSelectedSuggestion",precondition:D.Ao.and(O._y.Visible,O._y.HasFocusedSuggestion),handler(e){e.acceptSelectedSuggestion(!0,!1)},kbOpts:[{primary:2,kbExpr:D.Ao.and(O._y.Visible,S.u.textInputFocus),weight:H},{primary:3,kbExpr:D.Ao.and(O._y.Visible,S.u.textInputFocus,O._y.AcceptSuggestionsOnEnter,O._y.MakesTextEdit),weight:H}],menuOpts:[{menuId:O.GI,title:C.NC("accept.insert","Insert"),group:"left",order:1,when:O._y.HasInsertAndReplaceRange.toNegated()},{menuId:O.GI,title:C.NC("accept.insert","Insert"),group:"left",order:1,when:D.Ao.and(O._y.HasInsertAndReplaceRange,O._y.InsertMode.isEqualTo("insert"))},{menuId:O.GI,title:C.NC("accept.replace","Replace"),group:"left",order:1,when:D.Ao.and(O._y.HasInsertAndReplaceRange,O._y.InsertMode.isEqualTo("replace"))}]})),(0,m.fK)(new Z({id:"acceptAlternativeSelectedSuggestion",precondition:D.Ao.and(O._y.Visible,S.u.textInputFocus,O._y.HasFocusedSuggestion),kbOpts:{weight:H,kbExpr:S.u.textInputFocus,primary:1027,secondary:[1026]},handler(e){e.acceptSelectedSuggestion(!1,!0)},menuOpts:[{menuId:O.GI,group:"left",order:2,when:D.Ao.and(O._y.HasInsertAndReplaceRange,O._y.InsertMode.isEqualTo("insert")),title:C.NC("accept.replace","Replace")},{menuId:O.GI,group:"left",order:2,when:D.Ao.and(O._y.HasInsertAndReplaceRange,O._y.InsertMode.isEqualTo("replace")),title:C.NC("accept.insert","Insert")}]})),I.P0.registerCommandAlias("acceptSelectedSuggestionOnEnter","acceptSelectedSuggestion"),(0,m.fK)(new Z({id:"hideSuggestWidget",precondition:O._y.Visible,handler:e=>e.cancelSuggestWidget(),kbOpts:{weight:H,kbExpr:S.u.textInputFocus,primary:9,secondary:[1033]}})),(0,m.fK)(new Z({id:"selectNextSuggestion",precondition:D.Ao.and(O._y.Visible,O._y.MultipleSuggestions),handler:e=>e.selectNextSuggestion(),kbOpts:{weight:H,kbExpr:S.u.textInputFocus,primary:18,secondary:[2066],mac:{primary:18,secondary:[2066,300]}}})),(0,m.fK)(new Z({id:"selectNextPageSuggestion",precondition:D.Ao.and(O._y.Visible,O._y.MultipleSuggestions),handler:e=>e.selectNextPageSuggestion(),kbOpts:{weight:H,kbExpr:S.u.textInputFocus,primary:12,secondary:[2060]}})),(0,m.fK)(new Z({id:"selectLastSuggestion",precondition:D.Ao.and(O._y.Visible,O._y.MultipleSuggestions),handler:e=>e.selectLastSuggestion()})),(0,m.fK)(new Z({id:"selectPrevSuggestion",precondition:D.Ao.and(O._y.Visible,O._y.MultipleSuggestions),handler:e=>e.selectPrevSuggestion(),kbOpts:{weight:H,kbExpr:S.u.textInputFocus,primary:16,secondary:[2064],mac:{primary:16,secondary:[2064,302]}}})),(0,m.fK)(new Z({id:"selectPrevPageSuggestion",precondition:D.Ao.and(O._y.Visible,O._y.MultipleSuggestions),handler:e=>e.selectPrevPageSuggestion(),kbOpts:{weight:H,kbExpr:S.u.textInputFocus,primary:11,secondary:[2059]}})),(0,m.fK)(new Z({id:"selectFirstSuggestion",precondition:D.Ao.and(O._y.Visible,O._y.MultipleSuggestions),handler:e=>e.selectFirstSuggestion()})),(0,m.fK)(new Z({id:"toggleSuggestionDetails",precondition:O._y.Visible,handler:e=>e.toggleSuggestionDetails(),kbOpts:{weight:H,kbExpr:S.u.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[2087]}},menuOpts:[{menuId:O.GI,group:"right",order:1,when:D.Ao.and(O._y.DetailsVisible,O._y.CanResolve),title:C.NC("detail.more","show less")},{menuId:O.GI,group:"right",order:1,when:D.Ao.and(O._y.DetailsVisible.toNegated(),O._y.CanResolve),title:C.NC("detail.less","show more")}]})),(0,m.fK)(new Z({id:"toggleExplainMode",precondition:O._y.Visible,handler:e=>e.toggleExplainMode(),kbOpts:{weight:100,primary:2133}})),(0,m.fK)(new Z({id:"toggleSuggestionFocus",precondition:O._y.Visible,handler:e=>e.toggleSuggestionFocus(),kbOpts:{weight:H,kbExpr:S.u.textInputFocus,primary:2570,mac:{primary:778}}})),(0,m.fK)(new Z({id:"insertBestCompletion",precondition:D.Ao.and(S.u.textInputFocus,D.Ao.equals("config.editor.tabCompletion","on"),w.p.AtEnd,O._y.Visible.toNegated(),E.OtherSuggestions.toNegated(),y.SnippetController2.InSnippetMode.toNegated()),handler:(e,t)=>{e.triggerSuggestAndAcceptBest((0,h.Kn)(t)?Object.assign({fallback:"tab"},t):{fallback:"tab"})},kbOpts:{weight:H,primary:2}})),(0,m.fK)(new Z({id:"insertNextSuggestion",precondition:D.Ao.and(S.u.textInputFocus,D.Ao.equals("config.editor.tabCompletion","on"),E.OtherSuggestions,O._y.Visible.toNegated(),y.SnippetController2.InSnippetMode.toNegated()),handler:e=>e.acceptNextSuggestion(),kbOpts:{weight:H,kbExpr:S.u.textInputFocus,primary:2}})),(0,m.fK)(new Z({id:"insertPrevSuggestion",precondition:D.Ao.and(S.u.textInputFocus,D.Ao.equals("config.editor.tabCompletion","on"),E.OtherSuggestions,O._y.Visible.toNegated(),y.SnippetController2.InSnippetMode.toNegated()),handler:e=>e.acceptPrevSuggestion(),kbOpts:{weight:H,kbExpr:S.u.textInputFocus,primary:1026}})),(0,m.Qr)(class extends m.R6{constructor(){super({id:"editor.action.resetSuggestSize",label:C.NC("suggest.reset.label","Reset Suggest Widget Size"),alias:"Reset Suggest Widget Size",precondition:void 0})}run(e,t){var i;null===(i=G.get(t))||void 0===i||i.resetWidgetSize()}})},69542:function(e,t,i){i.r(t),i.d(t,{SuggestInlineCompletions:function(){return w}});var o=i(97464),s=i(4538),n=i(97865),r=i(38431),l=i(55298),d=i(5603),a=i(50038),c=i(35921),u=i(8420),g=i(32061),h=i(33024),p=i(32905),m=i(77512),_=i(51941),f=i(44333),v=function(e,t,i,o){var s,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var l=e.length-1;l>=0;l--)(s=e[l])&&(r=(n<3?s(r):n>3?s(t,i,r):s(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r},S=function(e,t){return function(i,o){t(i,o,e)}},y=function(e,t,i,o){return new(i||(i=Promise))((function(s,n){function r(e){try{d(o.next(e))}catch(e){n(e)}}function l(e){try{d(o.throw(e))}catch(e){n(e)}}function d(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,l)}d((o=o.apply(e,t||[])).next())}))};class x{constructor(e,t,i,o,s,n){this.range=e,this.insertText=t,this.filterText=i,this.additionalTextEdits=o,this.command=s,this.completion=n}}let b=class extends r.L6{constructor(e,t,i,o,s,n){super(s.disposable),this.model=e,this.line=t,this.word=i,this.completionModel=o,this._suggestMemoryService=n}canBeReused(e,t,i){return this.model===e&&this.line===t&&this.word.word.length>0&&this.word.startColumn===i.startColumn&&this.word.endColumn<i.endColumn&&0===this.completionModel.incomplete.size}get items(){var e;const t=[],{items:i}=this.completionModel,r=this._suggestMemoryService.select(this.model,{lineNumber:this.line,column:this.word.endColumn+this.completionModel.lineContext.characterCountDelta},i),l=n.$.slice(i,r),d=n.$.slice(i,0,r);let c=5;for(const i of n.$.concat(l,d)){if(i.score===s.CL.Default)continue;const n=new a.e(i.editStart.lineNumber,i.editStart.column,i.editInsertEnd.lineNumber,i.editInsertEnd.column+this.completionModel.lineContext.characterCountDelta),r=i.completion.insertTextRules&&i.completion.insertTextRules&u.a7.InsertAsSnippet?{snippet:i.completion.insertText}:i.completion.insertText;t.push(new x(n,r,null!==(e=i.filterTextLow)&&void 0!==e?e:i.labelLow,i.completion.additionalTextEdits,i.completion.command,i)),c-- >=0&&i.resolve(o.T.None)}return t}};b=v([S(5,p.Fh)],b);let w=class{constructor(e,t,i,o){this._getEditorOption=e,this._languageFeatureService=t,this._clipboardService=i,this._suggestMemoryService=o}provideInlineCompletions(e,t,i,o){var s;return y(this,void 0,void 0,(function*(){if(i.selectedSuggestionInfo)return;const n=this._getEditorOption(81,e);if(h.tG.isAllOff(n))return;e.tokenization.tokenizeIfCheap(t.lineNumber);const r=e.tokenization.getLineTokens(t.lineNumber),l=r.getStandardTokenType(r.findTokenIndexAtOffset(Math.max(t.column-1-1,0)));if("inline"!==h.tG.valueFor(n,l))return;let d,c,u=e.getWordAtPosition(t);if((null==u?void 0:u.word)||(d=this._getTriggerCharacterInfo(e,t)),!(null==u?void 0:u.word)&&!d)return;if(u||(u=e.getWordUntilPosition(t)),u.endColumn!==t.column)return;const p=e.getValueInRange(new a.e(t.lineNumber,1,t.lineNumber,t.column));if(!d&&(null===(s=this._lastResult)||void 0===s?void 0:s.canBeReused(e,t.lineNumber,u))){const e=new g.t(p,t.column-this._lastResult.word.endColumn);this._lastResult.completionModel.lineContext=e,this._lastResult.acquire(),c=this._lastResult}else{const i=yield(0,h.kL)(this._languageFeatureService.completionProvider,e,t,new h.A9(void 0,void 0,null==d?void 0:d.providers),d&&{triggerKind:1,triggerCharacter:d.ch},o);let s;i.needsClipboard&&(s=yield this._clipboardService.readText());const n=new g._(i.items,t.column,new g.t(p,0),m.K.None,this._getEditorOption(108,e),this._getEditorOption(103,e),{boostFullMatch:!1,firstMatchCanBeWeak:!1},s);c=new b(e,t.lineNumber,u,n,i,this._suggestMemoryService)}return this._lastResult=c,c}))}handleItemDidShow(e,t){t.completion.resolve(o.T.None)}freeInlineCompletions(e){e.release()}_getTriggerCharacterInfo(e,t){var i;const o=e.getValueInRange(a.e.fromPositions({lineNumber:t.lineNumber,column:t.column-1},t)),s=new Set;for(const t of this._languageFeatureService.completionProvider.all(e))(null===(i=t.triggerCharacters)||void 0===i?void 0:i.includes(o))&&s.add(t);if(0!==s.size)return{providers:s,ch:o}}};w=v([S(1,c.p),S(2,_.p),S(3,p.Fh)],w);let C=class e{constructor(t,i,o,s){if(1==++e._counter){const n=s.createInstance(w,((e,i)=>{var s;return(null!==(s=o.listCodeEditors().find((e=>e.getModel()===i)))&&void 0!==s?s:t).getOption(e)}));e._disposable=i.inlineCompletionsProvider.register("*",n)}}dispose(){var t;0==--e._counter&&(null===(t=e._disposable)||void 0===t||t.dispose(),e._disposable=void 0)}};C._counter=0,C=v([S(1,c.p),S(2,d.$),S(3,f.TG)],C),(0,l._K)("suggest.inlineCompletionsProvider",C)}}]);