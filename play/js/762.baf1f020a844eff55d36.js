(self.webpackChunkapp_template_builder=self.webpackChunkapp_template_builder||[]).push([[762],{15517:function(t,e,i){"use strict";i.d(e,{s:function(){return o}});i(77950),i(48319),i(85940);var r,n,a=i(83522),s=i(27875);(r=self.document)&&!r.getElementById("livereloadscript")&&((n=r.createElement("script")).async=1,n.src="//"+(self.location.host||"localhost").split(":")[0]+":35729/livereload.js?snipver=1",n.id="livereloadscript",r.getElementsByTagName("head")[0].appendChild(n));var o={name:"FormComponentBase",components:{},inject:["onChange","onGetValue","onEvent"],props:{id:{type:String,default:function(){return""}},type:{type:String,default:function(){return""}},extras:{type:Object,default:function(){return{}}},placeholder:{type:String,default:function(){return"请输入"}},rules:{type:Array,default:function(){return[]}},fieldPath:{type:String,default:function(){return""}},componentMap:{type:Object,default:function(){return{}}},formData:{type:Object,default:function(){return{}}}},data:function(){return{}},computed:{value:{get:function(){var t="";return this.formData&&this.fieldPath&&(t=(0,a.g)(this.formData,this.fieldPath)),t},set:function(t){this.onChange(t,this.id)}},validProp:function(){return this.fieldPath.replace(/\//g,".")}}};o.render=function(t,e,i,r,n,a){return(0,s.wg)(),(0,s.iD)("div")},o.__file="src/components/form/base.vue"},24762:function(t,e,i){"use strict";i.r(e),i.d(e,{default:function(){return d}});i(77950),i(48319),i(71245),i(18178),i(43450),i(68995),i(17368),i(51172),i(88233),i(26936),i(21850),i(9949),i(99805);var r,n,a=i(27875),s=i(50349),o=i(15517),u=i(83522);(r=self.document)&&!r.getElementById("livereloadscript")&&((n=r.createElement("script")).async=1,n.src="//"+(self.location.host||"localhost").split(":")[0]+":35729/livereload.js?snipver=1",n.id="livereloadscript",r.getElementsByTagName("head")[0].appendChild(n));var l=(0,a.aZ)({name:"ImageList",extends:o.s,props:{fileList:{type:Array,default:function(){return[]}},width:{type:Number,default:function(){return 50}},height:{type:Number,default:function(){return 50}},disabled:{type:Boolean,default:function(){return!1}}},data:function(){return{input:""}},computed:{itemPicStyle:function(){return"height:".concat(this.height,"px;width:").concat(this.width,"px;")},previewSrcList:function(){return Array.isArray(this.fileList)?this.fileList.map((function(t){return t.url})):[]}},watch:{},created:function(){},methods:{handleImageRemove:function(t){this.$emit("remove",t)}}}),c={class:"atp-image-list"},f=["onClick"];l.render=function(t,e,i,r,n,o){var u=(0,a.up)("CircleCloseFilled"),l=(0,a.up)("el-icon"),d=(0,a.up)("el-image");return(0,a.wg)(),(0,a.iD)("div",c,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(t.fileList,(function(e,i){return(0,a.wg)(),(0,a.iD)("div",{class:"atp-image-list__item mr-2",key:e.url},[(0,a._)("div",{class:"atp-image-list__delete",onClick:function(e){return t.handleImageRemove(i)}},[(0,a.Wm)(l,null,{default:(0,a.w5)((function(){return[(0,a.Wm)(u)]})),_:1})],8,f),(0,a.Wm)(d,{style:(0,s.normalizeStyle)(t.itemPicStyle),class:"atp-image-list__pic",src:e.url,"preview-src-list":t.previewSrcList,fit:"cover"},null,8,["style","src","preview-src-list"])])})),128))])},l.__file="src/components/form/imageUpload/imageList.vue";var d=(0,a.aZ)({name:"ImageUpload",extends:o.s,components:{ImageList:l},props:{title:{type:String,default:function(){return""}},required:{type:Boolean,default:function(){return!1}},placeholder:{type:String,default:function(){return""}}},data:function(){return{}},computed:{showUploadBtn:function(){return 1!==this.extras.maxLimit||this.value.length!==this.extras.maxLimit},uploadBtnStyle:function(){return"height:".concat(this.extras.height,"px;width:").concat(this.extras.width,"px;")},disabledUpload:function(){return this.extras.maxLimit>1&&this.value.length===this.extras.maxLimit}},created:function(){this.setRules(),this.setDefaultValue()},methods:{setRules:function(){if(this.rules){var t=this.title;if(this.required&&this.rules.push({required:!0,message:"".concat(t,"不能为空"),trigger:"submit"}),this.extras){var e=parseInt(this.extras.minLimit),i=parseInt(this.extras.maxLimit);isNaN(e)||isNaN(i)?isNaN(e)?isNaN(i)||this.rules.push({validator:function(t,e,r){Array.isArray(e)&&e.length>i?r(new Error("最多允许上传".concat(i,"个文件"))):r()},trigger:"submit"}):this.rules.push({validator:function(t,i,r){Array.isArray(i)&&i.length<e?r(new Error("最少需要上传".concat(e,"个文件"))):r()},trigger:"submit"}):this.rules.push({validator:function(t,r,n){Array.isArray(r)&&(r.length<e||r.length>i)?n(new Error("上传文件数量在".concat(e,"和").concat(i,"之间"))):n()},trigger:"submit"})}}},setDefaultValue:function(){this.value||this.onChange([],this.id)},beforeUpload:function(t){var e=this.__$app.config.globalProperties.$message,i=new RegExp("^[一-龥A-Za-z0-9_-]+$");if(t.name.split(".").length>2||!i.test(this.filename))return e?e({showClose:!0,message:"文件名仅能包含中文数字英文字母_-",type:"error"}):alert("文件名仅能包含中文数字英文字母_-"),!1;var r=this.extras.fileSizeLimit;if(r.value){var n="MB"===r.unit?1024*r.value:r.value;if(t.size/1024>n)return e?e({showClose:!0,message:"上传文件大小不能超过".concat(r.value).concat(r.unit),type:"error"}):alert("上传文件大小不能超过".concat(r.value).concat(r.unit)),!1}return!0},uploadSuccess:function(t,e,i){var r=this,n=function(e){var n=r.extras.uploadConfig,a=n.nameFieldPath,s=n.urlFieldPath,o=n.thumbUrlFieldPath,l=e.name;a&&(l=(0,u.g)(t,a));var c="";s&&(c=(0,u.g)(t,s));var f=c;o&&(c=(0,u.g)(t,o));var d=i.findIndex((function(t){return t.uid&&t.uid===e.uid}));i[d]={name:l,url:c,thumbUrl:f,uid:e.uid,status:e.status,percentage:e.percentage}};this.extras.actionConfig.success?this.onEvent(this.extras.actionConfig.success,{file:e,res:t,id:this.id,fieldPath:this.fieldPath},n):n(e)},uploadError:function(t,e,i){this.extras.actionConfig.success&&this.onEvent(this.extras.actionConfig.success,{file:e,err:t,id:this.id,fieldPath:this.fieldPath})},handleImageRemove:function(t){var e=this;if(Array.isArray(this.value)){var i=this.value[t];i.status="uploading";var r=function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"success";if(i.status="success","success"===r){var n=(0,u.h)(e.value);n.splice(t,1),e.onChange(n,e.id)}};this.extras.actionConfig.remove?this.onEvent(this.extras.actionConfig.remove,{file:i,id:this.id,fieldPath:this.fieldPath},r):r()}}}});d.render=function(t,e,i,r,n,o){var u=(0,a.up)("image-list"),l=(0,a.up)("Plus"),c=(0,a.up)("el-icon"),f=(0,a.up)("el-upload"),d=(0,a.up)("el-form-item");return(0,a.wg)(),(0,a.j4)(d,{label:t.title,class:(0,s.normalizeClass)([t.required?"is-required":"","atp-image-upload"]),prop:t.validProp,rules:t.rules},{default:(0,a.w5)((function(){return[t.value.length?((0,a.wg)(),(0,a.j4)(u,{key:0,width:t.extras.width,height:t.extras.height,"file-list":t.value,onRemove:t.handleImageRemove},null,8,["width","height","file-list","onRemove"])):(0,a.kq)("v-if",!0),t.showUploadBtn?((0,a.wg)(),(0,a.j4)(f,{key:1,"file-list":t.value,"onUpdate:file-list":e[0]||(e[0]=function(e){return t.value=e}),accept:"image/*",action:t.extras.uploadConfig.action,disabled:t.disabledUpload,"show-file-list":!1,"before-upload":t.beforeUpload,"on-success":t.uploadSuccess,"on-error":t.uploadError},{default:(0,a.w5)((function(){return[(0,a._)("div",{class:(0,s.normalizeClass)(["atp-image-upload__btn",t.disabledUpload?"atp-image-upload__btn--disabled":""]),style:(0,s.normalizeStyle)(t.uploadBtnStyle)},[(0,a.Wm)(c,null,{default:(0,a.w5)((function(){return[(0,a.Wm)(l)]})),_:1})],6)]})),_:1},8,["file-list","action","disabled","before-upload","on-success","on-error"])):(0,a.kq)("v-if",!0)]})),_:1},8,["label","class","prop","rules"])},d.__file="src/components/form/imageUpload/index.vue"},96616:function(t,e,i){var r=i(16039),n=i(31787);t.exports=function(t,e,i){return i.get&&r(i.get,e,{getter:!0}),i.set&&r(i.set,e,{setter:!0}),n.f(t,e,i)}},20835:function(t,e,i){var r=i(26733),n=i(85052),a=i(56540);t.exports=function(t,e,i){var s,o;return a&&r(s=e.constructor)&&s!==i&&n(o=s.prototype)&&o!==i.prototype&&a(t,o),t}},26060:function(t,e,i){var r=i(31787).f;t.exports=function(t,e,i){i in t||r(t,i,{configurable:!0,get:function(){return e[i]},set:function(t){e[i]=t}})}},90143:function(t,e,i){var r=i(65968);t.exports=r(1..valueOf)},9949:function(t,e,i){"use strict";var r=i(23103),n=i(89996).findIndex,a=i(9736),s="findIndex",o=!0;s in[]&&Array(1).findIndex((function(){o=!1})),r({target:"Array",proto:!0,forced:o},{findIndex:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),a(s)},43450:function(t,e,i){"use strict";var r=i(23103),n=i(89996).map;r({target:"Array",proto:!0,forced:!i(31460)("map")},{map:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}})},71245:function(t,e,i){"use strict";var r=i(7400),n=i(9859),a=i(65968),s=i(46541),o=i(14768),u=i(98270),l=i(20835),c=i(91321),f=i(49395),d=i(92066),p=i(24229),h=i(78151).f,g=i(97933).f,m=i(31787).f,v=i(90143),y=i(1017).trim,x="Number",b=n.Number,w=b.prototype,_=n.TypeError,E=a("".slice),I=a("".charCodeAt),N=function(t){var e=d(t,"number");return"bigint"==typeof e?e:S(e)},S=function(t){var e,i,r,n,a,s,o,u,l=d(t,"number");if(f(l))throw _("Cannot convert a Symbol value to a number");if("string"==typeof l&&l.length>2)if(l=y(l),43===(e=I(l,0))||45===e){if(88===(i=I(l,2))||120===i)return NaN}else if(48===e){switch(I(l,1)){case 66:case 98:r=2,n=49;break;case 79:case 111:r=8,n=55;break;default:return+l}for(s=(a=E(l,2)).length,o=0;o<s;o++)if((u=I(a,o))<48||u>n)return NaN;return parseInt(a,r)}return+l};if(s(x,!b(" 0o1")||!b("0b1")||b("+0x1"))){for(var C,A=function(t){var e=arguments.length<1?0:b(N(t)),i=this;return c(w,i)&&p((function(){v(i)}))?l(Object(e),i,A):e},P=r?h(b):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),L=0;P.length>L;L++)u(b,C=P[L])&&!u(A,C)&&m(A,C,g(b,C));A.prototype=w,w.constructor=A,o(n,x,A,{constructor:!0})}},17368:function(t,e,i){var r=i(7400),n=i(9859),a=i(65968),s=i(46541),o=i(20835),u=i(75762),l=i(78151).f,c=i(91321),f=i(48311),d=i(83326),p=i(83349),h=i(25650),g=i(26060),m=i(14768),v=i(24229),y=i(98270),x=i(56407).enforce,b=i(71832),w=i(70095),_=i(42926),E=i(10461),I=w("match"),N=n.RegExp,S=N.prototype,C=n.SyntaxError,A=a(S.exec),P=a("".charAt),L=a("".replace),R=a("".indexOf),k=a("".slice),U=/^\?<[^\s\d!#%&*+<=>@^][^\s!#%&*+<=>@^]*>/,T=/a/g,B=/a/g,D=new N(T)!==T,F=h.MISSED_STICKY,j=h.UNSUPPORTED_Y,O=r&&(!D||F||_||E||v((function(){return B[I]=!1,N(T)!=T||N(B)==B||"/a/i"!=N(T,"i")})));if(s("RegExp",O)){for(var q=function(t,e){var i,r,n,a,s,l,h=c(S,this),g=f(t),m=void 0===e,v=[],b=t;if(!h&&g&&m&&t.constructor===q)return t;if((g||c(S,t))&&(t=t.source,m&&(e=p(b))),t=void 0===t?"":d(t),e=void 0===e?"":d(e),b=t,_&&"dotAll"in T&&(r=!!e&&R(e,"s")>-1)&&(e=L(e,/s/g,"")),i=e,F&&"sticky"in T&&(n=!!e&&R(e,"y")>-1)&&j&&(e=L(e,/y/g,"")),E&&(a=function(t){for(var e,i=t.length,r=0,n="",a=[],s={},o=!1,u=!1,l=0,c="";r<=i;r++){if("\\"===(e=P(t,r)))e+=P(t,++r);else if("]"===e)o=!1;else if(!o)switch(!0){case"["===e:o=!0;break;case"("===e:A(U,k(t,r+1))&&(r+=2,u=!0),n+=e,l++;continue;case">"===e&&u:if(""===c||y(s,c))throw new C("Invalid capture group name");s[c]=!0,a[a.length]=[c,l],u=!1,c="";continue}u?c+=e:n+=e}return[n,a]}(t),t=a[0],v=a[1]),s=o(N(t,e),h?this:S,q),(r||n||v.length)&&(l=x(s),r&&(l.dotAll=!0,l.raw=q(function(t){for(var e,i=t.length,r=0,n="",a=!1;r<=i;r++)"\\"!==(e=P(t,r))?a||"."!==e?("["===e?a=!0:"]"===e&&(a=!1),n+=e):n+="[\\s\\S]":n+=e+P(t,++r);return n}(t),i)),n&&(l.sticky=!0),v.length&&(l.groups=v)),t!==b)try{u(s,"source",""===b?"(?:)":b)}catch(t){}return s},M=l(N),z=0;M.length>z;)g(q,N,M[z++]);S.constructor=q,q.prototype=S,m(n,"RegExp",q,{constructor:!0})}b("RegExp")},51172:function(t,e,i){var r=i(7400),n=i(25650).MISSED_STICKY,a=i(27079),s=i(96616),o=i(56407).get,u=RegExp.prototype,l=TypeError;r&&n&&s(u,"sticky",{configurable:!0,get:function(){if(this!==u){if("RegExp"===a(this))return!!o(this).sticky;throw l("Incompatible receiver, RegExp required")}}})}}]);