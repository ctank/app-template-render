"use strict";(self.webpackChunkapp_template_builder=self.webpackChunkapp_template_builder||[]).push([[4436],{3750:function(t,e,i){i.r(e),i.d(e,{TriggerParameterHintsAction:function(){return Q}});var r=i(38431),s=i(55298),n=i(21081),o=i(16012),a=i(97464),d=i(20996),h=i(14818),c=i(28919),l=i(8964),g=i(35921),u=i(91223),p=i(80793),m=i(70499),f=function(t,e,i,r){return new(i||(i=Promise))((function(s,n){function o(t){try{d(r.next(t))}catch(t){n(t)}}function a(t){try{d(r.throw(t))}catch(t){n(t)}}function d(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}d((r=r.apply(t,e||[])).next())}))};const v={Visible:new m.uy("parameterHintsVisible",!1),MultipleSignatures:new m.uy("parameterHintsMultipleSignatures",!1)};function C(t,e,i,r,s){return f(this,void 0,void 0,(function*(){const n=t.ordered(e);for(const t of n)try{const n=yield t.provideSignatureHelp(e,i,s,r);if(n)return n}catch(t){(0,d.Cp)(t)}}))}p.P0.registerCommand("_executeSignatureHelpProvider",((t,...e)=>f(void 0,void 0,void 0,(function*(){const[i,r,s]=e;(0,h.p_)(c.o.isUri(i)),(0,h.p_)(l.L.isIPosition(r)),(0,h.p_)("string"==typeof s||!s);const n=t.get(g.p),d=yield t.get(u.S).createModelReference(i);try{const t=yield C(n.signatureHelpProvider,d.object.textEditorModel,l.L.lift(r),{triggerKind:o.WW.Invoke,isRetrigger:!1,triggerCharacter:s},a.T.None);if(!t)return;return setTimeout((()=>t.dispose()),0),t.value}finally{d.dispose()}}))));var y,b=i(26386),w=i(44333),x=i(34441),_=i(16644),D=i(28638),H=i(407),S=i(56709),N=i(17416),R=i(47626),T=i(65137),P=i(13484),k=i(55224),M=function(t,e,i,r){return new(i||(i=Promise))((function(s,n){function o(t){try{d(r.next(t))}catch(t){n(t)}}function a(t){try{d(r.throw(t))}catch(t){n(t)}}function d(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(o,a)}d((r=r.apply(t,e||[])).next())}))};!function(t){t.Default={type:0};t.Pending=class{constructor(t,e){this.request=t,this.previouslyActiveHints=e,this.type=2}};t.Active=class{constructor(t){this.hints=t,this.type=1}}}(y||(y={}));class W extends r.JT{constructor(t,e,i=W.DEFAULT_DELAY){super(),this._onChangedHints=this._register(new S.Q5),this.onChangedHints=this._onChangedHints.event,this.triggerOnType=!1,this._state=y.Default,this._pendingTriggers=[],this._lastSignatureHelpResult=this._register(new r.XK),this.triggerChars=new k.q,this.retriggerChars=new k.q,this.triggerId=0,this.editor=t,this.providers=e,this.throttledDelayer=new P.vp(i),this._register(this.editor.onDidBlurEditorWidget((()=>this.cancel()))),this._register(this.editor.onDidChangeConfiguration((()=>this.onEditorConfigurationChange()))),this._register(this.editor.onDidChangeModel((t=>this.onModelChanged()))),this._register(this.editor.onDidChangeModelLanguage((t=>this.onModelChanged()))),this._register(this.editor.onDidChangeCursorSelection((t=>this.onCursorChange(t)))),this._register(this.editor.onDidChangeModelContent((t=>this.onModelContentChange()))),this._register(this.providers.onDidChange(this.onModelChanged,this)),this._register(this.editor.onDidType((t=>this.onDidType(t)))),this.onEditorConfigurationChange(),this.onModelChanged()}get state(){return this._state}set state(t){2===this._state.type&&this._state.request.cancel(),this._state=t}cancel(t=!1){this.state=y.Default,this.throttledDelayer.cancel(),t||this._onChangedHints.fire(void 0)}trigger(t,e){const i=this.editor.getModel();if(!i||!this.providers.has(i))return;const r=++this.triggerId;this._pendingTriggers.push(t),this.throttledDelayer.trigger((()=>this.doTrigger(r)),e).catch(d.dL)}next(){if(1!==this.state.type)return;const t=this.state.hints.signatures.length,e=this.state.hints.activeSignature,i=e%t==t-1,r=this.editor.getOption(78).cycle;!(t<2||i)||r?this.updateActiveSignature(i&&r?0:e+1):this.cancel()}previous(){if(1!==this.state.type)return;const t=this.state.hints.signatures.length,e=this.state.hints.activeSignature,i=0===e,r=this.editor.getOption(78).cycle;!(t<2||i)||r?this.updateActiveSignature(i&&r?t-1:e-1):this.cancel()}updateActiveSignature(t){1===this.state.type&&(this.state=new y.Active(Object.assign(Object.assign({},this.state.hints),{activeSignature:t})),this._onChangedHints.fire(this.state.hints))}doTrigger(t){return M(this,void 0,void 0,(function*(){const e=1===this.state.type||2===this.state.type,i=this.getLastActiveHints();if(this.cancel(!0),0===this._pendingTriggers.length)return!1;const r=this._pendingTriggers.reduce(A);this._pendingTriggers=[];const s={triggerKind:r.triggerKind,triggerCharacter:r.triggerCharacter,isRetrigger:e,activeSignatureHelp:i};if(!this.editor.hasModel())return!1;const n=this.editor.getModel(),o=this.editor.getPosition();this.state=new y.Pending((0,P.PG)((t=>C(this.providers,n,o,s,t))),i);try{const e=yield this.state.request;return t!==this.triggerId?(null==e||e.dispose(),!1):e&&e.value.signatures&&0!==e.value.signatures.length?(this.state=new y.Active(e.value),this._lastSignatureHelpResult.value=e,this._onChangedHints.fire(this.state.hints),!0):(null==e||e.dispose(),this._lastSignatureHelpResult.clear(),this.cancel(),!1)}catch(e){return t===this.triggerId&&(this.state=y.Default),(0,d.dL)(e),!1}}))}getLastActiveHints(){switch(this.state.type){case 1:return this.state.hints;case 2:return this.state.previouslyActiveHints;default:return}}get isTriggered(){return 1===this.state.type||2===this.state.type||this.throttledDelayer.isTriggered()}onModelChanged(){this.cancel(),this.triggerChars=new k.q,this.retriggerChars=new k.q;const t=this.editor.getModel();if(t)for(const e of this.providers.ordered(t)){for(const t of e.signatureHelpTriggerCharacters||[])this.triggerChars.add(t.charCodeAt(0)),this.retriggerChars.add(t.charCodeAt(0));for(const t of e.signatureHelpRetriggerCharacters||[])this.retriggerChars.add(t.charCodeAt(0))}}onDidType(t){if(!this.triggerOnType)return;const e=t.length-1,i=t.charCodeAt(e);(this.triggerChars.has(i)||this.isTriggered&&this.retriggerChars.has(i))&&this.trigger({triggerKind:o.WW.TriggerCharacter,triggerCharacter:t.charAt(e)})}onCursorChange(t){"mouse"===t.source?this.cancel():this.isTriggered&&this.trigger({triggerKind:o.WW.ContentChange})}onModelContentChange(){this.isTriggered&&this.trigger({triggerKind:o.WW.ContentChange})}onEditorConfigurationChange(){this.triggerOnType=this.editor.getOption(78).enabled,this.triggerOnType||this.cancel()}dispose(){this.cancel(!0),super.dispose()}}function A(t,e){switch(e.triggerKind){case o.WW.Invoke:return e;case o.WW.ContentChange:return t;case o.WW.TriggerCharacter:default:return e}}W.DEFAULT_DELAY=120;var O=i(48786),L=i(92537),I=i(89528),$=i(49914),E=i(58566),K=function(t,e,i,r){var s,n=arguments.length,o=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,r);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(n<3?s(o):n>3?s(e,i,o):s(e,i))||o);return n>3&&o&&Object.defineProperty(e,i,o),o},j=function(t,e){return function(i,r){e(i,r,t)}};const q=x.$,V=(0,I.q5)("parameter-hints-next",H.lA.chevronDown,b.NC("parameterHintsNextIcon","Icon for show next parameter hint.")),F=(0,I.q5)("parameter-hints-previous",H.lA.chevronUp,b.NC("parameterHintsPreviousIcon","Icon for show previous parameter hint."));let z=class t extends r.JT{constructor(t,e,i,s,n){super(),this.editor=t,this.renderDisposeables=this._register(new r.SL),this.visible=!1,this.announcedLabel=null,this.allowEditorOverflow=!0,this.markdownRenderer=this._register(new T.$({editor:t},s,i)),this.model=this._register(new W(t,n.signatureHelpProvider)),this.keyVisible=v.Visible.bindTo(e),this.keyMultipleSignatures=v.MultipleSignatures.bindTo(e),this._register(this.model.onChangedHints((t=>{t?(this.show(),this.render(t)):this.hide()})))}createParameterHintDOMNodes(){const t=q(".editor-widget.parameter-hints-widget"),e=x.R3(t,q(".phwrapper"));e.tabIndex=-1;const i=x.R3(e,q(".controls")),r=x.R3(i,q(".button"+E.kS.asCSSSelector(F))),s=x.R3(i,q(".overloads")),n=x.R3(i,q(".button"+E.kS.asCSSSelector(V)));this._register(x.nm(r,"click",(t=>{x.zB.stop(t),this.previous()}))),this._register(x.nm(n,"click",(t=>{x.zB.stop(t),this.next()})));const o=q(".body"),a=new D.s$(o,{alwaysConsumeMouseWheel:!0});this._register(a),e.appendChild(a.getDomNode());const d=x.R3(o,q(".signature")),h=x.R3(o,q(".docs"));t.style.userSelect="text",this.domNodes={element:t,signature:d,overloads:s,docs:h,scrollbar:a},this.editor.addContentWidget(this),this.hide(),this._register(this.editor.onDidChangeCursorSelection((t=>{this.visible&&this.editor.layoutContentWidget(this)})));const c=()=>{if(!this.domNodes)return;const t=this.editor.getOption(46);this.domNodes.element.style.fontSize=`${t.fontSize}px`,this.domNodes.element.style.lineHeight=""+t.lineHeight/t.fontSize};c(),this._register(S.ju.chain(this.editor.onDidChangeConfiguration.bind(this.editor)).filter((t=>t.hasChanged(46))).on(c,null)),this._register(this.editor.onDidLayoutChange((t=>this.updateMaxHeight()))),this.updateMaxHeight()}show(){this.visible||(this.domNodes||this.createParameterHintDOMNodes(),this.keyVisible.set(!0),this.visible=!0,setTimeout((()=>{var t;null===(t=this.domNodes)||void 0===t||t.element.classList.add("visible")}),100),this.editor.layoutContentWidget(this))}hide(){var t;this.renderDisposeables.clear(),this.visible&&(this.keyVisible.reset(),this.visible=!1,this.announcedLabel=null,null===(t=this.domNodes)||void 0===t||t.element.classList.remove("visible"),this.editor.layoutContentWidget(this))}getPosition(){return this.visible?{position:this.editor.getPosition(),preference:[1,2]}:null}render(t){var e;if(this.renderDisposeables.clear(),!this.domNodes)return;const i=t.signatures.length>1;this.domNodes.element.classList.toggle("multiple",i),this.keyMultipleSignatures.set(i),this.domNodes.signature.innerText="",this.domNodes.docs.innerText="";const r=t.signatures[t.activeSignature];if(!r)return;const s=x.R3(this.domNodes.signature,q(".code")),n=this.editor.getOption(46);s.style.fontSize=`${n.fontSize}px`,s.style.fontFamily=n.fontFamily;const o=r.parameters.length>0,a=null!==(e=r.activeParameter)&&void 0!==e?e:t.activeParameter;if(o)this.renderParameters(s,r,a);else{x.R3(s,q("span")).textContent=r.label}const d=r.parameters[a];if(null==d?void 0:d.documentation){const t=q("span.documentation");if("string"==typeof d.documentation)t.textContent=d.documentation;else{const e=this.renderMarkdownDocs(d.documentation);t.appendChild(e.element)}x.R3(this.domNodes.docs,q("p",{},t))}if(void 0===r.documentation);else if("string"==typeof r.documentation)x.R3(this.domNodes.docs,q("p",{},r.documentation));else{const t=this.renderMarkdownDocs(r.documentation);x.R3(this.domNodes.docs,t.element)}const h=this.hasDocs(r,d);if(this.domNodes.signature.classList.toggle("has-docs",h),this.domNodes.docs.classList.toggle("empty",!h),this.domNodes.overloads.textContent=String(t.activeSignature+1).padStart(t.signatures.length.toString().length,"0")+"/"+t.signatures.length,d){let t="";const e=r.parameters[a];t=Array.isArray(e.label)?r.label.substring(e.label[0],e.label[1]):e.label,e.documentation&&(t+="string"==typeof e.documentation?`, ${e.documentation}`:`, ${e.documentation.value}`),r.documentation&&(t+="string"==typeof r.documentation?`, ${r.documentation}`:`, ${r.documentation.value}`),this.announcedLabel!==t&&(_.Z9(b.NC("hint","{0}, hint",t)),this.announcedLabel=t)}this.editor.layoutContentWidget(this),this.domNodes.scrollbar.scanDomNode()}renderMarkdownDocs(t){const e=this.renderDisposeables.add(this.markdownRenderer.render(t,{asyncRenderCallback:()=>{var t;null===(t=this.domNodes)||void 0===t||t.scrollbar.scanDomNode()}}));return e.element.classList.add("markdown-docs"),e}hasDocs(t,e){return!!(e&&"string"==typeof e.documentation&&(0,h.cW)(e.documentation).length>0)||(!!(e&&"object"==typeof e.documentation&&(0,h.cW)(e.documentation).value.length>0)||(!!(t.documentation&&"string"==typeof t.documentation&&(0,h.cW)(t.documentation).length>0)||!!(t.documentation&&"object"==typeof t.documentation&&(0,h.cW)(t.documentation.value).length>0)))}renderParameters(t,e,i){const[r,s]=this.getParameterLabelOffsets(e,i),n=document.createElement("span");n.textContent=e.label.substring(0,r);const o=document.createElement("span");o.textContent=e.label.substring(r,s),o.className="parameter active";const a=document.createElement("span");a.textContent=e.label.substring(s),x.R3(t,n,o,a)}getParameterLabelOffsets(t,e){const i=t.parameters[e];if(i){if(Array.isArray(i.label))return i.label;if(i.label.length){const e=new RegExp(`(\\W|^)${(0,N.ec)(i.label)}(?=\\W|$)`,"g");e.test(t.label);const r=e.lastIndex-i.label.length;return r>=0?[r,e.lastIndex]:[0,0]}return[0,0]}return[0,0]}next(){this.editor.focus(),this.model.next()}previous(){this.editor.focus(),this.model.previous()}cancel(){this.model.cancel()}getDomNode(){return this.domNodes||this.createParameterHintDOMNodes(),this.domNodes.element}getId(){return t.ID}trigger(t){this.model.trigger(t,0)}updateMaxHeight(){if(!this.domNodes)return;const t=`${Math.max(this.editor.getLayoutInfo().height/4,250)}px`;this.domNodes.element.style.maxHeight=t;const e=this.domNodes.element.getElementsByClassName("phwrapper");e.length&&(e[0].style.maxHeight=t)}};z.ID="editor.widget.parameterHintsWidget",z=K([j(1,m.i6),j(2,O.v4),j(3,R.O),j(4,g.p)],z);const G=(0,L.P6G)("editorHoverWidget.highlightForeground",{dark:L.Gwp,light:L.Gwp,hcDark:L.Gwp,hcLight:L.Gwp},b.NC("editorHoverWidgetHighlightForeground","Foreground color of the active item in the parameter hint."));(0,E.Ic)(((t,e)=>{const i=t.getColor(L.CNo);if(i){const r=(0,$.c3)(t.type)?2:1;e.addRule(`.monaco-editor .parameter-hints-widget { border: ${r}px solid ${i}; }`),e.addRule(`.monaco-editor .parameter-hints-widget.multiple .body { border-left: 1px solid ${i.transparent(.5)}; }`),e.addRule(`.monaco-editor .parameter-hints-widget .signature.has-docs { border-bottom: 1px solid ${i.transparent(.5)}; }`)}const r=t.getColor(L.yJx);r&&e.addRule(`.monaco-editor .parameter-hints-widget { background-color: ${r}; }`);const s=t.getColor(L.url);s&&e.addRule(`.monaco-editor .parameter-hints-widget a { color: ${s}; }`);const n=t.getColor(L.sgC);n&&e.addRule(`.monaco-editor .parameter-hints-widget a:hover { color: ${n}; }`);const o=t.getColor(L.Sbf);o&&e.addRule(`.monaco-editor .parameter-hints-widget { color: ${o}; }`);const a=t.getColor(L.SwI);a&&e.addRule(`.monaco-editor .parameter-hints-widget code { background-color: ${a}; }`);const d=t.getColor(G);d&&e.addRule(`.monaco-editor .parameter-hints-widget .parameter.active { color: ${d}}`)}));var B=function(t,e,i,r){var s,n=arguments.length,o=n<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,r);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(n<3?s(o):n>3?s(e,i,o):s(e,i))||o);return n>3&&o&&Object.defineProperty(e,i,o),o},J=function(t,e){return function(i,r){e(i,r,t)}};let U=class t extends r.JT{constructor(t,e){super(),this.editor=t,this.widget=this._register(e.createInstance(z,this.editor))}static get(e){return e.getContribution(t.ID)}cancel(){this.widget.cancel()}previous(){this.widget.previous()}next(){this.widget.next()}trigger(t){this.widget.trigger(t)}};U.ID="editor.controller.parameterHints",U=B([J(1,w.TG)],U);class Q extends s.R6{constructor(){super({id:"editor.action.triggerParameterHints",label:b.NC("parameterHints.trigger.label","Trigger Parameter Hints"),alias:"Trigger Parameter Hints",precondition:n.u.hasSignatureHelpProvider,kbOpts:{kbExpr:n.u.editorTextFocus,primary:3082,weight:100}})}run(t,e){const i=U.get(e);i&&i.trigger({triggerKind:o.WW.Invoke})}}(0,s._K)(U.ID,U),(0,s.Qr)(Q);const Y=s._l.bindToContribution(U.get);(0,s.fK)(new Y({id:"closeParameterHints",precondition:v.Visible,handler:t=>t.cancel(),kbOpts:{weight:175,kbExpr:n.u.focus,primary:9,secondary:[1033]}})),(0,s.fK)(new Y({id:"showPrevParameterHint",precondition:m.Ao.and(v.Visible,v.MultipleSignatures),handler:t=>t.previous(),kbOpts:{weight:175,kbExpr:n.u.focus,primary:16,secondary:[528],mac:{primary:16,secondary:[528,302]}}})),(0,s.fK)(new Y({id:"showNextParameterHint",precondition:m.Ao.and(v.Visible,v.MultipleSignatures),handler:t=>t.next(),kbOpts:{weight:175,kbExpr:n.u.focus,primary:18,secondary:[530],mac:{primary:18,secondary:[530,300]}}}))}}]);