"use strict";(self.webpackChunkapp_template_builder=self.webpackChunkapp_template_builder||[]).push([[9833],{75565:function(e,t,n){n.d(t,{NL:function(){return f},e9:function(){return m}});var i=n(26386),s=n(20996),o=n(57841),r=n(28919),a=n(79989),l=n(77511),c=n(6227);function d(e){return e.toString()}class h{constructor(e,t,n,i,s,o,r){this.beforeVersionId=e,this.afterVersionId=t,this.beforeEOL=n,this.afterEOL=i,this.beforeCursorState=s,this.afterCursorState=o,this.changes=r}static create(e,t){const n=e.getAlternativeVersionId(),i=g(e);return new h(n,n,i,i,t,t,[])}append(e,t,n,i,s){t.length>0&&(this.changes=(0,a.b)(this.changes,t)),this.afterEOL=n,this.afterVersionId=i,this.afterCursorState=s}static _writeSelectionsSize(e){return 4+16*(e?e.length:0)}static _writeSelections(e,t,n){if(l.T4(e,t?t.length:0,n),n+=4,t)for(const i of t)l.T4(e,i.selectionStartLineNumber,n),n+=4,l.T4(e,i.selectionStartColumn,n),n+=4,l.T4(e,i.positionLineNumber,n),n+=4,l.T4(e,i.positionColumn,n),n+=4;return n}static _readSelections(e,t,n){const i=l.Ag(e,t);t+=4;for(let s=0;s<i;s++){const i=l.Ag(e,t);t+=4;const s=l.Ag(e,t);t+=4;const r=l.Ag(e,t);t+=4;const a=l.Ag(e,t);t+=4,n.push(new o.Y(i,s,r,a))}return t}serialize(){let e=10+h._writeSelectionsSize(this.beforeCursorState)+h._writeSelectionsSize(this.afterCursorState)+4;for(const t of this.changes)e+=t.writeSize();const t=new Uint8Array(e);let n=0;l.T4(t,this.beforeVersionId,n),n+=4,l.T4(t,this.afterVersionId,n),n+=4,l.Cg(t,this.beforeEOL,n),n+=1,l.Cg(t,this.afterEOL,n),n+=1,n=h._writeSelections(t,this.beforeCursorState,n),n=h._writeSelections(t,this.afterCursorState,n),l.T4(t,this.changes.length,n),n+=4;for(const e of this.changes)n=e.write(t,n);return t.buffer}static deserialize(e){const t=new Uint8Array(e);let n=0;const i=l.Ag(t,n);n+=4;const s=l.Ag(t,n);n+=4;const o=l.Q$(t,n);n+=1;const r=l.Q$(t,n);n+=1;const c=[];n=h._readSelections(t,n,c);const d=[];n=h._readSelections(t,n,d);const u=l.Ag(t,n);n+=4;const g=[];for(let e=0;e<u;e++)n=a.q.read(t,n,g);return new h(i,s,o,r,c,d,g)}}class u{constructor(e,t,n,i){this.label=e,this.code=t,this.model=n,this._data=h.create(n,i)}get type(){return 0}get resource(){return r.o.isUri(this.model)?this.model:this.model.uri}toString(){return(this._data instanceof h?this._data:h.deserialize(this._data)).changes.map((e=>e.toString())).join(", ")}matchesResource(e){return(r.o.isUri(this.model)?this.model:this.model.uri).toString()===e.toString()}setModel(e){this.model=e}canAppend(e){return this.model===e&&this._data instanceof h}append(e,t,n,i,s){this._data instanceof h&&this._data.append(e,t,n,i,s)}close(){this._data instanceof h&&(this._data=this._data.serialize())}open(){this._data instanceof h||(this._data=h.deserialize(this._data))}undo(){if(r.o.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof h&&(this._data=this._data.serialize());const e=h.deserialize(this._data);this.model._applyUndo(e.changes,e.beforeEOL,e.beforeVersionId,e.beforeCursorState)}redo(){if(r.o.isUri(this.model))throw new Error("Invalid SingleModelEditStackElement");this._data instanceof h&&(this._data=this._data.serialize());const e=h.deserialize(this._data);this.model._applyRedo(e.changes,e.afterEOL,e.afterVersionId,e.afterCursorState)}heapSize(){return this._data instanceof h&&(this._data=this._data.serialize()),this._data.byteLength+168}}function g(e){return"\n"===e.getEOL()?0:1}function m(e){return!!e&&(e instanceof u||e instanceof class{constructor(e,t,n){this.label=e,this.code=t,this.type=1,this._isOpen=!0,this._editStackElementsArr=n.slice(0),this._editStackElementsMap=new Map;for(const e of this._editStackElementsArr){const t=d(e.resource);this._editStackElementsMap.set(t,e)}this._delegate=null}get resources(){return this._editStackElementsArr.map((e=>e.resource))}prepareUndoRedo(){if(this._delegate)return this._delegate.prepareUndoRedo(this)}matchesResource(e){const t=d(e);return this._editStackElementsMap.has(t)}setModel(e){const t=d(r.o.isUri(e)?e:e.uri);this._editStackElementsMap.has(t)&&this._editStackElementsMap.get(t).setModel(e)}canAppend(e){if(!this._isOpen)return!1;const t=d(e.uri);return!!this._editStackElementsMap.has(t)&&this._editStackElementsMap.get(t).canAppend(e)}append(e,t,n,i,s){const o=d(e.uri);this._editStackElementsMap.get(o).append(e,t,n,i,s)}close(){this._isOpen=!1}open(){}undo(){this._isOpen=!1;for(const e of this._editStackElementsArr)e.undo()}redo(){for(const e of this._editStackElementsArr)e.redo()}heapSize(e){const t=d(e);return this._editStackElementsMap.has(t)?this._editStackElementsMap.get(t).heapSize():0}split(){return this._editStackElementsArr}toString(){const e=[];for(const t of this._editStackElementsArr)e.push(`${(0,c.EZ)(t.resource)}: ${t}`);return`{${e.join(", ")}}`}})}class f{constructor(e,t){this._model=e,this._undoRedoService=t}pushStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);m(e)&&e.close()}popStackElement(){const e=this._undoRedoService.getLastElement(this._model.uri);m(e)&&e.open()}clear(){this._undoRedoService.removeElements(this._model.uri)}_getOrCreateEditStackElement(e){const t=this._undoRedoService.getLastElement(this._model.uri);if(m(t)&&t.canAppend(this._model))return t;const n=new u(i.NC("edit","Typing"),"undoredo.textBufferEdit",this._model,e);return this._undoRedoService.pushElement(n),n}pushEOL(e){const t=this._getOrCreateEditStackElement(null);this._model.setEOL(e),t.append(this._model,[],g(this._model),this._model.getAlternativeVersionId(),null)}pushEditOperation(e,t,n){const i=this._getOrCreateEditStackElement(e),s=this._model.applyEdits(t,!0),o=f._computeCursorState(n,s),r=s.map(((e,t)=>({index:t,textChange:e.textChange})));return r.sort(((e,t)=>e.textChange.oldPosition===t.textChange.oldPosition?e.index-t.index:e.textChange.oldPosition-t.textChange.oldPosition)),i.append(this._model,r.map((e=>e.textChange)),g(this._model),this._model.getAlternativeVersionId(),o),o}static _computeCursorState(e,t){try{return e?e(t):null}catch(e){return(0,s.dL)(e),null}}}},32382:function(e,t,n){n.d(t,{W:function(){return h},l:function(){return d}});var i=n(16308),s=n(17416),o=n(61669),r=n(50038),a=n(83388),l=n(6287),c=n(79777);class d extends a.U{constructor(e,t){super(),this.textModel=e,this.languageConfigurationService=t}getLanguageConfiguration(e){return this.languageConfigurationService.getLanguageConfiguration(e)}_computeIndentLevel(e){return(0,l.q)(this.textModel.getLineContent(e+1),this.textModel.getOptions().tabSize)}getActiveIndentGuide(e,t,n){this.assertNotDisposed();const i=this.textModel.getLineCount();if(e<1||e>i)throw new Error("Illegal value for lineNumber");const s=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,o=Boolean(s&&s.offSide);let r=-2,a=-1,l=-2,c=-1;const d=e=>{if(-1!==r&&(-2===r||r>e-1)){r=-1,a=-1;for(let t=e-2;t>=0;t--){const e=this._computeIndentLevel(t);if(e>=0){r=t,a=e;break}}}if(-2===l){l=-1,c=-1;for(let t=e;t<i;t++){const e=this._computeIndentLevel(t);if(e>=0){l=t,c=e;break}}}};let h=-2,u=-1,g=-2,m=-1;const f=e=>{if(-2===h){h=-1,u=-1;for(let t=e-2;t>=0;t--){const e=this._computeIndentLevel(t);if(e>=0){h=t,u=e;break}}}if(-1!==g&&(-2===g||g<e-1)){g=-1,m=-1;for(let t=e;t<i;t++){const e=this._computeIndentLevel(t);if(e>=0){g=t,m=e;break}}}};let p=0,_=!0,S=0,L=!0,b=0,C=0;for(let s=0;_||L;s++){const r=e-s,g=e+s;s>1&&(r<1||r<t)&&(_=!1),s>1&&(g>i||g>n)&&(L=!1),s>5e4&&(_=!1,L=!1);let E=-1;if(_&&r>=1){const e=this._computeIndentLevel(r-1);e>=0?(l=r-1,c=e,E=Math.ceil(e/this.textModel.getOptions().indentSize)):(d(r),E=this._getIndentLevelForWhitespaceLine(o,a,c))}let v=-1;if(L&&g<=i){const e=this._computeIndentLevel(g-1);e>=0?(h=g-1,u=e,v=Math.ceil(e/this.textModel.getOptions().indentSize)):(f(g),v=this._getIndentLevelForWhitespaceLine(o,u,m))}if(0!==s){if(1===s){if(g<=i&&v>=0&&C+1===v){_=!1,p=g,S=g,b=v;continue}if(r>=1&&E>=0&&E-1===C){L=!1,p=r,S=r,b=E;continue}if(p=e,S=e,b=C,0===b)return{startLineNumber:p,endLineNumber:S,indent:b}}_&&(E>=b?p=r:_=!1),L&&(v>=b?S=g:L=!1)}else C=E}return{startLineNumber:p,endLineNumber:S,indent:b}}getLinesBracketGuides(e,t,n,o){var a;const l=[];for(let n=e;n<=t;n++)l.push([]);const d=this.textModel.bracketPairs.getBracketPairsInRangeWithMinIndentation(new r.e(e,1,t,this.textModel.getLineMaxColumn(t)));let u;if(n&&d.length>0){const s=(e<=n.lineNumber&&n.lineNumber<=t?d:this.textModel.bracketPairs.getBracketPairsInRange(r.e.fromPositions(n))).filter((e=>r.e.strictContainsPosition(e.range,n)));u=null===(a=(0,i.dF)(s,(e=>true)))||void 0===a?void 0:a.range}const g=this.textModel.getOptions().bracketPairColorizationOptions.independentColorPoolPerBracketType,m=new h;for(const n of d){if(!n.closingBracketRange)continue;const i=u&&n.range.equalsRange(u);if(!i&&!o.includeInactive)continue;const r=m.getInlineClassName(n.nestingLevel,n.nestingLevelOfEqualBracketType,g)+(o.highlightActive&&i?" "+m.activeClassName:""),a=n.openingBracketRange.getStartPosition(),d=n.closingBracketRange.getStartPosition(),h=o.horizontalGuides===c.s6.Enabled||o.horizontalGuides===c.s6.EnabledForActive&&i;if(n.range.startLineNumber===n.range.endLineNumber){h&&l[n.range.startLineNumber-e].push(new c.UO(-1,n.openingBracketRange.getEndPosition().column,r,new c.vW(!1,d.column),-1,-1));continue}const f=this.getVisibleColumnFromPosition(d),p=this.getVisibleColumnFromPosition(n.openingBracketRange.getStartPosition()),_=Math.min(p,f,n.minVisibleColumnIndentation+1);let S=!1;s.LC(this.textModel.getLineContent(n.closingBracketRange.startLineNumber))<n.closingBracketRange.startColumn-1&&(S=!0);const L=Math.max(a.lineNumber,e),b=Math.min(d.lineNumber,t),C=S?1:0;for(let t=L;t<b+C;t++)l[t-e].push(new c.UO(_,-1,r,null,t===a.lineNumber?a.column:-1,t===d.lineNumber?d.column:-1));h&&(a.lineNumber>=e&&p>_&&l[a.lineNumber-e].push(new c.UO(_,-1,r,new c.vW(!1,a.column),-1,-1)),d.lineNumber<=t&&f>_&&l[d.lineNumber-e].push(new c.UO(_,-1,r,new c.vW(!S,d.column),-1,-1)))}for(const e of l)e.sort(((e,t)=>e.visibleColumn-t.visibleColumn));return l}getVisibleColumnFromPosition(e){return o.i.visibleColumnFromColumn(this.textModel.getLineContent(e.lineNumber),e.column,this.textModel.getOptions().tabSize)+1}getLinesIndentGuides(e,t){this.assertNotDisposed();const n=this.textModel.getLineCount();if(e<1||e>n)throw new Error("Illegal value for startLineNumber");if(t<1||t>n)throw new Error("Illegal value for endLineNumber");const i=this.textModel.getOptions(),s=this.getLanguageConfiguration(this.textModel.getLanguageId()).foldingRules,o=Boolean(s&&s.offSide),r=new Array(t-e+1);let a=-2,l=-1,c=-2,d=-1;for(let s=e;s<=t;s++){const t=s-e,h=this._computeIndentLevel(s-1);if(h>=0)a=s-1,l=h,r[t]=Math.ceil(h/i.indentSize);else{if(-2===a){a=-1,l=-1;for(let e=s-2;e>=0;e--){const t=this._computeIndentLevel(e);if(t>=0){a=e,l=t;break}}}if(-1!==c&&(-2===c||c<s-1)){c=-1,d=-1;for(let e=s;e<n;e++){const t=this._computeIndentLevel(e);if(t>=0){c=e,d=t;break}}}r[t]=this._getIndentLevelForWhitespaceLine(o,l,d)}}return r}_getIndentLevelForWhitespaceLine(e,t,n){const i=this.textModel.getOptions();return-1===t||-1===n?0:t<n?1+Math.floor(t/i.indentSize):t===n||e?Math.ceil(n/i.indentSize):1+Math.floor(n/i.indentSize)}}class h{constructor(){this.activeClassName="indent-active"}getInlineClassName(e,t,n){return this.getInlineClassNameOfLevel(n?t:e)}getInlineClassNameOfLevel(e){return"bracket-indent-guide lvl-"+e%30}}}}]);