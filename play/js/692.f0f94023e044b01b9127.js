"use strict";(self.webpackChunkapp_template_builder=self.webpackChunkapp_template_builder||[]).push([[692],{19083:function(t,n,e){e.d(n,{s:function(){return r}});e(77950),e(85940),e(39529),e(31235);var i=e(81850),o=e(27875),r={name:"ViewComponentBase",components:{},inject:["onChange","onGetValue","onEvent"],props:{id:{type:String,default:function(){return""}},type:{type:String,default:function(){return""}},extras:{type:Object,default:function(){return{}}},showTitle:{type:Boolean,default:function(){return!1}},title:{type:String,default:function(){return""}},dataPath:{type:String,default:function(){return""}},componentMap:{type:Object,default:function(){return{}}},viewData:{type:Object,default:function(){return{}}},permissions:{type:Array,default:function(){return["*"]}}},data:function(){return{}},computed:{value:{get:function(){var t="";return this.viewData&&this.dataPath&&(t=(0,i.a)(this.viewData,this.dataPath)),t},set:function(t){this.$emit("change",t,this.id)}},validProp:function(){return this.fieldPath.replace(/\//g,".")},isAdmin:function(){return!(this.permissions&&(!Array.isArray(this.permissions)||"*"!==this.permissions[0]))}},watch:{},methods:{checkPermission:function(t){return!(t&&!this.permissions.includes(t))}},render:function(t,n,e,i,r,a){return(0,o.wg)(),(0,o.iD)("div")}}},37692:function(t,n,e){e.r(n),e.d(n,{default:function(){return p}});e(18178),e(77950),e(21850),e(85940),e(32501),e(68995),e(16781),e(49228),e(58188);var i=e(27875),o=e(50349),r=e(19083),a=e(81850),l={name:"Tag",props:{color:{type:String,default:function(){return"#000000"}},hit:{type:Boolean,default:function(){return!1}}},computed:{style:function(){return"color:".concat(this.color,";background-color:").concat(this.hex2Rgba(this.color,.1),";")}},methods:{hex2Rgba:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(/^#([0-9A-Fa-f]{3}|[0-9A-Fa-f]{6})$/.test(t)){var e=t.toLowerCase().replace(/\#/g,"");if(3===e.length){for(var i="",o=0;o<e.length;o++)i+=e.slice(o,o+1).concat(e.slice(o,o+1));e=i}for(var r=[],a=0;a<6;a+=2){var l=e.slice(a,a+2);r.push(parseInt("0x"+l))}return"rgba(".concat(r.join(","),",").concat(n,")")}}},render:function(t,n,e,r,a,l){return(0,i.wg)(),(0,i.iD)("span",{class:"atp-tag",style:(0,o.normalizeStyle)(l.style)},[(0,i.WI)(t.$slots,"default")],4)}},u=e(28879),c=(0,i.aZ)({name:"ColumnContent",components:{Tag:l},props:{row:{type:Object,default:function(){return null}},column:{type:Object,default:function(){return null}}},computed:{config:function(){var t=this.row[this.column.fieldPath],n={content:"",isTag:!1,color:""};if("text"===this.column.fieldType)n.content=t;else if("datetime"===this.column.fieldType)n.content=u(t).format(this.column.format||"YYYY-MM-DD HH:mm:ss");else if("option"===this.column.fieldType){var e=(this.column.options||[]).find((function(n){return n.value===t+""}));e&&(n.content=e.label,e.color&&(n.isTag=!0,n.color=e.color))}return n}}}),s={key:0};c.render=function(t,n,e,r,a,l){var u=(0,i.up)("tag");return(0,i.wg)(),(0,i.iD)("div",{class:(0,o.normalizeClass)({"atp-listview__column":!0,"atp-listview__column--click":t.column.clickEvent})},[t.config.isTag?((0,i.wg)(),(0,i.j4)(u,{key:1,color:t.config.color},{default:(0,i.w5)((function(){return[(0,i.Uk)((0,o.toDisplayString)(t.config.content),1)]})),_:1},8,["color"])):((0,i.wg)(),(0,i.iD)("span",s,(0,o.toDisplayString)(t.config.content),1))],2)};var p=(0,i.aZ)({name:"ListView",extends:r.s,components:{ColumnContent:c},data:function(){return{}},computed:{tableStyle:function(){var t={border:!1,stripe:!1};switch(this.extras.tableStyle){case"borderNoStripe":t.border=!0,t.stripe=!1;break;case"borderStripe":t.border=!0,t.stripe=!0;break;case"noBorderNoStripe":t.border=!1,t.stripe=!1;break;case"noBorderStripe":t.border=!1,t.stripe=!0}return t},pagination:function(){return this.viewData.pagination?this.viewData.pagination:{total:0,pageSize:10,currentPage:1}}},methods:{getComponentDisplay:function(t,n){return(0,a.g)(n.showConfig,t)},handleBtnClick:function(t){var n={};if(this.extras.checkBox){var e=this.$refs.listViewTable;n.selections=e.getSelectionRows()||[]}this.onEvent(t,n)},handleColBtnClick:function(t,n){t&&this.onEvent(t,n)},handlePaginationCurrentChange:function(t){this.onEvent("currentChange",t)},handlePaginationSizeChange:function(t){this.onEvent("sizeChange",t)}}}),f={class:"atp-listview"},g={class:"atp-listview__action"},d={key:0,class:"atp-listview__title"};p.render=function(t,n,e,r,a,l){var u=(0,i.up)("el-button"),c=(0,i.up)("el-table-column"),s=(0,i.up)("column-content"),p=(0,i.up)("el-popconfirm"),h=(0,i.up)("el-table"),m=(0,i.up)("el-pagination");return(0,i.wg)(),(0,i.iD)("div",f,[(0,i._)("div",g,[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.extras.operations,(function(n){return(0,i.wg)(),(0,i.iD)(i.HY,null,[t.isAdmin||t.checkPermission(n.permission)?((0,i.wg)(),(0,i.j4)(u,{key:n.buttonEvent,type:n.buttonType,onClick:function(e){return t.handleBtnClick(n.buttonEvent)}},{default:(0,i.w5)((function(){return[(0,i.Uk)((0,o.toDisplayString)(n.buttonName),1)]})),_:2},1032,["type","onClick"])):(0,i.kq)("",!0)],64)})),256))]),t.showTitle?((0,i.wg)(),(0,i.iD)("div",d,(0,o.toDisplayString)(t.title),1)):(0,i.kq)("",!0),(0,i.Wm)(h,{data:t.viewData[t.dataPath],style:{width:"100%"},border:t.tableStyle.border,stripe:t.tableStyle.stripe,ref:"listViewTable"},{default:(0,i.w5)((function(){return[t.extras.checkBox?((0,i.wg)(),(0,i.j4)(c,{key:0,type:"selection",fixed:"left",width:40,align:"center"})):(0,i.kq)("",!0),t.extras.showNum?((0,i.wg)(),(0,i.j4)(c,{key:1,label:"序号",fixed:"left",width:60,align:"center"},{default:(0,i.w5)((function(t){var n=t.$index;return[(0,i.Uk)((0,o.toDisplayString)(n+1),1)]})),_:1})):(0,i.kq)("",!0),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.extras.columns,(function(n,e){return(0,i.wg)(),(0,i.iD)(i.HY,null,["field"===n.type?((0,i.wg)(),(0,i.j4)(c,{key:"field-".concat(e),label:n.label,width:n.width||"",align:n.align||"left"},{default:(0,i.w5)((function(e){var o=e.row;e.$index;return[(0,i.Wm)(s,{row:o,column:n,onClick:function(e){return t.handleColBtnClick(n.clickEvent,o)}},null,8,["row","column","onClick"])]})),_:2},1032,["label","width","align"])):((0,i.wg)(),(0,i.j4)(c,{fixed:"right",key:"button-".concat(e),label:n.label,width:n.width||"",align:n.align||"left"},{default:(0,i.w5)((function(e){var r=e.row;e.$index;return[((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(n.actionConfig,(function(n){return(0,i.wg)(),(0,i.iD)(i.HY,null,[("warning"===n.buttonType||"danger"===n.buttonType)&&n.buttonPopTips&&t.getComponentDisplay(r,n)&&(t.isAdmin||t.checkPermission(n.permission))?((0,i.wg)(),(0,i.j4)(p,{key:"".concat(n.buttonEvent,"_tips"),title:n.buttonPopTips,"confirm-button-type":n.buttonType,onConfirm:function(e){return t.handleColBtnClick(n.buttonEvent,r)}},{reference:(0,i.w5)((function(){return[(0,i.Wm)(u,{type:n.buttonType,link:""},{default:(0,i.w5)((function(){return[(0,i.Uk)((0,o.toDisplayString)(n.buttonName),1)]})),_:2},1032,["type"])]})),_:2},1032,["title","confirm-button-type","onConfirm"])):t.getComponentDisplay(r,n)&&(t.isAdmin||t.checkPermission(n.permission))?((0,i.wg)(),(0,i.j4)(u,{key:n.buttonEvent,type:n.buttonType,link:"",onClick:function(e){return t.handleColBtnClick(n.buttonEvent,r)}},{default:(0,i.w5)((function(){return[(0,i.Uk)((0,o.toDisplayString)(n.buttonName),1)]})),_:2},1032,["type","onClick"])):(0,i.kq)("",!0)],64)})),256))]})),_:2},1032,["label","width","align"]))],64)})),256))]})),_:1},8,["data","border","stripe"]),t.extras.showPagination?((0,i.wg)(),(0,i.j4)(m,{key:1,small:"",background:"",class:"atp-listview__pagination","page-sizes":t.extras.pageSize,layout:"sizes, prev, pager, next",total:t.pagination.total,currentPage:t.pagination.currentPage,"onUpdate:currentPage":n[0]||(n[0]=function(n){return t.pagination.currentPage=n}),pageSize:t.pagination.pageSize,"onUpdate:pageSize":n[1]||(n[1]=function(n){return t.pagination.pageSize=n}),onSizeChange:t.handlePaginationSizeChange,onCurrentChange:t.handlePaginationCurrentChange},null,8,["page-sizes","total","currentPage","pageSize","onSizeChange","onCurrentChange"])):(0,i.kq)("",!0)])}},16781:function(t,n,e){var i=e(23103),o=e(65968),r=e(9337),a=e(10905),l=e(96038),u=o([].join),c=r!=Object,s=l("join",",");i({target:"Array",proto:!0,forced:c||!s},{join:function(t){return u(a(this),void 0===t?",":t)}})}}]);