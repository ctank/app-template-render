"use strict";(self.webpackChunkapp_template_builder=self.webpackChunkapp_template_builder||[]).push([[7860],{90497:function(e,t,i){i.r(t),i.d(t,{RenameAction:function(){return z},rename:function(){return K}});var n=i(16644),o=i(13484),r=i(97464),s=i(20996),a=i(38431),d=i(14818),l=i(28919),c=i(16614),u=i(55298),h=i(53028),p=i(5603),m=i(8964),_=i(50038),v=i(21081),g=i(16576),b=i(15263),f=i(26386),y=i(12326),R=i(70499),w=i(44333),C=i(59271),S=i(97968),I=i(79969),x=i(6325),N=i(55495),P=i(92537),k=i(58566),E=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},j=function(e,t){return function(i,n){t(i,n,e)}};const A=new R.uy("renameInputVisible",!1,(0,f.NC)("renameInputVisible","Whether the rename input widget is visible"));let L=class{constructor(e,t,i,n,o){this._editor=e,this._acceptKeybindings=t,this._themeService=i,this._keybindingService=n,this._disposables=new a.SL,this.allowEditorOverflow=!0,this._visibleContextKey=A.bindTo(o),this._editor.addContentWidget(this),this._disposables.add(this._editor.onDidChangeConfiguration((e=>{e.hasChanged(46)&&this._updateFont()}))),this._disposables.add(i.onDidColorThemeChange(this._updateStyles,this))}dispose(){this._disposables.dispose(),this._editor.removeContentWidget(this)}getId(){return"__renameInputWidget"}getDomNode(){if(!this._domNode){this._domNode=document.createElement("div"),this._domNode.className="monaco-editor rename-box",this._input=document.createElement("input"),this._input.className="rename-input",this._input.type="text",this._input.setAttribute("aria-label",(0,f.NC)("renameAriaLabel","Rename input. Type new name and press Enter to commit.")),this._domNode.appendChild(this._input),this._label=document.createElement("div"),this._label.className="rename-label",this._domNode.appendChild(this._label);const e=()=>{var e,t;const[i,n]=this._acceptKeybindings;this._keybindingService.lookupKeybinding(i),this._label.innerText=(0,f.NC)({key:"label",comment:['placeholders are keybindings, e.g "F2 to Rename, Shift+F2 to Preview"']},"{0} to Rename, {1} to Preview",null===(e=this._keybindingService.lookupKeybinding(i))||void 0===e?void 0:e.getLabel(),null===(t=this._keybindingService.lookupKeybinding(n))||void 0===t?void 0:t.getLabel())};e(),this._disposables.add(this._keybindingService.onDidUpdateKeybindings(e)),this._updateFont(),this._updateStyles(this._themeService.getColorTheme())}return this._domNode}_updateStyles(e){var t,i,n,o;if(!this._input||!this._domNode)return;const r=e.getColor(P.rh);this._domNode.style.backgroundColor=String(null!==(t=e.getColor(P.D0T))&&void 0!==t?t:""),this._domNode.style.boxShadow=r?` 0 0 8px 2px ${r}`:"",this._domNode.style.color=String(null!==(i=e.getColor(P.zJb))&&void 0!==i?i:""),this._input.style.backgroundColor=String(null!==(n=e.getColor(P.sEe))&&void 0!==n?n:"");const s=e.getColor(P.dt_);this._input.style.borderWidth=s?"1px":"0px",this._input.style.borderStyle=s?"solid":"none",this._input.style.borderColor=null!==(o=null==s?void 0:s.toString())&&void 0!==o?o:"none"}_updateFont(){if(!this._input||!this._label)return;const e=this._editor.getOption(46);this._input.style.fontFamily=e.fontFamily,this._input.style.fontWeight=e.fontWeight,this._input.style.fontSize=`${e.fontSize}px`,this._label.style.fontSize=.8*e.fontSize+"px"}getPosition(){return this._visible?{position:this._position,preference:[2,1]}:null}afterRender(e){e||this.cancelInput(!0)}acceptInput(e){var t;null===(t=this._currentAcceptInput)||void 0===t||t.call(this,e)}cancelInput(e){var t;null===(t=this._currentCancelInput)||void 0===t||t.call(this,e)}getInput(e,t,i,n,o,r){this._domNode.classList.toggle("preview",o),this._position=new m.L(e.startLineNumber,e.startColumn),this._input.value=t,this._input.setAttribute("selectionStart",i.toString()),this._input.setAttribute("selectionEnd",n.toString()),this._input.size=Math.max(1.1*(e.endColumn-e.startColumn),20);const s=new a.SL;return new Promise((e=>{this._currentCancelInput=t=>(this._currentAcceptInput=void 0,this._currentCancelInput=void 0,e(t),!0),this._currentAcceptInput=i=>{0!==this._input.value.trim().length&&this._input.value!==t?(this._currentAcceptInput=void 0,this._currentCancelInput=void 0,e({newName:this._input.value,wantsPreview:o&&i})):this.cancelInput(!0)},s.add(r.onCancellationRequested((()=>this.cancelInput(!0)))),s.add(this._editor.onDidBlurEditorWidget((()=>this.cancelInput(!1)))),this._show()})).finally((()=>{s.dispose(),this._hide()}))}_show(){this._editor.revealLineInCenterIfOutsideViewport(this._position.lineNumber,0),this._visible=!0,this._visibleContextKey.set(!0),this._editor.layoutContentWidget(this),setTimeout((()=>{this._input.focus(),this._input.setSelectionRange(parseInt(this._input.getAttribute("selectionStart")),parseInt(this._input.getAttribute("selectionEnd")))}),100)}_hide(){this._visible=!1,this._visibleContextKey.reset(),this._editor.layoutContentWidget(this)}};L=E([j(2,k.XE),j(3,N.d),j(4,R.i6)],L);var O=i(35921),W=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},F=function(e,t){return function(i,n){t(i,n,e)}},T=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{d(n.next(e))}catch(e){r(e)}}function a(e){try{d(n.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}d((n=n.apply(e,t||[])).next())}))};class D{constructor(e,t,i){this.model=e,this.position=t,this._providerRenameIdx=0,this._providers=i.ordered(e)}hasProvider(){return this._providers.length>0}resolveRenameLocation(e){return T(this,void 0,void 0,(function*(){const t=[];for(this._providerRenameIdx=0;this._providerRenameIdx<this._providers.length;this._providerRenameIdx++){const i=this._providers[this._providerRenameIdx];if(!i.resolveRenameLocation)break;const n=yield i.resolveRenameLocation(this.model,this.position,e);if(n){if(!n.rejectReason)return n;t.push(n.rejectReason)}}const i=this.model.getWordAtPosition(this.position);return i?{range:new _.e(this.position.lineNumber,i.startColumn,this.position.lineNumber,i.endColumn),text:i.word,rejectReason:t.length>0?t.join("\n"):void 0}:{range:_.e.fromPositions(this.position),text:"",rejectReason:t.length>0?t.join("\n"):void 0}}))}provideRenameEdits(e,t){return T(this,void 0,void 0,(function*(){return this._provideRenameEdits(e,this._providerRenameIdx,[],t)}))}_provideRenameEdits(e,t,i,n){return T(this,void 0,void 0,(function*(){const o=this._providers[t];if(!o)return{edits:[],rejectReason:i.join("\n")};const r=yield o.provideRenameEdits(this.model,this.position,e,n);return r?r.rejectReason?this._provideRenameEdits(e,t+1,i.concat(r.rejectReason),n):r:this._provideRenameEdits(e,t+1,i.concat(f.NC("no result","No result.")),n)}))}}function K(e,t,i,n){return T(this,void 0,void 0,(function*(){const o=new D(t,i,e),s=yield o.resolveRenameLocation(r.T.None);return(null==s?void 0:s.rejectReason)?{edits:[],rejectReason:s.rejectReason}:o.provideRenameEdits(n,r.T.None)}))}let M=class e{constructor(e,t,i,n,s,d,l,c){this.editor=e,this._instaService=t,this._notificationService=i,this._bulkEditService=n,this._progressService=s,this._logService=d,this._configService=l,this._languageFeaturesService=c,this._disposableStore=new a.SL,this._cts=new r.A,this._renameInputField=this._disposableStore.add(new o.Ue((()=>this._disposableStore.add(this._instaService.createInstance(L,this.editor,["acceptRenameInput","acceptRenameInputWithPreview"])))))}static get(t){return t.getContribution(e.ID)}dispose(){this._disposableStore.dispose(),this._cts.dispose(!0)}run(){var e,t;return T(this,void 0,void 0,(function*(){if(this._cts.dispose(!0),!this.editor.hasModel())return;const i=this.editor.getPosition(),r=new D(this.editor.getModel(),i,this._languageFeaturesService.renameProvider);if(!r.hasProvider())return;let s;this._cts=new c.Dl(this.editor,5);try{const e=r.resolveRenameLocation(this._cts.token);this._progressService.showWhile(e,250),s=yield e}catch(t){return void(null===(e=b.O.get(this.editor))||void 0===e||e.showMessage(t||f.NC("resolveRenameLocationFailed","An unknown error occurred while resolving rename location"),i))}if(!s)return;if(s.rejectReason)return void(null===(t=b.O.get(this.editor))||void 0===t||t.showMessage(s.rejectReason,i));if(this._cts.token.isCancellationRequested)return;this._cts.dispose(),this._cts=new c.Dl(this.editor,5,s.range);const a=this.editor.getSelection();let d=0,l=s.text.length;_.e.isEmpty(a)||_.e.spansMultipleLines(a)||!_.e.containsRange(s.range,a)||(d=Math.max(0,a.startColumn-s.range.startColumn),l=Math.min(s.range.endColumn,a.endColumn)-s.range.startColumn);const u=this._bulkEditService.hasPreviewHandler()&&this._configService.getValue(this.editor.getModel().uri,"editor.rename.enablePreview"),p=yield this._renameInputField.value.getInput(s.range,s.text,d,l,u,this._cts.token);if("boolean"==typeof p)return void(p&&this.editor.focus());this.editor.focus();const m=(0,o.eP)(r.provideRenameEdits(p.newName,this._cts.token),this._cts.token).then((e=>T(this,void 0,void 0,(function*(){e&&this.editor.hasModel()&&(e.rejectReason?this._notificationService.info(e.rejectReason):(this.editor.setSelection(_.e.fromPositions(this.editor.getSelection().getPosition())),this._bulkEditService.apply(h.fo.convert(e),{editor:this.editor,showPreview:p.wantsPreview,label:f.NC("label","Renaming '{0}' to '{1}'",null==s?void 0:s.text,p.newName),code:"undoredo.rename",quotableLabel:f.NC("quotableLabel","Renaming {0} to {1}",null==s?void 0:s.text,p.newName),respectAutoSaveConfig:!0}).then((e=>{e.ariaSummary&&(0,n.Z9)(f.NC("aria","Successfully renamed '{0}' to '{1}'. Summary: {2}",s.text,p.newName,e.ariaSummary))})).catch((e=>{this._notificationService.error(f.NC("rename.failedApply","Rename failed to apply edits")),this._logService.error(e)}))))}))),(e=>{this._notificationService.error(f.NC("rename.failed","Rename failed to compute edits")),this._logService.error(e)}));return this._progressService.showWhile(m,250),m}))}acceptRenameInput(e){this._renameInputField.value.acceptInput(e)}cancelRenameInput(){this._renameInputField.value.cancelInput(!0)}};M.ID="editor.contrib.renameController",M=W([F(1,w.TG),F(2,S.lT),F(3,h.vu),F(4,I.ek),F(5,C.VZ),F(6,g.V),F(7,O.p)],M);class z extends u.R6{constructor(){super({id:"editor.action.rename",label:f.NC("rename.label","Rename Symbol"),alias:"Rename Symbol",precondition:R.Ao.and(v.u.writable,v.u.hasRenameProvider),kbOpts:{kbExpr:v.u.editorTextFocus,primary:60,weight:100},contextMenuOpts:{group:"1_modification",order:1.1}})}runCommand(e,t){const i=e.get(p.$),[n,o]=Array.isArray(t)&&t||[void 0,void 0];return l.o.isUri(n)&&m.L.isIPosition(o)?i.openCodeEditor({resource:n},i.getActiveCodeEditor()).then((e=>{e&&(e.setPosition(o),e.invokeWithinContext((t=>(this.reportTelemetry(t,e),this.run(t,e)))))}),s.dL):super.runCommand(e,t)}run(e,t){const i=M.get(t);return i?i.run():Promise.resolve()}}(0,u._K)(M.ID,M),(0,u.Qr)(z);const V=u._l.bindToContribution(M.get);(0,u.fK)(new V({id:"acceptRenameInput",precondition:A,handler:e=>e.acceptRenameInput(!1),kbOpts:{weight:199,kbExpr:v.u.focus,primary:3}})),(0,u.fK)(new V({id:"acceptRenameInputWithPreview",precondition:R.Ao.and(A,R.Ao.has("config.editor.rename.enablePreview")),handler:e=>e.acceptRenameInput(!0),kbOpts:{weight:199,kbExpr:v.u.focus,primary:1027}})),(0,u.fK)(new V({id:"cancelRenameInput",precondition:A,handler:e=>e.cancelRenameInput(),kbOpts:{weight:199,kbExpr:v.u.focus,primary:9,secondary:[1033]}})),(0,u.sb)("_executeDocumentRenameProvider",(function(e,t,i,...n){const[o]=n;(0,d.p_)("string"==typeof o);const{renameProvider:r}=e.get(O.p);return K(r,t,i,o)})),(0,u.sb)("_executePrepareRename",(function(e,t,i){return T(this,void 0,void 0,(function*(){const{renameProvider:n}=e.get(O.p),o=new D(t,i,n),s=yield o.resolveRenameLocation(r.T.None);if(null==s?void 0:s.rejectReason)throw new Error(s.rejectReason);return s}))})),x.B.as(y.IP.Configuration).registerConfiguration({id:"editor",properties:{"editor.rename.enablePreview":{scope:5,description:f.NC("enablePreview","Enable/disable the ability to preview changes before renaming"),default:!0,type:"boolean"}}})}}]);