"use strict";(self.webpackChunkapp_template_builder=self.webpackChunkapp_template_builder||[]).push([[980],{15517:function(e,t,n){n.d(t,{s:function(){return l}});n(77950),n(48319),n(85940);var r,a,u=n(83522),i=n(27875);(r=self.document)&&!r.getElementById("livereloadscript")&&((a=r.createElement("script")).async=1,a.src="//"+(self.location.host||"localhost").split(":")[0]+":35729/livereload.js?snipver=1",a.id="livereloadscript",r.getElementsByTagName("head")[0].appendChild(a));var l={name:"FormComponentBase",components:{},inject:["onChange","onGetValue","onEvent"],props:{id:{type:String,default:function(){return""}},type:{type:String,default:function(){return""}},extras:{type:Object,default:function(){return{}}},placeholder:{type:String,default:function(){return"请输入"}},rules:{type:Array,default:function(){return[]}},fieldPath:{type:String,default:function(){return""}},componentMap:{type:Object,default:function(){return{}}},formData:{type:Object,default:function(){return{}}}},data:function(){return{}},computed:{value:{get:function(){var e="";return this.formData&&this.fieldPath&&(e=(0,u.g)(this.formData,this.fieldPath)),e},set:function(e){this.onChange(e,this.id)}},validProp:function(){return this.fieldPath.replace(/\//g,".")}}};l.render=function(e,t,n,r,a,u){return(0,i.wg)(),(0,i.iD)("div")},l.__file="src/components/form/base.vue"},18980:function(e,t,n){n.r(t),n.d(t,{default:function(){return d}});n(77950),n(48319),n(71245),n(77208),n(58188),n(88233),n(85940),n(74083),n(21850),n(49228),n(68995),n(18178);var r,a,u=n(27875),i=n(50349),l=n(15517),s=n(83522);(r=self.document)&&!r.getElementById("livereloadscript")&&((a=r.createElement("script")).async=1,a.src="//"+(self.location.host||"localhost").split(":")[0]+":35729/livereload.js?snipver=1",a.id="livereloadscript",r.getElementsByTagName("head")[0].appendChild(a));var o=n(1634),p=(0,u.aZ)({name:"Amount",props:{type:{type:String,default:"money"},step:{type:Number,default:1},max:{type:Number,default:Number.POSITIVE_INFINITY},min:{type:Number,default:Number.NEGATIVE_INFINITY},showText:{type:Boolean,default:!1},modelValue:{type:Number},precision:{type:Number,validator:function(e){return e>=0&&e===Number.parseInt("".concat(e),10)}}},data:function(){return{isFocus:!1}},computed:{inputValue:{get:function(){return this.isFocus?this.modelValue:"percent"===this.type?this.modelValue+"%":this.showText?this.formatText(this.modelValue):this.formatThousandSeparator(this.modelValue)},set:function(e){this.handleValueInput(e)}}},methods:{formatThousandSeparator:function(e){return e||0===e?o(e).format({thousandSeparated:!0,mantissa:2}):""},formatText:function(e){if(e.toString().split(".")[0].length>12)return"位数超过限制，无法显示大写";var t=["零","壹","贰","叁","肆","伍","陆","柒","捌","玖"],n=[["圆","万","亿"],["","拾","佰","仟"]],r=Math.abs(+e),a="";if(isNaN(r))return"";["角","分"].forEach((function(e,n){a+=(t[Math.floor(10*r*Math.pow(10,n))%10]+e).replace(/零./,"")})),a=a||"整",r=Math.floor(r);for(var u=0;u<n[0].length&&r>0;u+=1){for(var i="",l=0;l<n[1].length&&r>0;l+=1)i=t[r%10]+n[1][l]+i,r=Math.floor(r/10);a=i.replace(/(零.)*零$/,"").replace(/^$/,"零")+n[0][u]+a}return a.replace(/(零.)*零圆/,"圆").replace(/(零.)+/g,"零").replace(/^整$/,"零圆整")},validKeyCode:function(e){var t=String.fromCharCode(e.keyCode);return!("."===t&&(this.modelValue+"").indexOf(".")>=0)&&/[\d.]/.test(t)},handleInputFocus:function(){this.isFocus=!0},handleInputBlur:function(){this.isFocus=!1},handleValueChange:function(e){var t=this,n=null,r=!1,a=function(){var n=e.path.find((function(e){return e.dataset.type})),r=t.modelValue;"decrease"===n.dataset.type?--r<0&&(r=0):"increase"===n.dataset.type&&r++,t.handleValueInput(r)};0===e.button&&(document.addEventListener("mouseup",(function(){clearInterval(n),n=null,r||a(),r=!1}),{once:!0}),clearInterval(n),n=setInterval((function(){r=!0,a()}),100))},handleValueInput:function(e){var t=0;(e+"").indexOf(".")>=0&&(t=e.substr(e.indexOf(".")+1).length),!(0,s.e)(this.precision)&&t>this.precision&&(e=o(e).format({mantissa:this.precision})),this.max&&Number(e)>this.max?e=this.max:this.min&&Number(e)<this.min&&(e=this.min),t>0&&0!==Number(e)&&(e=Number(e),isNaN(e)&&(e="")),this.$emit("update:modelValue",e)},handleValueCopy:function(e){var t=this;(0,s.f)(e,(function(e){if(e){var n=t.__$app.config.globalProperties.$message;n?n({showClose:!0,message:"复制成功",type:"success"}):alert("复制成功")}}))}}}),c={class:"atr-number-amount el-input-number"};p.render=function(e,t,n,r,a,l){var s=(0,u.up)("Minus"),o=(0,u.up)("el-icon"),p=(0,u.up)("Plus"),d=(0,u.up)("CopyDocument"),m=(0,u.up)("el-input");return(0,u.wg)(),(0,u.iD)("div",c,[(0,u._)("span",{role:"button","data-type":"decrease",class:(0,i.normalizeClass)(["el-input-number__decrease",{"is-disabled":e.modelValue<=e.min}]),onMousedown:t[0]||(t[0]=function(){return e.handleValueChange&&e.handleValueChange.apply(e,arguments)})},[(0,u.Wm)(o,null,{default:(0,u.w5)((function(){return[(0,u.Wm)(s)]})),_:1})],34),(0,u._)("span",{role:"button","data-type":"increase",class:(0,i.normalizeClass)(["el-input-number__increase",{"is-disabled":e.modelValue>=e.max}]),onMousedown:t[1]||(t[1]=function(){return e.handleValueChange&&e.handleValueChange.apply(e,arguments)})},[(0,u.Wm)(o,null,{default:(0,u.w5)((function(){return[(0,u.Wm)(p)]})),_:1})],34),(0,u.Wm)(m,{modelValue:e.inputValue,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.inputValue=t}),class:"input-with-select",onFocus:e.handleInputFocus,onBlur:e.handleInputBlur,onInput:e.handleValueInput,onKeypress:e.validKeyCode},{suffix:(0,u.w5)((function(){return[(0,u.Wm)(o,{class:"el-input-amount__copy",onClick:t[2]||(t[2]=function(t){return e.handleValueCopy(e.inputValue)})},{default:(0,u.w5)((function(){return[(0,u.Wm)(d)]})),_:1})]})),_:1},8,["modelValue","onFocus","onBlur","onInput","onKeypress"])])},p.__file="src/components/form/number/textInput.vue";var d=(0,u.aZ)({name:"Number",extends:l.s,components:{TextInput:p},props:{title:{type:String,default:function(){return""}},required:{type:Boolean,default:function(){return!1}},placeholder:{type:String,default:function(){return""}}},data:function(){return{input:""}},computed:{isInputNumber:function(){var e=!1;return"int"!==this.extras.validType&&"float"!==this.extras.validType||(e=!0),e}},created:function(){this.setDefaultValue(),this.setRules()},methods:{setRules:function(){if(this.rules){var e=this.title;if(this.required&&this.rules.push({required:!0,message:"".concat(e,"不能为空"),trigger:"blur"}),this.extras){var t=parseInt(this.extras.minLength),n=parseInt(this.extras.maxLength);isNaN(t)||isNaN(n)?isNaN(t)?isNaN(n)||this.rules.push({validator:function(e,t,r){"string"==typeof t&&t.length&&t.length>n?r(new Error("最多可输入".concat(n,"个字符"))):r()},trigger:"blur"}):this.rules.push({validator:function(e,n,r){"string"==typeof n&&n.length&&n.length<t?r(new Error("至少输入".concat(t,"个字符"))):r()},trigger:"blur"}):this.rules.push({validator:function(e,r,a){"string"==typeof r&&r.length&&(r.length<t||r.length>n)?a(new Error("字符长度必须在".concat(t,"和").concat(n,"之间"))):a()},trigger:"blur"}),this.rules.push({validator:function(t,n,r){"string"==typeof n&&n.length&&n.length>128?r(new Error("".concat(e,"的长度不能大于128"))):r()},trigger:"change"})}}},setDefaultValue:function(){this.value||this.$emit("change",this.extras.defaultValue||0,this.id)}}});d.render=function(e,t,n,r,a,l){var s=(0,u.up)("el-input-number"),o=(0,u.up)("text-input"),p=(0,u.up)("el-form-item");return(0,u.wg)(),(0,u.j4)(p,{label:e.title,class:(0,i.normalizeClass)(e.required?"is-required":""),prop:e.validProp,rules:e.rules},{default:(0,u.w5)((function(){return[e.isInputNumber?((0,u.wg)(),(0,u.j4)(s,{key:0,modelValue:e.value,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.value=t}),min:e.extras.min||Number.NEGATIVE_INFINITY,max:e.extras.max||Number.POSITIVE_INFINITY,precision:e.extras.precision,step:e.extras.step},null,8,["modelValue","min","max","precision","step"])):((0,u.wg)(),(0,u.j4)(o,{key:1,modelValue:e.value,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.value=t}),type:e.extras.validType,min:e.extras.min||Number.NEGATIVE_INFINITY,max:e.extras.max||Number.POSITIVE_INFINITY,precision:e.extras.precision,step:e.extras.step,showText:e.extras.showText},null,8,["modelValue","type","min","max","precision","step","showText"]))]})),_:1},8,["label","class","prop","rules"])},d.__file="src/components/form/number/index.vue"}}]);