"use strict";(self.webpackChunkapp_template_builder=self.webpackChunkapp_template_builder||[]).push([[2093],{10521:function(t,e,i){i.d(e,{Fz:function(){return S},Nl:function(){return p},RA:function(){return g},Tj:function(){return x},pd:function(){return n}});var n,s=i(71488),o=i(34441),r=i(6544),a=i(13484),h=i(56709),l=i(38431),c=i(9161),u=i(17416),_=i(60153),d=i(57841);!function(t){t.Tap="-monaco-textarea-synthetic-tap"}(n||(n={}));const g={forceCopyWithSyntaxHighlighting:!1};class p{constructor(){this._lastState=null}set(t,e){this._lastState={lastCopiedValue:t,data:e}}get(t){return this._lastState&&this._lastState.lastCopiedValue===t?this._lastState.data:(this._lastState=null,null)}}p.INSTANCE=new p;class C{constructor(){this._lastTypeTextLength=0}handleCompositionUpdate(t){const e={text:t=t||"",replacePrevCharCnt:this._lastTypeTextLength,replaceNextCharCnt:0,positionDelta:0};return this._lastTypeTextLength=t.length,e}}class S extends l.JT{constructor(t,e,i,n){super(),this._host=t,this._textArea=e,this._OS=i,this._browser=n,this._onFocus=this._register(new h.Q5),this.onFocus=this._onFocus.event,this._onBlur=this._register(new h.Q5),this.onBlur=this._onBlur.event,this._onKeyDown=this._register(new h.Q5),this.onKeyDown=this._onKeyDown.event,this._onKeyUp=this._register(new h.Q5),this.onKeyUp=this._onKeyUp.event,this._onCut=this._register(new h.Q5),this.onCut=this._onCut.event,this._onPaste=this._register(new h.Q5),this.onPaste=this._onPaste.event,this._onType=this._register(new h.Q5),this.onType=this._onType.event,this._onCompositionStart=this._register(new h.Q5),this.onCompositionStart=this._onCompositionStart.event,this._onCompositionUpdate=this._register(new h.Q5),this.onCompositionUpdate=this._onCompositionUpdate.event,this._onCompositionEnd=this._register(new h.Q5),this.onCompositionEnd=this._onCompositionEnd.event,this._onSelectionChangeRequest=this._register(new h.Q5),this.onSelectionChangeRequest=this._onSelectionChangeRequest.event,this._asyncTriggerCut=this._register(new a.pY((()=>this._onCut.fire()),0)),this._asyncFocusGainWriteScreenReaderContent=this._register(new a.pY((()=>this.writeScreenReaderContent("asyncFocusGain")),0)),this._textAreaState=_.un.EMPTY,this._selectionChangeListener=null,this.writeScreenReaderContent("ctor"),this._hasFocus=!1,this._currentComposition=null;let s=null;this._register(this._textArea.onKeyDown((t=>{const e=new r.y(t);(109===e.keyCode||this._currentComposition&&1===e.keyCode)&&e.stopPropagation(),e.equals(9)&&e.preventDefault(),s=e,this._onKeyDown.fire(e)}))),this._register(this._textArea.onKeyUp((t=>{const e=new r.y(t);this._onKeyUp.fire(e)}))),this._register(this._textArea.onCompositionStart((t=>{_.al;const e=new C;if(this._currentComposition)this._currentComposition=e;else{if(this._currentComposition=e,2===this._OS&&s&&s.equals(109)&&this._textAreaState.selectionStart===this._textAreaState.selectionEnd&&this._textAreaState.selectionStart>0&&this._textAreaState.value.substr(this._textAreaState.selectionStart-1,1)===t.data&&("ArrowRight"===s.code||"ArrowLeft"===s.code))return _.al,e.handleCompositionUpdate("x"),void this._onCompositionStart.fire({data:t.data});this._browser.isAndroid,this._onCompositionStart.fire({data:t.data})}}))),this._register(this._textArea.onCompositionUpdate((t=>{_.al;const e=this._currentComposition;if(!e)return;if(this._browser.isAndroid){const e=_.un.readFromTextArea(this._textArea),i=_.un.deduceAndroidCompositionInput(this._textAreaState,e);return this._textAreaState=e,this._onType.fire(i),void this._onCompositionUpdate.fire(t)}const i=e.handleCompositionUpdate(t.data);this._textAreaState=_.un.readFromTextArea(this._textArea),this._onType.fire(i),this._onCompositionUpdate.fire(t)}))),this._register(this._textArea.onCompositionEnd((t=>{_.al;const e=this._currentComposition;if(!e)return;if(this._currentComposition=null,this._browser.isAndroid){const t=_.un.readFromTextArea(this._textArea),e=_.un.deduceAndroidCompositionInput(this._textAreaState,t);return this._textAreaState=t,this._onType.fire(e),void this._onCompositionEnd.fire()}const i=e.handleCompositionUpdate(t.data);this._textAreaState=_.un.readFromTextArea(this._textArea),this._onType.fire(i),this._onCompositionEnd.fire()}))),this._register(this._textArea.onInput((t=>{if(_.al,this._textArea.setIgnoreSelectionChangeTime("received input event"),this._currentComposition)return;const e=_.un.readFromTextArea(this._textArea),i=_.un.deduceInput(this._textAreaState,e,2===this._OS);0===i.replacePrevCharCnt&&1===i.text.length&&u.ZG(i.text.charCodeAt(0))||(this._textAreaState=e,""===i.text&&0===i.replacePrevCharCnt&&0===i.replaceNextCharCnt&&0===i.positionDelta||this._onType.fire(i))}))),this._register(this._textArea.onCut((t=>{this._textArea.setIgnoreSelectionChangeTime("received cut event"),this._ensureClipboardGetsEditorSelection(t),this._asyncTriggerCut.schedule()}))),this._register(this._textArea.onCopy((t=>{this._ensureClipboardGetsEditorSelection(t)}))),this._register(this._textArea.onPaste((t=>{if(this._textArea.setIgnoreSelectionChangeTime("received paste event"),t.preventDefault(),!t.clipboardData)return;let[e,i]=m.getTextData(t.clipboardData);e&&(i=i||p.INSTANCE.get(e),this._onPaste.fire({text:e,metadata:i}))}))),this._register(this._textArea.onFocus((()=>{const t=this._hasFocus;this._setHasFocus(!0),this._browser.isSafari&&!t&&this._hasFocus&&this._asyncFocusGainWriteScreenReaderContent.schedule()}))),this._register(this._textArea.onBlur((()=>{this._currentComposition&&(this._currentComposition=null,this.writeScreenReaderContent("blurWithoutCompositionEnd"),this._onCompositionEnd.fire()),this._setHasFocus(!1)}))),this._register(this._textArea.onSyntheticTap((()=>{this._browser.isAndroid&&this._currentComposition&&(this._currentComposition=null,this.writeScreenReaderContent("tapWithoutCompositionEnd"),this._onCompositionEnd.fire())})))}_installSelectionChangeListener(){let t=0;return o.nm(document,"selectionchange",(e=>{if(!this._hasFocus)return;if(this._currentComposition)return;if(!this._browser.isChrome)return;const i=Date.now(),n=i-t;if(t=i,n<5)return;const s=i-this._textArea.getIgnoreSelectionChangeTime();if(this._textArea.resetSelectionChangeTime(),s<100)return;if(!this._textAreaState.selectionStartPosition||!this._textAreaState.selectionEndPosition)return;const o=this._textArea.getValue();if(this._textAreaState.value!==o)return;const r=this._textArea.getSelectionStart(),a=this._textArea.getSelectionEnd();if(this._textAreaState.selectionStart===r&&this._textAreaState.selectionEnd===a)return;const h=this._textAreaState.deduceEditorPosition(r),l=this._host.deduceModelPosition(h[0],h[1],h[2]),c=this._textAreaState.deduceEditorPosition(a),u=this._host.deduceModelPosition(c[0],c[1],c[2]),_=new d.Y(l.lineNumber,l.column,u.lineNumber,u.column);this._onSelectionChangeRequest.fire(_)}))}dispose(){super.dispose(),this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null)}focusTextArea(){this._setHasFocus(!0),this.refreshFocusState()}isFocused(){return this._hasFocus}refreshFocusState(){this._setHasFocus(this._textArea.hasFocus())}_setHasFocus(t){this._hasFocus!==t&&(this._hasFocus=t,this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null),this._hasFocus&&(this._selectionChangeListener=this._installSelectionChangeListener()),this._hasFocus&&this.writeScreenReaderContent("focusgain"),this._hasFocus?this._onFocus.fire():this._onBlur.fire())}_setAndWriteTextAreaState(t,e){this._hasFocus||(e=e.collapseSelection()),e.writeToTextArea(t,this._textArea,this._hasFocus),this._textAreaState=e}writeScreenReaderContent(t){this._currentComposition||this._setAndWriteTextAreaState(t,this._host.getScreenReaderContent(this._textAreaState))}_ensureClipboardGetsEditorSelection(t){const e=this._host.getDataToCopy(),i={version:1,isFromEmptySelection:e.isFromEmptySelection,multicursorText:e.multicursorText,mode:e.mode};p.INSTANCE.set(this._browser.isFirefox?e.text.replace(/\r\n/g,"\n"):e.text,i),t.preventDefault(),t.clipboardData&&m.setTextData(t.clipboardData,e.text,e.html,i)}}class m{static getTextData(t){const e=t.getData(c.v.text);let i=null;const n=t.getData("vscode-editor-data");if("string"==typeof n)try{i=JSON.parse(n),1!==i.version&&(i=null)}catch(t){}if(0===e.length&&null===i&&t.files.length>0){return[Array.prototype.slice.call(t.files,0).map((t=>t.name)).join("\n"),null]}return[e,i]}static setTextData(t,e,i,n){t.setData(c.v.text,e),"string"==typeof i&&t.setData("text/html",i),t.setData("vscode-editor-data",JSON.stringify(n))}}class x extends l.JT{constructor(t){super(),this._actual=t,this.onKeyDown=this._register(o.IC(this._actual,"keydown")).event,this.onKeyUp=this._register(o.IC(this._actual,"keyup")).event,this.onCompositionStart=this._register(o.IC(this._actual,"compositionstart")).event,this.onCompositionUpdate=this._register(o.IC(this._actual,"compositionupdate")).event,this.onCompositionEnd=this._register(o.IC(this._actual,"compositionend")).event,this.onInput=this._register(o.IC(this._actual,"input")).event,this.onCut=this._register(o.IC(this._actual,"cut")).event,this.onCopy=this._register(o.IC(this._actual,"copy")).event,this.onPaste=this._register(o.IC(this._actual,"paste")).event,this.onFocus=this._register(o.IC(this._actual,"focus")).event,this.onBlur=this._register(o.IC(this._actual,"blur")).event,this._onSyntheticTap=this._register(new h.Q5),this.onSyntheticTap=this._onSyntheticTap.event,this._ignoreSelectionChangeTime=0,this._register(o.nm(this._actual,n.Tap,(()=>this._onSyntheticTap.fire())))}hasFocus(){const t=o.Ay(this._actual);return t?t.activeElement===this._actual:!!o.Uw(this._actual)&&document.activeElement===this._actual}setIgnoreSelectionChangeTime(t){this._ignoreSelectionChangeTime=Date.now()}getIgnoreSelectionChangeTime(){return this._ignoreSelectionChangeTime}resetSelectionChangeTime(){this._ignoreSelectionChangeTime=0}getValue(){return this._actual.value}setValue(t,e){const i=this._actual;i.value!==e&&(this.setIgnoreSelectionChangeTime("setValue"),i.value=e)}getSelectionStart(){return"backward"===this._actual.selectionDirection?this._actual.selectionEnd:this._actual.selectionStart}getSelectionEnd(){return"backward"===this._actual.selectionDirection?this._actual.selectionStart:this._actual.selectionEnd}setSelectionRange(t,e,i){const n=this._actual;let r=null;const a=o.Ay(n);r=a?a.activeElement:document.activeElement;const h=r===n,l=n.selectionStart,c=n.selectionEnd;if(h&&l===e&&c===i)s.isFirefox&&window.parent!==window&&n.focus();else{if(h)return this.setIgnoreSelectionChangeTime("setSelectionRange"),n.setSelectionRange(e,i),void(s.isFirefox&&window.parent!==window&&n.focus());try{const t=o.vL(n);this.setIgnoreSelectionChangeTime("setSelectionRange"),n.focus(),n.setSelectionRange(e,i),o._0(n,t)}catch(t){}}}}},60153:function(t,e,i){i.d(e,{al:function(){return r},ee:function(){return h},un:function(){return a}});var n=i(17416),s=i(8964),o=i(50038);const r=!1;class a{constructor(t,e,i,n,s){this.value=t,this.selectionStart=e,this.selectionEnd=i,this.selectionStartPosition=n,this.selectionEndPosition=s}toString(){return`[ <${this.value}>, selectionStart: ${this.selectionStart}, selectionEnd: ${this.selectionEnd}]`}static readFromTextArea(t){return new a(t.getValue(),t.getSelectionStart(),t.getSelectionEnd(),null,null)}collapseSelection(){return new a(this.value,this.value.length,this.value.length,null,null)}writeToTextArea(t,e,i){e.setValue(t,this.value),i&&e.setSelectionRange(t,this.selectionStart,this.selectionEnd)}deduceEditorPosition(t){if(t<=this.selectionStart){const e=this.value.substring(t,this.selectionStart);return this._finishDeduceEditorPosition(this.selectionStartPosition,e,-1)}if(t>=this.selectionEnd){const e=this.value.substring(this.selectionEnd,t);return this._finishDeduceEditorPosition(this.selectionEndPosition,e,1)}const e=this.value.substring(this.selectionStart,t);if(-1===e.indexOf(String.fromCharCode(8230)))return this._finishDeduceEditorPosition(this.selectionStartPosition,e,1);const i=this.value.substring(t,this.selectionEnd);return this._finishDeduceEditorPosition(this.selectionEndPosition,i,-1)}_finishDeduceEditorPosition(t,e,i){let n=0,s=-1;for(;-1!==(s=e.indexOf("\n",s+1));)n++;return[t,i*e.length,n]}static deduceInput(t,e,i){if(!t)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};const s=Math.min(n.Mh(t.value,e.value),t.selectionStart,e.selectionStart),o=Math.min(n.P1(t.value,e.value),t.value.length-t.selectionEnd,e.value.length-e.selectionEnd),r=(t.value.substring(s,t.value.length-o),e.value.substring(s,e.value.length-o)),a=t.selectionStart-s,h=t.selectionEnd-s;if(e.selectionStart-s===e.selectionEnd-s){return{text:r,replacePrevCharCnt:t.selectionStart-s,replaceNextCharCnt:0,positionDelta:0}}return{text:r,replacePrevCharCnt:h-a,replaceNextCharCnt:0,positionDelta:0}}static deduceAndroidCompositionInput(t,e){if(!t)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};if(t.value===e.value)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:e.selectionEnd-t.selectionEnd};const i=Math.min(n.Mh(t.value,e.value),t.selectionEnd),s=Math.min(n.P1(t.value,e.value),t.value.length-t.selectionEnd),o=t.value.substring(i,t.value.length-s),r=e.value.substring(i,e.value.length-s),a=(t.selectionStart,t.selectionEnd-i),h=(e.selectionStart,e.selectionEnd-i);return{text:r,replacePrevCharCnt:a,replaceNextCharCnt:o.length-a,positionDelta:h-r.length}}}a.EMPTY=new a("",0,0,null,null);class h{static _getPageOfLine(t,e){return Math.floor((t-1)/e)}static _getRangeForPage(t,e){const i=t*e,n=i+1,s=i+e;return new o.e(n,1,s+1,1)}static fromEditorSelection(t,e,i,n,r){const l=h._getPageOfLine(i.startLineNumber,n),c=h._getRangeForPage(l,n),u=h._getPageOfLine(i.endLineNumber,n),_=h._getRangeForPage(u,n),d=c.intersectRanges(new o.e(1,1,i.startLineNumber,i.startColumn));let g=e.getValueInRange(d,1);const p=e.getLineCount(),C=e.getLineMaxColumn(p),S=_.intersectRanges(new o.e(i.endLineNumber,i.endColumn,p,C));let m,x=e.getValueInRange(S,1);if(l===u||l+1===u)m=e.getValueInRange(i,1);else{const t=c.intersectRanges(i),n=_.intersectRanges(i);m=e.getValueInRange(t,1)+String.fromCharCode(8230)+e.getValueInRange(n,1)}if(r){const t=500;g.length>t&&(g=g.substring(g.length-t,g.length)),x.length>t&&(x=x.substring(0,t)),m.length>2*t&&(m=m.substring(0,t)+String.fromCharCode(8230)+m.substring(m.length-t,m.length))}return new a(g+m+x,g.length,g.length+m.length,new s.L(i.startLineNumber,i.startColumn),new s.L(i.endLineNumber,i.endColumn))}}}}]);