"use strict";(self.webpackChunkapp_template_builder=self.webpackChunkapp_template_builder||[]).push([[9551],{65137:function(e,t,s){s.d(t,{$:function(){return p}});var i,o=s(89968),n=s(48786),r=s(47626),c=s(20996),l=s(7358),d=s(56709),a=s(38431),u=s(71344),h=s(90638),g=function(e,t,s,i){var o,n=arguments.length,r=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,i);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(r=(n<3?o(r):n>3?o(t,s,r):o(t,s))||r);return n>3&&r&&Object.defineProperty(t,s,r),r},m=function(e,t){return function(s,i){t(s,i,e)}},_=function(e,t,s,i){return new(s||(s=Promise))((function(o,n){function r(e){try{l(i.next(e))}catch(e){n(e)}}function c(e){try{l(i.throw(e))}catch(e){n(e)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(r,c)}l((i=i.apply(e,t||[])).next())}))};let p=class e{constructor(e,t,s){this._options=e,this._languageService=t,this._openerService=s,this._onDidRenderAsync=new d.Q5,this.onDidRenderAsync=this._onDidRenderAsync.event}dispose(){this._onDidRenderAsync.dispose()}render(e,t,s){if(!e){return{element:document.createElement("span"),dispose:()=>{}}}const i=new a.SL;return{element:i.add((0,o.a)(e,Object.assign(Object.assign({},this._getRenderOptions(e,i)),t),s)).element,dispose:()=>i.dispose()}}_getRenderOptions(t,s){return{codeBlockRenderer:(t,s)=>_(this,void 0,void 0,(function*(){var i,o,n;let r;t?r=this._languageService.getLanguageIdByLanguageName(t):this._options.editor&&(r=null===(i=this._options.editor.getModel())||void 0===i?void 0:i.getLanguageId()),r||(r=h.bd);const c=yield(0,l.C2)(this._languageService,s,r),d=document.createElement("span");if(d.innerHTML=null!==(n=null===(o=e._ttpTokenizer)||void 0===o?void 0:o.createHTML(c))&&void 0!==n?n:c,this._options.editor){const e=this._options.editor.getOption(46);(0,u.N)(d,e)}else this._options.codeBlockFontFamily&&(d.style.fontFamily=this._options.codeBlockFontFamily);return void 0!==this._options.codeBlockFontSize&&(d.style.fontSize=this._options.codeBlockFontSize),d})),asyncRenderCallback:()=>this._onDidRenderAsync.fire(),actionHandler:{callback:e=>this._openerService.open(e,{fromUserGesture:!0,allowContributedOpeners:!0,allowCommands:t.isTrusted}).catch(c.dL),disposables:s}}}};p._ttpTokenizer=null===(i=window.trustedTypes)||void 0===i?void 0:i.createPolicy("tokenizeToString",{createHTML(e){return e}}),p=g([m(1,r.O),m(2,n.v4)],p)},15263:function(e,t,s){s.d(t,{O:function(){return h}});var i=s(16644),o=s(13484),n=s(38431),r=s(55298),c=s(50038),l=s(26386),d=s(70499),a=function(e,t,s,i){var o,n=arguments.length,r=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,i);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(r=(n<3?o(r):n>3?o(t,s,r):o(t,s))||r);return n>3&&r&&Object.defineProperty(t,s,r),r},u=function(e,t){return function(s,i){t(s,i,e)}};let h=class e{constructor(t,s){this._messageWidget=new n.XK,this._messageListeners=new n.SL,this._editor=t,this._visible=e.MESSAGE_VISIBLE.bindTo(s)}static get(t){return t.getContribution(e.ID)}dispose(){this._messageListeners.dispose(),this._messageWidget.dispose(),this._visible.reset()}showMessage(e,t){let s;(0,i.Z9)(e),this._visible.set(!0),this._messageWidget.clear(),this._messageListeners.clear(),this._messageWidget.value=new m(this._editor,t,e),this._messageListeners.add(this._editor.onDidBlurEditorText((()=>this.closeMessage()))),this._messageListeners.add(this._editor.onDidChangeCursorPosition((()=>this.closeMessage()))),this._messageListeners.add(this._editor.onDidDispose((()=>this.closeMessage()))),this._messageListeners.add(this._editor.onDidChangeModel((()=>this.closeMessage()))),this._messageListeners.add(new o._F((()=>this.closeMessage()),3e3)),this._messageListeners.add(this._editor.onMouseMove((e=>{e.target.position&&(s?s.containsPosition(e.target.position)||this.closeMessage():s=new c.e(t.lineNumber-3,1,e.target.position.lineNumber+3,1))})))}closeMessage(){this._visible.reset(),this._messageListeners.clear(),this._messageWidget.value&&this._messageListeners.add(m.fadeOut(this._messageWidget.value))}};h.ID="editor.contrib.messageController",h.MESSAGE_VISIBLE=new d.uy("messageVisible",!1,l.NC("messageVisible","Whether the editor is currently showing an inline message")),h=a([u(1,d.i6)],h);const g=r._l.bindToContribution(h.get);(0,r.fK)(new g({id:"leaveEditorMessage",precondition:h.MESSAGE_VISIBLE,handler:e=>e.closeMessage(),kbOpts:{weight:130,primary:9}}));class m{constructor(e,{lineNumber:t,column:s},i){this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._editor=e,this._editor.revealLinesInCenterIfOutsideViewport(t,t,0),this._position={lineNumber:t,column:s},this._domNode=document.createElement("div"),this._domNode.classList.add("monaco-editor-overlaymessage"),this._domNode.style.marginLeft="-6px";const o=document.createElement("div");o.classList.add("anchor","top"),this._domNode.appendChild(o);const n=document.createElement("div");n.classList.add("message"),n.textContent=i,this._domNode.appendChild(n);const r=document.createElement("div");r.classList.add("anchor","below"),this._domNode.appendChild(r),this._editor.addContentWidget(this),this._domNode.classList.add("fadeIn")}static fadeOut(e){const t=()=>{e.dispose(),clearTimeout(s),e.getDomNode().removeEventListener("animationend",t)},s=setTimeout(t,110);return e.getDomNode().addEventListener("animationend",t),e.getDomNode().classList.add("fadeOut"),{dispose:t}}dispose(){this._editor.removeContentWidget(this)}getId(){return"messageoverlay"}getDomNode(){return this._domNode}getPosition(){return{position:this._position,preference:[1,2],positionAffinity:1}}afterRender(e){this._domNode.classList.toggle("below",2===e)}}(0,r._K)(h.ID,h)},28188:function(e,t,s){s.r(t),s.d(t,{AddSelectionToNextFindMatchAction:function(){return I},AddSelectionToPreviousFindMatchAction:function(){return R},CompatChangeAll:function(){return H},FocusNextCursor:function(){return j},FocusPreviousCursor:function(){return G},InsertCursorAbove:function(){return T},InsertCursorBelow:function(){return w},MoveSelectionToNextFindMatchAction:function(){return P},MoveSelectionToPreviousFindMatchAction:function(){return k},MultiCursorSelectionController:function(){return E},MultiCursorSelectionControllerAction:function(){return A},MultiCursorSession:function(){return y},MultiCursorSessionResult:function(){return O},SelectHighlightsAction:function(){return D},SelectionHighlighter:function(){return V}});var i=s(16644),o=s(13484),n=s(94880),r=s(38431),c=s(55298),l=s(81953),d=s(50038),a=s(57841),u=s(21081),h=s(41913),g=s(132),m=s(69905),_=s(26386),p=s(21208),f=s(70499),C=s(92537),S=s(58566),M=s(35921),v=function(e,t,s,i){var o,n=arguments.length,r=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,i);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(r=(n<3?o(r):n>3?o(t,s,r):o(t,s))||r);return n>3&&r&&Object.defineProperty(t,s,r),r},b=function(e,t){return function(s,i){t(s,i,e)}};function N(e,t){const s=t.filter((t=>!e.find((e=>e.equals(t)))));if(s.length>=1){const e=s.map((e=>`line ${e.viewState.position.lineNumber} column ${e.viewState.position.column}`)).join(", "),t=1===s.length?_.NC("cursorAdded","Cursor added: {0}",e):_.NC("cursorsAdded","Cursors added: {0}",e);(0,i.i7)(t)}}class T extends c.R6{constructor(){super({id:"editor.action.insertCursorAbove",label:_.NC("mutlicursor.insertAbove","Add Cursor Above"),alias:"Add Cursor Above",precondition:void 0,kbOpts:{kbExpr:u.u.editorTextFocus,primary:2576,linux:{primary:1552,secondary:[3088]},weight:100},menuOpts:{menuId:p.eH.MenubarSelectionMenu,group:"3_multi",title:_.NC({key:"miInsertCursorAbove",comment:["&& denotes a mnemonic"]},"&&Add Cursor Above"),order:2}})}run(e,t,s){if(!t.hasModel())return;let i=!0;s&&!1===s.logicalLine&&(i=!1);const o=t._getViewModel();if(o.cursorConfig.readOnly)return;o.model.pushStackElement();const n=o.getCursorStates();o.setCursorStates(s.source,3,l.P.addCursorUp(o,n,i)),o.revealTopMostCursor(s.source),N(n,o.getCursorStates())}}class w extends c.R6{constructor(){super({id:"editor.action.insertCursorBelow",label:_.NC("mutlicursor.insertBelow","Add Cursor Below"),alias:"Add Cursor Below",precondition:void 0,kbOpts:{kbExpr:u.u.editorTextFocus,primary:2578,linux:{primary:1554,secondary:[3090]},weight:100},menuOpts:{menuId:p.eH.MenubarSelectionMenu,group:"3_multi",title:_.NC({key:"miInsertCursorBelow",comment:["&& denotes a mnemonic"]},"A&&dd Cursor Below"),order:3}})}run(e,t,s){if(!t.hasModel())return;let i=!0;s&&!1===s.logicalLine&&(i=!1);const o=t._getViewModel();if(o.cursorConfig.readOnly)return;o.model.pushStackElement();const n=o.getCursorStates();o.setCursorStates(s.source,3,l.P.addCursorDown(o,n,i)),o.revealBottomMostCursor(s.source),N(n,o.getCursorStates())}}class x extends c.R6{constructor(){super({id:"editor.action.insertCursorAtEndOfEachLineSelected",label:_.NC("mutlicursor.insertAtEndOfEachLineSelected","Add Cursors to Line Ends"),alias:"Add Cursors to Line Ends",precondition:void 0,kbOpts:{kbExpr:u.u.editorTextFocus,primary:1575,weight:100},menuOpts:{menuId:p.eH.MenubarSelectionMenu,group:"3_multi",title:_.NC({key:"miInsertCursorAtEndOfEachLineSelected",comment:["&& denotes a mnemonic"]},"Add C&&ursors to Line Ends"),order:4}})}getCursorsForSelection(e,t,s){if(!e.isEmpty()){for(let i=e.startLineNumber;i<e.endLineNumber;i++){const e=t.getLineMaxColumn(i);s.push(new a.Y(i,e,i,e))}e.endColumn>1&&s.push(new a.Y(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn))}}run(e,t){if(!t.hasModel())return;const s=t.getModel(),i=t.getSelections(),o=t._getViewModel(),n=o.getCursorStates(),r=[];i.forEach((e=>this.getCursorsForSelection(e,s,r))),r.length>0&&t.setSelections(r),N(n,o.getCursorStates())}}class F extends c.R6{constructor(){super({id:"editor.action.addCursorsToBottom",label:_.NC("mutlicursor.addCursorsToBottom","Add Cursors To Bottom"),alias:"Add Cursors To Bottom",precondition:void 0})}run(e,t){if(!t.hasModel())return;const s=t.getSelections(),i=t.getModel().getLineCount(),o=[];for(let e=s[0].startLineNumber;e<=i;e++)o.push(new a.Y(e,s[0].startColumn,e,s[0].endColumn));const n=t._getViewModel(),r=n.getCursorStates();o.length>0&&t.setSelections(o),N(r,n.getCursorStates())}}class L extends c.R6{constructor(){super({id:"editor.action.addCursorsToTop",label:_.NC("mutlicursor.addCursorsToTop","Add Cursors To Top"),alias:"Add Cursors To Top",precondition:void 0})}run(e,t){if(!t.hasModel())return;const s=t.getSelections(),i=[];for(let e=s[0].startLineNumber;e>=1;e--)i.push(new a.Y(e,s[0].startColumn,e,s[0].endColumn));const o=t._getViewModel(),n=o.getCursorStates();i.length>0&&t.setSelections(i),N(n,o.getCursorStates())}}class O{constructor(e,t,s){this.selections=e,this.revealRange=t,this.revealScrollType=s}}class y{constructor(e,t,s,i,o,n,r){this._editor=e,this.findController=t,this.isDisconnectedFromFindController=s,this.searchText=i,this.wholeWord=o,this.matchCase=n,this.currentMatch=r}static create(e,t){if(!e.hasModel())return null;const s=t.getState();if(!e.hasTextFocus()&&s.isRevealed&&s.searchString.length>0)return new y(e,t,!1,s.searchString,s.wholeWord,s.matchCase,null);let i,o,n=!1;const r=e.getSelections();1===r.length&&r[0].isEmpty()?(n=!0,i=!0,o=!0):(i=s.wholeWord,o=s.matchCase);const c=e.getSelection();let l,d=null;if(c.isEmpty()){const t=e.getConfiguredWordAtPosition(c.getStartPosition());if(!t)return null;l=t.word,d=new a.Y(c.startLineNumber,t.startColumn,c.startLineNumber,t.endColumn)}else l=e.getModel().getValueInRange(c).replace(/\r\n/g,"\n");return new y(e,t,n,l,i,o,d)}addSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;const e=this._getNextMatch();if(!e)return null;const t=this._editor.getSelections();return new O(t.concat(e),e,0)}moveSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;const e=this._getNextMatch();if(!e)return null;const t=this._editor.getSelections();return new O(t.slice(0,t.length-1).concat(e),e,0)}_getNextMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){const e=this.currentMatch;return this.currentMatch=null,e}this.findController.highlightFindOptions();const e=this._editor.getSelections(),t=e[e.length-1],s=this._editor.getModel().findNextMatch(this.searchText,t.getEndPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(119):null,!1);return s?new a.Y(s.range.startLineNumber,s.range.startColumn,s.range.endLineNumber,s.range.endColumn):null}addSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;const e=this._getPreviousMatch();if(!e)return null;const t=this._editor.getSelections();return new O(t.concat(e),e,0)}moveSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;const e=this._getPreviousMatch();if(!e)return null;const t=this._editor.getSelections();return new O(t.slice(0,t.length-1).concat(e),e,0)}_getPreviousMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){const e=this.currentMatch;return this.currentMatch=null,e}this.findController.highlightFindOptions();const e=this._editor.getSelections(),t=e[e.length-1],s=this._editor.getModel().findPreviousMatch(this.searchText,t.getStartPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(119):null,!1);return s?new a.Y(s.range.startLineNumber,s.range.startColumn,s.range.endLineNumber,s.range.endColumn):null}selectAll(e){if(!this._editor.hasModel())return[];this.findController.highlightFindOptions();const t=this._editor.getModel();return e?t.findMatches(this.searchText,e,!1,this.matchCase,this.wholeWord?this._editor.getOption(119):null,!1,1073741824):t.findMatches(this.searchText,!0,!1,this.matchCase,this.wholeWord?this._editor.getOption(119):null,!1,1073741824)}}class E extends r.JT{constructor(e){super(),this._sessionDispose=this._register(new r.SL),this._editor=e,this._ignoreSelectionChange=!1,this._session=null}static get(e){return e.getContribution(E.ID)}dispose(){this._endSession(),super.dispose()}_beginSessionIfNeeded(e){if(!this._session){const t=y.create(this._editor,e);if(!t)return;this._session=t;const s={searchString:this._session.searchText};this._session.isDisconnectedFromFindController&&(s.wholeWordOverride=1,s.matchCaseOverride=1,s.isRegexOverride=2),e.getState().change(s,!1),this._sessionDispose.add(this._editor.onDidChangeCursorSelection((e=>{this._ignoreSelectionChange||this._endSession()}))),this._sessionDispose.add(this._editor.onDidBlurEditorText((()=>{this._endSession()}))),this._sessionDispose.add(e.getState().onFindReplaceStateChange((e=>{(e.matchCase||e.wholeWord)&&this._endSession()})))}}_endSession(){if(this._sessionDispose.clear(),this._session&&this._session.isDisconnectedFromFindController){const e={wholeWordOverride:0,matchCaseOverride:0,isRegexOverride:0};this._session.findController.getState().change(e,!1)}this._session=null}_setSelections(e){this._ignoreSelectionChange=!0,this._editor.setSelections(e),this._ignoreSelectionChange=!1}_expandEmptyToWord(e,t){if(!t.isEmpty())return t;const s=this._editor.getConfiguredWordAtPosition(t.getStartPosition());return s?new a.Y(t.startLineNumber,s.startColumn,t.startLineNumber,s.endColumn):t}_applySessionResult(e){e&&(this._setSelections(e.selections),e.revealRange&&this._editor.revealRangeInCenterIfOutsideViewport(e.revealRange,e.revealScrollType))}getSession(e){return this._session}addSelectionToNextFindMatch(e){if(this._editor.hasModel()){if(!this._session){const t=this._editor.getSelections();if(t.length>1){const s=e.getState().matchCase;if(!B(this._editor.getModel(),t,s)){const e=this._editor.getModel(),s=[];for(let i=0,o=t.length;i<o;i++)s[i]=this._expandEmptyToWord(e,t[i]);return void this._editor.setSelections(s)}}}this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToNextFindMatch())}}addSelectionToPreviousFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToPreviousFindMatch())}moveSelectionToNextFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToNextFindMatch())}moveSelectionToPreviousFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToPreviousFindMatch())}selectAll(e){if(!this._editor.hasModel())return;let t=null;const s=e.getState();if(s.isRevealed&&s.searchString.length>0&&s.isRegex){const e=this._editor.getModel();t=s.searchScope?e.findMatches(s.searchString,s.searchScope,s.isRegex,s.matchCase,s.wholeWord?this._editor.getOption(119):null,!1,1073741824):e.findMatches(s.searchString,!0,s.isRegex,s.matchCase,s.wholeWord?this._editor.getOption(119):null,!1,1073741824)}else{if(this._beginSessionIfNeeded(e),!this._session)return;t=this._session.selectAll(s.searchScope)}if(t.length>0){const e=this._editor.getSelection();for(let s=0,i=t.length;s<i;s++){const i=t[s];if(i.range.intersectRanges(e)){t[s]=t[0],t[0]=i;break}}this._setSelections(t.map((e=>new a.Y(e.range.startLineNumber,e.range.startColumn,e.range.endLineNumber,e.range.endColumn))))}}}E.ID="editor.contrib.multiCursorController";class A extends c.R6{run(e,t){const s=E.get(t);if(!s)return;const i=m.CommonFindController.get(t);if(!i)return;const o=t._getViewModel();if(o){const e=o.getCursorStates();this._run(s,i),N(e,o.getCursorStates())}}}class I extends A{constructor(){super({id:"editor.action.addSelectionToNextFindMatch",label:_.NC("addSelectionToNextFindMatch","Add Selection To Next Find Match"),alias:"Add Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:u.u.focus,primary:2082,weight:100},menuOpts:{menuId:p.eH.MenubarSelectionMenu,group:"3_multi",title:_.NC({key:"miAddSelectionToNextFindMatch",comment:["&& denotes a mnemonic"]},"Add &&Next Occurrence"),order:5}})}_run(e,t){e.addSelectionToNextFindMatch(t)}}class R extends A{constructor(){super({id:"editor.action.addSelectionToPreviousFindMatch",label:_.NC("addSelectionToPreviousFindMatch","Add Selection To Previous Find Match"),alias:"Add Selection To Previous Find Match",precondition:void 0,menuOpts:{menuId:p.eH.MenubarSelectionMenu,group:"3_multi",title:_.NC({key:"miAddSelectionToPreviousFindMatch",comment:["&& denotes a mnemonic"]},"Add P&&revious Occurrence"),order:6}})}_run(e,t){e.addSelectionToPreviousFindMatch(t)}}class P extends A{constructor(){super({id:"editor.action.moveSelectionToNextFindMatch",label:_.NC("moveSelectionToNextFindMatch","Move Last Selection To Next Find Match"),alias:"Move Last Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:u.u.focus,primary:(0,n.gx)(2089,2082),weight:100}})}_run(e,t){e.moveSelectionToNextFindMatch(t)}}class k extends A{constructor(){super({id:"editor.action.moveSelectionToPreviousFindMatch",label:_.NC("moveSelectionToPreviousFindMatch","Move Last Selection To Previous Find Match"),alias:"Move Last Selection To Previous Find Match",precondition:void 0})}_run(e,t){e.moveSelectionToPreviousFindMatch(t)}}class D extends A{constructor(){super({id:"editor.action.selectHighlights",label:_.NC("selectAllOccurrencesOfFindMatch","Select All Occurrences of Find Match"),alias:"Select All Occurrences of Find Match",precondition:void 0,kbOpts:{kbExpr:u.u.focus,primary:3114,weight:100},menuOpts:{menuId:p.eH.MenubarSelectionMenu,group:"3_multi",title:_.NC({key:"miSelectHighlights",comment:["&& denotes a mnemonic"]},"Select All &&Occurrences"),order:7}})}_run(e,t){e.selectAll(t)}}class H extends A{constructor(){super({id:"editor.action.changeAll",label:_.NC("changeAll.label","Change All Occurrences"),alias:"Change All Occurrences",precondition:f.Ao.and(u.u.writable,u.u.editorTextFocus),kbOpts:{kbExpr:u.u.editorTextFocus,primary:2108,weight:100},contextMenuOpts:{group:"1_modification",order:1.2}})}_run(e,t){e.selectAll(t)}}class W{constructor(e,t,s,i,o){this._model=e,this._searchText=t,this._matchCase=s,this._wordSeparators=i,this._modelVersionId=this._model.getVersionId(),this._cachedFindMatches=null,o&&this._model===o._model&&this._searchText===o._searchText&&this._matchCase===o._matchCase&&this._wordSeparators===o._wordSeparators&&this._modelVersionId===o._modelVersionId&&(this._cachedFindMatches=o._cachedFindMatches)}findMatches(){return null===this._cachedFindMatches&&(this._cachedFindMatches=this._model.findMatches(this._searchText,!0,!1,this._matchCase,this._wordSeparators,!1).map((e=>e.range)),this._cachedFindMatches.sort(d.e.compareRangesUsingStarts)),this._cachedFindMatches}}let V=class e extends r.JT{constructor(e,t){super(),this._languageFeaturesService=t,this.editor=e,this._isEnabled=e.getOption(99),this._decorations=e.createDecorationsCollection(),this.updateSoon=this._register(new o.pY((()=>this._update()),300)),this.state=null,this._register(e.onDidChangeConfiguration((t=>{this._isEnabled=e.getOption(99)}))),this._register(e.onDidChangeCursorSelection((e=>{this._isEnabled&&(e.selection.isEmpty()?3===e.reason?(this.state&&this._setState(null),this.updateSoon.schedule()):this._setState(null):this._update())}))),this._register(e.onDidChangeModel((e=>{this._setState(null)}))),this._register(e.onDidChangeModelContent((e=>{this._isEnabled&&this.updateSoon.schedule()})));const s=m.CommonFindController.get(e);s&&this._register(s.getState().onFindReplaceStateChange((e=>{this._update()})))}_update(){this._setState(e._createState(this.state,this._isEnabled,this.editor))}static _createState(e,t,s){if(!t)return null;if(!s.hasModel())return null;const i=s.getSelection();if(i.startLineNumber!==i.endLineNumber)return null;const o=E.get(s);if(!o)return null;const n=m.CommonFindController.get(s);if(!n)return null;let r=o.getSession(n);if(!r){const e=s.getSelections();if(e.length>1){const t=n.getState().matchCase;if(!B(s.getModel(),e,t))return null}r=y.create(s,n)}if(!r)return null;if(r.currentMatch)return null;if(/^[ \t]+$/.test(r.searchText))return null;if(r.searchText.length>200)return null;const c=n.getState(),l=c.matchCase;if(c.isRevealed){let e=c.searchString;l||(e=e.toLowerCase());let t=r.searchText;if(l||(t=t.toLowerCase()),e===t&&r.matchCase===c.matchCase&&r.wholeWord===c.wholeWord&&!c.isRegex)return null}return new W(s.getModel(),r.searchText,r.matchCase,r.wholeWord?s.getOption(119):null,e)}_setState(t){if(this.state=t,!this.state)return void this._decorations.clear();if(!this.editor.hasModel())return;const s=this.editor.getModel();if(s.isTooLargeForTokenization())return;const i=this.state.findMatches(),o=this.editor.getSelections();o.sort(d.e.compareRangesUsingStarts);const n=[];for(let e=0,t=0,s=i.length,r=o.length;e<s;){const s=i[e];if(t>=r)n.push(s),e++;else{const i=d.e.compareRangesUsingStarts(s,o[t]);i<0?(!o[t].isEmpty()&&d.e.areIntersecting(s,o[t])||n.push(s),e++):(i>0||e++,t++)}}const r=this._languageFeaturesService.documentHighlightProvider.has(s)&&this.editor.getOption(74),c=n.map((t=>({range:t,options:r?e._SELECTION_HIGHLIGHT:e._SELECTION_HIGHLIGHT_OVERVIEW})));this._decorations.set(c)}dispose(){this._setState(null),super.dispose()}};function B(e,t,s){const i=Q(e,t[0],!s);for(let o=1,n=t.length;o<n;o++){const n=t[o];if(n.isEmpty())return!1;if(i!==Q(e,n,!s))return!1}return!0}function Q(e,t,s){const i=e.getValueInRange(t);return s?i.toLowerCase():i}V.ID="editor.contrib.selectionHighlighter",V._SELECTION_HIGHLIGHT_OVERVIEW=g.qx.register({description:"selection-highlight-overview",stickiness:1,className:"selectionHighlight",minimap:{color:(0,S.EN)(C.IYc),position:h.F5.Inline},overviewRuler:{color:(0,S.EN)(C.SPM),position:h.sh.Center}}),V._SELECTION_HIGHLIGHT=g.qx.register({description:"selection-highlight",stickiness:1,className:"selectionHighlight"}),V=v([b(1,M.p)],V);class j extends c.R6{constructor(){super({id:"editor.action.focusNextCursor",label:_.NC("mutlicursor.focusNextCursor","Focus Next Cursor"),description:{description:_.NC("mutlicursor.focusNextCursor.description","Focuses the next cursor"),args:[]},alias:"Focus Next Cursor",precondition:void 0})}run(e,t,s){if(!t.hasModel())return;const i=t._getViewModel();if(i.cursorConfig.readOnly)return;i.model.pushStackElement();const o=Array.from(i.getCursorStates()),n=o.shift();n&&(o.push(n),i.setCursorStates(s.source,3,o),i.revealPrimaryCursor(s.source,!0),N(o,i.getCursorStates()))}}class G extends c.R6{constructor(){super({id:"editor.action.focusPreviousCursor",label:_.NC("mutlicursor.focusPreviousCursor","Focus Previous Cursor"),description:{description:_.NC("mutlicursor.focusPreviousCursor.description","Focuses the previous cursor"),args:[]},alias:"Focus Previous Cursor",precondition:void 0})}run(e,t,s){if(!t.hasModel())return;const i=t._getViewModel();if(i.cursorConfig.readOnly)return;i.model.pushStackElement();const o=Array.from(i.getCursorStates()),n=o.pop();n&&(o.unshift(n),i.setCursorStates(s.source,3,o),i.revealPrimaryCursor(s.source,!0),N(o,i.getCursorStates()))}}(0,c._K)(E.ID,E),(0,c._K)(V.ID,V),(0,c.Qr)(T),(0,c.Qr)(w),(0,c.Qr)(x),(0,c.Qr)(I),(0,c.Qr)(R),(0,c.Qr)(P),(0,c.Qr)(k),(0,c.Qr)(D),(0,c.Qr)(H),(0,c.Qr)(F),(0,c.Qr)(L),(0,c.Qr)(j),(0,c.Qr)(G)}}]);