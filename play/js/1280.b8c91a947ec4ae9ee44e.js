"use strict";(self.webpackChunkapp_template_builder=self.webpackChunkapp_template_builder||[]).push([[1280],{7487:function(e,t,i){i.d(t,{CH:function(){return F},cz:function(){return S},sZ:function(){return n}});var s,n,o=i(34441),r=(i(54505),i(6544)),d=(i(67235),i(12049),i(4102)),l=i(54293),a=(i(23147),i(56402)),h=i(16201),c=(i(98299),i(16308)),u=i(13484),g=i(407),p=i(67032),v=i(56709),m=i(4538),f=i(38431),b=i(98726),w=i(14818),C=i(26386);class D extends d.kX{constructor(e){super(e.elements.map((e=>e.element))),this.data=e}}function y(e){return e instanceof d.kX?new D(e):e}class E{constructor(e,t){this.modelProvider=e,this.dnd=t,this.autoExpandDisposable=f.JT.None}getDragURI(e){return this.dnd.getDragURI(e.element)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e.map((e=>e.element)),t)}onDragStart(e,t){var i,s;null===(s=(i=this.dnd).onDragStart)||void 0===s||s.call(i,y(e),t)}onDragOver(e,t,i,s,n=!0){const o=this.dnd.onDragOver(y(e),t&&t.element,i,s),r=this.autoExpandNode!==t;if(r&&(this.autoExpandDisposable.dispose(),this.autoExpandNode=t),void 0===t)return o;if(r&&"boolean"!=typeof o&&o.autoExpand&&(this.autoExpandDisposable=(0,u.Vg)((()=>{const e=this.modelProvider(),i=e.getNodeLocation(t);e.isCollapsed(i)&&e.setCollapsed(i,!1),this.autoExpandNode=void 0}),500)),"boolean"==typeof o||!o.accept||void 0===o.bubble||o.feedback){if(!n){return{accept:"boolean"==typeof o?o:o.accept,effect:"boolean"==typeof o?void 0:o.effect,feedback:[i]}}return o}if(1===o.bubble){const i=this.modelProvider(),n=i.getNodeLocation(t),o=i.getParentNodeLocation(n),r=i.getNode(o),d=o&&i.getListIndex(o);return this.onDragOver(e,r,d,s,!1)}const d=this.modelProvider(),l=d.getNodeLocation(t),a=d.getListIndex(l),h=d.getListRenderCount(l);return Object.assign(Object.assign({},o),{feedback:(0,c.w6)(a,a+h)})}drop(e,t,i,s){this.autoExpandDisposable.dispose(),this.autoExpandNode=void 0,this.dnd.drop(y(e),t&&t.element,i,s)}onDragEnd(e){var t,i;null===(i=(t=this.dnd).onDragEnd)||void 0===i||i.call(t,e)}}class S{constructor(e){this.delegate=e}getHeight(e){return this.delegate.getHeight(e.element)}getTemplateId(e){return this.delegate.getTemplateId(e.element)}hasDynamicHeight(e){return!!this.delegate.hasDynamicHeight&&this.delegate.hasDynamicHeight(e.element)}setDynamicHeight(e,t){var i,s;null===(s=(i=this.delegate).setDynamicHeight)||void 0===s||s.call(i,e.element,t)}}!function(e){e.None="none",e.OnHover="onHover",e.Always="always"}(s||(s={}));class N{constructor(e,t=[]){this._elements=t,this.disposables=new f.SL,this.onDidChange=v.ju.forEach(e,(e=>this._elements=e),this.disposables)}get elements(){return this._elements}dispose(){this.disposables.dispose()}}class L{constructor(e,t,i,s,n={}){var o;this.renderer=e,this.modelProvider=t,this.activeNodes=s,this.renderedElements=new Map,this.renderedNodes=new Map,this.indent=L.DefaultIndent,this.hideTwistiesOfChildlessElements=!1,this.shouldRenderIndentGuides=!1,this.renderedIndentGuides=new p.r,this.activeIndentNodes=new Set,this.indentGuidesDisposable=f.JT.None,this.disposables=new f.SL,this.templateId=e.templateId,this.updateOptions(n),v.ju.map(i,(e=>e.node))(this.onDidChangeNodeTwistieState,this,this.disposables),null===(o=e.onDidChangeTwistieState)||void 0===o||o.call(e,this.onDidChangeTwistieState,this,this.disposables)}updateOptions(e={}){if(void 0!==e.indent&&(this.indent=(0,b.uZ)(e.indent,0,40)),void 0!==e.renderIndentGuides){const t=e.renderIndentGuides!==s.None;if(t!==this.shouldRenderIndentGuides&&(this.shouldRenderIndentGuides=t,this.indentGuidesDisposable.dispose(),t)){const e=new f.SL;this.activeNodes.onDidChange(this._onDidChangeActiveNodes,this,e),this.indentGuidesDisposable=e,this._onDidChangeActiveNodes(this.activeNodes.elements)}}void 0!==e.hideTwistiesOfChildlessElements&&(this.hideTwistiesOfChildlessElements=e.hideTwistiesOfChildlessElements)}renderTemplate(e){const t=(0,o.R3)(e,(0,o.$)(".monaco-tl-row")),i=(0,o.R3)(t,(0,o.$)(".monaco-tl-indent")),s=(0,o.R3)(t,(0,o.$)(".monaco-tl-twistie")),n=(0,o.R3)(t,(0,o.$)(".monaco-tl-contents")),r=this.renderer.renderTemplate(n);return{container:e,indent:i,twistie:s,indentGuidesDisposable:f.JT.None,templateData:r}}renderElement(e,t,i,s){"number"==typeof s&&(this.renderedNodes.set(e,{templateData:i,height:s}),this.renderedElements.set(e.element,e));const n=L.DefaultIndent+(e.depth-1)*this.indent;i.twistie.style.paddingLeft=`${n}px`,i.indent.style.width=n+this.indent-16+"px",this.renderTwistie(e,i),"number"==typeof s&&this.renderIndentGuides(e,i),this.renderer.renderElement(e,t,i.templateData,s)}disposeElement(e,t,i,s){var n,o;i.indentGuidesDisposable.dispose(),null===(o=(n=this.renderer).disposeElement)||void 0===o||o.call(n,e,t,i.templateData,s),"number"==typeof s&&(this.renderedNodes.delete(e),this.renderedElements.delete(e.element))}disposeTemplate(e){this.renderer.disposeTemplate(e.templateData)}onDidChangeTwistieState(e){const t=this.renderedElements.get(e);t&&this.onDidChangeNodeTwistieState(t)}onDidChangeNodeTwistieState(e){const t=this.renderedNodes.get(e);t&&(this.renderTwistie(e,t.templateData),this._onDidChangeActiveNodes(this.activeNodes.elements),this.renderIndentGuides(e,t.templateData))}renderTwistie(e,t){t.twistie.classList.remove(...g.lA.treeItemExpanded.classNamesArray);let i=!1;this.renderer.renderTwistie&&(i=this.renderer.renderTwistie(e.element,t.twistie)),e.collapsible&&(!this.hideTwistiesOfChildlessElements||e.visibleChildrenCount>0)?(i||t.twistie.classList.add(...g.lA.treeItemExpanded.classNamesArray),t.twistie.classList.add("collapsible"),t.twistie.classList.toggle("collapsed",e.collapsed)):t.twistie.classList.remove("collapsible","collapsed"),e.collapsible?t.container.setAttribute("aria-expanded",String(!e.collapsed)):t.container.removeAttribute("aria-expanded")}renderIndentGuides(e,t){if((0,o.PO)(t.indent),t.indentGuidesDisposable.dispose(),!this.shouldRenderIndentGuides)return;const i=new f.SL,s=this.modelProvider();let n=e;for(;;){const e=s.getNodeLocation(n),r=s.getParentNodeLocation(e);if(!r)break;const d=s.getNode(r),l=(0,o.$)(".indent-guide",{style:`width: ${this.indent}px`});this.activeIndentNodes.has(d)&&l.classList.add("active"),0===t.indent.childElementCount?t.indent.appendChild(l):t.indent.insertBefore(l,t.indent.firstElementChild),this.renderedIndentGuides.add(d,l),i.add((0,f.OF)((()=>this.renderedIndentGuides.delete(d,l)))),n=d}t.indentGuidesDisposable=i}_onDidChangeActiveNodes(e){if(!this.shouldRenderIndentGuides)return;const t=new Set,i=this.modelProvider();e.forEach((e=>{const s=i.getNodeLocation(e);try{const n=i.getParentNodeLocation(s);e.collapsible&&e.children.length>0&&!e.collapsed?t.add(e):n&&t.add(i.getNode(n))}catch(e){}})),this.activeIndentNodes.forEach((e=>{t.has(e)||this.renderedIndentGuides.forEach(e,(e=>e.classList.remove("active")))})),t.forEach((e=>{this.activeIndentNodes.has(e)||this.renderedIndentGuides.forEach(e,(e=>e.classList.add("active")))})),this.activeIndentNodes=t}dispose(){this.renderedNodes.clear(),this.renderedElements.clear(),this.indentGuidesDisposable.dispose(),(0,f.B9)(this.disposables)}}L.DefaultIndent=8;class P{constructor(e,t,i){this.tree=e,this.keyboardNavigationLabelProvider=t,this._filter=i,this._totalCount=0,this._matchCount=0,this._pattern="",this._lowercasePattern="",this.disposables=new f.SL,e.onWillRefilter(this.reset,this,this.disposables)}get totalCount(){return this._totalCount}get matchCount(){return this._matchCount}filter(e,t){let i=1;if(this._filter){const s=this._filter.filter(e,t);if(i="boolean"==typeof s?s?1:0:(0,a.gB)(s)?(0,a.aG)(s.visibility):s,0===i)return!1}if(this._totalCount++,!this._pattern)return this._matchCount++,{data:m.CL.Default,visibility:i};const s=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e),o=Array.isArray(s)?s:[s];for(const e of o){const t=e&&e.toString();if(void 0===t)return{data:m.CL.Default,visibility:i};const s=(0,m.EW)(this._pattern,this._lowercasePattern,0,t,t.toLowerCase(),0,{firstMatchCanBeWeak:!0,boostFullMatch:!0});if(s)return this._matchCount++,1===o.length?{data:s,visibility:i}:{data:{label:t,score:s},visibility:i}}return this.tree.findMode===n.Filter?2:{data:m.CL.Default,visibility:i}}reset(){this._totalCount=0,this._matchCount=0}dispose(){(0,f.B9)(this.disposables)}}!function(e){e[e.Highlight=0]="Highlight",e[e.Filter=1]="Filter"}(n||(n={}));class _{constructor(e,t,i,s,o){var r;this.tree=e,this.view=i,this.filter=s,this.contextViewProvider=o,this._pattern="",this.width=0,this._onDidChangeMode=new v.Q5,this.onDidChangeMode=this._onDidChangeMode.event,this._onDidChangePattern=new v.Q5,this._onDidChangeOpenState=new v.Q5,this.onDidChangeOpenState=this._onDidChangeOpenState.event,this.enabledDisposables=new f.SL,this.disposables=new f.SL,this._mode=null!==(r=e.options.defaultFindMode)&&void 0!==r?r:n.Highlight,t.onDidSplice(this.onDidSpliceModel,this,this.disposables)}get pattern(){return this._pattern}get mode(){return this._mode}set mode(e){e!==this._mode&&(this._mode=e,this.widget&&(this.widget.mode=this._mode),this.tree.refilter(),this.render(),this._onDidChangeMode.fire(e))}onDidSpliceModel(){this.widget&&0!==this.pattern.length&&(this.tree.refilter(),this.render())}render(){var e,t;const i=this.filter.totalCount>0&&0===this.filter.matchCount;this.pattern&&i?null===(e=this.widget)||void 0===e||e.showMessage({type:2,content:(0,C.NC)("not found","No elements found.")}):null===(t=this.widget)||void 0===t||t.clearMessage()}shouldAllowFocus(e){return!this.widget||!this.pattern||this._mode===n.Filter||(this.filter.totalCount>0&&this.filter.matchCount<=1||!m.CL.isDefault(e.filterData))}style(e){var t;this.styles=e,null===(t=this.widget)||void 0===t||t.style(e)}layout(e){var t;this.width=e,null===(t=this.widget)||void 0===t||t.layout(e)}dispose(){this._onDidChangePattern.dispose(),this.enabledDisposables.dispose(),this.disposables.dispose()}}function O(e){let t=h.sD.Unknown;return(0,o.uU)(e.browserEvent.target,"monaco-tl-twistie","monaco-tl-row")?t=h.sD.Twistie:(0,o.uU)(e.browserEvent.target,"monaco-tl-contents","monaco-tl-row")?t=h.sD.Element:(0,o.uU)(e.browserEvent.target,"monaco-tree-type-filter","monaco-list")&&(t=h.sD.Filter),{browserEvent:e.browserEvent,element:e.element?e.element.element:null,target:t}}function T(e,t){t(e),e.children.forEach((e=>T(e,t)))}class I{constructor(e,t){this.getFirstViewElementWithTrait=e,this.identityProvider=t,this.nodes=[],this._onDidChange=new v.Q5,this.onDidChange=this._onDidChange.event}get nodeSet(){return this._nodeSet||(this._nodeSet=this.createNodeSet()),this._nodeSet}set(e,t){!(null==t?void 0:t.__forceEvent)&&(0,c.fS)(this.nodes,e)||this._set(e,!1,t)}_set(e,t,i){if(this.nodes=[...e],this.elements=void 0,this._nodeSet=void 0,!t){const e=this;this._onDidChange.fire({get elements(){return e.get()},browserEvent:i})}}get(){return this.elements||(this.elements=this.nodes.map((e=>e.element))),[...this.elements]}getNodes(){return this.nodes}has(e){return this.nodeSet.has(e)}onDidModelSplice({insertedNodes:e,deletedNodes:t}){if(!this.identityProvider){const e=this.createNodeSet(),i=t=>e.delete(t);return t.forEach((e=>T(e,i))),void this.set([...e.values()])}const i=new Set,s=e=>i.add(this.identityProvider.getId(e.element).toString());t.forEach((e=>T(e,s)));const n=new Map,o=e=>n.set(this.identityProvider.getId(e.element).toString(),e);e.forEach((e=>T(e,o)));const r=[];for(const e of this.nodes){const t=this.identityProvider.getId(e.element).toString();if(i.has(t)){const e=n.get(t);e&&r.push(e)}else r.push(e)}if(this.nodes.length>0&&0===r.length){const e=this.getFirstViewElementWithTrait();e&&r.push(e)}this._set(r,!0)}createNodeSet(){const e=new Set;for(const t of this.nodes)e.add(t);return e}}class k extends l.sx{constructor(e,t){super(e),this.tree=t}onViewPointer(e){if((0,l.iK)(e.browserEvent.target)||(0,l.cK)(e.browserEvent.target)||(0,l.hD)(e.browserEvent.target))return;const t=e.element;if(!t)return super.onViewPointer(e);if(this.isSelectionRangeChangeEvent(e)||this.isSelectionSingleChangeEvent(e))return super.onViewPointer(e);const i=e.browserEvent.target,s=i.classList.contains("monaco-tl-twistie")||i.classList.contains("monaco-icon-label")&&i.classList.contains("folder-icon")&&e.browserEvent.offsetX<16;let n=!1;if(n="function"==typeof this.tree.expandOnlyOnTwistieClick?this.tree.expandOnlyOnTwistieClick(t.element):!!this.tree.expandOnlyOnTwistieClick,n&&!s&&2!==e.browserEvent.detail)return super.onViewPointer(e);if(!this.tree.expandOnDoubleClick&&2===e.browserEvent.detail)return super.onViewPointer(e);if(t.collapsible){const i=this.tree.model,o=i.getNodeLocation(t),r=e.browserEvent.altKey;if(this.tree.setFocus([o]),i.setCollapsed(o,void 0,r),n&&s)return}super.onViewPointer(e)}onDoubleClick(e){!e.browserEvent.target.classList.contains("monaco-tl-twistie")&&this.tree.expandOnDoubleClick&&super.onDoubleClick(e)}}class x extends l.aV{constructor(e,t,i,s,n,o,r,d){super(e,t,i,s,d),this.focusTrait=n,this.selectionTrait=o,this.anchorTrait=r}createMouseController(e){return new k(this,e.tree)}splice(e,t,i=[]){if(super.splice(e,t,i),0===i.length)return;const s=[],n=[];let o;i.forEach(((t,i)=>{this.focusTrait.has(t)&&s.push(e+i),this.selectionTrait.has(t)&&n.push(e+i),this.anchorTrait.has(t)&&(o=e+i)})),s.length>0&&super.setFocus((0,c.EB)([...super.getFocus(),...s])),n.length>0&&super.setSelection((0,c.EB)([...super.getSelection(),...n])),"number"==typeof o&&super.setAnchor(o)}setFocus(e,t,i=!1){super.setFocus(e,t),i||this.focusTrait.set(e.map((e=>this.element(e))),t)}setSelection(e,t,i=!1){super.setSelection(e,t),i||this.selectionTrait.set(e.map((e=>this.element(e))),t)}setAnchor(e,t=!1){super.setAnchor(e),t||(void 0===e?this.anchorTrait.set([]):this.anchorTrait.set([this.element(e)]))}}class F{constructor(e,t,i,n,d={}){var a;this._user=e,this._options=d,this.eventBufferer=new v.E7,this.onDidChangeFindOpenState=v.ju.None,this.disposables=new f.SL,this._onWillRefilter=new v.Q5,this.onWillRefilter=this._onWillRefilter.event,this._onDidUpdateOptions=new v.Q5;const h=new S(i),c=new v.ZD,u=new v.ZD,g=this.disposables.add(new N(u.event));this.renderers=n.map((e=>new L(e,(()=>this.model),c.event,g,d)));for(const e of this.renderers)this.disposables.add(e);let p;var m,b;d.keyboardNavigationLabelProvider&&(p=new P(this,d.keyboardNavigationLabelProvider,d.filter),d=Object.assign(Object.assign({},d),{filter:p}),this.disposables.add(p)),this.focus=new I((()=>this.view.getFocusedElements()[0]),d.identityProvider),this.selection=new I((()=>this.view.getSelectedElements()[0]),d.identityProvider),this.anchor=new I((()=>this.view.getAnchorElement()),d.identityProvider),this.view=new x(e,t,h,this.renderers,this.focus,this.selection,this.anchor,Object.assign(Object.assign({},(m=()=>this.model,(b=d)&&Object.assign(Object.assign({},b),{identityProvider:b.identityProvider&&{getId(e){return b.identityProvider.getId(e.element)}},dnd:b.dnd&&new E(m,b.dnd),multipleSelectionController:b.multipleSelectionController&&{isSelectionSingleChangeEvent(e){return b.multipleSelectionController.isSelectionSingleChangeEvent(Object.assign(Object.assign({},e),{element:e.element}))},isSelectionRangeChangeEvent(e){return b.multipleSelectionController.isSelectionRangeChangeEvent(Object.assign(Object.assign({},e),{element:e.element}))}},accessibilityProvider:b.accessibilityProvider&&Object.assign(Object.assign({},b.accessibilityProvider),{getSetSize(e){const t=m(),i=t.getNodeLocation(e),s=t.getParentNodeLocation(i);return t.getNode(s).visibleChildrenCount},getPosInSet(e){return e.visibleChildIndex+1},isChecked:b.accessibilityProvider&&b.accessibilityProvider.isChecked?e=>b.accessibilityProvider.isChecked(e.element):void 0,getRole:b.accessibilityProvider&&b.accessibilityProvider.getRole?e=>b.accessibilityProvider.getRole(e.element):()=>"treeitem",getAriaLabel(e){return b.accessibilityProvider.getAriaLabel(e.element)},getWidgetAriaLabel(){return b.accessibilityProvider.getWidgetAriaLabel()},getWidgetRole:b.accessibilityProvider&&b.accessibilityProvider.getWidgetRole?()=>b.accessibilityProvider.getWidgetRole():()=>"tree",getAriaLevel:b.accessibilityProvider&&b.accessibilityProvider.getAriaLevel?e=>b.accessibilityProvider.getAriaLevel(e.element):e=>e.depth,getActiveDescendantId:b.accessibilityProvider.getActiveDescendantId&&(e=>b.accessibilityProvider.getActiveDescendantId(e.element))}),keyboardNavigationLabelProvider:b.keyboardNavigationLabelProvider&&Object.assign(Object.assign({},b.keyboardNavigationLabelProvider),{getKeyboardNavigationLabel(e){return b.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e.element)}})}))),{tree:this})),this.model=this.createModel(e,this.view,d),c.input=this.model.onDidChangeCollapseState;const w=v.ju.forEach(this.model.onDidSplice,(e=>{this.eventBufferer.bufferEvents((()=>{this.focus.onDidModelSplice(e),this.selection.onDidModelSplice(e)}))}),this.disposables);if(w((()=>null),null,this.disposables),u.input=v.ju.chain(v.ju.any(w,this.focus.onDidChange,this.selection.onDidChange)).debounce((()=>null),0).map((()=>{const e=new Set;for(const t of this.focus.getNodes())e.add(t);for(const t of this.selection.getNodes())e.add(t);return[...e.values()]})).event,!1!==d.keyboardSupport){const e=v.ju.chain(this.view.onKeyDown).filter((e=>!(0,l.cK)(e.target))).map((e=>new r.y(e)));e.filter((e=>15===e.keyCode)).on(this.onLeftArrow,this,this.disposables),e.filter((e=>17===e.keyCode)).on(this.onRightArrow,this,this.disposables),e.filter((e=>10===e.keyCode)).on(this.onSpace,this,this.disposables)}(null===(a=d.findWidgetEnabled)||void 0===a||a)&&d.keyboardNavigationLabelProvider&&d.contextViewProvider?(this.findController=new _(this,this.model,this.view,p,d.contextViewProvider),this.focusNavigationFilter=e=>this.findController.shouldAllowFocus(e),this.onDidChangeFindOpenState=this.findController.onDidChangeOpenState,this.disposables.add(this.findController),this.onDidChangeFindMode=this.findController.onDidChangeMode):this.onDidChangeFindMode=v.ju.None,this.styleElement=(0,o.dS)(this.view.getHTMLElement()),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===s.Always)}get onDidChangeFocus(){return this.eventBufferer.wrapEvent(this.focus.onDidChange)}get onDidChangeSelection(){return this.eventBufferer.wrapEvent(this.selection.onDidChange)}get onMouseDblClick(){return v.ju.filter(v.ju.map(this.view.onMouseDblClick,O),(e=>e.target!==h.sD.Filter))}get onPointer(){return v.ju.map(this.view.onPointer,O)}get onDidFocus(){return this.view.onDidFocus}get onDidChangeModel(){return v.ju.signal(this.model.onDidSplice)}get onDidChangeCollapseState(){return this.model.onDidChangeCollapseState}get findMode(){var e,t;return null!==(t=null===(e=this.findController)||void 0===e?void 0:e.mode)&&void 0!==t?t:n.Highlight}set findMode(e){this.findController&&(this.findController.mode=e)}get expandOnDoubleClick(){return void 0===this._options.expandOnDoubleClick||this._options.expandOnDoubleClick}get expandOnlyOnTwistieClick(){return void 0===this._options.expandOnlyOnTwistieClick||this._options.expandOnlyOnTwistieClick}get onDidDispose(){return this.view.onDidDispose}updateOptions(e={}){this._options=Object.assign(Object.assign({},this._options),e);for(const t of this.renderers)t.updateOptions(e);this.view.updateOptions(this._options),this._onDidUpdateOptions.fire(this._options),this.getHTMLElement().classList.toggle("always",this._options.renderIndentGuides===s.Always)}get options(){return this._options}getHTMLElement(){return this.view.getHTMLElement()}get scrollTop(){return this.view.scrollTop}set scrollTop(e){this.view.scrollTop=e}domFocus(){this.view.domFocus()}layout(e,t){var i;this.view.layout(e,t),(0,w.hj)(t)&&(null===(i=this.findController)||void 0===i||i.layout(t))}style(e){var t;const i=`.${this.view.domId}`,s=[];e.treeIndentGuidesStroke&&(s.push(`.monaco-list${i}:hover .monaco-tl-indent > .indent-guide, .monaco-list${i}.always .monaco-tl-indent > .indent-guide  { border-color: ${e.treeIndentGuidesStroke.transparent(.4)}; }`),s.push(`.monaco-list${i} .monaco-tl-indent > .indent-guide.active { border-color: ${e.treeIndentGuidesStroke}; }`)),this.styleElement.textContent=s.join("\n"),null===(t=this.findController)||void 0===t||t.style(e),this.view.style(e)}getParentElement(e){const t=this.model.getParentNodeLocation(e);return this.model.getNode(t).element}getFirstElementChild(e){return this.model.getFirstElementChild(e)}getNode(e){return this.model.getNode(e)}collapse(e,t=!1){return this.model.setCollapsed(e,!0,t)}expand(e,t=!1){return this.model.setCollapsed(e,!1,t)}isCollapsible(e){return this.model.isCollapsible(e)}setCollapsible(e,t){return this.model.setCollapsible(e,t)}isCollapsed(e){return this.model.isCollapsed(e)}refilter(){this._onWillRefilter.fire(void 0),this.model.refilter()}setSelection(e,t){const i=e.map((e=>this.model.getNode(e)));this.selection.set(i,t);const s=e.map((e=>this.model.getListIndex(e))).filter((e=>e>-1));this.view.setSelection(s,t,!0)}getSelection(){return this.selection.get()}setFocus(e,t){const i=e.map((e=>this.model.getNode(e)));this.focus.set(i,t);const s=e.map((e=>this.model.getListIndex(e))).filter((e=>e>-1));this.view.setFocus(s,t,!0)}getFocus(){return this.focus.get()}reveal(e,t){this.model.expandTo(e);const i=this.model.getListIndex(e);-1!==i&&this.view.reveal(i,t)}onLeftArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(0===t.length)return;const i=t[0],s=this.model.getNodeLocation(i);if(!this.model.setCollapsed(s,!0)){const e=this.model.getParentNodeLocation(s);if(!e)return;const t=this.model.getListIndex(e);this.view.reveal(t),this.view.setFocus([t])}}onRightArrow(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(0===t.length)return;const i=t[0],s=this.model.getNodeLocation(i);if(!this.model.setCollapsed(s,!1)){if(!i.children.some((e=>e.visible)))return;const[e]=this.view.getFocus(),t=e+1;this.view.reveal(t),this.view.setFocus([t])}}onSpace(e){e.preventDefault(),e.stopPropagation();const t=this.view.getFocusedElements();if(0===t.length)return;const i=t[0],s=this.model.getNodeLocation(i),n=e.browserEvent.altKey;this.model.setCollapsed(s,void 0,n)}dispose(){(0,f.B9)(this.disposables),this.view.dispose()}}}}]);