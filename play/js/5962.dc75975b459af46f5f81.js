"use strict";(self.webpackChunkapp_template_builder=self.webpackChunkapp_template_builder||[]).push([[5962],{97797:function(e,t,o){o.r(t);var i,n=o(38431),r=o(55298),s=o(35921),d=o(79931),l=o(97464),c=o(34441),a=o(12342),h=o(19054),u=o(69756),g=o(13484),p=o(8964),_=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var d=e.length-1;d>=0;d--)(n=e[d])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},y=function(e,t){return function(o,i){t(o,i,e)}},f=function(e,t,o,i){return new(o||(o=Promise))((function(n,r){function s(e){try{l(i.next(e))}catch(e){r(e)}}function d(e){try{l(i.throw(e))}catch(e){r(e)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,d)}l((i=i.apply(e,t||[])).next())}))};let v=class extends n.JT{constructor(e,t){super(),this._sessionStore=new n.SL,this._ranges=[],this._rangesVersionId=0,this._editor=e,this._languageFeaturesService=t,this.stickyScrollWidget=new m(this._editor),this._register(this._editor.onDidChangeConfiguration((e=>{e.hasChanged(34)&&this.onConfigurationChange()}))),this._updateSoon=this._register(new g.pY((()=>this._update(!0)),50)),this.onConfigurationChange()}onConfigurationChange(){if(!1===this._editor.getOption(34).stickyScroll.enabled)return this.stickyScrollWidget.emptyRootNode(),this._editor.removeOverlayWidget(this.stickyScrollWidget),void this._sessionStore.clear();this._editor.addOverlayWidget(this.stickyScrollWidget),this._sessionStore.add(this._editor.onDidChangeModel((()=>this._update(!0)))),this._sessionStore.add(this._editor.onDidScrollChange((()=>this._update(!1)))),this._sessionStore.add(this._editor.onDidChangeHiddenAreas((()=>this._update(!0)))),this._sessionStore.add(this._editor.onDidChangeModelTokens((e=>this._onTokensChange(e)))),this._sessionStore.add(this._editor.onDidChangeModelContent((()=>this._updateSoon.schedule()))),this._sessionStore.add(this._languageFeaturesService.documentSymbolProvider.onDidChange((()=>this._update(!0)))),this._update(!0)}_needsUpdate(e){const t=this.stickyScrollWidget.getCurrentLines();for(const o of t)for(const t of e.ranges)if(o>=t.fromLineNumber&&o<=t.toLineNumber)return!0;return!1}_onTokensChange(e){this._needsUpdate(e)&&this._update(!1)}_update(e=!1){var t,o;return f(this,void 0,void 0,(function*(){e&&(null===(t=this._cts)||void 0===t||t.dispose(!0),this._cts=new l.A,yield this._updateOutlineModel(this._cts.token));const i=null===(o=this._editor._getViewModel())||void 0===o?void 0:o.getHiddenAreas();if(i)for(const e of i)this._ranges=this._ranges.filter((t=>!(t[0]>=e.startLineNumber&&t[1]<=e.endLineNumber+1)));this._renderStickyScroll()}))}_findLineRanges(e,t){if(null==e?void 0:e.children.size){let o=!1;for(const i of null==e?void 0:e.children.values()){const e=i.symbol.kind;4!==e&&8!==e&&11!==e&&10!==e&&5!==e&&1!==e||(o=!0,this._findLineRanges(i,t+1))}o||this._addOutlineRanges(e,t)}else this._addOutlineRanges(e,t)}_addOutlineRanges(e,t){let o=0,i=0;for(;e;){const n=e.symbol.kind;if(4!==n&&8!==n&&11!==n&&10!==n&&5!==n&&1!==n||(o=null==e?void 0:e.symbol.range.startLineNumber,i=null==e?void 0:e.symbol.range.endLineNumber,this._ranges.push([o,i,t]),t--),!(e.parent instanceof d.sT))break;e=e.parent}}_updateOutlineModel(e){return f(this,void 0,void 0,(function*(){if(this._editor.hasModel()){const t=this._editor.getModel(),o=t.getVersionId(),i=yield d.C3.create(this._languageFeaturesService.documentSymbolProvider,t,e);if(e.isCancellationRequested)return;this._ranges=[],this._rangesVersionId=o;for(const e of i.children.values()){if(e instanceof d.sT){const t=e.symbol.kind;4===t||8===t||11===t||10===t||5===t||1===t?this._findLineRanges(e,1):this._findLineRanges(e,0)}this._ranges=this._ranges.sort((function(e,t){return e[0]!==t[0]?e[0]-t[0]:e[1]!==t[1]?t[1]-e[1]:e[2]-t[2]}));let t=[];for(const[e,o]of this._ranges.entries()){const[i,n,r]=o;t[0]===i&&t[1]===n?this._ranges.splice(e,1):t=o}}}}))}_renderStickyScroll(){if(!this._editor.hasModel())return;const e=this._editor.getOption(61),t=this._editor.getModel();if(this._rangesVersionId!==t.getVersionId())return;const o=this._editor.getScrollTop();this.stickyScrollWidget.emptyRootNode();const i=new Set;for(const[n,r]of this._ranges.entries()){const[s,d,l]=r;if(d-s>0&&""!==t.getLineContent(s)){const t=(l-1)*e,r=l*e,c=this._editor.getBottomForLineNumber(s)-o,a=this._editor.getTopForLineNumber(d)-o,h=this._editor.getBottomForLineNumber(d)-o;if(i.has(s))this._ranges.splice(n,1);else{if(t>=a-1&&t<h-2){i.add(s),this.stickyScrollWidget.pushCodeLine(new b(s,l,this._editor,-1,h-r));break}r>c&&r<h-1&&(i.add(s),this.stickyScrollWidget.pushCodeLine(new b(s,l,this._editor,0,0)))}}}this.stickyScrollWidget.updateRootNode()}dispose(){super.dispose(),this._sessionStore.dispose()}};v.ID="store.contrib.stickyScrollController",v=_([y(1,s.p)],v);const S=null===(i=window.trustedTypes)||void 0===i?void 0:i.createPolicy("stickyScrollViewLayer",{createHTML:e=>e});class b{constructor(e,t,o,i,n){this._lineNumber=e,this._depth=t,this._editor=o,this._zIndex=i,this._relativePosition=n,this.effectiveLineHeight=0,this.effectiveLineHeight=this._editor.getOption(61)+this._relativePosition}get lineNumber(){return this._lineNumber}getDomNode(){const e=document.createElement("div"),t=this._editor._getViewModel(),o=t.coordinatesConverter.convertModelPositionToViewPosition(new p.L(this._lineNumber,1)).lineNumber,i=t.getViewLineRenderingData(o);let n;try{n=u.Kp.filter(i.inlineDecorations,o,i.minColumn,i.maxColumn)}catch(e){n=[]}const r=new h.IJ(!0,!0,i.content,i.continuesWithWrappedLine,i.isBasicASCII,i.containsRTL,0,i.tokens,n,i.tabSize,i.startVisibleColumn,1,1,1,100,"none",!0,!0,null),s=(0,a.l$)(400);let d;(0,h.d1)(r,s),d=S?S.createHTML(s.build()):s.build();const l=document.createElement("span");l.style.backgroundColor="var(--vscode-editorStickyScroll-background)",l.style.overflow="hidden",l.style.whiteSpace="nowrap",l.style.display="inline-block",l.style.lineHeight=this._editor.getOption(61).toString()+"px",l.innerHTML=d;const c=document.createElement("span");c.style.width=this._editor.getLayoutInfo().contentLeft.toString()+"px",c.style.backgroundColor="var(--vscode-editorStickyScroll-background)",c.style.color="var(--vscode-editorLineNumber-foreground)",c.style.display="inline-block",c.style.lineHeight=this._editor.getOption(61).toString()+"px";const g=document.createElement("span");return g.innerText=this._lineNumber.toString(),g.style.paddingLeft=this._editor.getLayoutInfo().lineNumbersLeft.toString()+"px",g.style.width=this._editor.getLayoutInfo().lineNumbersWidth.toString()+"px",g.style.backgroundColor="var(--vscode-editorStickyScroll-background)",g.style.textAlign="right",g.style.float="left",g.style.lineHeight=this._editor.getOption(61).toString()+"px",c.appendChild(g),e.onclick=e=>{e.stopPropagation(),e.preventDefault(),this._editor.revealPosition({lineNumber:this._lineNumber-this._depth+1,column:1})},e.onmouseover=t=>{g.style.background="var(--vscode-editorStickyScrollHover-background)",l.style.backgroundColor="var(--vscode-editorStickyScrollHover-background)",c.style.backgroundColor="var(--vscode-editorStickyScrollHover-background)",e.style.backgroundColor="var(--vscode-editorStickyScrollHover-background)",g.style.cursor="pointer",l.style.cursor="pointer",e.style.cursor="pointer",c.style.cursor="pointer"},e.onmouseleave=t=>{g.style.background="var(--vscode-editorStickyScroll-background)",l.style.backgroundColor="var(--vscode-editorStickyScroll-background)",c.style.backgroundColor="var(--vscode-editorStickyScroll-background)",e.style.backgroundColor="var(--vscode-editorStickyScroll-background)"},this._editor.applyFontInfo(l),this._editor.applyFontInfo(g),e.appendChild(c),e.appendChild(l),e.style.zIndex=this._zIndex.toString(),e.style.backgroundColor="var(--vscode-editorStickyScroll-background)",e.style.overflow="hidden",e.style.whiteSpace="nowrap",e.style.width="100%",e.style.lineHeight=this._editor.getOption(61).toString()+"px",e.style.height=this._editor.getOption(61).toString()+"px",this._relativePosition&&(e.style.position="relative",e.style.top=this._relativePosition+"px",e.style.width="100%"),e}}class m{constructor(e){this._editor=e,this.arrayOfCodeLines=[],this.rootDomNode=document.createElement("div"),this.rootDomNode=document.createElement("div"),this.rootDomNode.style.width="100%",this.rootDomNode.style.boxShadow="var(--vscode-scrollbar-shadow) 0 6px 6px -6px"}getCurrentLines(){const e=[];for(const t of this.arrayOfCodeLines)e.push(t.lineNumber);return e}pushCodeLine(e){this.arrayOfCodeLines.push(e)}updateRootNode(){let e=0;for(const t of this.arrayOfCodeLines)e+=t.effectiveLineHeight,this.rootDomNode.appendChild(t.getDomNode());this.rootDomNode.style.height=e.toString()+"px"}emptyRootNode(){this.arrayOfCodeLines.length=0,c.PO(this.rootDomNode)}getId(){return"editor.contrib.stickyScrollWidget"}getDomNode(){return this.rootDomNode.style.zIndex="2",this.rootDomNode.style.backgroundColor="var(--vscode-editorStickyScroll-background)",this.rootDomNode}getPosition(){return{preference:null}}}(0,r._K)(v.ID,v)}}]);