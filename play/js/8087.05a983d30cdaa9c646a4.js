"use strict";(self.webpackChunkapp_template_builder=self.webpackChunkapp_template_builder||[]).push([[8087],{46870:function(e,t,s){s.d(t,{e:function(){return a}});var i=s(34441),o=s(49553),r=s(23127),n=s(26386);const l=i.$;class a{constructor(e,t,s){this.os=t,this.keyElements=new Set,this.options=s||Object.create(null),this.labelBackground=this.options.keybindingLabelBackground,this.labelForeground=this.options.keybindingLabelForeground,this.labelBorder=this.options.keybindingLabelBorder,this.labelBottomBorder=this.options.keybindingLabelBottomBorder,this.labelShadow=this.options.keybindingLabelShadow,this.domNode=i.R3(e,l(".monaco-keybinding")),this.didEverRender=!1,e.appendChild(this.domNode)}get element(){return this.domNode}set(e,t){this.didEverRender&&this.keybinding===e&&a.areSame(this.matches,t)||(this.keybinding=e,this.matches=t,this.render())}render(){if(this.clear(),this.keybinding){const[e,t]=this.keybinding.getParts();e&&this.renderPart(this.domNode,e,this.matches?this.matches.firstPart:null),t&&(i.R3(this.domNode,l("span.monaco-keybinding-key-chord-separator",void 0," ")),this.renderPart(this.domNode,t,this.matches?this.matches.chordPart:null)),this.domNode.title=this.keybinding.getAriaLabel()||""}else this.options&&this.options.renderUnboundKeybindings&&this.renderUnbound(this.domNode);this.applyStyles(),this.didEverRender=!0}clear(){i.PO(this.domNode),this.keyElements.clear()}renderPart(e,t,s){const i=o.xo.modifierLabels[this.os];t.ctrlKey&&this.renderKey(e,i.ctrlKey,Boolean(null==s?void 0:s.ctrlKey),i.separator),t.shiftKey&&this.renderKey(e,i.shiftKey,Boolean(null==s?void 0:s.shiftKey),i.separator),t.altKey&&this.renderKey(e,i.altKey,Boolean(null==s?void 0:s.altKey),i.separator),t.metaKey&&this.renderKey(e,i.metaKey,Boolean(null==s?void 0:s.metaKey),i.separator);const r=t.keyLabel;r&&this.renderKey(e,r,Boolean(null==s?void 0:s.keyCode),"")}renderKey(e,t,s,o){i.R3(e,this.createKeyElement(t,s?".highlight":"")),o&&i.R3(e,l("span.monaco-keybinding-key-separator",void 0,o))}renderUnbound(e){i.R3(e,this.createKeyElement((0,n.NC)("unbound","Unbound")))}createKeyElement(e,t=""){const s=l("span.monaco-keybinding-key"+t,void 0,e);return this.keyElements.add(s),s}style(e){this.labelBackground=e.keybindingLabelBackground,this.labelForeground=e.keybindingLabelForeground,this.labelBorder=e.keybindingLabelBorder,this.labelBottomBorder=e.keybindingLabelBottomBorder,this.labelShadow=e.keybindingLabelShadow,this.applyStyles()}applyStyles(){var e;if(this.element){for(const t of this.keyElements)this.labelBackground&&(t.style.backgroundColor=null===(e=this.labelBackground)||void 0===e?void 0:e.toString()),this.labelBorder&&(t.style.borderColor=this.labelBorder.toString()),this.labelBottomBorder&&(t.style.borderBottomColor=this.labelBottomBorder.toString()),this.labelShadow&&(t.style.boxShadow=`inset 0 -1px 0 ${this.labelShadow}`);this.labelForeground&&(this.element.style.color=this.labelForeground.toString())}}static areSame(e,t){return e===t||!e&&!t||!!e&&!!t&&(0,r.fS)(e.firstPart,t.firstPart)&&(0,r.fS)(e.chordPart,t.chordPart)}}},67442:function(e,t,s){s.d(t,{A:function(){return i}});class i extends Error{constructor(e,t){super(`ListError [${e}] ${t}`)}}},32515:function(e,t,s){s.d(t,{j:function(){return h}});var i=s(16308),o=s(97464),r=s(56709),n=s(38431),l=s(54293);class a{constructor(e,t){this.renderer=e,this.modelProvider=t}get templateId(){return this.renderer.templateId}renderTemplate(e){return{data:this.renderer.renderTemplate(e),disposable:n.JT.None}}renderElement(e,t,s,i){if(s.disposable&&s.disposable.dispose(),!s.data)return;const r=this.modelProvider();if(r.isResolved(e))return this.renderer.renderElement(r.get(e),e,s.data,i);const n=new o.A,l=r.resolve(e,n.token);s.disposable={dispose:()=>n.cancel()},this.renderer.renderPlaceholder(e,s.data),l.then((t=>this.renderer.renderElement(t,e,s.data,i)))}disposeTemplate(e){e.disposable&&(e.disposable.dispose(),e.disposable=void 0),e.data&&(this.renderer.disposeTemplate(e.data),e.data=void 0)}}class d{constructor(e,t){this.modelProvider=e,this.accessibilityProvider=t}getWidgetAriaLabel(){return this.accessibilityProvider.getWidgetAriaLabel()}getAriaLabel(e){const t=this.modelProvider();return t.isResolved(e)?this.accessibilityProvider.getAriaLabel(t.get(e)):null}}class h{constructor(e,t,s,i,o={}){const r=()=>this.model,n=i.map((e=>new a(e,r)));this.list=new l.aV(e,t,s,n,function(e,t){return Object.assign(Object.assign({},t),{accessibilityProvider:t.accessibilityProvider&&new d(e,t.accessibilityProvider)})}(r,o))}updateOptions(e){this.list.updateOptions(e)}getHTMLElement(){return this.list.getHTMLElement()}get onDidFocus(){return this.list.onDidFocus}get onDidDispose(){return this.list.onDidDispose}get onMouseDblClick(){return r.ju.map(this.list.onMouseDblClick,(({element:e,index:t,browserEvent:s})=>({element:void 0===e?void 0:this._model.get(e),index:t,browserEvent:s})))}get onPointer(){return r.ju.map(this.list.onPointer,(({element:e,index:t,browserEvent:s})=>({element:void 0===e?void 0:this._model.get(e),index:t,browserEvent:s})))}get onDidChangeSelection(){return r.ju.map(this.list.onDidChangeSelection,(({elements:e,indexes:t,browserEvent:s})=>({elements:e.map((e=>this._model.get(e))),indexes:t,browserEvent:s})))}get model(){return this._model}set model(e){this._model=e,this.list.splice(0,this.list.length,(0,i.w6)(e.length))}getFocus(){return this.list.getFocus()}getSelection(){return this.list.getSelection()}getSelectedElements(){return this.getSelection().map((e=>this.model.get(e)))}style(e){this.list.style(e)}dispose(){this.list.dispose()}}},4102:function(e,t,s){s.d(t,{kX:function(){return S},Bv:function(){return H}});var i=s(71488),o=s(89181),r=s(34441),n=s(54505),l=s(80265),a=s(28638),d=s(16308),h=s(13484),c=s(4848),m=s(56709),g=s(38431),p=s(59004),u=s(44929);function b(e,t){const s=[];for(const i of t){if(e.start>=i.range.end)continue;if(e.end<i.range.start)break;const t=p.e.intersect(e,i.range);p.e.isEmpty(t)||s.push({range:t,size:i.size})}return s}function v({start:e,end:t},s){return{start:e+s,end:t+s}}class D{constructor(){this.groups=[],this._size=0}splice(e,t,s=[]){const i=s.length-t,o=b({start:0,end:e},this.groups),r=b({start:e+t,end:Number.POSITIVE_INFINITY},this.groups).map((e=>({range:v(e.range,i),size:e.size}))),n=s.map(((t,s)=>({range:{start:e+s,end:e+s+1},size:t.size})));this.groups=function(...e){return function(e){const t=[];let s=null;for(const i of e){const e=i.range.start,o=i.range.end,r=i.size;s&&r===s.size?s.range.end=o:(s={range:{start:e,end:o},size:r},t.push(s))}return t}(e.reduce(((e,t)=>e.concat(t)),[]))}(o,n,r),this._size=this.groups.reduce(((e,t)=>e+t.size*(t.range.end-t.range.start)),0)}get count(){const e=this.groups.length;return e?this.groups[e-1].range.end:0}get size(){return this._size}indexAt(e){if(e<0)return-1;let t=0,s=0;for(const i of this.groups){const o=i.range.end-i.range.start,r=s+o*i.size;if(e<r)return t+Math.floor((e-s)/i.size);t+=o,s=r}return t}indexAfter(e){return Math.min(this.indexAt(e)+1,this.count)}positionAt(e){if(e<0)return-1;let t=0,s=0;for(const i of this.groups){const o=i.range.end-i.range.start,r=s+o;if(e<r)return t+(e-s)*i.size;t+=o*i.size,s=r}return-1}}class f{constructor(e){this.renderers=e,this.cache=new Map}alloc(e){let t=this.getTemplateCache(e).pop();if(!t){const s=(0,r.$)(".monaco-list-row");t={domNode:s,templateId:e,templateData:this.getRenderer(e).renderTemplate(s)}}return t}release(e){e&&this.releaseRow(e)}releaseRow(e){const{domNode:t,templateId:s}=e;t&&(t.classList.remove("scrolling"),function(e){var t;try{null===(t=e.parentElement)||void 0===t||t.removeChild(e)}catch(e){}}(t));this.getTemplateCache(s).push(e)}getTemplateCache(e){let t=this.cache.get(e);return t||(t=[],this.cache.set(e,t)),t}dispose(){this.cache.forEach(((e,t)=>{for(const s of e){this.getRenderer(t).disposeTemplate(s.templateData),s.templateData=null}})),this.cache.clear()}getRenderer(e){const t=this.renderers.get(e);if(!t)throw new Error(`No renderer found for ${e}`);return t}}var y=function(e,t,s,i){var o,r=arguments.length,n=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,t,s,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(n=(r<3?o(n):r>3?o(t,s,n):o(t,s))||n);return r>3&&n&&Object.defineProperty(t,s,n),n};const w={useShadows:!0,verticalScrollMode:1,setRowLineHeight:!0,setRowHeight:!0,supportDynamicHeights:!1,dnd:{getDragElements(e){return[e]},getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){}},horizontalScrolling:!1,transformOptimization:!0,alwaysConsumeMouseWheel:!0};class S{constructor(e){this.elements=e}update(){}getData(){return this.elements}}class E{constructor(e){this.elements=e}update(){}getData(){return this.elements}}class N{constructor(){this.types=[],this.files=[]}update(e){if(e.types&&this.types.splice(0,this.types.length,...e.types),e.files){this.files.splice(0,this.files.length);for(let t=0;t<e.files.length;t++){const s=e.files.item(t);s&&(s.size||s.type)&&this.files.push(s)}}}getData(){return{types:this.types,files:this.files}}}class T{constructor(e){(null==e?void 0:e.getSetSize)?this.getSetSize=e.getSetSize.bind(e):this.getSetSize=(e,t,s)=>s,(null==e?void 0:e.getPosInSet)?this.getPosInSet=e.getPosInSet.bind(e):this.getPosInSet=(e,t)=>t+1,(null==e?void 0:e.getRole)?this.getRole=e.getRole.bind(e):this.getRole=e=>"listitem",(null==e?void 0:e.isChecked)?this.isChecked=e.isChecked.bind(e):this.isChecked=e=>{}}}class H{constructor(e,t,s,i=w){var o,n,d,c,p,b,v,y,S,E;if(this.virtualDelegate=t,this.domId="list_id_"+ ++H.InstanceCount,this.renderers=new Map,this.renderWidth=0,this._scrollHeight=0,this.scrollableElementUpdateDisposable=null,this.scrollableElementWidthDelayer=new h.vp(50),this.splicing=!1,this.dragOverAnimationStopDisposable=g.JT.None,this.dragOverMouseY=0,this.canDrop=!1,this.currentDragFeedbackDisposable=g.JT.None,this.onDragLeaveTimeout=g.JT.None,this.disposables=new g.SL,this._onDidChangeContentHeight=new m.Q5,this._horizontalScrolling=!1,i.horizontalScrolling&&i.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");this.items=[],this.itemId=0,this.rangeMap=new D;for(const e of s)this.renderers.set(e.templateId,e);this.cache=this.disposables.add(new f(this.renderers)),this.lastRenderTop=0,this.lastRenderHeight=0,this.domNode=document.createElement("div"),this.domNode.className="monaco-list",this.domNode.classList.add(this.domId),this.domNode.tabIndex=0,this.domNode.classList.toggle("mouse-support","boolean"!=typeof i.mouseSupport||i.mouseSupport),this._horizontalScrolling=null!==(o=i.horizontalScrolling)&&void 0!==o?o:w.horizontalScrolling,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this.additionalScrollHeight=void 0===i.additionalScrollHeight?0:i.additionalScrollHeight,this.accessibilityProvider=new T(i.accessibilityProvider),this.rowsContainer=document.createElement("div"),this.rowsContainer.className="monaco-list-rows";(null!==(n=i.transformOptimization)&&void 0!==n?n:w.transformOptimization)&&(this.rowsContainer.style.transform="translate3d(0px, 0px, 0px)"),this.disposables.add(l.o.addTarget(this.rowsContainer)),this.scrollable=new u.Rm({forceIntegerValues:!0,smoothScrollDuration:null!==(d=i.smoothScrolling)&&void 0!==d&&d?125:0,scheduleAtNextAnimationFrame:e=>(0,r.jL)(e)}),this.scrollableElement=this.disposables.add(new a.$Z(this.rowsContainer,{alwaysConsumeMouseWheel:null!==(c=i.alwaysConsumeMouseWheel)&&void 0!==c?c:w.alwaysConsumeMouseWheel,horizontal:1,vertical:null!==(p=i.verticalScrollMode)&&void 0!==p?p:w.verticalScrollMode,useShadows:null!==(b=i.useShadows)&&void 0!==b?b:w.useShadows,mouseWheelScrollSensitivity:i.mouseWheelScrollSensitivity,fastScrollSensitivity:i.fastScrollSensitivity},this.scrollable)),this.domNode.appendChild(this.scrollableElement.getDomNode()),e.appendChild(this.domNode),this.scrollableElement.onScroll(this.onScroll,this,this.disposables),this.disposables.add((0,r.nm)(this.rowsContainer,l.t.Change,(e=>this.onTouchChange(e)))),this.disposables.add((0,r.nm)(this.scrollableElement.getDomNode(),"scroll",(e=>e.target.scrollTop=0))),this.disposables.add((0,r.nm)(this.domNode,"dragover",(e=>this.onDragOver(this.toDragEvent(e))))),this.disposables.add((0,r.nm)(this.domNode,"drop",(e=>this.onDrop(this.toDragEvent(e))))),this.disposables.add((0,r.nm)(this.domNode,"dragleave",(e=>this.onDragLeave(this.toDragEvent(e))))),this.disposables.add((0,r.nm)(this.domNode,"dragend",(e=>this.onDragEnd(e)))),this.setRowLineHeight=null!==(v=i.setRowLineHeight)&&void 0!==v?v:w.setRowLineHeight,this.setRowHeight=null!==(y=i.setRowHeight)&&void 0!==y?y:w.setRowHeight,this.supportDynamicHeights=null!==(S=i.supportDynamicHeights)&&void 0!==S?S:w.supportDynamicHeights,this.dnd=null!==(E=i.dnd)&&void 0!==E?E:w.dnd,this.layout()}get contentHeight(){return this.rangeMap.size}get horizontalScrolling(){return this._horizontalScrolling}set horizontalScrolling(e){if(e!==this._horizontalScrolling){if(e&&this.supportDynamicHeights)throw new Error("Horizontal scrolling and dynamic heights not supported simultaneously");if(this._horizontalScrolling=e,this.domNode.classList.toggle("horizontal-scrolling",this._horizontalScrolling),this._horizontalScrolling){for(const e of this.items)this.measureItemWidth(e);this.updateScrollWidth(),this.scrollableElement.setScrollDimensions({width:(0,r.FK)(this.domNode)}),this.rowsContainer.style.width=`${Math.max(this.scrollWidth||0,this.renderWidth)}px`}else this.scrollableElementWidthDelayer.cancel(),this.scrollableElement.setScrollDimensions({width:this.renderWidth,scrollWidth:this.renderWidth}),this.rowsContainer.style.width=""}}updateOptions(e){void 0!==e.additionalScrollHeight&&(this.additionalScrollHeight=e.additionalScrollHeight,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),void 0!==e.smoothScrolling&&this.scrollable.setSmoothScrollDuration(e.smoothScrolling?125:0),void 0!==e.horizontalScrolling&&(this.horizontalScrolling=e.horizontalScrolling),void 0!==e.mouseWheelScrollSensitivity&&this.scrollableElement.updateOptions({mouseWheelScrollSensitivity:e.mouseWheelScrollSensitivity}),void 0!==e.fastScrollSensitivity&&this.scrollableElement.updateOptions({fastScrollSensitivity:e.fastScrollSensitivity})}splice(e,t,s=[]){if(this.splicing)throw new Error("Can't run recursive splices.");this.splicing=!0;try{return this._splice(e,t,s)}finally{this.splicing=!1,this._onDidChangeContentHeight.fire(this.contentHeight)}}_splice(e,t,s=[]){const i=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),o={start:e,end:e+t},r=p.e.intersect(i,o),n=new Map;for(let e=r.end-1;e>=r.start;e--){const t=this.items[e];if(t.dragStartDisposable.dispose(),t.checkedDisposable.dispose(),t.row){let s=n.get(t.templateId);s||(s=[],n.set(t.templateId,s));const i=this.renderers.get(t.templateId);i&&i.disposeElement&&i.disposeElement(t.element,e,t.row.templateData,t.size),s.push(t.row)}t.row=null}const l={start:e+t,end:this.items.length},a=p.e.intersect(l,i),d=p.e.relativeComplement(l,i),h=s.map((e=>({id:String(this.itemId++),element:e,templateId:this.virtualDelegate.getTemplateId(e),size:this.virtualDelegate.getHeight(e),width:void 0,hasDynamicHeight:!!this.virtualDelegate.hasDynamicHeight&&this.virtualDelegate.hasDynamicHeight(e),lastDynamicHeightWidth:void 0,row:null,uri:void 0,dropTarget:!1,dragStartDisposable:g.JT.None,checkedDisposable:g.JT.None})));let c;0===e&&t>=this.items.length?(this.rangeMap=new D,this.rangeMap.splice(0,0,h),c=this.items,this.items=h):(this.rangeMap.splice(e,t,h),c=this.items.splice(e,t,...h));const m=s.length-t,u=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight),b=v(a,m),f=p.e.intersect(u,b);for(let e=f.start;e<f.end;e++)this.updateItemInDOM(this.items[e],e);const y=p.e.relativeComplement(b,u);for(const e of y)for(let t=e.start;t<e.end;t++)this.removeItemFromDOM(t);const w=d.map((e=>v(e,m))),S=[{start:e,end:e+s.length},...w].map((e=>p.e.intersect(u,e))),E=this.getNextToLastElement(S);for(const e of S)for(let t=e.start;t<e.end;t++){const e=this.items[t],s=n.get(e.templateId),i=null==s?void 0:s.pop();this.insertItemInDOM(t,E,i)}for(const e of n.values())for(const t of e)this.cache.release(t);return this.eventuallyUpdateScrollDimensions(),this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight),c.map((e=>e.element))}eventuallyUpdateScrollDimensions(){this._scrollHeight=this.contentHeight,this.rowsContainer.style.height=`${this._scrollHeight}px`,this.scrollableElementUpdateDisposable||(this.scrollableElementUpdateDisposable=(0,r.jL)((()=>{this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight}),this.updateScrollWidth(),this.scrollableElementUpdateDisposable=null})))}eventuallyUpdateScrollWidth(){this.horizontalScrolling?this.scrollableElementWidthDelayer.trigger((()=>this.updateScrollWidth())):this.scrollableElementWidthDelayer.cancel()}updateScrollWidth(){if(!this.horizontalScrolling)return;let e=0;for(const t of this.items)void 0!==t.width&&(e=Math.max(e,t.width));this.scrollWidth=e,this.scrollableElement.setScrollDimensions({scrollWidth:0===e?0:e+10})}rerender(){if(this.supportDynamicHeights){for(const e of this.items)e.lastDynamicHeightWidth=void 0;this._rerender(this.lastRenderTop,this.lastRenderHeight)}}get length(){return this.items.length}get renderHeight(){return this.scrollableElement.getScrollDimensions().height}element(e){return this.items[e].element}domElement(e){const t=this.items[e].row;return t&&t.domNode}elementHeight(e){return this.items[e].size}elementTop(e){return this.rangeMap.positionAt(e)}indexAt(e){return this.rangeMap.indexAt(e)}indexAfter(e){return this.rangeMap.indexAfter(e)}layout(e,t){const s={height:"number"==typeof e?e:(0,r.If)(this.domNode)};this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,s.scrollHeight=this.scrollHeight),this.scrollableElement.setScrollDimensions(s),void 0!==t&&(this.renderWidth=t,this.supportDynamicHeights&&this._rerender(this.scrollTop,this.renderHeight)),this.horizontalScrolling&&this.scrollableElement.setScrollDimensions({width:"number"==typeof t?t:(0,r.FK)(this.domNode)})}render(e,t,s,i,o,r=!1){const n=this.getRenderRange(t,s),l=p.e.relativeComplement(n,e),a=p.e.relativeComplement(e,n),d=this.getNextToLastElement(l);if(r){const t=p.e.intersect(e,n);for(let e=t.start;e<t.end;e++)this.updateItemInDOM(this.items[e],e)}for(const e of l)for(let t=e.start;t<e.end;t++)this.insertItemInDOM(t,d);for(const e of a)for(let t=e.start;t<e.end;t++)this.removeItemFromDOM(t);void 0!==i&&(this.rowsContainer.style.left=`-${i}px`),this.rowsContainer.style.top=`-${t}px`,this.horizontalScrolling&&void 0!==o&&(this.rowsContainer.style.width=`${Math.max(o,this.renderWidth)}px`),this.lastRenderTop=t,this.lastRenderHeight=s}insertItemInDOM(e,t,s){const i=this.items[e];i.row||(i.row=null!=s?s:this.cache.alloc(i.templateId));const o=this.accessibilityProvider.getRole(i.element)||"listitem";i.row.domNode.setAttribute("role",o);const n=this.accessibilityProvider.isChecked(i.element);if("boolean"==typeof n)i.row.domNode.setAttribute("aria-checked",String(!!n));else if(n){const e=e=>i.row.domNode.setAttribute("aria-checked",String(!!e));e(n.value),i.checkedDisposable=n.onDidChange(e)}i.row.domNode.parentElement||(t?this.rowsContainer.insertBefore(i.row.domNode,t):this.rowsContainer.appendChild(i.row.domNode)),this.updateItemInDOM(i,e);const l=this.renderers.get(i.templateId);if(!l)throw new Error(`No renderer found for template id ${i.templateId}`);null==l||l.renderElement(i.element,e,i.row.templateData,i.size);const a=this.dnd.getDragURI(i.element);i.dragStartDisposable.dispose(),i.row.domNode.draggable=!!a,a&&(i.dragStartDisposable=(0,r.nm)(i.row.domNode,"dragstart",(e=>this.onDragStart(i.element,a,e)))),this.horizontalScrolling&&(this.measureItemWidth(i),this.eventuallyUpdateScrollWidth())}measureItemWidth(e){if(!e.row||!e.row.domNode)return;e.row.domNode.style.width=i.isFirefox?"-moz-fit-content":"fit-content",e.width=(0,r.FK)(e.row.domNode);const t=window.getComputedStyle(e.row.domNode);t.paddingLeft&&(e.width+=parseFloat(t.paddingLeft)),t.paddingRight&&(e.width+=parseFloat(t.paddingRight)),e.row.domNode.style.width=""}updateItemInDOM(e,t){e.row.domNode.style.top=`${this.elementTop(t)}px`,this.setRowHeight&&(e.row.domNode.style.height=`${e.size}px`),this.setRowLineHeight&&(e.row.domNode.style.lineHeight=`${e.size}px`),e.row.domNode.setAttribute("data-index",`${t}`),e.row.domNode.setAttribute("data-last-element",t===this.length-1?"true":"false"),e.row.domNode.setAttribute("data-parity",t%2==0?"even":"odd"),e.row.domNode.setAttribute("aria-setsize",String(this.accessibilityProvider.getSetSize(e.element,t,this.length))),e.row.domNode.setAttribute("aria-posinset",String(this.accessibilityProvider.getPosInSet(e.element,t))),e.row.domNode.setAttribute("id",this.getElementDomId(t)),e.row.domNode.classList.toggle("drop-target",e.dropTarget)}removeItemFromDOM(e){const t=this.items[e];if(t.dragStartDisposable.dispose(),t.checkedDisposable.dispose(),t.row){const s=this.renderers.get(t.templateId);s&&s.disposeElement&&s.disposeElement(t.element,e,t.row.templateData,t.size),this.cache.release(t.row),t.row=null}this.horizontalScrolling&&this.eventuallyUpdateScrollWidth()}getScrollTop(){return this.scrollableElement.getScrollPosition().scrollTop}setScrollTop(e,t){this.scrollableElementUpdateDisposable&&(this.scrollableElementUpdateDisposable.dispose(),this.scrollableElementUpdateDisposable=null,this.scrollableElement.setScrollDimensions({scrollHeight:this.scrollHeight})),this.scrollableElement.setScrollPosition({scrollTop:e,reuseAnimation:t})}get scrollTop(){return this.getScrollTop()}set scrollTop(e){this.setScrollTop(e)}get scrollHeight(){return this._scrollHeight+(this.horizontalScrolling?10:0)+this.additionalScrollHeight}get onMouseClick(){return m.ju.map(this.disposables.add(new n.Y(this.domNode,"click")).event,(e=>this.toMouseEvent(e)),this.disposables)}get onMouseDblClick(){return m.ju.map(this.disposables.add(new n.Y(this.domNode,"dblclick")).event,(e=>this.toMouseEvent(e)),this.disposables)}get onMouseMiddleClick(){return m.ju.filter(m.ju.map(this.disposables.add(new n.Y(this.domNode,"auxclick")).event,(e=>this.toMouseEvent(e)),this.disposables),(e=>1===e.browserEvent.button),this.disposables)}get onMouseDown(){return m.ju.map(this.disposables.add(new n.Y(this.domNode,"mousedown")).event,(e=>this.toMouseEvent(e)),this.disposables)}get onMouseOver(){return m.ju.map(this.disposables.add(new n.Y(this.domNode,"mouseover")).event,(e=>this.toMouseEvent(e)),this.disposables)}get onContextMenu(){return m.ju.any(m.ju.map(this.disposables.add(new n.Y(this.domNode,"contextmenu")).event,(e=>this.toMouseEvent(e)),this.disposables),m.ju.map(this.disposables.add(new n.Y(this.domNode,l.t.Contextmenu)).event,(e=>this.toGestureEvent(e)),this.disposables))}get onTouchStart(){return m.ju.map(this.disposables.add(new n.Y(this.domNode,"touchstart")).event,(e=>this.toTouchEvent(e)),this.disposables)}get onTap(){return m.ju.map(this.disposables.add(new n.Y(this.rowsContainer,l.t.Tap)).event,(e=>this.toGestureEvent(e)),this.disposables)}toMouseEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),s=void 0===t?void 0:this.items[t];return{browserEvent:e,index:t,element:s&&s.element}}toTouchEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),s=void 0===t?void 0:this.items[t];return{browserEvent:e,index:t,element:s&&s.element}}toGestureEvent(e){const t=this.getItemIndexFromEventTarget(e.initialTarget||null),s=void 0===t?void 0:this.items[t];return{browserEvent:e,index:t,element:s&&s.element}}toDragEvent(e){const t=this.getItemIndexFromEventTarget(e.target||null),s=void 0===t?void 0:this.items[t];return{browserEvent:e,index:t,element:s&&s.element}}onScroll(e){try{const t=this.getRenderRange(this.lastRenderTop,this.lastRenderHeight);this.render(t,e.scrollTop,e.height,e.scrollLeft,e.scrollWidth),this.supportDynamicHeights&&this._rerender(e.scrollTop,e.height,e.inSmoothScrolling)}catch(e){throw e}}onTouchChange(e){e.preventDefault(),e.stopPropagation(),this.scrollTop-=e.translationY}onDragStart(e,t,s){var i,n;if(!s.dataTransfer)return;const l=this.dnd.getDragElements(e);if(s.dataTransfer.effectAllowed="copyMove",s.dataTransfer.setData(o.g.TEXT,t),s.dataTransfer.setDragImage){let e;this.dnd.getDragLabel&&(e=this.dnd.getDragLabel(l,s)),void 0===e&&(e=String(l.length));const t=(0,r.$)(".monaco-drag-image");t.textContent=e,document.body.appendChild(t),s.dataTransfer.setDragImage(t,-10,-10),setTimeout((()=>document.body.removeChild(t)),0)}this.currentDragData=new S(l),o.P.CurrentDragAndDropData=new E(l),null===(n=(i=this.dnd).onDragStart)||void 0===n||n.call(i,this.currentDragData,s)}onDragOver(e){var t;if(e.browserEvent.preventDefault(),this.onDragLeaveTimeout.dispose(),o.P.CurrentDragAndDropData&&"vscode-ui"===o.P.CurrentDragAndDropData.getData())return!1;if(this.setupDragAndDropScrollTopAnimation(e.browserEvent),!e.browserEvent.dataTransfer)return!1;if(!this.currentDragData)if(o.P.CurrentDragAndDropData)this.currentDragData=o.P.CurrentDragAndDropData;else{if(!e.browserEvent.dataTransfer.types)return!1;this.currentDragData=new N}const s=this.dnd.onDragOver(this.currentDragData,e.element,e.index,e.browserEvent);if(this.canDrop="boolean"==typeof s?s:s.accept,!this.canDrop)return this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),!1;let i;if(e.browserEvent.dataTransfer.dropEffect="boolean"!=typeof s&&0===s.effect?"copy":"move",i="boolean"!=typeof s&&s.feedback?s.feedback:void 0===e.index?[-1]:[e.index],i=(0,d.EB)(i).filter((e=>e>=-1&&e<this.length)).sort(((e,t)=>e-t)),i=-1===i[0]?[-1]:i,r=this.currentDragFeedback,n=i,Array.isArray(r)&&Array.isArray(n)?(0,d.fS)(r,n):r===n)return!0;var r,n;if(this.currentDragFeedback=i,this.currentDragFeedbackDisposable.dispose(),-1===i[0])this.domNode.classList.add("drop-target"),this.rowsContainer.classList.add("drop-target"),this.currentDragFeedbackDisposable=(0,g.OF)((()=>{this.domNode.classList.remove("drop-target"),this.rowsContainer.classList.remove("drop-target")}));else{for(const e of i){const s=this.items[e];s.dropTarget=!0,null===(t=s.row)||void 0===t||t.domNode.classList.add("drop-target")}this.currentDragFeedbackDisposable=(0,g.OF)((()=>{var e;for(const t of i){const s=this.items[t];s.dropTarget=!1,null===(e=s.row)||void 0===e||e.domNode.classList.remove("drop-target")}}))}return!0}onDragLeave(e){var t,s;this.onDragLeaveTimeout.dispose(),this.onDragLeaveTimeout=(0,h.Vg)((()=>this.clearDragOverFeedback()),100),this.currentDragData&&(null===(s=(t=this.dnd).onDragLeave)||void 0===s||s.call(t,this.currentDragData,e.element,e.index,e.browserEvent))}onDrop(e){if(!this.canDrop)return;const t=this.currentDragData;this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.currentDragData=void 0,o.P.CurrentDragAndDropData=void 0,t&&e.browserEvent.dataTransfer&&(e.browserEvent.preventDefault(),t.update(e.browserEvent.dataTransfer),this.dnd.drop(t,e.element,e.index,e.browserEvent))}onDragEnd(e){var t,s;this.canDrop=!1,this.teardownDragAndDropScrollTopAnimation(),this.clearDragOverFeedback(),this.currentDragData=void 0,o.P.CurrentDragAndDropData=void 0,null===(s=(t=this.dnd).onDragEnd)||void 0===s||s.call(t,e)}clearDragOverFeedback(){this.currentDragFeedback=void 0,this.currentDragFeedbackDisposable.dispose(),this.currentDragFeedbackDisposable=g.JT.None}setupDragAndDropScrollTopAnimation(e){if(!this.dragOverAnimationDisposable){const e=(0,r.xQ)(this.domNode).top;this.dragOverAnimationDisposable=(0,r.jt)(this.animateDragAndDropScrollTop.bind(this,e))}this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationStopDisposable=(0,h.Vg)((()=>{this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)}),1e3),this.dragOverMouseY=e.pageY}animateDragAndDropScrollTop(e){if(void 0===this.dragOverMouseY)return;const t=this.dragOverMouseY-e,s=this.renderHeight-35;t<35?this.scrollTop+=Math.max(-14,Math.floor(.3*(t-35))):t>s&&(this.scrollTop+=Math.min(14,Math.floor(.3*(t-s))))}teardownDragAndDropScrollTopAnimation(){this.dragOverAnimationStopDisposable.dispose(),this.dragOverAnimationDisposable&&(this.dragOverAnimationDisposable.dispose(),this.dragOverAnimationDisposable=void 0)}getItemIndexFromEventTarget(e){const t=this.scrollableElement.getDomNode();let s=e;for(;s instanceof HTMLElement&&s!==this.rowsContainer&&t.contains(s);){const e=s.getAttribute("data-index");if(e){const t=Number(e);if(!isNaN(t))return t}s=s.parentElement}}getRenderRange(e,t){return{start:this.rangeMap.indexAt(e),end:this.rangeMap.indexAfter(e+t-1)}}_rerender(e,t,s){const i=this.getRenderRange(e,t);let o,r;e===this.elementTop(i.start)?(o=i.start,r=0):i.end-i.start>1&&(o=i.start+1,r=this.elementTop(o)-e);let n=0;for(;;){const l=this.getRenderRange(e,t);let a=!1;for(let e=l.start;e<l.end;e++){const t=this.probeDynamicHeight(e);0!==t&&this.rangeMap.splice(e,1,[this.items[e]]),n+=t,a=a||0!==t}if(!a){0!==n&&this.eventuallyUpdateScrollDimensions();const t=p.e.relativeComplement(i,l);for(const e of t)for(let t=e.start;t<e.end;t++)this.items[t].row&&this.removeItemFromDOM(t);const a=p.e.relativeComplement(l,i);for(const e of a)for(let t=e.start;t<e.end;t++){const e=t+1,s=e<this.items.length?this.items[e].row:null,i=s?s.domNode:null;this.insertItemInDOM(t,i)}for(let e=l.start;e<l.end;e++)this.items[e].row&&this.updateItemInDOM(this.items[e],e);if("number"==typeof o){const t=this.scrollable.getFutureScrollPosition().scrollTop-e,i=this.elementTop(o)-r+t;this.setScrollTop(i,s)}return void this._onDidChangeContentHeight.fire(this.contentHeight)}}}probeDynamicHeight(e){var t,s,i;const o=this.items[e];if(this.virtualDelegate.getDynamicHeight){const e=this.virtualDelegate.getDynamicHeight(o.element);if(null!==e){const t=o.size;return o.size=e,o.lastDynamicHeightWidth=this.renderWidth,e-t}}if(!o.hasDynamicHeight||o.lastDynamicHeightWidth===this.renderWidth)return 0;if(this.virtualDelegate.hasDynamicHeight&&!this.virtualDelegate.hasDynamicHeight(o.element))return 0;const r=o.size;if(!this.setRowHeight&&o.row){const e=o.row.domNode.offsetHeight;return o.size=e,o.lastDynamicHeightWidth=this.renderWidth,e-r}const n=this.cache.alloc(o.templateId);n.domNode.style.height="",this.rowsContainer.appendChild(n.domNode);const l=this.renderers.get(o.templateId);return l&&(l.renderElement(o.element,e,n.templateData,void 0),null===(t=l.disposeElement)||void 0===t||t.call(l,o.element,e,n.templateData,void 0)),o.size=n.domNode.offsetHeight,null===(i=(s=this.virtualDelegate).setDynamicHeight)||void 0===i||i.call(s,o.element,o.size),o.lastDynamicHeightWidth=this.renderWidth,this.rowsContainer.removeChild(n.domNode),this.cache.release(n),o.size-r}getNextToLastElement(e){const t=e[e.length-1];if(!t)return null;const s=this.items[t.end];return s&&s.row?s.row.domNode:null}getElementDomId(e){return`${this.domId}_${e}`}dispose(){var e;if(this.items){for(const t of this.items)if(t.row){const s=this.renderers.get(t.row.templateId);s&&(null===(e=s.disposeElement)||void 0===e||e.call(s,t.element,-1,t.row.templateData,void 0),s.disposeTemplate(t.row.templateData))}this.items=[]}this.domNode&&this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),(0,g.B9)(this.disposables)}}H.InstanceCount=0,y([c.H],H.prototype,"onMouseClick",null),y([c.H],H.prototype,"onMouseDblClick",null),y([c.H],H.prototype,"onMouseMiddleClick",null),y([c.H],H.prototype,"onMouseDown",null),y([c.H],H.prototype,"onMouseOver",null),y([c.H],H.prototype,"onContextMenu",null),y([c.H],H.prototype,"onTouchStart",null),y([c.H],H.prototype,"onTap",null)},84668:function(e,t,s){s.d(t,{J:function(){return i}});class i{constructor(e){this.spliceables=e}splice(e,t,s){this.spliceables.forEach((i=>i.splice(e,t,s)))}}}}]);