"use strict";(self.webpackChunkapp_template_builder=self.webpackChunkapp_template_builder||[]).push([[8305],{34962:function(e,t,s){s.r(t),s.d(t,{CodeLensContribution:function(){return q}});var o=s(34441),i=s(13484),n=s(20996),r=s(32916),d=s(38431),a=s(48423),l=s(55298),h=s(70054),c=s(21081),_=s(97464),u=s(14818),m=s(28919),g=s(65041),p=s(80793),C=s(35921),f=function(e,t,s,o){return new(s||(s=Promise))((function(i,n){function r(e){try{a(o.next(e))}catch(e){n(e)}}function d(e){try{a(o.throw(e))}catch(e){n(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(r,d)}a((o=o.apply(e,t||[])).next())}))};class v{constructor(){this.lenses=[],this._disposables=new d.SL}dispose(){this._disposables.dispose()}get isDisposed(){return this._disposables.isDisposed}add(e,t){this._disposables.add(e);for(const s of e.lenses)this.lenses.push({symbol:s,provider:t})}}function L(e,t,s){return f(this,void 0,void 0,(function*(){const o=e.ordered(t),i=new Map,r=new v,d=o.map(((e,o)=>f(this,void 0,void 0,(function*(){i.set(e,o);try{const o=yield Promise.resolve(e.provideCodeLenses(t,s));o&&r.add(o,e)}catch(e){(0,n.Cp)(e)}}))));return yield Promise.all(d),r.lenses=r.lenses.sort(((e,t)=>e.symbol.range.startLineNumber<t.symbol.range.startLineNumber?-1:e.symbol.range.startLineNumber>t.symbol.range.startLineNumber?1:i.get(e.provider)<i.get(t.provider)?-1:i.get(e.provider)>i.get(t.provider)?1:e.symbol.range.startColumn<t.symbol.range.startColumn?-1:e.symbol.range.startColumn>t.symbol.range.startColumn?1:0)),r}))}p.P0.registerCommand("_executeCodeLensProvider",(function(e,...t){let[s,o]=t;(0,u.p_)(m.o.isUri(s)),(0,u.p_)("number"==typeof o||!o);const{codeLensProvider:i}=e.get(C.p),r=e.get(g.q).getModel(s);if(!r)throw(0,n.b1)();const a=[],l=new d.SL;return L(i,r,_.T.None).then((e=>{l.add(e);const t=[];for(const s of e.lenses)null==o||Boolean(s.symbol.command)?a.push(s.symbol):o-- >0&&s.provider.resolveCodeLens&&t.push(Promise.resolve(s.provider.resolveCodeLens(r,s.symbol,_.T.None)).then((e=>a.push(e||s.symbol))));return Promise.all(t)})).then((()=>a)).finally((()=>{setTimeout((()=>l.dispose()),100)}))}));var y=s(89717),b=s(39832),w=s(50038),D=s(53061),N=s(44333),P=s(75295),M=function(e,t,s,o){var i,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,s):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,o);else for(var d=e.length-1;d>=0;d--)(i=e[d])&&(r=(n<3?i(r):n>3?i(t,s,r):i(t,s))||r);return n>3&&r&&Object.defineProperty(t,s,r),r},S=function(e,t){return function(s,o){t(s,o,e)}};const I=(0,N.yh)("ICodeLensCache");class W{constructor(e,t){this.lineCount=e,this.data=t}}let E=class{constructor(e){this._fakeProvider=new class{provideCodeLenses(){throw new Error("not supported")}},this._cache=new b.z6(20,.75);(0,i.To)((()=>e.remove("codelens/cache",1)));const t="codelens/cache2",s=e.get(t,1,"{}");this._deserialize(s),(0,y.I)(e.onWillSaveState)((s=>{s.reason===P.fk.SHUTDOWN&&e.store(t,this._serialize(),1,1)}))}put(e,t){const s=t.lenses.map((e=>{var t;return{range:e.symbol.range,command:e.symbol.command&&{id:"",title:null===(t=e.symbol.command)||void 0===t?void 0:t.title}}})),o=new v;o.add({lenses:s,dispose:()=>{}},this._fakeProvider);const i=new W(e.getLineCount(),o);this._cache.set(e.uri.toString(),i)}get(e){const t=this._cache.get(e.uri.toString());return t&&t.lineCount===e.getLineCount()?t.data:void 0}delete(e){this._cache.delete(e.uri.toString())}_serialize(){const e=Object.create(null);for(const[t,s]of this._cache){const o=new Set;for(const e of s.data.lenses)o.add(e.symbol.range.startLineNumber);e[t]={lineCount:s.lineCount,lines:[...o.values()]}}return JSON.stringify(e)}_deserialize(e){try{const t=JSON.parse(e);for(const e in t){const s=t[e],o=[];for(const e of s.lines)o.push({range:new w.e(e,1,e,11)});const i=new v;i.add({lenses:o,dispose(){}},this._fakeProvider),this._cache.set(e,new W(s.lineCount,i))}}catch(e){}}};E=M([S(0,P.Uy)],E),(0,D.z)(I,E);var O=s(19111),T=s(132);class x{constructor(e,t,s){this.afterColumn=1073741824,this.afterLineNumber=e,this.heightInPx=t,this._onHeight=s,this.suppressMouseDown=!0,this.domNode=document.createElement("div")}onComputedHeight(e){void 0===this._lastHeight?this._lastHeight=e:this._lastHeight!==e&&(this._lastHeight=e,this._onHeight())}isVisible(){return 0!==this._lastHeight&&this.domNode.hasAttribute("monaco-visible-view-zone")}}class Z{constructor(e,t,s){this.allowEditorOverflow=!1,this.suppressMouseDown=!0,this._commands=new Map,this._isEmpty=!0,this._editor=e,this._id="codelens.widget-"+Z._idPool++,this.updatePosition(s),this._domNode=document.createElement("span"),this._domNode.className=`codelens-decoration ${t}`}withCommands(e,t){this._commands.clear();const s=[];let i=!1;for(let t=0;t<e.length;t++){const n=e[t];if(n&&(i=!0,n.command)){const i=(0,O.T)(n.command.title.trim());n.command.id?(s.push(o.$("a",{id:String(t),title:n.command.tooltip,role:"button"},...i)),this._commands.set(String(t),n.command)):s.push(o.$("span",{title:n.command.tooltip},...i)),t+1<e.length&&s.push(o.$("span",void 0," | "))}}i?(o.mc(this._domNode,...s),this._isEmpty&&t&&this._domNode.classList.add("fadein"),this._isEmpty=!1):o.mc(this._domNode,o.$("span",void 0,"no commands"))}getCommand(e){return e.parentElement===this._domNode?this._commands.get(e.id):void 0}getId(){return this._id}getDomNode(){return this._domNode}updatePosition(e){const t=this._editor.getModel().getLineFirstNonWhitespaceColumn(e);this._widgetPosition={position:{lineNumber:e,column:t},preference:[1]}}getPosition(){return this._widgetPosition||null}}Z._idPool=0;class V{constructor(){this._removeDecorations=[],this._addDecorations=[],this._addDecorationsCallbacks=[]}addDecoration(e,t){this._addDecorations.push(e),this._addDecorationsCallbacks.push(t)}removeDecoration(e){this._removeDecorations.push(e)}commit(e){const t=e.deltaDecorations(this._removeDecorations,this._addDecorations);for(let e=0,s=t.length;e<s;e++)this._addDecorationsCallbacks[e](t[e])}}class ${constructor(e,t,s,o,i,n,r){let d;this._isDisposed=!1,this._editor=t,this._className=s,this._data=e,this._decorationIds=[];const a=[];this._data.forEach(((e,t)=>{e.symbol.command&&a.push(e.symbol),o.addDecoration({range:e.symbol.range,options:T.qx.EMPTY},(e=>this._decorationIds[t]=e)),d=d?w.e.plusRange(d,e.symbol.range):w.e.lift(e.symbol.range)})),this._viewZone=new x(d.startLineNumber-1,n,r),this._viewZoneId=i.addZone(this._viewZone),a.length>0&&(this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(a,!1))}_createContentWidgetIfNecessary(){this._contentWidget?this._editor.layoutContentWidget(this._contentWidget):(this._contentWidget=new Z(this._editor,this._className,this._viewZone.afterLineNumber+1),this._editor.addContentWidget(this._contentWidget))}dispose(e,t){this._decorationIds.forEach(e.removeDecoration,e),this._decorationIds=[],null==t||t.removeZone(this._viewZoneId),this._contentWidget&&(this._editor.removeContentWidget(this._contentWidget),this._contentWidget=void 0),this._isDisposed=!0}isDisposed(){return this._isDisposed}isValid(){return this._decorationIds.some(((e,t)=>{const s=this._editor.getModel().getDecorationRange(e),o=this._data[t].symbol;return!(!s||w.e.isEmpty(o.range)!==s.isEmpty())}))}updateCodeLensSymbols(e,t){this._decorationIds.forEach(t.removeDecoration,t),this._decorationIds=[],this._data=e,this._data.forEach(((e,s)=>{t.addDecoration({range:e.symbol.range,options:T.qx.EMPTY},(e=>this._decorationIds[s]=e))}))}updateHeight(e,t){this._viewZone.heightInPx=e,t.layoutZone(this._viewZoneId),this._contentWidget&&this._editor.layoutContentWidget(this._contentWidget)}computeIfNecessary(e){if(!this._viewZone.isVisible())return null;for(let t=0;t<this._decorationIds.length;t++){const s=e.getDecorationRange(this._decorationIds[t]);s&&(this._data[t].symbol.range=s)}return this._data}updateCommands(e){this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(e,!0);for(let t=0;t<this._data.length;t++){const s=e[t];if(s){const{symbol:e}=this._data[t];e.command=s.command||e.command}}}getCommand(e){var t;return null===(t=this._contentWidget)||void 0===t?void 0:t.getCommand(e)}getLineNumber(){const e=this._editor.getModel().getDecorationRange(this._decorationIds[0]);return e?e.startLineNumber:-1}update(e){if(this.isValid()){const t=this._editor.getModel().getDecorationRange(this._decorationIds[0]);t&&(this._viewZone.afterLineNumber=t.startLineNumber-1,e.layoutZone(this._viewZoneId),this._contentWidget&&(this._contentWidget.updatePosition(t.startLineNumber),this._editor.layoutContentWidget(this._contentWidget)))}}}var H=s(26386),k=s(97968),R=s(38785),F=s(69060),z=function(e,t,s,o){var i,n=arguments.length,r=n<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,s):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,o);else for(var d=e.length-1;d>=0;d--)(i=e[d])&&(r=(n<3?i(r):n>3?i(t,s,r):i(t,s))||r);return n>3&&r&&Object.defineProperty(t,s,r),r},A=function(e,t){return function(s,o){t(s,o,e)}},j=function(e,t,s,o){return new(s||(s=Promise))((function(i,n){function r(e){try{a(o.next(e))}catch(e){n(e)}}function d(e){try{a(o.throw(e))}catch(e){n(e)}}function a(e){var t;e.done?i(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(r,d)}a((o=o.apply(e,t||[])).next())}))};let q=class{constructor(e,t,s,n,a,l){this._editor=e,this._languageFeaturesService=t,this._commandService=n,this._notificationService=a,this._codeLensCache=l,this._disposables=new d.SL,this._localToDispose=new d.SL,this._lenses=[],this._oldCodeLensModels=new d.SL,this._provideCodeLensDebounce=s.for(t.codeLensProvider,"CodeLensProvide",{min:250}),this._resolveCodeLensesDebounce=s.for(t.codeLensProvider,"CodeLensResolve",{min:250,salt:"resolve"}),this._resolveCodeLensesScheduler=new i.pY((()=>this._resolveCodeLensesInViewport()),this._resolveCodeLensesDebounce.default()),this._disposables.add(this._editor.onDidChangeModel((()=>this._onModelChange()))),this._disposables.add(this._editor.onDidChangeModelLanguage((()=>this._onModelChange()))),this._disposables.add(this._editor.onDidChangeConfiguration((e=>{(e.hasChanged(46)||e.hasChanged(16)||e.hasChanged(15))&&this._updateLensStyle(),e.hasChanged(14)&&this._onModelChange()}))),this._disposables.add(t.codeLensProvider.onDidChange(this._onModelChange,this)),this._onModelChange(),this._styleClassName="_"+(0,r.vp)(this._editor.getId()).toString(16),this._styleElement=o.dS(o.OO(this._editor.getContainerDomNode())?this._editor.getContainerDomNode():void 0),this._updateLensStyle()}dispose(){var e;this._localDispose(),this._disposables.dispose(),this._oldCodeLensModels.dispose(),null===(e=this._currentCodeLensModel)||void 0===e||e.dispose(),this._styleElement.remove()}_getLayoutInfo(){const e=Math.max(1.3,this._editor.getOption(61)/this._editor.getOption(48));let t=this._editor.getOption(16);return(!t||t<5)&&(t=.9*this._editor.getOption(48)|0),{fontSize:t,codeLensHeight:t*e|0}}_updateLensStyle(){const{codeLensHeight:e,fontSize:t}=this._getLayoutInfo(),s=this._editor.getOption(15),o=this._editor.getOption(46),i=`--codelens-font-family${this._styleClassName}`,n=`--codelens-font-features${this._styleClassName}`;let r=`\n\t\t.monaco-editor .codelens-decoration.${this._styleClassName} { line-height: ${e}px; font-size: ${t}px; padding-right: ${Math.round(.5*t)}px; font-feature-settings: var(${n}) }\n\t\t.monaco-editor .codelens-decoration.${this._styleClassName} span.codicon { line-height: ${e}px; font-size: ${t}px; }\n\t\t`;s&&(r+=`.monaco-editor .codelens-decoration.${this._styleClassName} { font-family: var(${i}), ${h.hL.fontFamily}}`),this._styleElement.textContent=r,this._editor.getContainerDomNode().style.setProperty(i,null!=s?s:"inherit"),this._editor.getContainerDomNode().style.setProperty(n,o.fontFeatureSettings),this._editor.changeViewZones((t=>{for(const s of this._lenses)s.updateHeight(e,t)}))}_localDispose(){var e,t,s;null===(e=this._getCodeLensModelPromise)||void 0===e||e.cancel(),this._getCodeLensModelPromise=void 0,null===(t=this._resolveCodeLensesPromise)||void 0===t||t.cancel(),this._resolveCodeLensesPromise=void 0,this._localToDispose.clear(),this._oldCodeLensModels.clear(),null===(s=this._currentCodeLensModel)||void 0===s||s.dispose()}_onModelChange(){this._localDispose();const e=this._editor.getModel();if(!e)return;if(!this._editor.getOption(14))return;const t=this._codeLensCache.get(e);if(t&&this._renderCodeLensSymbols(t),!this._languageFeaturesService.codeLensProvider.has(e))return void(t&&this._localToDispose.add((0,i.Vg)((()=>{const s=this._codeLensCache.get(e);t===s&&(this._codeLensCache.delete(e),this._onModelChange())}),3e4)));for(const t of this._languageFeaturesService.codeLensProvider.all(e))if("function"==typeof t.onDidChange){const e=t.onDidChange((()=>s.schedule()));this._localToDispose.add(e)}const s=new i.pY((()=>{var t;const o=Date.now();null===(t=this._getCodeLensModelPromise)||void 0===t||t.cancel(),this._getCodeLensModelPromise=(0,i.PG)((t=>L(this._languageFeaturesService.codeLensProvider,e,t))),this._getCodeLensModelPromise.then((t=>{this._currentCodeLensModel&&this._oldCodeLensModels.add(this._currentCodeLensModel),this._currentCodeLensModel=t,this._codeLensCache.put(e,t);const i=this._provideCodeLensDebounce.update(e,Date.now()-o);s.delay=i,this._renderCodeLensSymbols(t),this._resolveCodeLensesInViewportSoon()}),n.dL)}),this._provideCodeLensDebounce.get(e));this._localToDispose.add(s),this._localToDispose.add((0,d.OF)((()=>this._resolveCodeLensesScheduler.cancel()))),this._localToDispose.add(this._editor.onDidChangeModelContent((()=>{this._editor.changeDecorations((e=>{this._editor.changeViewZones((t=>{const s=[];let o=-1;this._lenses.forEach((e=>{e.isValid()&&o!==e.getLineNumber()?(e.update(t),o=e.getLineNumber()):s.push(e)}));const i=new V;s.forEach((e=>{e.dispose(i,t),this._lenses.splice(this._lenses.indexOf(e),1)})),i.commit(e)}))})),s.schedule()}))),this._localToDispose.add(this._editor.onDidFocusEditorWidget((()=>{s.schedule()}))),this._localToDispose.add(this._editor.onDidScrollChange((e=>{e.scrollTopChanged&&this._lenses.length>0&&this._resolveCodeLensesInViewportSoon()}))),this._localToDispose.add(this._editor.onDidLayoutChange((()=>{this._resolveCodeLensesInViewportSoon()}))),this._localToDispose.add((0,d.OF)((()=>{if(this._editor.getModel()){const e=a.Z.capture(this._editor);this._editor.changeDecorations((e=>{this._editor.changeViewZones((t=>{this._disposeAllLenses(e,t)}))})),e.restore(this._editor)}else this._disposeAllLenses(void 0,void 0)}))),this._localToDispose.add(this._editor.onMouseDown((e=>{if(9!==e.target.type)return;let t=e.target.element;if("SPAN"===(null==t?void 0:t.tagName)&&(t=t.parentElement),"A"===(null==t?void 0:t.tagName))for(const e of this._lenses){const s=e.getCommand(t);if(s){this._commandService.executeCommand(s.id,...s.arguments||[]).catch((e=>this._notificationService.error(e)));break}}}))),s.schedule()}_disposeAllLenses(e,t){const s=new V;for(const e of this._lenses)e.dispose(s,t);e&&s.commit(e),this._lenses.length=0}_renderCodeLensSymbols(e){if(!this._editor.hasModel())return;const t=this._editor.getModel().getLineCount(),s=[];let o;for(const i of e.lenses){const e=i.symbol.range.startLineNumber;e<1||e>t||(o&&o[o.length-1].symbol.range.startLineNumber===e?o.push(i):(o=[i],s.push(o)))}const i=a.Z.capture(this._editor),n=this._getLayoutInfo();this._editor.changeDecorations((e=>{this._editor.changeViewZones((t=>{const o=new V;let i=0,r=0;for(;r<s.length&&i<this._lenses.length;){const e=s[r][0].symbol.range.startLineNumber,d=this._lenses[i].getLineNumber();d<e?(this._lenses[i].dispose(o,t),this._lenses.splice(i,1)):d===e?(this._lenses[i].updateCodeLensSymbols(s[r],o),r++,i++):(this._lenses.splice(i,0,new $(s[r],this._editor,this._styleClassName,o,t,n.codeLensHeight,(()=>this._resolveCodeLensesInViewportSoon()))),i++,r++)}for(;i<this._lenses.length;)this._lenses[i].dispose(o,t),this._lenses.splice(i,1);for(;r<s.length;)this._lenses.push(new $(s[r],this._editor,this._styleClassName,o,t,n.codeLensHeight,(()=>this._resolveCodeLensesInViewportSoon()))),r++;o.commit(e)}))})),i.restore(this._editor)}_resolveCodeLensesInViewportSoon(){this._editor.getModel()&&this._resolveCodeLensesScheduler.schedule()}_resolveCodeLensesInViewport(){var e;null===(e=this._resolveCodeLensesPromise)||void 0===e||e.cancel(),this._resolveCodeLensesPromise=void 0;const t=this._editor.getModel();if(!t)return;const s=[],o=[];if(this._lenses.forEach((e=>{const i=e.computeIfNecessary(t);i&&(s.push(i),o.push(e))})),0===s.length)return;const r=Date.now(),d=(0,i.PG)((e=>{const i=s.map(((s,i)=>{const r=new Array(s.length),d=s.map(((s,o)=>s.symbol.command||"function"!=typeof s.provider.resolveCodeLens?(r[o]=s.symbol,Promise.resolve(void 0)):Promise.resolve(s.provider.resolveCodeLens(t,s.symbol,e)).then((e=>{r[o]=e}),n.Cp)));return Promise.all(d).then((()=>{e.isCancellationRequested||o[i].isDisposed()||o[i].updateCommands(r)}))}));return Promise.all(i)}));this._resolveCodeLensesPromise=d,this._resolveCodeLensesPromise.then((()=>{const e=this._resolveCodeLensesDebounce.update(t,Date.now()-r);this._resolveCodeLensesScheduler.delay=e,this._currentCodeLensModel&&this._codeLensCache.put(t,this._currentCodeLensModel),this._oldCodeLensModels.clear(),d===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)}),(e=>{(0,n.dL)(e),d===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)}))}getModel(){return this._currentCodeLensModel}};q.ID="css.editor.codeLens",q=z([A(1,C.p),A(2,F.A),A(3,p.Hy),A(4,k.lT),A(5,I)],q),(0,l._K)(q.ID,q),(0,l.Qr)(class extends l.R6{constructor(){super({id:"codelens.showLensesInCurrentLine",precondition:c.u.hasCodeLensProvider,label:(0,H.NC)("showLensOnLine","Show CodeLens Commands For Current Line"),alias:"Show CodeLens Commands For Current Line"})}run(e,t){return j(this,void 0,void 0,(function*(){if(!t.hasModel())return;const s=e.get(R.eJ),o=e.get(p.Hy),i=e.get(k.lT),n=t.getSelection().positionLineNumber,r=t.getContribution(q.ID);if(!r)return;const d=r.getModel();if(!d)return;const a=[];for(const e of d.lenses)e.symbol.command&&e.symbol.range.startLineNumber===n&&a.push({label:e.symbol.command.title,command:e.symbol.command});if(0===a.length)return;const l=yield s.pick(a,{canPickMany:!1});if(l){if(d.isDisposed)return yield o.executeCommand(this.id);try{yield o.executeCommand(l.command.id,...l.command.arguments||[])}catch(e){i.error(e)}}}))}})}}]);