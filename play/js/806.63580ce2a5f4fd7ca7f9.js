(self.webpackChunkapp_template_builder=self.webpackChunkapp_template_builder||[]).push([[806],{90937:function(e,t,n){"use strict";n.r(t),n.d(t,{DEFAULT_BUTTON:function(){return o}});var o={buttonName:"",buttonEvent:"",buttonType:"",permission:""}},34880:function(e,t,n){"use strict";n.r(t),n.d(t,{DesignerComponent:function(){return l},DesignerLayout:function(){return u}});n(95094),n(43105),n(34769);var o=n(55164);function r(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function i(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var l=i((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1?arguments[1]:void 0,i=arguments.length>2?arguments[2]:void 0;if(a(this,e),this.id=i||(0,o.hu)(),this.title=t,this.type=r,this.showTitle=!1,this.dataPath="",this.extras={},r)try{var l=n(18481)("./".concat(r)).default;this.extras=Object.assign(this.extras,(0,o.Xh)(l))}catch(e){}})),u=i((function e(t,r,i){if(a(this,e),this.id=i||(0,o.hu)(),this.type=r||"",this.children=[],t&&(this.title=t),r)try{var l=n(18481)("./".concat(r)).default;if(Object.keys(l).length&&(this.extras=(0,o.Xh)(l),"row"===r))if(this.extras.size)for(var u=0;u<this.extras.size;u+=1)this.children.push(new e("","column"))}catch(e){}}))},81170:function(e,t,n){"use strict";n.r(t),t.default={checkBox:!0,showNum:!0,pageSize:[10],columns:[{label:"",type:"field",permission:"",width:"",align:"left",tag:"null",fieldPath:"",fieldType:"text",options:[],actionConfig:[]}],operations:[],tableStyle:"borderNoStripe",rowHigh:40}},47871:function(e,t,n){"use strict";n.r(t),t.default={searchEvent:""}},64599:function(e,t,n){"use strict";n(58188),n(1939);t.Z={data:function(){return{}},computed:{typeList:function(){return[{id:1,name:"基础组件"}]},menuItemList:function(){return[{type:"searchForm",name:"查询表单",icon:"icon-biaodansheji-danhangwenben",classify:1},{type:"listView",name:"列表视图",icon:"icon-biaodansheji-danhangwenben",classify:1}]},menuItemListByType:function(){var e={};return this.menuItemList.forEach((function(t){e[t.type]=t})),e}}}},92989:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var o=n(27875);var r=n(87263),i=n(55164),a={name:"ShowConfigDialog",components:{ShowConfig:r.Z},props:{config:{type:Object,default:{}},componentList:{type:Array,default:[]}},data:function(){return{showConfig:{}}},mounted:function(){this.$parent.$children=this,this.showConfig=(0,i.Xh)(this.config)},methods:{confirm:function(){this.$attrs.events.confirm(this.showConfig)},cancel:function(){this.$attrs.events.cancel()}}};var l=(0,n(94407).Z)(a,[["render",function(e,t,n,r,i,a){var l=(0,o.up)("show-config");return(0,o.wg)(),(0,o.j4)(l,{componentList:n.componentList,config:i.showConfig},null,8,["componentList","config"])}]])},68037:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var o=n(27875);var r=n(77862),i=n(48640),a=n(3714),l=n(87263),u=(n(13987),{name:"baseComponent",components:{baseAttr:r.default,rowSplit:i.Z,showConfig:l.Z,configButton:a.Z},props:{data:{default:function(){return{}}},componentList:{type:Array,default:function(){return[]}},componentMap:{type:Object,default:function(){return{}}},inputListByInputType:{type:Object,default:function(){return{}}}},data:function(){return{usageConditionDialog:null,tabsActives:"base",collapseActives:["base","extras"],relateOptionTypes:["radio","checkbox","select"]}},computed:{fieldId:function(){return this.data.id}},watch:{},methods:{openUsageConditionDialog:function(e){}}});var c=(0,n(94407).Z)(u,[["render",function(e,t,n,r,i,a){return(0,o.wg)(),(0,o.iD)("div")}]])},77862:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var o=n(27875),r={class:"base-config"},i=(0,o.Uk)("显示");var a={name:"baseAttr",mixins:[n(64599).Z],props:{data:{default:function(){return{}}},isShowOnly:{type:Boolean,default:function(){return!1}},isNeedRequired:{type:Boolean,default:function(){return!0}}},data:function(){var e=this;return{dataObjectChange:!1,rules:{title:[{required:!0,trigger:"blur",message:"请填写字段标题"},{validator:function(t,n,o){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};r=e.data||r,(n=n||r.title).length>200?o(new Error("字段标题长度不得超过200个字符"),"warning"):o()}}],fieldPath:[{required:!0,trigger:"blur",message:"请填写字段路径"},{validator:function(t,n,o){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};r=e.data||r,(n=n||r.fieldPath).length>64?o(new Error("字段路径长度不得超过64个字符"),"warning"):o()}}]}}}};var l=(0,n(94407).Z)(a,[["render",function(e,t,n,a,l,u){var c=(0,o.up)("el-input"),s=(0,o.up)("el-col"),d=(0,o.up)("el-checkbox"),f=(0,o.up)("el-form-item"),p=(0,o.up)("el-form");return(0,o.wg)(),(0,o.iD)("div",r,[(0,o.Wm)(p,{model:n.data,rules:l.rules,"label-width":"90px",size:"small"},{default:(0,o.w5)((function(){return[(0,o.Wm)(f,{label:"视图名称：",prop:"title"},{default:(0,o.w5)((function(){return[(0,o.Wm)(s,{span:10},{default:(0,o.w5)((function(){return[(0,o.Wm)(c,{modelValue:n.data.title,"onUpdate:modelValue":t[0]||(t[0]=function(e){return n.data.title=e}),maxlength:20},null,8,["modelValue"])]})),_:1}),(0,o.Wm)(s,{span:14,class:"pl-3"},{default:(0,o.w5)((function(){return[(0,o.Wm)(d,{modelValue:n.data.showTitle,"onUpdate:modelValue":t[1]||(t[1]=function(e){return n.data.showTitle=e})},{default:(0,o.w5)((function(){return[i]})),_:1},8,["modelValue"])]})),_:1})]})),_:1}),(0,o.Wm)(f,{label:"数据路径：",prop:"title"},{default:(0,o.w5)((function(){return[(0,o.Wm)(c,{modelValue:n.data.dataPath,"onUpdate:modelValue":t[2]||(t[2]=function(e){return n.data.dataPath=e}),maxlength:64},null,8,["modelValue"])]})),_:1}),(0,o.WI)(e.$slots,"inside-form")]})),_:3},8,["model","rules"]),(0,o.WI)(e.$slots,"outside-form")])}]])},90995:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var o=n(27875),r={class:"designer-attributes"};n(58188),n(1939),n(26936);var i=n(64599),a=n(55164),l={name:"DesignerAttrDialog",mixins:[i.Z],props:{component:{type:Object,default:function(){return null}},componentMap:{type:Object,default:function(){return{}}},componentList:{type:Array,default:function(){return[]}},config:{type:Object,default:function(){return{}}}},data:function(){return{data:null}},computed:{attrTitle:function(){var e=this,t="表单";return this.menuItemList.forEach((function(n){e.component&&n.type===e.component.type&&(t=n.name,e.component.id&&(t+="(".concat(e.component.id,")")))})),t}},mounted:function(){this.$parent.$children=this,this.data=(0,a.Xh)(this.component||{})},methods:{confirm:function(){this.$attrs.events.confirm(this.data)},cancel:function(){this.$attrs.events.cancel()}}};var u=(0,n(94407).Z)(l,[["render",function(e,t,n,i,a,l){var u=(0,o.up)("component-attr-render");return(0,o.wg)(),(0,o.iD)("div",r,[(0,o.Wm)(u,{data:a.data,componentList:n.componentList,componentMap:n.componentMap},null,8,["data","componentList","componentMap"])])}]])},9750:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return f}});var o=n(27875),r={class:"custom-table"},i=(0,o.Uk)("设置");n(43450),n(99805);var a=n(40641),l=n(55164),u=n(90937),c=n(13987),s={name:"ColumnSet",props:{config:{type:Array,default:[]},columns:{type:Array,default:[]},isColumn:{type:Boolean,default:!0}},data:function(){return{buttonTypes:[{label:"默认",value:"default"},{label:"重要",value:"primary"},{label:"成功",value:"success"},{label:"信息",value:"info"},{label:"警告",value:"warning"},{label:"危险",value:"danger"}],showConfigDialog:null}},methods:{handleConfidDialogShow:function(e){var t=this,o={config:e.showConfig||[],componentList:this.columns.map((function(e){return{id:e.fieldPath,title:e.label}}))},r={confirm:function(n){n&&(e.showConfig=n),t.$store.dispatch("dialogManager/removeDialog",t.showConfigDialog.key),t.showConfigDialog=null},cancel:function(){t.$store.dispatch("dialogManager/removeDialog",t.showConfigDialog.key),t.showConfigDialog=null}},i=(0,a.Xl)(n(92989).Z);this.showConfigDialog?(this.showConfigDialog.props=o,this.$store.dispatch("dialogManager/updateDialog",this.showConfigDialog)):(this.showConfigDialog=new c.V(i,o,r,{title:"显示设置",width:600,bodyHeight:300}),this.$store.dispatch("dialogManager/addDialog",this.showConfigDialog)),this.$store.dispatch("dialogManager/openDialog",this.showConfigDialog.key)},handleButtonDelete:function(e){this.config.splice(e,1)},handleButtonAdd:function(){this.config.push((0,l.Xh)(u.DEFAULT_BUTTON))}}};const d=(0,n(94407).Z)(s,[["render",function(e,t,n,a,l,u){var c=(0,o.up)("el-input"),s=(0,o.up)("el-table-column"),d=(0,o.up)("el-option"),f=(0,o.up)("el-select"),p=(0,o.up)("el-button"),m=(0,o.up)("delete"),h=(0,o.up)("el-icon"),g=(0,o.up)("el-table");return(0,o.wg)(),(0,o.iD)("div",r,[(0,o.Wm)(g,{data:n.config,size:"small"},{default:(0,o.w5)((function(){return[(0,o.Wm)(s,{label:"按钮名称"},{default:(0,o.w5)((function(e){var t=e.row;return[(0,o.Wm)(c,{class:"w-full",size:"small",prop:"buttonName",modelValue:t.buttonName,"onUpdate:modelValue":function(e){return t.buttonName=e}},null,8,["modelValue","onUpdate:modelValue"])]})),_:1}),(0,o.Wm)(s,{label:"类型"},{default:(0,o.w5)((function(e){var t=e.row;return[(0,o.Wm)(f,{modelValue:t.buttonType,"onUpdate:modelValue":function(e){return t.buttonType=e}},{default:(0,o.w5)((function(){return[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(l.buttonTypes,(function(e){return(0,o.wg)(),(0,o.j4)(d,{key:e.value,label:e.label,value:e.value},null,8,["label","value"])})),128))]})),_:2},1032,["modelValue","onUpdate:modelValue"])]})),_:1}),(0,o.Wm)(s,{label:"事件名称"},{default:(0,o.w5)((function(e){var t=e.row;return[(0,o.Wm)(c,{class:"w-full",size:"small",prop:"buttonEvent",modelValue:t.buttonEvent,"onUpdate:modelValue":function(e){return t.buttonEvent=e}},null,8,["modelValue","onUpdate:modelValue"])]})),_:1}),n.isColumn?((0,o.wg)(),(0,o.j4)(s,{key:0,label:"显示条件"},{default:(0,o.w5)((function(e){var t=e.row;return[(0,o.Wm)(p,{link:"",onClick:function(e){return u.handleConfidDialogShow(t)}},{default:(0,o.w5)((function(){return[i]})),_:2},1032,["onClick"])]})),_:1})):(0,o.kq)("",!0),(0,o.Wm)(s,{label:"权限"},{default:(0,o.w5)((function(e){var t=e.row;return[(0,o.Wm)(c,{class:"w-full",size:"small",prop:"permission",modelValue:t.permission,"onUpdate:modelValue":function(e){return t.permission=e}},null,8,["modelValue","onUpdate:modelValue"])]})),_:1}),(0,o.Wm)(s,{"header-align":"center",align:"center",label:"操作",width:"50px"},{default:(0,o.w5)((function(e){return[(0,o.Wm)(h,{class:"custom-table__icon",onClick:function(t){return u.handleButtonDelete(e.$index)}},{default:(0,o.w5)((function(){return[(0,o.Wm)(m)]})),_:2},1032,["onClick"])]})),_:1})]})),_:1},8,["data"]),(0,o._)("div",{class:"custom-table__button",onClick:t[0]||(t[0]=function(){return u.handleButtonAdd&&u.handleButtonAdd.apply(u,arguments)})},"+添加按鈕")])}]]);var f=d},74464:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var o=n(27875),r={key:0,class:"custom-table mb-5"},i={key:2,class:"mb-5"};n(58188),n(1939),n(68995),n(74083),n(99805);var a=n(55164),l=(n(92041),{name:"ColumnSet",components:{ButtonSet:n(9750).default},props:{config:{type:Object,default:{}},columns:{type:Array,default:[]}},data:function(){return{columnConfig:{}}},mounted:function(){this.$parent.$children=this,this.columnConfig=(0,a.Xh)(this.config)},methods:{addOption:function(e){var t=1,n=[];for(this.columnConfig.options||(this.columnConfig.options=[]),this.columnConfig.options.forEach((function(e){n.push(parseInt(e.value))}));-1!==n.indexOf(t);)t++;var o={isDefault:!1,value:"".concat(t),label:"",color:null};e||0===e?this.columnConfig.options.splice(e+1,0,o):this.columnConfig.options.push(o)},deleteOption:function(e){this.columnConfig.options.splice(e,1)},confirm:function(){this.$attrs.events.confirm(this.columnConfig)},cancel:function(){this.$attrs.events.cancel()}}});var u=(0,n(94407).Z)(l,[["render",function(e,t,n,a,l,u){var c=(0,o.up)("el-input"),s=(0,o.up)("el-form-item"),d=(0,o.up)("el-input-number"),f=(0,o.up)("el-option"),p=(0,o.up)("el-select"),m=(0,o.up)("el-col"),h=(0,o.up)("el-table-column"),g=(0,o.up)("el-color-picker"),v=(0,o.up)("delete"),w=(0,o.up)("el-icon"),y=(0,o.up)("el-table"),b=(0,o.up)("button-set"),A=(0,o.up)("el-form");return(0,o.wg)(),(0,o.iD)("div",null,[(0,o.Wm)(A,{ref:"ruleFormRef",model:l.columnConfig,"label-width":"90px",size:"small","label-position":"left"},{default:(0,o.w5)((function(){return[(0,o.Wm)(s,{label:"标题：",prop:"label"},{default:(0,o.w5)((function(){return[(0,o.Wm)(c,{modelValue:l.columnConfig.label,"onUpdate:modelValue":t[0]||(t[0]=function(e){return l.columnConfig.label=e})},null,8,["modelValue"])]})),_:1}),(0,o.Wm)(s,{label:"宽度：",prop:"label"},{default:(0,o.w5)((function(){return[(0,o.Wm)(d,{modelValue:l.columnConfig.width,"onUpdate:modelValue":t[1]||(t[1]=function(e){return l.columnConfig.width=e}),min:10,precision:0},null,8,["modelValue"])]})),_:1}),(0,o.Wm)(s,{label:"对齐方式：",prop:"label"},{default:(0,o.w5)((function(){return[(0,o.Wm)(p,{modelValue:l.columnConfig.align,"onUpdate:modelValue":t[2]||(t[2]=function(e){return l.columnConfig.align=e})},{default:(0,o.w5)((function(){return[(0,o.Wm)(f,{label:"居左",value:"left"}),(0,o.Wm)(f,{label:"居中",value:"center"}),(0,o.Wm)(f,{label:"居右",value:"right"})]})),_:1},8,["modelValue"])]})),_:1}),(0,o.Wm)(s,{label:"类型：",prop:"type"},{default:(0,o.w5)((function(){return[(0,o.Wm)(m,{span:6},{default:(0,o.w5)((function(){return[(0,o.Wm)(p,{modelValue:l.columnConfig.type,"onUpdate:modelValue":t[3]||(t[3]=function(e){return l.columnConfig.type=e})},{default:(0,o.w5)((function(){return[(0,o.Wm)(f,{label:"字段",value:"field"}),(0,o.Wm)(f,{label:"按钮",value:"button"})]})),_:1},8,["modelValue"])]})),_:1}),"field"===l.columnConfig.type?((0,o.wg)(),(0,o.j4)(m,{key:0,span:10,class:"pl-2"},{default:(0,o.w5)((function(){return[(0,o.Wm)(p,{modelValue:l.columnConfig.fieldType,"onUpdate:modelValue":t[4]||(t[4]=function(e){return l.columnConfig.fieldType=e})},{default:(0,o.w5)((function(){return[(0,o.Wm)(f,{label:"文本",value:"text"}),(0,o.Wm)(f,{label:"选项",value:"option"}),(0,o.Wm)(f,{label:"文件",value:"file"})]})),_:1},8,["modelValue"])]})),_:1})):(0,o.kq)("",!0)]})),_:1}),"option"===l.columnConfig.fieldType?((0,o.wg)(),(0,o.iD)("div",r,[(0,o.Wm)(y,{"row-key":"value",prop:"options",data:l.columnConfig.options,"max-height":506},{default:(0,o.w5)((function(){return[(0,o.Wm)(h,{label:"选项值"},{default:(0,o.w5)((function(e){var t=e.row;return[(0,o.Wm)(c,{class:"w_100",prop:"value",modelValue:t.value,"onUpdate:modelValue":function(e){return t.value=e},size:"small"},null,8,["modelValue","onUpdate:modelValue"])]})),_:1}),(0,o.Wm)(h,{label:"选项名称"},{default:(0,o.w5)((function(e){var t=e.row;return[(0,o.Wm)(c,{class:"w_100",prop:"selectName",modelValue:t.label,"onUpdate:modelValue":function(e){return t.label=e},size:"small"},null,8,["modelValue","onUpdate:modelValue"])]})),_:1}),(0,o.Wm)(h,{"header-align":"center",align:"center",label:"颜色",width:"60px"},{default:(0,o.w5)((function(e){var t=e.row;return[(0,o.Wm)(g,{modelValue:t.color,"onUpdate:modelValue":function(e){return t.color=e},size:"small"},null,8,["modelValue","onUpdate:modelValue"])]})),_:1}),(0,o.Wm)(h,{"header-align":"center",align:"center",label:"操作",width:"50px"},{default:(0,o.w5)((function(e){var t=e.$index;return[(0,o.Wm)(w,{class:"custom-table__icon",onClick:function(e){return u.deleteOption(t)}},{default:(0,o.w5)((function(){return[(0,o.Wm)(v)]})),_:2},1032,["onClick"])]})),_:1})]})),_:1},8,["data"]),(0,o._)("div",{"data-mark":"添加选项按钮",class:"custom-table__button",onClick:t[5]||(t[5]=function(e){return u.addOption("")})}," +添加选项 ")])):(0,o.kq)("",!0),"field"===l.columnConfig.type?((0,o.wg)(),(0,o.j4)(s,{key:1,label:"字段路径：",prop:"fieldPath"},{default:(0,o.w5)((function(){return[(0,o.Wm)(c,{modelValue:l.columnConfig.fieldPath,"onUpdate:modelValue":t[6]||(t[6]=function(e){return l.columnConfig.fieldPath=e})},null,8,["modelValue"])]})),_:1})):((0,o.wg)(),(0,o.iD)("div",i,[(0,o.Wm)(b,{config:l.columnConfig.actionConfig,columns:n.columns,isColumn:""},null,8,["config","columns"])])),(0,o.Wm)(s,{label:"权限：",prop:"type"},{default:(0,o.w5)((function(){return[(0,o.Wm)(c,{modelValue:l.columnConfig.permission,"onUpdate:modelValue":t[7]||(t[7]=function(e){return l.columnConfig.permission=e})},null,8,["modelValue"])]})),_:1})]})),_:1},8,["model"])])}]])},91042:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return g}});var o=n(27875),r=n(50349),i=["src","title"],a={class:"custom-table mb-5"},l=(0,o.Uk)("10"),u=(0,o.Uk)("20"),c=(0,o.Uk)("50");n(68995),n(95342),n(58188),n(99805);var s=n(40641),d=n(68037),f=n(9750),p=n(13987),m={name:"ListViewAttr",components:{ButtonSet:f.default},extends:d.default,data:function(){var e=this;return{rules:{defaultValue:[{validator:function(t,n,o,r){r=e.data.extras?e.data.extras:r;e.getLimitMax(r.validType);if(r){if(n&&r.maxLength&&n.length>parseInt(r.maxLength))o("默认值最大长度不能超过".concat(r.maxLength));if(n&&r.minLength&&n.length<parseInt(r.minLength))o("默认值最小长度不能超过".concat(r.minLength));o()}else o()}}]},tableStyleList:[{type:"borderNoStripe",src:n(27566),title:"有竖边框无斑马纹"},{type:"borderStripe",src:n(50701),title:"有竖边框有斑马纹"},{type:"noBorderNoStripe",src:n(26207),title:"无竖边框无斑马纹"},{type:"noBorderStripe",src:n(80262),title:"无竖边框有斑马纹"}],columnSetDialog:null}},computed:{},watch:{},mounted:function(){},methods:{getButtonType:function(e){var t="字段";if("button"===e)t="按钮";return t},handleTableStyleChange:function(e){this.data.extras.tableStyle=e.type},handleColumnSet:function(e,t){var o=this,r={config:e,columns:this.data.extras.columns.filter((function(e,n){return n!==t&&"button"!==e.type}))},i={confirm:function(e){e&&(o.data.extras.columns[t]=e),o.$store.dispatch("dialogManager/removeDialog",o.columnSetDialog.key),o.columnSetDialog=null},cancel:function(){o.$store.dispatch("dialogManager/removeDialog",o.columnSetDialog.key),o.columnSetDialog=null}},a=(0,s.Xl)(n(74464).default);this.columnSetDialog?(this.columnSetDialog.props=r,this.$store.dispatch("dialogManager/updateDialog",this.columnSetDialog)):(this.columnSetDialog=new p.V(a,r,i,{title:"列设置",width:600,bodyHeight:300}),this.$store.dispatch("dialogManager/addDialog",this.columnSetDialog)),this.$store.dispatch("dialogManager/openDialog",this.columnSetDialog.key)},handleColumnDelete:function(e){this.data.extras.columns.splice(e,1)},handleColumnAdd:function(){this.data.extras.columns.push({label:"",type:"field",permission:"",width:"",align:"left",tag:"null",fieldPath:"",fieldType:"text",options:[],actionConfig:[]})}}};const h=(0,n(94407).Z)(m,[["render",function(e,t,n,s,d,f){var p=(0,o.up)("el-switch"),m=(0,o.up)("el-form-item"),h=(0,o.up)("el-col"),g=(0,o.up)("base-attr"),v=(0,o.up)("el-tab-pane"),w=(0,o.up)("el-table-column"),y=(0,o.up)("setting"),b=(0,o.up)("el-icon"),A=(0,o.up)("delete"),C=(0,o.up)("el-table"),_=(0,o.up)("el-checkbox"),x=(0,o.up)("el-checkbox-group"),D=(0,o.up)("el-input"),k=(0,o.up)("button-set"),W=(0,o.up)("el-tabs"),V=(0,o.up)("el-form");return(0,o.wg)(),(0,o.j4)(V,{ref:"form",model:e.data,rules:d.rules,"label-width":"90px","label-position":"left",class:"attribute-listview",size:"small"},{default:(0,o.w5)((function(){return[(0,o.Wm)(W,{modelValue:e.tabsActives,"onUpdate:modelValue":t[6]||(t[6]=function(t){return e.tabsActives=t})},{default:(0,o.w5)((function(){return[(0,o.Wm)(v,{label:"基础属性",name:"base"},{default:(0,o.w5)((function(){return[(0,o.Wm)(g,{data:e.data},{"inside-form":(0,o.w5)((function(){return[(0,o.Wm)(m,{label:"支持复选：",prop:"checkBox"},{default:(0,o.w5)((function(){return[(0,o.Wm)(p,{modelValue:e.data.extras.checkBox,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.data.extras.checkBox=t})},null,8,["modelValue"])]})),_:1}),(0,o.Wm)(m,{label:"显示序号：",prop:"showNum"},{default:(0,o.w5)((function(){return[(0,o.Wm)(p,{modelValue:e.data.extras.showNum,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.data.extras.showNum=t})},null,8,["modelValue"])]})),_:1}),(0,o.Wm)(m,{label:"表格样式：",prop:"extras.tableStyle",class:"listview-style"},{default:(0,o.w5)((function(){return[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(d.tableStyleList,(function(t,n){return(0,o.wg)(),(0,o.j4)(h,{span:4,class:(0,r.normalizeClass)(["pr-5",{"listview-style--active":e.data.extras.tableStyle===t.type}]),onClick:function(e){return f.handleTableStyleChange(t)},key:n},{default:(0,o.w5)((function(){return[(0,o._)("img",{src:t.src,title:t.title},null,8,i)]})),_:2},1032,["onClick","class"])})),128))]})),_:1})]})),_:1},8,["data"])]})),_:1}),(0,o.Wm)(v,{label:"列设置",name:"column"},{default:(0,o.w5)((function(){return[(0,o._)("div",a,[(0,o.Wm)(C,{data:e.data.extras.columns,size:"small"},{default:(0,o.w5)((function(){return[(0,o.Wm)(w,{prop:"label",label:"标题"}),(0,o.Wm)(w,{prop:"type",label:"类型"},{default:(0,o.w5)((function(e){return[(0,o.Uk)((0,r.toDisplayString)(f.getButtonType(e.row.type)),1)]})),_:1}),(0,o.Wm)(w,{prop:"permission",label:"权限"}),(0,o.Wm)(w,{"header-align":"center",align:"center",label:"操作",width:"100px"},{default:(0,o.w5)((function(e){return[(0,o.Wm)(b,{class:"custom-table__icon",onClick:function(t){return f.handleColumnSet(e.row,e.$index)}},{default:(0,o.w5)((function(){return[(0,o.Wm)(y)]})),_:2},1032,["onClick"]),(0,o.Wm)(b,{class:"custom-table__icon",onClick:function(t){return f.handleColumnDelete(e.$index)}},{default:(0,o.w5)((function(){return[(0,o.Wm)(A)]})),_:2},1032,["onClick"])]})),_:1})]})),_:1},8,["data"]),(0,o._)("div",{class:"custom-table__button",onClick:t[2]||(t[2]=function(){return f.handleColumnAdd&&f.handleColumnAdd.apply(f,arguments)})},"+添加列")])]})),_:1}),(0,o.Wm)(v,{label:"翻页设置",name:"pagination"},{default:(0,o.w5)((function(){return[(0,o.Wm)(m,{label:"列表分页：",prop:"pageSize",class:"column-name"},{default:(0,o.w5)((function(){return[(0,o.Wm)(x,{modelValue:e.data.extras.pageSize,"onUpdate:modelValue":t[3]||(t[3]=function(t){return e.data.extras.pageSize=t}),class:"w-full"},{default:(0,o.w5)((function(){return[(0,o.Wm)(_,{class:"mr-5",label:10,disabled:""},{default:(0,o.w5)((function(){return[l]})),_:1}),(0,o.Wm)(_,{class:"mr-5",label:20},{default:(0,o.w5)((function(){return[u]})),_:1}),(0,o.Wm)(_,{class:"mr-5",label:50},{default:(0,o.w5)((function(){return[c]})),_:1})]})),_:1},8,["modelValue"])]})),_:1}),(0,o.Wm)(m,{label:"修改数量事件：",prop:"sizeChangeEvent"},{default:(0,o.w5)((function(){return[(0,o.Wm)(D,{modelValue:e.data.dataPath,"onUpdate:modelValue":t[4]||(t[4]=function(t){return e.data.dataPath=t}),maxlength:64},null,8,["modelValue"])]})),_:1}),(0,o.Wm)(m,{label:"翻页事件：",prop:"currentChangeEvent"},{default:(0,o.w5)((function(){return[(0,o.Wm)(D,{modelValue:e.data.dataPath,"onUpdate:modelValue":t[5]||(t[5]=function(t){return e.data.dataPath=t}),maxlength:64},null,8,["modelValue"])]})),_:1})]})),_:1}),(0,o.Wm)(v,{label:"操作设置",name:"action"},{default:(0,o.w5)((function(){return[(0,o.Wm)(k,{config:e.data.extras.operations,isColumn:!1},null,8,["config"])]})),_:1})]})),_:1},8,["modelValue"])]})),_:1},8,["model","rules"])}]]);var g=h},55078:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var o=n(27875);n(58188),n(1939),n(39529),n(31235),n(99805);var r=n(68037),i=n(92041),a=n(325),l={name:"SearchFormAttr",extends:r.default,data:function(){return{rules:{},fieldTypes:[]}},computed:{},watch:{},mounted:function(){this.setFieldTypes()},methods:{setFieldTypes:function(){var e=[],t=i.Z.computed.menuItemList();Array.isArray(t)&&t.forEach((function(t){a.LAYOUT_TYPES.includes(t.type)||e.push(t)})),this.fieldTypes=e},handleFieldDelete:function(e){this.data.extras.fields.splice(e,1)},handleFieldAdd:function(){this.data.extras.fields.push({label:"",field:"",type:"textBox",permission:""})}}};var u=(0,n(94407).Z)(l,[["render",function(e,t,n,r,i,a){var l=(0,o.up)("el-input"),u=(0,o.up)("el-col"),c=(0,o.up)("el-form-item"),s=(0,o.up)("base-attr"),d=(0,o.up)("el-tab-pane"),f=(0,o.up)("el-tabs"),p=(0,o.up)("el-form");return(0,o.wg)(),(0,o.j4)(p,{ref:"form",model:e.data,rules:i.rules,"label-width":"90px","label-position":"left",class:"attribute-listview",size:"small"},{default:(0,o.w5)((function(){return[(0,o.Wm)(f,{modelValue:e.tabsActives,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.tabsActives=t})},{default:(0,o.w5)((function(){return[(0,o.Wm)(d,{label:"基础属性",name:"base"},{default:(0,o.w5)((function(){return[(0,o.Wm)(s,{data:e.data},{"inside-form":(0,o.w5)((function(){return[(0,o.Wm)(c,{label:"查询事件：",prop:"checkBox"},{default:(0,o.w5)((function(){return[(0,o.Wm)(u,{span:10},{default:(0,o.w5)((function(){return[(0,o.Wm)(l,{modelValue:e.data.extras.searchEvent,"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.data.extras.searchEvent=t})},null,8,["modelValue"])]})),_:1})]})),_:1})]})),_:1},8,["data"])]})),_:1})]})),_:1},8,["modelValue"])]})),_:1},8,["model","rules"])}]])},53327:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return a}});n(26936);var o=n(27875);var r=n(55164),i={name:"ViewAttr",props:{config:{type:Object,default:function(){return{}}}},data:function(){return{tabsActives:"base",viewConfig:{}}},mounted:function(){this.$parent.$children=this,this.viewConfig=(0,r.Xh)(this.config||{})},methods:{confirm:function(){this.$attrs.events.confirm(this.viewConfig)},cancel:function(){this.$attrs.events.cancel()}}};var a=(0,n(94407).Z)(i,[["render",function(e,t,n,r,i,a){var l=(0,o.up)("el-input"),u=(0,o.up)("el-form-item"),c=(0,o.up)("el-tab-pane"),s=(0,o.up)("el-tabs"),d=(0,o.up)("el-form");return(0,o.wg)(),(0,o.j4)(d,{ref:"form",model:e.formConfig,rules:e.rules,"label-width":"90px","label-position":"left",size:"small"},{default:(0,o.w5)((function(){return[(0,o.Wm)(s,{modelValue:i.tabsActives,"onUpdate:modelValue":t[2]||(t[2]=function(e){return i.tabsActives=e})},{default:(0,o.w5)((function(){return[(0,o.Wm)(c,{label:"基础属性",name:"base"},{default:(0,o.w5)((function(){return[(0,o.Wm)(u,{label:"视图名称：",prop:"name"},{default:(0,o.w5)((function(){return[(0,o.Wm)(l,{modelValue:i.viewConfig.name,"onUpdate:modelValue":t[0]||(t[0]=function(e){return i.viewConfig.name=e}),class:"w-1/2",maxlength:"200"},null,8,["modelValue"])]})),_:1}),(0,o.Wm)(u,{label:"视图API：",prop:"api"},{default:(0,o.w5)((function(){return[(0,o.Wm)(l,{modelValue:i.viewConfig.api,"onUpdate:modelValue":t[1]||(t[1]=function(e){return i.viewConfig.api=e}),class:"w-1/2",maxlength:"200"},null,8,["modelValue"])]})),_:1})]})),_:1})]})),_:1},8,["modelValue"])]})),_:1},8,["model","rules"])}]])},47442:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return i}});var o=n(27875);var r={name:"baseComponent",props:{componentMap:{type:Object,default:function(){return{}}},componentList:{type:Array,default:function(){return[]}},layouts:{type:Array,default:function(){return[]}},layout:{type:Object,default:function(){return{}}}},events:["select"],data:function(){return{}},computed:{currentComponentId:function(){return this.$store.state.form.currentComponentId||""},hoverComponentId:function(){return this.$store.state.form.hoverComponentIds[0]||""},component:function(){return this.componentMap[this.layout.id]||{}}},watch:{}};var i=(0,n(94407).Z)(r,[["render",function(e,t,n,r,i,a){return(0,o.wg)(),(0,o.iD)("div")}]])},16727:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var o=n(27875),r=n(50349),i={class:"component-wrapper component-listview"},a={key:0,class:"mb-3"},l={key:1,class:"mb-3"};var u={name:"ListView",extends:n(47442).default,data:function(){return{value:""}}};var c=(0,n(94407).Z)(u,[["render",function(e,t,n,u,c,s){var d,f=(0,o.up)("el-button"),p=(0,o.up)("el-table-column"),m=(0,o.up)("el-table"),h=(0,o.up)("el-pagination");return(0,o.wg)(),(0,o.iD)("div",i,[null!==(d=e.component.extras)&&void 0!==d&&d.operations.length?((0,o.wg)(),(0,o.iD)("div",a,[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.component.extras.operations,(function(e,t){return(0,o.wg)(),(0,o.j4)(f,{key:t,type:e.buttonType||"default",size:"small"},{default:(0,o.w5)((function(){return[(0,o.Uk)((0,r.toDisplayString)(e.buttonName),1)]})),_:2},1032,["type"])})),128))])):(0,o.kq)("",!0),e.component.showTitle?((0,o.wg)(),(0,o.iD)("div",l,(0,r.toDisplayString)(e.component.title),1)):(0,o.kq)("",!0),(0,o.Wm)(m,{data:[{}],border:"",size:"small",style:{width:"100%"},fit:!0},{default:(0,o.w5)((function(){var t,n,r,i,a,l;return[null!==(t=e.component)&&void 0!==t&&null!==(n=t.extras)&&void 0!==n&&n.checkBox?((0,o.wg)(),(0,o.j4)(p,{key:0,resizable:!1,fixed:"left",type:"selection",width:e.w>10?60:40},null,8,["width"])):(0,o.kq)("",!0),null!==(r=e.component)&&void 0!==r&&null!==(i=r.extras)&&void 0!==i&&i.showNum?((0,o.wg)(),(0,o.j4)(p,{key:1,label:"序号",resizable:!1,fixed:"",width:e.w>10?60:50},null,8,["width"])):(0,o.kq)("",!0),(null===(a=e.component)||void 0===a||null===(l=a.extras)||void 0===l?void 0:l.columns.length)>0?((0,o.wg)(!0),(0,o.iD)(o.HY,{key:2},(0,o.Ko)(e.component.extras.columns,(function(e,t){return(0,o.wg)(),(0,o.j4)(p,{key:t,resizable:!1,"min-width":"110",label:e.label},null,8,["label"])})),128)):((0,o.wg)(),(0,o.j4)(p,{key:3,resizable:!1,label:""}))]})),_:1}),(0,o.Wm)(h,{small:"",background:"","page-sizes":[1],layout:"prev, pager, next",total:2,class:"mt-3 justify-end"})])}]])},27442:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return c}});var o=n(27875),r={class:"component-wrapper component-search-form"},i={class:"search-form__item inline-block mr-2 mb-2"},a=(0,o._)("div",{class:"search-form__title text-right text-ellipsis inline-block"},"示例：",-1),l={class:"search-form__field inline-block"};var u={name:"SearchForm",extends:n(47442).default};var c=(0,n(94407).Z)(u,[["render",function(e,t,n,u,c,s){var d=(0,o.up)("el-input");return(0,o.wg)(),(0,o.iD)("div",r,[(0,o._)("div",i,[a,(0,o._)("div",l,[(0,o.Wm)(d,{size:"small",disabled:""})])])])}]])},43120:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return u}});var o=n(27875),r={class:"search-form__item d_inline_block mr_2 mb_2"},i=(0,o._)("div",{class:"search-form__title text_right text_ellipsis d_inline_block"},"实例：",-1),a={class:"search_field d_inline_block"};var l={name:"SearchItem",props:{item:{default:function(){return{}}}},computed:{text:function(){return this.item.text},type:function(){return this.item.type}}};var u=(0,n(94407).Z)(l,[["render",function(e,t,n,l,u,c){var s=(0,o.up)("el-input");return(0,o.wg)(),(0,o.iD)("div",r,[i,(0,o._)("div",a,[(0,o.Wm)(s,{size:"mini",disabled:""})])])}]])},15751:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var o=n(27875);n(6710);var r={name:"dialogDemo",props:{json:{type:Object,default:function(){return null}},isImport:{type:Boolean,default:function(){return!1}}},data:function(){return{value:""}},created:function(){},mounted:function(){try{this.value=JSON.stringify(this.json)}catch(e){this.value=""}this.$parent.$children=this},destroyed:function(){},methods:{confirm:function(){this.isImport?this.$attrs.events.confirm(this.value):this.$attrs.events.confirm()},cancel:function(){this.$attrs.events.cancel()}}};var i=(0,n(94407).Z)(r,[["render",function(e,t,n,r,i,a){var l=(0,o.up)("el-input");return(0,o.wg)(),(0,o.j4)(l,{modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=function(e){return i.value=e}),rows:25,type:"textarea",placeholder:"Please input"},null,8,["modelValue"])}]])},29283:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return z}});var o=n(27875),r={class:"view-designer"},i={class:"layout-content__card designer-header"},a=(0,o.Uk)("保存"),l=(0,o.Uk)("导入"),u=(0,o.Uk)("导出"),c={class:"designer-body flex"},s={class:"layout-content__card designer-left overflow-hidden"},d={class:"layout-content__card designer-right overflow-hidden"};n(34115),n(634),n(58188),n(20796),n(15735),n(28673),n(6886),n(34769),n(95342),n(68625),n(1939),n(62775),n(76555),n(95094),n(96882),n(38859),n(17525),n(18275),n(96928),n(26936),n(52506),n(73439),n(32501),n(71245),n(99805),n(6710),n(77950),n(85940),n(88233);var f=n(50349),p={class:"view-designer__menu"},m={class:"fw-b"},h={class:"droppable-element__label"},g=(0,o._)("div",{class:"clear-both"},null,-1);var v=n(24048),w=n.n(v),y=n(34880),b=n(64599),A=n(55164),C={name:"DesignerMenu",components:{draggable:w()},mixins:[b.Z],props:{componentList:{type:Array,default:function(){return[]}}},data:function(){return{}},computed:{dragOptions:function(){return{animation:150,ghostClass:"drop-component--ghost",itemKey:"type",group:{name:"components",pull:"clone",put:!1},filter:".drop-component--disabled",sort:!1}}},mounted:function(){},methods:{drag:function(e){this.$emit("itemDrag",e)},dragend:function(e){this.$emit("itemDragend",e)},cloneItem:function(e){return 0===e.classify?new y.DesignerLayout("",e.type):{type:e.type,id:(0,A.hu)()}}}},_=n(94407);var x=(0,_.Z)(C,[["render",function(e,t,n,r,i,a){var l=(0,o.up)("draggable"),u=(0,o.up)("el-sub-menu"),c=(0,o.up)("el-menu");return(0,o.wg)(),(0,o.iD)("div",p,[(0,o.Wm)(c,{"default-openeds":["0","1"],"background-color":"#ffffff"},{default:(0,o.w5)((function(){return[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(e.typeList,(function(t,n){return(0,o.wg)(),(0,o.j4)(u,{key:n,index:n.toString()},{title:(0,o.w5)((function(){return[(0,o._)("span",m,(0,f.toDisplayString)(t.name),1)]})),default:(0,o.w5)((function(){return[(0,o.Wm)(l,(0,o.dG)({class:"dragArea list-group",list:e.menuItemList,clone:a.cloneItem},a.dragOptions),{item:(0,o.w5)((function(e){var n=e.element,r=e.index;return[n.classify===t.id?((0,o.wg)(),(0,o.iD)("div",{class:"droppable-element",key:r},[(0,o._)("span",h,(0,f.toDisplayString)(n.name),1)])):(0,o.kq)("",!0)]})),_:2},1040,["list","clone"]),g]})),_:2},1032,["index"])})),128))]})),_:1})])}]]),D=n(14825),k={class:"view-designer__content"},W=["onMouseenter"],V={class:"designer-components__action"},S={class:"view-designer__float"};n(43450),n(18178),n(74083);var O=n(40641),L=n(13987),E={name:"DesignerContent",components:{draggable:w()},mixins:[b.Z],props:{layouts:{type:Array,default:function(){return[]}},componentMap:{type:Object,default:function(){return{}}},componentList:{type:Array,default:function(){return[]}},config:{type:Object,default:function(){return{}}}},data:function(){return{attrDialog:null,viewAttrDialog:null}},computed:{currentComponentId:function(){return this.$store.state.form.currentComponentId||""},hoverComponentId:function(){return this.$store.state.form.hoverComponentIds[0]||""},dragOptions:function(){return{animation:150,ghostClass:"drop-component--ghost",itemKey:"id",group:{name:"components"},filter:".drop-component--disabled"}}},created:function(){this.initRenderComponent(),this.initRenderAttributes()},methods:{initRenderComponent:function(){var e=this;this.$App.component("input-element-render",{props:{type:{type:String,default:function(){return""}},layout:{type:Object,default:function(){return{}}},layouts:{type:Array,default:function(){return[]}},componentMap:{type:Object,default:function(){return{}}},componentList:{type:Array,default:function(){return[]}}},render:function(t){var r=t.type,i=t.layouts,a=t.layout,l=t.componentMap,u=t.componentList;if(r){var c=n(45122)("./".concat(r)).default;return(0,o.h)(c,{layout:a,layouts:i,componentMap:l,componentList:u,onSelect:e.handleComponentSelect,onDelete:e.handleComponentDel})}return(0,o.h)("div")}})},initRenderAttributes:function(){this.$App.component("component-attr-render",{props:{data:{type:Object,default:function(){return null}},componentList:{type:Array,default:function(){return[]}},componentMap:{type:Object,default:function(){return{}}}},render:function(e){var t=e.data,r=e.componentList,i=e.componentMap;if(t&&t.type){var a=n(35222)("./".concat(t.type)).default;return(0,o.h)(a,{data:t,componentList:r,componentMap:i})}return(0,o.h)("div")}})},handleComponentChange:function(e){var t=e.added;e.removed,e.moved;if(t){var n=t.element,o=this.menuItemListByType[n.type];if(1===o.classify){for(var r=this.componentList.map((function(e){return e.title})),i=this.componentList.map((function(e){return e.fieldPaths})),a=1,l="".concat(o.name).concat(a);r.indexOf(l)>-1||i.indexOf(l)>-1;)a++,l="".concat(o.name).concat(a);this.componentMap[n.id]=new y.DesignerComponent(l,n.type,n.id)}else this.componentMap[n.id]=n}},handleComponentHover:function(e){this.$store.dispatch("form/addHoverComponentId",e?e.id:"")},handleComponentLeave:function(){this.$store.dispatch("form/removeHoverComponentId")},handleViewAttrShow:function(){var e=this,t={config:this.config},o={confirm:function(t){e.config.name=t.name,e.config.api=t.api,e.$store.dispatch("dialogManager/closeDialog",e.viewAttrDialog.key)},cancel:function(){e.$store.dispatch("dialogManager/closeDialog",e.viewAttrDialog.key)}},r=(0,O.Xl)(n(53327).default);this.viewAttrDialog?(this.viewAttrDialog.props=t,this.viewAttrDialog.events=o,this.$store.dispatch("dialogManager/updateDialog",this.viewAttrDialog)):(this.viewAttrDialog=new L.V(r,t,o,{title:"表单属性",isDestroyByClose:!0,bodyHeight:350}),this.$store.dispatch("dialogManager/addDialog",this.viewAttrDialog)),this.$store.dispatch("dialogManager/openDialog",this.viewAttrDialog.key)},handleComponentSelect:function(e){var t=this,o={component:this.componentMap[e.id],componentMap:this.componentMap,componentList:this.componentList,config:this.config},r={confirm:function(e){t.componentMap[e.id]=e,t.$store.dispatch("dialogManager/closeDialog",t.attrDialog.key)},cancel:function(){t.$store.dispatch("dialogManager/closeDialog",t.attrDialog.key)}},i={title:"组件属性",isDestroyByClose:!0,footerTxt:e.id,bodyHeight:350},a=(0,O.Xl)(n(90995).default);this.attrDialog?(this.attrDialog.props=o,this.attrDialog.events=r,this.$store.dispatch("dialogManager/updateDialog",this.attrDialog)):(this.attrDialog=new L.V(a,o,r,i),this.$store.dispatch("dialogManager/addDialog",this.attrDialog)),this.$store.dispatch("dialogManager/openDialog",this.attrDialog.key)},handleComponentDel:function(e,t){this.$emit("delete",e,t)}}};var j=(0,_.Z)(E,[["render",function(e,t,n,r,i,a){var l=(0,o.up)("input-element-render"),u=(0,o.up)("setting"),c=(0,o.up)("el-icon"),s=(0,o.up)("delete"),d=(0,o.up)("draggable"),p=(0,o.up)("el-button");return(0,o.wg)(),(0,o.iD)("div",k,[(0,o.Wm)(d,(0,o.dG)({class:"designer-components",list:n.layouts},a.dragOptions,{onChange:a.handleComponentChange}),{item:(0,o.w5)((function(e){var r=e.element,i=e.index;return[(0,o._)("div",{class:(0,f.normalizeClass)(["designer-components__item",{"designer-components__item--active":r.id===a.currentComponentId,"designer-components__item--hover":r.id===a.hoverComponentId}]),onMouseenter:(0,D.withModifiers)((function(e){return a.handleComponentHover(r)}),["stop"]),onMouseleave:t[0]||(t[0]=(0,D.withModifiers)((function(e){return a.handleComponentLeave()}),["stop"]))},[((0,o.wg)(),(0,o.j4)(l,{type:r.type,key:r.name,layout:r,layouts:n.layouts,componentMap:n.componentMap,componentList:n.componentList},null,8,["type","layout","layouts","componentMap","componentList"])),(0,o._)("div",V,[(0,o.Wm)(c,{class:"designer-components__config mr-1",onClick:function(e){return a.handleComponentSelect(r)}},{default:(0,o.w5)((function(){return[(0,o.Wm)(u)]})),_:2},1032,["onClick"]),(0,o.Wm)(c,{class:"designer-components__close",onClick:function(e){return a.handleComponentDel(r,i)}},{default:(0,o.w5)((function(){return[(0,o.Wm)(s)]})),_:2},1032,["onClick"])])],42,W)]})),_:1},16,["list","onChange"]),(0,o._)("div",S,[(0,o.Wm)(p,{circle:"",onClick:a.handleViewAttrShow},{default:(0,o.w5)((function(){return[(0,o.Wm)(c,null,{default:(0,o.w5)((function(){return[(0,o.Wm)(u)]})),_:1})]})),_:1},8,["onClick"])])])}]]),M=n(59672);function U(e){return U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},U(e)}function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){F(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
I=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},r=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",a=o.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,n){return e[t]=n}}function u(e,t,n,o){var r=t&&t.prototype instanceof d?t:d,i=Object.create(r.prototype),a=new _(o||[]);return i._invoke=function(e,t,n){var o="suspendedStart";return function(r,i){if("executing"===o)throw new Error("Generator is already running");if("completed"===o){if("throw"===r)throw i;return D()}for(n.method=r,n.arg=i;;){var a=n.delegate;if(a){var l=b(a,n);if(l){if(l===s)continue;return l}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===o)throw o="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o="executing";var u=c(e,t,n);if("normal"===u.type){if(o=n.done?"completed":"suspendedYield",u.arg===s)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(o="completed",n.method="throw",n.arg=u.arg)}}}(e,n,a),i}function c(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var s={};function d(){}function f(){}function p(){}var m={};l(m,r,(function(){return this}));var h=Object.getPrototypeOf,g=h&&h(h(x([])));g&&g!==t&&n.call(g,r)&&(m=g);var v=p.prototype=d.prototype=Object.create(m);function w(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function y(e,t){function o(r,i,a,l){var u=c(e[r],e,i);if("throw"!==u.type){var s=u.arg,d=s.value;return d&&"object"==U(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){o("next",e,a,l)}),(function(e){o("throw",e,a,l)})):t.resolve(d).then((function(e){s.value=e,a(s)}),(function(e){return o("throw",e,a,l)}))}l(u.arg)}var r;this._invoke=function(e,n){function i(){return new t((function(t,r){o(e,n,t,r)}))}return r=r?r.then(i,i):i()}}function b(e,t){var n=e.iterator[t.method];if(void 0===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=void 0,b(e,t),"throw"===t.method))return s;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return s}var o=c(n,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,s;var r=o.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,s):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,s)}function A(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function C(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function _(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(A,this),this.reset(!0)}function x(e){if(e){var t=e[r];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function t(){for(;++o<e.length;)if(n.call(e,o))return t.value=e[o],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:D}}function D(){return{value:void 0,done:!0}}return f.prototype=p,l(v,"constructor",p),l(p,"constructor",f),f.displayName=l(p,a,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===f||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,p):(e.__proto__=p,l(e,a,"GeneratorFunction")),e.prototype=Object.create(v),e},e.awrap=function(e){return{__await:e}},w(y.prototype),l(y.prototype,i,(function(){return this})),e.AsyncIterator=y,e.async=function(t,n,o,r,i){void 0===i&&(i=Promise);var a=new y(u(t,n,o,r),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},w(v),l(v,a,"Generator"),l(v,r,(function(){return this})),l(v,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var o=t.pop();if(o in e)return n.value=o,n.done=!1,n}return n.done=!0,n}},e.values=x,_.prototype={constructor:_,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(C),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function o(n,o){return a.type="throw",a.arg=e,t.next=n,o&&(t.method="next",t.arg=void 0),!!o}for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],a=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var l=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(l&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var o=this.tryEntries.length-1;o>=0;--o){var r=this.tryEntries[o];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,s):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),s},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),C(n),s}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var o=n.completion;if("throw"===o.type){var r=o.arg;C(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:x(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),s}},e}function $(e,t,n,o,r,i,a){try{var l=e[i](a),u=l.value}catch(e){return void n(e)}l.done?t(u):Promise.resolve(u).then(o,r)}function N(e){return function(){var t=this,n=arguments;return new Promise((function(o,r){var i=e.apply(t,n);function a(e){$(i,o,r,a,l,"next",e)}function l(e){$(i,o,r,a,l,"throw",e)}a(void 0)}))}}var P={name:"DesignView",components:{DesignerMenu:x,DesignerContent:j},data:function(){return{viewList:[],componentMap:{},layouts:[],config:{api:"",name:""},status:"",dialog:null}},computed:{currentComponentId:function(){return this.$store.state.view.currentComponentId||""},componentList:function(){var e=[];for(var t in this.componentMap)e.push(this.componentMap[t]);return e},dataSource:function(){return this.$store.state.global.dataSource||""}},watch:{$route:function(e){e.query.id?(this.status="edit",this.getViewDetail()):(this.componentMap={},this.layouts=[],this.config={api:"",name:""},this.status="")}},mounted:function(){this.init()},beforeDestroy:function(){},methods:{init:function(){var e=this;return N(I().mark((function t(){return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.$route.query.id&&(e.status="edit",e.getViewDetail());case 1:case"end":return t.stop()}}),t)})))()},getViewDetail:function(){var e=this;return N(I().mark((function t(){var n,o,r;return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("JSON"!==e.dataSource){t.next=6;break}n=JSON.parse(localStorage.getItem("ATP_VIEW")||"[]"),(o=n[Number(e.$route.query.id)-1])&&(e.componentMap=e.setComponentMap(o.layouts,o.components),e.layouts=o.layouts,e.config.name=o.name,e.config.api=o.api),t.next=13;break;case 6:return t.next=8,M.ji.getViewDetail(e.$route.query.id);case 8:r=t.sent,e.componentMap=e.setComponentMap(r.data.layouts,r.data.components),e.layouts=r.data.layouts,e.config.name=r.data.name,e.config.api=r.data.api;case 13:case"end":return t.stop()}}),t)})))()},setComponentMap:function(e,t){var n={};return t.forEach((function(e){n[e.id]||(n[e.id]=e)})),e.forEach((function(e){n[e.id]||(n[e.id]=e)})),n},getSaveComponents:function(e,t){var n=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return e.forEach((function(e){e.children&&e.children.length?n.getSaveComponents(e.children,t,o):t[e.id]&&o.push(t[e.id])})),o},removeItem:function(e){var t=this;e.forEach((function(e){e.children&&e.children.length?t.removeItem(e.children):t.componentMap[e.id]&&delete t.componentMap[e.id]}))},removeLayout:function(e,t,n){for(var o=0;o<e.length;o+=1)if(e[o].children&&e[o].children.length)this.removeLayout(e[o].children,t,e[o]);else if(e[o].id===t){n.children.splice(o,1);break}},handleComponentDel:function(e,t){if(delete this.componentMap[e.id],this.layouts[t].id===e.id){var n=this.layouts.splice(t,1);n[0].children&&n[0].children.length&&this.removeItem(n[0].children)}else this.removeLayout(this.layouts,e.id)},handleJsonDialogShow:function(e){var t=this,o=!e,r={json:e,isImport:o},i={confirm:function(e){if(o){var n=JSON.parse(e);n&&(t.componentMap=t.setComponentMap(n.layouts,n.components),t.layouts=n.layouts,t.config.name=n.name,t.config.api=n.api)}t.$store.dispatch("dialogManager/removeDialog",t.dialog.key),t.dialog=null},cancel:function(){t.$store.dispatch("dialogManager/removeDialog",t.dialog.key),t.dialog=null}},a={width:800,title:"".concat(o?"导入":"导出","JSON"),bodyHeight:800},l=n(15751).Z;this.dialog?(this.dialog.props=r,this.$store.dispatch("dialogManager/updateDialog",this.dialog)):(this.dialog=new L.V(l,r,i,a),this.$store.dispatch("dialogManager/addDialog",this.dialog)),this.$store.dispatch("dialogManager/openDialog",this.dialog.key)},handleJsonImport:function(){var e=this;return N(I().mark((function t(){return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.handleJsonDialogShow();case 1:case"end":return t.stop()}}),t)})))()},handleJsonExport:function(){var e=this;return N(I().mark((function t(){var n;return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=T(T({},e.config),{},{components:e.getSaveComponents(e.layouts,e.componentMap),layouts:e.layouts}),e.handleJsonDialogShow(n);case 2:case"end":return t.stop()}}),t)})))()},handleTemplateSave:function(){var e=this;return N(I().mark((function t(){var n,o;return I().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=T(T({},e.config),{},{components:e.getSaveComponents(e.layouts,e.componentMap),layouts:e.layouts}),null,o=[],"JSON"===e.dataSource&&(o=JSON.parse(localStorage.getItem("ATP_VIEW")||"[]")),"edit"!==e.status){t.next=16;break}if(n.id=e.$route.query.id,"JSON"!==e.dataSource){t.next=11;break}o[Number(e.$route.query.id)-1]=n,localStorage.setItem("ATP_VIEW",JSON.stringify(o)),t.next=14;break;case 11:return t.next=13,M.ji.updateView(n);case 13:t.sent;case 14:t.next=23;break;case 16:if("JSON"!==e.dataSource){t.next=20;break}o.lengt>=10?e.$message({message:"最多保存10条",type:"error"}):(n.id=o.length+1,o.push(n),localStorage.setItem("ATP_VIEW",JSON.stringify(o)),e.$router.replace({path:"/design/view",query:{id:n.id}})),t.next=23;break;case 20:return t.next=22,M.ji.saveView(n);case 22:t.sent;case 23:case"end":return t.stop()}}),t)})))()}}};var z=(0,_.Z)(P,[["render",function(e,t,n,f,p,m){var h=(0,o.up)("el-button"),g=(0,o.up)("designer-menu"),v=(0,o.up)("designer-content");return(0,o.wg)(),(0,o.iD)("div",r,[(0,o._)("div",i,[(0,o.Wm)(h,{onClick:m.handleTemplateSave},{default:(0,o.w5)((function(){return[a]})),_:1},8,["onClick"]),(0,o.Wm)(h,{onClick:m.handleJsonImport},{default:(0,o.w5)((function(){return[l]})),_:1},8,["onClick"]),(0,o.Wm)(h,{onClick:m.handleJsonExport},{default:(0,o.w5)((function(){return[u]})),_:1},8,["onClick"])]),(0,o._)("div",c,[(0,o._)("div",s,[(0,o.Wm)(g,{componentList:m.componentList},null,8,["componentList"])]),(0,o._)("div",d,[(0,o.Wm)(v,{layouts:p.layouts,componentMap:p.componentMap,componentList:m.componentList,config:p.config,onDelete:m.handleComponentDel},null,8,["layouts","componentMap","componentList","config","onDelete"])])])])}]])},35222:function(e,t,n){var o={"./":90995,"./common/base":68037,"./common/base.vue":68037,"./common/baseAttr":77862,"./common/baseAttr.vue":77862,"./index":90995,"./index.vue":90995,"./listView":91042,"./listView/":91042,"./listView/buttonSet":9750,"./listView/buttonSet.vue":9750,"./listView/columnSet":74464,"./listView/columnSet.vue":74464,"./listView/index":91042,"./listView/index.vue":91042,"./searchForm":55078,"./searchForm/":55078,"./searchForm/index":55078,"./searchForm/index.vue":55078,"./viewAttr":53327,"./viewAttr.vue":53327};function r(e){var t=i(e);return n(t)}function i(e){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}r.keys=function(){return Object.keys(o)},r.resolve=i,e.exports=r,r.id=35222},45122:function(e,t,n){var o={"./common/base":47442,"./common/base.vue":47442,"./listView":16727,"./listView/":16727,"./listView/index":16727,"./listView/index.vue":16727,"./searchForm":27442,"./searchForm/":27442,"./searchForm/index":27442,"./searchForm/index.vue":27442,"./searchForm/searchFields":43120,"./searchForm/searchFields.vue":43120};function r(e){var t=i(e);return n(t)}function i(e){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}r.keys=function(){return Object.keys(o)},r.resolve=i,e.exports=r,r.id=45122},18481:function(e,t,n){var o={"./":34880,"./constant":90937,"./constant.js":90937,"./index":34880,"./index.js":34880,"./listView":81170,"./listView.js":81170,"./searchForm":47871,"./searchForm.js":47871};function r(e){var t=i(e);return n(t)}function i(e){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}r.keys=function(){return Object.keys(o)},r.resolve=i,e.exports=r,r.id=18481},27566:function(e){"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFwAAAAyCAYAAADREbxyAAAAAXNSR0IArs4c6QAAARxJREFUeAHt2DEKw0AMBVE7GLbe+9/Rrl0lbOALnWC2mTRSN+GxJKDzvu/v4QcTuFZpjIEFE3rfd0t39Xe1V/cTACcjIDjjXBXBi4JZBGecqyJ4UTCL4IxzVQQvCmYRnHGuiuBFwSyCM85VOb2llAWy/G8pc04k1iPP8xw7uus77Gqvrj8p/RUAu+AAck8I3jWAXXAAuScE7xrALjiA3BOCdw1gFxxA7gnBuwawCw4g94S3lK4B7N5SAOQkvKVEApz+hoPYKyW44LAAnPOFCw4LwDlfuOCwAJzzhQsOC8A5bykwuLcUENxbCoidlH+akYCm4BB0MoJHApqCQ9DJCB4JaAoOQScjeCSgKTgEnYzgkYCm4BB0Mh6vIgHNH5pCN1U+UIhLAAAAAElFTkSuQmCC"},50701:function(e){"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFwAAAAyCAYAAADREbxyAAAAAXNSR0IArs4c6QAAATpJREFUeAHt2jGug0AMAFHyFYmGhvvfERoaqnxtojj2ATzbTJrY1aCnFcWKx3Ecr8UfJvAcpXVdseA3dN/3lO7oz2qP7t8XwH9GQHDGOSqCBwUzCM44R0XwoGAGwRnnqAgeFMwgOOMcFcGDghkEZ5yj8vAuJSyQ4X2Xsu87EsuR8zyXGd3xDLPao+srJZ8CYBYcQM4JwbMGMAsOIOeE4FkDmAUHkHNC8KwBzIIDyDkheNYAZsEB5JzwLiVrAPP7LmXbNiBVE9d1LTO64ylmtUfXV0o9B+2b4O3ENSB49WjfBG8nrgHBq0f7Jng7cQ0IXj3aN8HbiWtA8OrRvgneTlwD3qVUj/bN71LaiX8Bv0v5WWCT73CM+hMSXHBYAM55wgWHBeCcJ1xwWADOecIFhwXgnCccBvfyCgb/B4WiN1V96mhHAAAAAElFTkSuQmCC"},26207:function(e){"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFwAAAAyCAYAAADREbxyAAAAAXNSR0IArs4c6QAAARFJREFUeAHt2LEKQyEMRuHbUnD2/d9RZ6cWhSzZczp4XEIWf/oRejGvMcb38WACn53UWsMCbw5aaz3vmwH+8dsFh9UFFxwWgOOccMFhATjOCRccFoDjnHDBYQE47jzt95PTwwgc8N47k3Z5ypzTXQo9A340YXHBBYcF4DgnXHBYAI5zwgWHBeA4J1xwWACOO0/7/eT0MALuUhjnk+IuBcSOKD+aIQFVwSHoiBE8JKAqOAQdMYKHBFQFh6AjRvCQgKrgEHTECB4SUHWXAkFHjLuUkACquxQAOUf4H55FinvBi4Hz9YJnkeJe8GLgfL3gWaS4F7wYOF8veBYp7gUvBs7XC55FinvBi4Hz9S6vskhx/wO/WxuPcHibSgAAAABJRU5ErkJggg=="},80262:function(e){"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFwAAAAyCAYAAADREbxyAAAAAXNSR0IArs4c6QAAAQNJREFUeAHt2jEKAyEYBeFNCNjYeP87amNjlaDwrjApHBvLYT9+EBdfvffv48IEPrtUSsGCN4fWWs/7ZoB/fLvgsLrggsMCcM4JFxwWgHNOuOCwAJxzwgWHBeDcudrvK6eLETjgrTWmdnlljOG/FHoGPDRhccEFhwXgnBMuOCwA55xwwWEBOOeECw4LwLlztd9XThcjcMBrrUzt8sqc038p9Ax4aMLiggsOC8A5J1xwWADOOeGCwwJwzgkXHBaAc+dqv6+cLkbAdymM86n4LgXETspDMxLQLjgEnYzgkYB2wSHoZASPBLQLDkEnI3gkoF1wCDoZwSMB7YJD0Mn4ECgS0P4D2Kobnq7n1HUAAAAASUVORK5CYII="}}]);