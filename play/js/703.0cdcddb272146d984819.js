"use strict";(self.webpackChunkapp_template_builder=self.webpackChunkapp_template_builder||[]).push([[703],{32905:function(t,e,i){i.d(e,{Fh:function(){return f}});var o=i(13484),s=i(38431),n=i(39832),r=i(16012),c=i(71177),h=i(53061),a=i(44333),l=i(75295),d=function(t,e,i,o){var s,n=arguments.length,r=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,o);else for(var c=t.length-1;c>=0;c--)(s=t[c])&&(r=(n<3?s(r):n>3?s(e,i,r):s(e,i))||r);return n>3&&r&&Object.defineProperty(e,i,r),r},g=function(t,e){return function(i,o){e(i,o,t)}};class u{constructor(t){this.name=t}select(t,e,i){if(0===i.length)return 0;const o=i[0].score[0];for(let t=0;t<i.length;t++){const{score:e,completion:s}=i[t];if(e[0]!==o)break;if(s.preselect)return t}return 0}}class _ extends u{constructor(){super("first")}memorize(t,e,i){}toJSON(){}fromJSON(){}}let p=class t{constructor(t,e){this._storageService=t,this._configService=e,this._disposables=new s.SL,this._persistSoon=new o.pY((()=>this._saveState()),500),this._disposables.add(t.onWillSaveState((t=>{t.reason===l.fk.SHUTDOWN&&this._saveState()})))}dispose(){this._disposables.dispose(),this._persistSoon.dispose()}memorize(t,e,i){this._withStrategy(t,e).memorize(t,e,i),this._persistSoon.schedule()}select(t,e,i){return this._withStrategy(t,e).select(t,e,i)}_withStrategy(e,i){var o;const s=this._configService.getValue("editor.suggestSelection",{overrideIdentifier:e.getLanguageIdAtPosition(i.lineNumber,i.column),resource:e.uri});if((null===(o=this._strategy)||void 0===o?void 0:o.name)!==s){this._saveState();const e=t._strategyCtors.get(s)||_;this._strategy=new e;try{const e=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,i=this._storageService.get(`${t._storagePrefix}/${s}`,e);i&&this._strategy.fromJSON(JSON.parse(i))}catch(t){}}return this._strategy}_saveState(){if(this._strategy){const e=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,i=JSON.stringify(this._strategy);this._storageService.store(`${t._storagePrefix}/${this._strategy.name}`,i,e,1)}}};p._strategyCtors=new Map([["recentlyUsedByPrefix",class extends u{constructor(){super("recentlyUsedByPrefix"),this._trie=n.Id.forStrings(),this._seq=0}memorize(t,e,i){const{word:o}=t.getWordUntilPosition(e),s=`${t.getLanguageId()}/${o}`;this._trie.set(s,{type:i.completion.kind,insertText:i.completion.insertText,touch:this._seq++})}select(t,e,i){const{word:o}=t.getWordUntilPosition(e);if(!o)return super.select(t,e,i);const s=`${t.getLanguageId()}/${o}`;let n=this._trie.get(s);if(n||(n=this._trie.findSubstr(s)),n)for(let t=0;t<i.length;t++){const{kind:e,insertText:o}=i[t].completion;if(e===n.type&&o===n.insertText)return t}return super.select(t,e,i)}toJSON(){const t=[];return this._trie.forEach(((e,i)=>t.push([i,e]))),t.sort(((t,e)=>-(t[1].touch-e[1].touch))).forEach(((t,e)=>t[1].touch=e)),t.slice(0,200)}fromJSON(t){if(this._trie.clear(),t.length>0){this._seq=t[0][1].touch+1;for(const[e,i]of t)i.type="number"==typeof i.type?i.type:r.gX.fromString(i.type),this._trie.set(e,i)}}}],["recentlyUsed",class extends u{constructor(){super("recentlyUsed"),this._cache=new n.z6(300,.66),this._seq=0}memorize(t,e,i){const o=`${t.getLanguageId()}/${i.textLabel}`;this._cache.set(o,{touch:this._seq++,type:i.completion.kind,insertText:i.completion.insertText})}select(t,e,i){if(0===i.length)return 0;const o=t.getLineContent(e.lineNumber).substr(e.column-10,e.column-1);if(/\s$/.test(o))return super.select(t,e,i);const s=i[0].score[0];let n=-1,r=-1,c=-1;for(let e=0;e<i.length&&i[e].score[0]===s;e++){const o=`${t.getLanguageId()}/${i[e].textLabel}`,s=this._cache.peek(o);if(s&&s.touch>c&&s.type===i[e].completion.kind&&s.insertText===i[e].completion.insertText&&(c=s.touch,r=e),i[e].completion.preselect&&-1===n)return e}return-1!==r?r:-1!==n?n:0}toJSON(){return this._cache.toJSON()}fromJSON(t){this._cache.clear();for(const[e,i]of t)i.touch=0,i.type="number"==typeof i.type?i.type:r.gX.fromString(i.type),this._cache.set(e,i);this._seq=this._cache.size}}],["first",_]]),p._storagePrefix="suggest/memories",p=d([g(0,l.Uy),g(1,c.Ui)],p);const f=(0,a.yh)("ISuggestMemories");(0,h.z)(f,p,!0)},89183:function(t,e,i){i.d(e,{U:function(){return T}});var o=i(13484),s=i(97464),n=i(20996),r=i(56709),c=i(38431),h=i(17416),a=i(57841),l=i(30363),d=i(31046),g=i(77512),u=i(51941),_=i(71177),p=i(70499),f=i(59271),m=i(68554),S=i(32061),v=i(33024),C=i(35921),w=function(t,e,i,o){var s,n=arguments.length,r=n<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(t,e,i,o);else for(var c=t.length-1;c>=0;c--)(s=t[c])&&(r=(n<3?s(r):n>3?s(e,i,r):s(e,i))||r);return n>3&&r&&Object.defineProperty(e,i,r),r},y=function(t,e){return function(i,o){e(i,o,t)}},b=function(t,e,i,o){return new(i||(i=Promise))((function(s,n){function r(t){try{h(o.next(t))}catch(t){n(t)}}function c(t){try{h(o.throw(t))}catch(t){n(t)}}function h(t){var e;t.done?s(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(r,c)}h((o=o.apply(t,e||[])).next())}))};class x{constructor(t,e,i,o,s){this.leadingLineContent=t.getLineContent(e.lineNumber).substr(0,e.column-1),this.leadingWord=t.getWordUntilPosition(e),this.lineNumber=e.lineNumber,this.column=e.column,this.auto=i,this.shy=o,this.noSelect=s}static shouldAutoTrigger(t){if(!t.hasModel())return!1;const e=t.getModel(),i=t.getPosition();e.tokenization.tokenizeIfCheap(i.lineNumber);const o=e.getWordAtPosition(i);return!!o&&(o.endColumn===i.column&&!!isNaN(Number(o.word)))}}let T=class t{constructor(t,e,i,s,n,h,l,d){this._editor=t,this._editorWorkerService=e,this._clipboardService=i,this._telemetryService=s,this._logService=n,this._contextKeyService=h,this._configurationService=l,this._languageFeaturesService=d,this._toDispose=new c.SL,this._triggerCharacterListener=new c.SL,this._triggerQuickSuggest=new o._F,this._state=0,this._completionDisposables=new c.SL,this._onDidCancel=new r.Q5,this._onDidTrigger=new r.Q5,this._onDidSuggest=new r.Q5,this.onDidCancel=this._onDidCancel.event,this.onDidTrigger=this._onDidTrigger.event,this.onDidSuggest=this._onDidSuggest.event,this._telemetryGate=0,this._currentSelection=this._editor.getSelection()||new a.Y(1,1,1,1),this._toDispose.add(this._editor.onDidChangeModel((()=>{this._updateTriggerCharacters(),this.cancel()}))),this._toDispose.add(this._editor.onDidChangeModelLanguage((()=>{this._updateTriggerCharacters(),this.cancel()}))),this._toDispose.add(this._editor.onDidChangeConfiguration((()=>{this._updateTriggerCharacters()}))),this._toDispose.add(this._languageFeaturesService.completionProvider.onDidChange((()=>{this._updateTriggerCharacters(),this._updateActiveSuggestSession()})));let g=!1;this._toDispose.add(this._editor.onDidCompositionStart((()=>{g=!0}))),this._toDispose.add(this._editor.onDidCompositionEnd((()=>{g=!1,this._onCompositionEnd()}))),this._toDispose.add(this._editor.onDidChangeCursorSelection((t=>{g||this._onCursorChange(t)}))),this._toDispose.add(this._editor.onDidChangeModelContent((()=>{g||this._refilterCompletionItems()}))),this._updateTriggerCharacters()}dispose(){(0,c.B9)(this._triggerCharacterListener),(0,c.B9)([this._onDidCancel,this._onDidSuggest,this._onDidTrigger,this._triggerQuickSuggest]),this._toDispose.dispose(),this._completionDisposables.dispose(),this.cancel()}_updateTriggerCharacters(){if(this._triggerCharacterListener.clear(),this._editor.getOption(83)||!this._editor.hasModel()||!this._editor.getOption(111))return;const t=new Map;for(const e of this._languageFeaturesService.completionProvider.all(this._editor.getModel()))for(const i of e.triggerCharacters||[]){let o=t.get(i);o||(o=new Set,o.add((0,v.ZJ)()),t.set(i,o)),o.add(e)}const e=e=>{if(!function(t,e,i){if(!Boolean(e.getContextKeyValue("inlineSuggestionVisible")))return!0;const o=i.getValue("editor.inlineSuggest.allowSuggestOnTriggerCharacters");return void 0!==o&&Boolean(o)}(this._editor,this._contextKeyService,this._configurationService))return;if(x.shouldAutoTrigger(this._editor))return;if(!e){const t=this._editor.getPosition();e=this._editor.getModel().getLineContent(t.lineNumber).substr(0,t.column-1)}let i="";(0,h.YK)(e.charCodeAt(e.length-1))?(0,h.ZG)(e.charCodeAt(e.length-2))&&(i=e.substr(e.length-2)):i=e.charAt(e.length-1);const o=t.get(i);if(o){const t=this._completionModel?{items:this._completionModel.adopt(o),clipboardText:this._completionModel.clipboardText}:void 0;this.trigger({auto:!0,shy:!1,noSelect:!1,triggerCharacter:i},Boolean(this._completionModel),o,t)}};this._triggerCharacterListener.add(this._editor.onDidType(e)),this._triggerCharacterListener.add(this._editor.onDidCompositionEnd((()=>e())))}get state(){return this._state}cancel(t=!1){var e;0!==this._state&&(this._triggerQuickSuggest.cancel(),null===(e=this._requestToken)||void 0===e||e.cancel(),this._requestToken=void 0,this._state=0,this._completionModel=void 0,this._context=void 0,this._onDidCancel.fire({retrigger:t}))}clear(){this._completionDisposables.clear()}_updateActiveSuggestSession(){0!==this._state&&(this._editor.hasModel()&&this._languageFeaturesService.completionProvider.has(this._editor.getModel())?this.trigger({auto:2===this._state,shy:!1,noSelect:!1},!0):this.cancel())}_onCursorChange(t){if(!this._editor.hasModel())return;const e=this._currentSelection;this._currentSelection=this._editor.getSelection(),!t.selection.isEmpty()||0!==t.reason&&3!==t.reason||"keyboard"!==t.source&&"deleteLeft"!==t.source?this.cancel():0===this._state&&0===t.reason?(e.containsRange(this._currentSelection)||e.getEndPosition().isBeforeOrEqual(this._currentSelection.getPosition()))&&this._doTriggerQuickSuggest():0!==this._state&&3===t.reason&&this._refilterCompletionItems()}_onCompositionEnd(){0===this._state?this._doTriggerQuickSuggest():this._refilterCompletionItems()}_doTriggerQuickSuggest(){var t;v.tG.isAllOff(this._editor.getOption(81))||this._editor.getOption(108).snippetsPreventQuickSuggestions&&(null===(t=d.SnippetController2.get(this._editor))||void 0===t?void 0:t.isInSnippet())||(this.cancel(),this._triggerQuickSuggest.cancelAndSet((()=>{if(0!==this._state)return;if(!x.shouldAutoTrigger(this._editor))return;if(!this._editor.hasModel()||!this._editor.hasWidgetFocus())return;const t=this._editor.getModel(),e=this._editor.getPosition(),i=this._editor.getOption(81);if(!v.tG.isAllOff(i)){if(!v.tG.isAllOn(i)){t.tokenization.tokenizeIfCheap(e.lineNumber);const o=t.tokenization.getLineTokens(e.lineNumber),s=o.getStandardTokenType(o.findTokenIndexAtOffset(Math.max(e.column-1-1,0)));if("on"!==v.tG.valueFor(i,s))return}(function(t,e,i){if(!Boolean(e.getContextKeyValue("inlineSuggestionVisible")))return!0;const o=i.getValue("editor.inlineSuggest.allowQuickSuggestions");return void 0!==o&&Boolean(o)})(this._editor,this._contextKeyService,this._configurationService)&&this._languageFeaturesService.completionProvider.has(t)&&this.trigger({auto:!0,shy:!1,noSelect:!1})}}),this._editor.getOption(82)))}_refilterCompletionItems(){Promise.resolve().then((()=>{if(0===this._state)return;if(!this._editor.hasModel())return;const t=this._editor.getModel(),e=this._editor.getPosition(),i=new x(t,e,2===this._state,!1,!1);this._onNewContext(i)}))}trigger(e,i=!1,o,r,c){var h;if(!this._editor.hasModel())return;const a=this._editor.getModel(),l=e.auto,d=new x(a,this._editor.getPosition(),l,e.shy,e.noSelect);this.cancel(i),this._state=l?2:1,this._onDidTrigger.fire({auto:l,shy:e.shy,position:this._editor.getPosition()}),this._context=d;let u={triggerKind:null!==(h=e.triggerKind)&&void 0!==h?h:0};e.triggerCharacter&&(u={triggerKind:1,triggerCharacter:e.triggerCharacter}),this._requestToken=new s.A;const _=this._editor.getOption(103);let p=1;switch(_){case"top":p=0;break;case"bottom":p=2}const{itemKind:f,showDeprecated:m}=t._createSuggestFilter(this._editor),C=new v.A9(p,c?new Set:f,o,m),w=g.K.create(this._editorWorkerService,this._editor),y=(0,v.kL)(this._languageFeaturesService.completionProvider,a,this._editor.getPosition(),C,u,this._requestToken.token);Promise.all([y,w]).then((([t,i])=>b(this,void 0,void 0,(function*(){var o;if(null===(o=this._requestToken)||void 0===o||o.dispose(),!this._editor.hasModel())return;let s=null==r?void 0:r.clipboardText;if(!s&&t.needsClipboard&&(s=yield this._clipboardService.readText()),0===this._state)return;const n=this._editor.getModel();let c=t.items;if(r){const t=(0,v.wg)(p);c=c.concat(r.items).sort(t)}const h=new x(n,this._editor.getPosition(),l,e.shy,e.noSelect);this._completionModel=new S._(c,this._context.column,{leadingLineContent:h.leadingLineContent,characterCountDelta:h.column-this._context.column},i,this._editor.getOption(108),this._editor.getOption(103),void 0,s),this._completionDisposables.add(t.disposable),this._onNewContext(h),this._reportDurationsTelemetry(t.durations)})))).catch(n.dL)}_reportDurationsTelemetry(t){this._telemetryGate++%230==0&&setTimeout((()=>{this._telemetryService.publicLog2("suggest.durations.json",{data:JSON.stringify(t)}),this._logService.debug("suggest.durations.json",t)}))}static _createSuggestFilter(t){const e=new Set;"none"===t.getOption(103)&&e.add(27);const i=t.getOption(108);return i.showMethods||e.add(0),i.showFunctions||e.add(1),i.showConstructors||e.add(2),i.showFields||e.add(3),i.showVariables||e.add(4),i.showClasses||e.add(5),i.showStructs||e.add(6),i.showInterfaces||e.add(7),i.showModules||e.add(8),i.showProperties||e.add(9),i.showEvents||e.add(10),i.showOperators||e.add(11),i.showUnits||e.add(12),i.showValues||e.add(13),i.showConstants||e.add(14),i.showEnums||e.add(15),i.showEnumMembers||e.add(16),i.showKeywords||e.add(17),i.showWords||e.add(18),i.showColors||e.add(19),i.showFiles||e.add(20),i.showReferences||e.add(21),i.showColors||e.add(22),i.showFolders||e.add(23),i.showTypeParameters||e.add(24),i.showSnippets||e.add(27),i.showUsers||e.add(25),i.showIssues||e.add(26),{itemKind:e,showDeprecated:i.showDeprecated}}_onNewContext(t){if(this._context)if(t.lineNumber===this._context.lineNumber)if((0,h.V8)(t.leadingLineContent)===(0,h.V8)(this._context.leadingLineContent)){if(t.column<this._context.column)t.leadingWord.word?this.trigger({auto:this._context.auto,shy:!1,noSelect:!1},!0):this.cancel();else if(this._completionModel)if(0!==t.leadingWord.word.length&&t.leadingWord.startColumn>this._context.leadingWord.startColumn){const t=new Set(this._languageFeaturesService.completionProvider.all(this._editor.getModel()));for(const e of this._completionModel.allProvider)t.delete(e);const e=this._completionModel.adopt(new Set);this.trigger({auto:this._context.auto,shy:!1,noSelect:!1},!0,t,{items:e,clipboardText:this._completionModel.clipboardText})}else if(t.column>this._context.column&&this._completionModel.incomplete.size>0&&0!==t.leadingWord.word.length){const{incomplete:t}=this._completionModel,e=this._completionModel.adopt(t);this.trigger({auto:2===this._state,shy:!1,noSelect:!1,triggerKind:2},!0,t,{items:e,clipboardText:this._completionModel.clipboardText})}else{const e=this._completionModel.lineContext;let i=!1;if(this._completionModel.lineContext={leadingLineContent:t.leadingLineContent,characterCountDelta:t.column-this._context.column},0===this._completionModel.items.length){if(x.shouldAutoTrigger(this._editor)&&this._context.leadingWord.endColumn<t.leadingWord.startColumn)return void this.trigger({auto:this._context.auto,shy:!1,noSelect:!1},!0);if(this._context.auto)return void this.cancel();if(this._completionModel.lineContext=e,i=this._completionModel.items.length>0,i&&0===t.leadingWord.word.length)return void this.cancel()}this._onDidSuggest.fire({completionModel:this._completionModel,auto:this._context.auto,shy:this._context.shy,noSelect:this._context.noSelect,isFrozen:i})}}else this.cancel();else this.cancel()}};T=w([y(1,l.p),y(2,u.p),y(3,m.b),y(4,f.VZ),y(5,p.i6),y(6,_.Ui),y(7,C.p)],T)}}]);