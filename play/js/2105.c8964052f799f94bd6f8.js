"use strict";(self.webpackChunkapp_template_builder=self.webpackChunkapp_template_builder||[]).push([[2105],{8533:function(e,n,t){t.d(n,{Iy:function(){return a},W:function(){return d},bO:function(){return u},f5:function(){return g},fF:function(){return c}});var i=t(407),o=t(132),s=t(26386),r=t(89528),l=t(58566);const a=(0,r.q5)("folding-expanded",i.lA.chevronDown,(0,s.NC)("foldingExpandedIcon","Icon for expanded ranges in the editor glyph margin.")),g=(0,r.q5)("folding-collapsed",i.lA.chevronRight,(0,s.NC)("foldingCollapsedIcon","Icon for collapsed ranges in the editor glyph margin.")),d=(0,r.q5)("folding-manual-collapsed",g,(0,s.NC)("foldingManualCollapedIcon","Icon for manually collapsed ranges in the editor glyph margin.")),u=(0,r.q5)("folding-manual-expanded",a,(0,s.NC)("foldingManualExpandedIcon","Icon for manually expanded ranges in the editor glyph margin."));class c{constructor(e){this.editor=e,this.showFoldingControls="mouseover",this.showFoldingHighlights=!0}getDecorationOption(e,n,t){return n||"never"===this.showFoldingControls?c.HIDDEN_RANGE_DECORATION:e?t?this.showFoldingHighlights?c.MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:c.MANUALLY_COLLAPSED_VISUAL_DECORATION:this.showFoldingHighlights?c.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION:c.COLLAPSED_VISUAL_DECORATION:"mouseover"===this.showFoldingControls?t?c.MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION:c.EXPANDED_AUTO_HIDE_VISUAL_DECORATION:t?c.MANUALLY_EXPANDED_VISUAL_DECORATION:c.EXPANDED_VISUAL_DECORATION}changeDecorations(e){return this.editor.changeDecorations(e)}removeDecorations(e){this.editor.removeDecorations(e)}}c.COLLAPSED_VISUAL_DECORATION=o.qx.register({description:"folding-collapsed-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0,firstLineDecorationClassName:l.kS.asClassName(g)}),c.COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=o.qx.register({description:"folding-collapsed-highlighted-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",isWholeLine:!0,firstLineDecorationClassName:l.kS.asClassName(g)}),c.MANUALLY_COLLAPSED_VISUAL_DECORATION=o.qx.register({description:"folding-manually-collapsed-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+l.kS.asClassName(a)}),c.MANUALLY_COLLAPSED_HIGHLIGHTED_VISUAL_DECORATION=o.qx.register({description:"folding-manually-collapsed-highlighted-visual-decoration",stickiness:0,afterContentClassName:"inline-folded",className:"folded-background",isWholeLine:!0,firstLineDecorationClassName:l.kS.asClassName(d)}),c.EXPANDED_AUTO_HIDE_VISUAL_DECORATION=o.qx.register({description:"folding-expanded-auto-hide-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:l.kS.asClassName(a)}),c.EXPANDED_VISUAL_DECORATION=o.qx.register({description:"folding-expanded-visual-decoration",stickiness:1,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+l.kS.asClassName(a)}),c.MANUALLY_EXPANDED_VISUAL_DECORATION=o.qx.register({description:"folding-manually-expanded-visual-decoration",stickiness:0,isWholeLine:!0,firstLineDecorationClassName:"alwaysShowFoldIcons "+l.kS.asClassName(u)}),c.MANUALLY_EXPANDED_AUTO_HIDE_VISUAL_DECORATION=o.qx.register({description:"folding-manually-expanded-visual-decoration",stickiness:0,isWholeLine:!0,firstLineDecorationClassName:l.kS.asClassName(u)}),c.HIDDEN_RANGE_DECORATION=o.qx.register({description:"folding-hidden-range-decoration",stickiness:1})},66933:function(e,n,t){t.d(n,{DW:function(){return h},HX:function(){return d},Ln:function(){return u},MW:function(){return L},PV:function(){return f},R$:function(){return a},YT:function(){return c},av:function(){return r},d8:function(){return l},gU:function(){return g},hE:function(){return m},sK:function(){return N}});var i=t(56709),o=t(14325),s=t(32916);class r{constructor(e,n){this._updateEventEmitter=new i.Q5,this.onDidChange=this._updateEventEmitter.event,this._textModel=e,this._decorationProvider=n,this._regions=new o.MN(new Uint32Array(0),new Uint32Array(0)),this._editorDecorationIds=[]}get regions(){return this._regions}get textModel(){return this._textModel}toggleCollapseState(e){if(!e.length)return;e=e.sort(((e,n)=>e.regionIndex-n.regionIndex));const n={};this._decorationProvider.changeDecorations((t=>{let i=0,o=-1,s=-1;const r=e=>{for(;i<e;){const e=this._regions.getEndLineNumber(i),n=this._regions.isCollapsed(i);if(e<=o){const o=0!==this.regions.getSource(i);t.changeDecorationOptions(this._editorDecorationIds[i],this._decorationProvider.getDecorationOption(n,e<=s,o))}n&&e>s&&(s=e),i++}};for(const t of e){const e=t.regionIndex,i=this._editorDecorationIds[e];if(i&&!n[i]){n[i]=!0,r(e);const t=!this._regions.isCollapsed(e);this._regions.setCollapsed(e,t),o=Math.max(o,this._regions.getEndLineNumber(e))}}r(this._regions.length)})),this._updateEventEmitter.fire({model:this,collapseStateChanged:e})}removeManualRanges(e){const n=new Array,t=n=>{for(const t of e)if(!(t.startLineNumber>n.endLineNumber||n.startLineNumber>t.endLineNumber))return!0;return!1};for(let e=0;e<this._regions.length;e++){const i=this._regions.toFoldRange(e);0!==i.source&&t(i)||n.push(i)}this.updatePost(o.MN.fromFoldRanges(n))}update(e,n=[]){const t=this._currentFoldedOrManualRanges(n),i=o.MN.sanitizeAndMerge(e,t,this._textModel.getLineCount());this.updatePost(o.MN.fromFoldRanges(i))}updatePost(e){const n=[];let t=-1;for(let i=0,o=e.length;i<o;i++){const o=e.getStartLineNumber(i),s=e.getEndLineNumber(i),r=e.isCollapsed(i),l=0!==e.getSource(i),a={startLineNumber:o,startColumn:this._textModel.getLineMaxColumn(o),endLineNumber:s,endColumn:this._textModel.getLineMaxColumn(s)+1};n.push({range:a,options:this._decorationProvider.getDecorationOption(r,s<=t,l)}),r&&s>t&&(t=s)}this._decorationProvider.changeDecorations((e=>this._editorDecorationIds=e.deltaDecorations(this._editorDecorationIds,n))),this._regions=e,this._updateEventEmitter.fire({model:this})}_currentFoldedOrManualRanges(e=[]){const n=(n,t)=>{for(const i of e)if(n<i&&i<=t)return!0;return!1},t=[];for(let e=0,i=this._regions.length;e<i;e++){let i=this.regions.isCollapsed(e);const o=this.regions.getSource(e);if(i||0!==o){const s=this._regions.toFoldRange(e),r=this._textModel.getDecorationRange(this._editorDecorationIds[e]);r&&(i&&(n(r.startLineNumber,r.endLineNumber)||r.endLineNumber-r.startLineNumber!=s.endLineNumber-s.startLineNumber)&&(i=!1),t.push({startLineNumber:r.startLineNumber,endLineNumber:r.endLineNumber,type:s.type,isCollapsed:i,source:o}))}}return t}getMemento(){const e=this._currentFoldedOrManualRanges(),n=[];for(let t=0,i=e.length;t<i;t++){const i=e[t],o=this._getLinesChecksum(i.startLineNumber+1,i.endLineNumber);n.push({startLineNumber:i.startLineNumber,endLineNumber:i.endLineNumber,isCollapsed:i.isCollapsed,source:i.source,checksum:o})}return n.length>0?n:void 0}applyMemento(e){var n,t;if(!Array.isArray(e))return;const i=[],s=this._textModel.getLineCount();for(const o of e){if(o.startLineNumber>=o.endLineNumber||o.startLineNumber<1||o.endLineNumber>s)continue;const e=this._getLinesChecksum(o.startLineNumber+1,o.endLineNumber);o.checksum&&e!==o.checksum||i.push({startLineNumber:o.startLineNumber,endLineNumber:o.endLineNumber,type:void 0,isCollapsed:null===(n=o.isCollapsed)||void 0===n||n,source:null!==(t=o.source)&&void 0!==t?t:0})}const r=o.MN.sanitizeAndMerge(this._regions,i,s);this.updatePost(o.MN.fromFoldRanges(r))}_getLinesChecksum(e,n){return(0,s.vp)(this._textModel.getLineContent(e)+this._textModel.getLineContent(n))%1e6}dispose(){this._decorationProvider.removeDecorations(this._editorDecorationIds)}getAllRegionsAtLine(e,n){const t=[];if(this._regions){let i=this._regions.findRange(e),o=1;for(;i>=0;){const e=this._regions.toRegion(i);n&&!n(e,o)||t.push(e),o++,i=e.parentIndex}}return t}getRegionAtLine(e){if(this._regions){const n=this._regions.findRange(e);if(n>=0)return this._regions.toRegion(n)}return null}getRegionsInside(e,n){const t=[],i=e?e.regionIndex+1:0,o=e?e.endLineNumber:Number.MAX_VALUE;if(n&&2===n.length){const e=[];for(let s=i,r=this._regions.length;s<r;s++){const i=this._regions.toRegion(s);if(!(this._regions.getStartLineNumber(s)<o))break;for(;e.length>0&&!i.containedBy(e[e.length-1]);)e.pop();e.push(i),n(i,e.length)&&t.push(i)}}else for(let e=i,s=this._regions.length;e<s;e++){const i=this._regions.toRegion(e);if(!(this._regions.getStartLineNumber(e)<o))break;n&&!n(i)||t.push(i)}return t}}function l(e,n,t){const i=[];for(const o of t){const t=e.getRegionAtLine(o);if(t){const o=!t.isCollapsed;if(i.push(t),n>1){const s=e.getRegionsInside(t,((e,t)=>e.isCollapsed!==o&&t<n));i.push(...s)}}}e.toggleCollapseState(i)}function a(e,n,t=Number.MAX_VALUE,i){const o=[];if(i&&i.length>0)for(const s of i){const i=e.getRegionAtLine(s);if(i&&(i.isCollapsed!==n&&o.push(i),t>1)){const s=e.getRegionsInside(i,((e,i)=>e.isCollapsed!==n&&i<t));o.push(...s)}}else{const i=e.getRegionsInside(null,((e,i)=>e.isCollapsed!==n&&i<t));o.push(...i)}e.toggleCollapseState(o)}function g(e,n,t,i){const o=[];for(const s of i){const i=e.getAllRegionsAtLine(s,((e,i)=>e.isCollapsed!==n&&i<=t));o.push(...i)}e.toggleCollapseState(o)}function d(e,n,t){const i=[];for(const o of t){const t=e.getAllRegionsAtLine(o,(e=>e.isCollapsed!==n));t.length>0&&i.push(t[0])}e.toggleCollapseState(i)}function u(e,n,t,i){const o=e.getRegionsInside(null,((e,o)=>o===n&&e.isCollapsed!==t&&!i.some((n=>e.containsLine(n)))));e.toggleCollapseState(o)}function c(e,n,t){const i=[];for(const n of t){const t=e.getAllRegionsAtLine(n,void 0);t.length>0&&i.push(t[0])}const o=e.getRegionsInside(null,(e=>i.every((n=>!n.containedBy(e)&&!e.containedBy(n)))&&e.isCollapsed!==n));e.toggleCollapseState(o)}function h(e,n,t){const i=e.textModel,o=e.regions,s=[];for(let e=o.length-1;e>=0;e--)if(t!==o.isCollapsed(e)){const t=o.getStartLineNumber(e);n.test(i.getLineContent(t))&&s.push(o.toRegion(e))}e.toggleCollapseState(s)}function L(e,n,t){const i=e.regions,o=[];for(let e=i.length-1;e>=0;e--)t!==i.isCollapsed(e)&&n===i.getType(e)&&o.push(i.toRegion(e));e.toggleCollapseState(o)}function f(e,n){let t=null;const i=n.getRegionAtLine(e);if(null!==i&&(t=i.startLineNumber,e===t)){const e=i.parentIndex;t=-1!==e?n.regions.getStartLineNumber(e):null}return t}function N(e,n){let t=n.getRegionAtLine(e);if(null!==t&&t.startLineNumber===e){if(e!==t.startLineNumber)return t.startLineNumber;{const e=t.parentIndex;let i=0;for(-1!==e&&(i=n.regions.getStartLineNumber(t.parentIndex));null!==t;){if(!(t.regionIndex>0))return null;if(t=n.regions.toRegion(t.regionIndex-1),t.startLineNumber<=i)return null;if(t.parentIndex===e)return t.startLineNumber}}}else if(n.regions.length>0)for(t=n.regions.toRegion(n.regions.length-1);null!==t;){if(t.startLineNumber<e)return t.startLineNumber;t=t.regionIndex>0?n.regions.toRegion(t.regionIndex-1):null}return null}function m(e,n){let t=n.getRegionAtLine(e);if(null!==t&&t.startLineNumber===e){const e=t.parentIndex;let i=0;if(-1!==e)i=n.regions.getEndLineNumber(t.parentIndex);else{if(0===n.regions.length)return null;i=n.regions.getEndLineNumber(n.regions.length-1)}for(;null!==t;){if(!(t.regionIndex<n.regions.length))return null;if(t=n.regions.toRegion(t.regionIndex+1),t.startLineNumber>=i)return null;if(t.parentIndex===e)return t.startLineNumber}}else if(n.regions.length>0)for(t=n.regions.toRegion(0);null!==t;){if(t.startLineNumber>e)return t.startLineNumber;t=t.regionIndex<n.regions.length?n.regions.toRegion(t.regionIndex+1):null}return null}}}]);