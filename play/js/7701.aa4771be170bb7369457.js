"use strict";(self.webpackChunkapp_template_builder=self.webpackChunkapp_template_builder||[]).push([[7701],{54293:function(e,t,s){s.d(t,{AA:function(){return i},Zo:function(){return H},aV:function(){return X},cK:function(){return P},hD:function(){return $},iK:function(){return N},sx:function(){return K},wD:function(){return j},wn:function(){return O}});var i,o,n=s(34441),r=s(54505),l=s(6544),c=s(80265),a=s(16644),h=s(84668),d=s(16308),u=s(13484),p=s(86741),v=s(4848),g=s(56709),m=s(4538),f=s(38431),w=s(98726),b=s(23127),y=s(11138),S=s(14818),F=s(67442),C=s(4102),D=function(e,t,s,i){var o,n=arguments.length,r=n<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,s):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)r=Reflect.decorate(e,t,s,i);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(r=(n<3?o(r):n>3?o(t,s,r):o(t,s))||r);return n>3&&r&&Object.defineProperty(t,s,r),r},x=function(e,t,s,i){return new(s||(s=Promise))((function(o,n){function r(e){try{c(i.next(e))}catch(e){n(e)}}function l(e){try{c(i.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(r,l)}c((i=i.apply(e,t||[])).next())}))};class E{constructor(e){this.trait=e,this.renderedElements=[]}get templateId(){return`template:${this.trait.name}`}renderTemplate(e){return e}renderElement(e,t,s){const i=this.renderedElements.findIndex((e=>e.templateData===s));if(i>=0){const e=this.renderedElements[i];this.trait.unrender(s),e.index=t}else{const e={index:t,templateData:s};this.renderedElements.push(e)}this.trait.renderIndex(t,s)}splice(e,t,s){const i=[];for(const o of this.renderedElements)o.index<e?i.push(o):o.index>=e+t&&i.push({index:o.index+s-t,templateData:o.templateData});this.renderedElements=i}renderIndexes(e){for(const{index:t,templateData:s}of this.renderedElements)e.indexOf(t)>-1&&this.trait.renderIndex(t,s)}disposeTemplate(e){const t=this.renderedElements.findIndex((t=>t.templateData===e));t<0||this.renderedElements.splice(t,1)}}class k{constructor(e){this._trait=e,this.length=0,this.indexes=[],this.sortedIndexes=[],this._onChange=new g.Q5,this.onChange=this._onChange.event}get name(){return this._trait}get renderer(){return new E(this)}splice(e,t,s){var i;t=Math.max(0,Math.min(t,this.length-e));const o=s.length-t,n=e+t,r=[...this.sortedIndexes.filter((t=>t<e)),...s.map(((t,s)=>t?s+e:-1)).filter((e=>-1!==e)),...this.sortedIndexes.filter((e=>e>=n)).map((e=>e+o))],l=this.length+o;if(this.sortedIndexes.length>0&&0===r.length&&l>0){const t=null!==(i=this.sortedIndexes.find((t=>t>=e)))&&void 0!==i?i:l-1;r.push(Math.min(t,l-1))}this.renderer.splice(e,t,s.length),this._set(r,r),this.length=l}renderIndex(e,t){t.classList.toggle(this._trait,this.contains(e))}unrender(e){e.classList.remove(this._trait)}set(e,t){return this._set(e,[...e].sort(V),t)}_set(e,t,s){const i=this.indexes,o=this.sortedIndexes;this.indexes=e,this.sortedIndexes=t;const n=Y(o,e);return this.renderer.renderIndexes(n),this._onChange.fire({indexes:e,browserEvent:s}),i}get(){return this.indexes}contains(e){return(0,d.ry)(this.sortedIndexes,e,V)>=0}dispose(){(0,f.B9)(this._onChange)}}D([v.H],k.prototype,"renderer",null);class I extends k{constructor(e){super("selected"),this.setAriaSelected=e}renderIndex(e,t){super.renderIndex(e,t),this.setAriaSelected&&(this.contains(e)?t.setAttribute("aria-selected","true"):t.setAttribute("aria-selected","false"))}}class A{constructor(e,t,s){this.trait=e,this.view=t,this.identityProvider=s}splice(e,t,s){if(!this.identityProvider)return this.trait.splice(e,t,s.map((()=>!1)));const i=this.trait.get().map((e=>this.identityProvider.getId(this.view.element(e)).toString())),o=s.map((e=>i.indexOf(this.identityProvider.getId(e).toString())>-1));this.trait.splice(e,t,o)}}function P(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName}function $(e){return!!e.classList.contains("monaco-editor")||!e.classList.contains("monaco-list")&&(!!e.parentElement&&$(e.parentElement))}function N(e){return!!("A"===e.tagName&&e.classList.contains("monaco-button")||"DIV"===e.tagName&&e.classList.contains("monaco-button-dropdown"))||!e.classList.contains("monaco-list")&&(!!e.parentElement&&N(e.parentElement))}class L{constructor(e,t,s){this.list=e,this.view=t,this.disposables=new f.SL,this.multipleSelectionDisposables=new f.SL,this.onKeyDown.filter((e=>3===e.keyCode)).on(this.onEnter,this,this.disposables),this.onKeyDown.filter((e=>16===e.keyCode)).on(this.onUpArrow,this,this.disposables),this.onKeyDown.filter((e=>18===e.keyCode)).on(this.onDownArrow,this,this.disposables),this.onKeyDown.filter((e=>11===e.keyCode)).on(this.onPageUpArrow,this,this.disposables),this.onKeyDown.filter((e=>12===e.keyCode)).on(this.onPageDownArrow,this,this.disposables),this.onKeyDown.filter((e=>9===e.keyCode)).on(this.onEscape,this,this.disposables),!1!==s.multipleSelectionSupport&&this.onKeyDown.filter((e=>(y.dz?e.metaKey:e.ctrlKey)&&31===e.keyCode)).on(this.onCtrlA,this,this.multipleSelectionDisposables)}get onKeyDown(){return this.disposables.add(g.ju.chain(this.disposables.add(new r.Y(this.view.domNode,"keydown")).event).filter((e=>!P(e.target))).map((e=>new l.y(e))))}updateOptions(e){void 0!==e.multipleSelectionSupport&&(this.multipleSelectionDisposables.clear(),e.multipleSelectionSupport&&this.onKeyDown.filter((e=>(y.dz?e.metaKey:e.ctrlKey)&&31===e.keyCode)).on(this.onCtrlA,this,this.multipleSelectionDisposables))}onEnter(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection(this.list.getFocus(),e.browserEvent)}onUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPrevious(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNext(1,!1,e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageUpArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusPreviousPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onPageDownArrow(e){e.preventDefault(),e.stopPropagation(),this.list.focusNextPage(e.browserEvent);const t=this.list.getFocus()[0];this.list.setAnchor(t),this.list.reveal(t),this.view.domNode.focus()}onCtrlA(e){e.preventDefault(),e.stopPropagation(),this.list.setSelection((0,d.w6)(this.list.length),e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus()}onEscape(e){this.list.getSelection().length&&(e.preventDefault(),e.stopPropagation(),this.list.setSelection([],e.browserEvent),this.list.setAnchor(void 0),this.view.domNode.focus())}dispose(){this.disposables.dispose(),this.multipleSelectionDisposables.dispose()}}D([v.H],L.prototype,"onKeyDown",null),function(e){e[e.Automatic=0]="Automatic",e[e.Trigger=1]="Trigger"}(i||(i={})),function(e){e[e.Idle=0]="Idle",e[e.Typing=1]="Typing"}(o||(o={}));const T=new class{mightProducePrintableCharacter(e){return!(e.ctrlKey||e.metaKey||e.altKey)&&(e.keyCode>=31&&e.keyCode<=56||e.keyCode>=21&&e.keyCode<=30||e.keyCode>=93&&e.keyCode<=102||e.keyCode>=80&&e.keyCode<=90)}};class _{constructor(e,t,s,n,r){this.list=e,this.view=t,this.keyboardNavigationLabelProvider=s,this.keyboardNavigationEventFilter=n,this.delegate=r,this.enabled=!1,this.state=o.Idle,this.mode=i.Automatic,this.triggered=!1,this.previouslyFocused=-1,this.enabledDisposables=new f.SL,this.disposables=new f.SL,this.updateOptions(e.options)}updateOptions(e){var t,s;null===(t=e.typeNavigationEnabled)||void 0===t||t?this.enable():this.disable(),this.mode=null!==(s=e.typeNavigationMode)&&void 0!==s?s:i.Automatic}enable(){if(this.enabled)return;let e=!1;const t=this.enabledDisposables.add(g.ju.chain(this.enabledDisposables.add(new r.Y(this.view.domNode,"keydown")).event)).filter((e=>!P(e.target))).filter((()=>this.mode===i.Automatic||this.triggered)).map((e=>new l.y(e))).filter((t=>e||this.keyboardNavigationEventFilter(t))).filter((e=>this.delegate.mightProducePrintableCharacter(e))).forEach(r.p).map((e=>e.browserEvent.key)).event,s=g.ju.debounce(t,(()=>null),800,void 0,void 0,this.enabledDisposables);g.ju.reduce(g.ju.any(t,s),((e,t)=>null===t?null:(e||"")+t),void 0,this.enabledDisposables)(this.onInput,this,this.enabledDisposables),s(this.onClear,this,this.enabledDisposables),t((()=>e=!0),void 0,this.enabledDisposables),s((()=>e=!1),void 0,this.enabledDisposables),this.enabled=!0,this.triggered=!1}disable(){this.enabled&&(this.enabledDisposables.clear(),this.enabled=!1,this.triggered=!1)}onClear(){var e;const t=this.list.getFocus();if(t.length>0&&t[0]===this.previouslyFocused){const s=null===(e=this.list.options.accessibilityProvider)||void 0===e?void 0:e.getAriaLabel(this.list.element(t[0]));s&&(0,a.Z9)(s)}this.previouslyFocused=-1}onInput(e){if(!e)return this.state=o.Idle,void(this.triggered=!1);const t=this.list.getFocus(),s=t.length>0?t[0]:0,i=this.state===o.Idle?1:0;this.state=o.Typing;for(let t=0;t<this.list.length;t++){const o=(s+t+i)%this.list.length,n=this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(o)),r=n&&n.toString();if(void 0===r||(0,m.Ji)(e,r))return this.previouslyFocused=s,this.list.setFocus([o]),void this.list.reveal(o)}}dispose(){this.disable(),this.enabledDisposables.dispose(),this.disposables.dispose()}}class B{constructor(e,t){this.list=e,this.view=t,this.disposables=new f.SL;this.disposables.add(g.ju.chain(this.disposables.add(new r.Y(t.domNode,"keydown")).event)).filter((e=>!P(e.target))).map((e=>new l.y(e))).filter((e=>!(2!==e.keyCode||e.ctrlKey||e.metaKey||e.shiftKey||e.altKey))).on(this.onTab,this,this.disposables)}onTab(e){if(e.target!==this.view.domNode)return;const t=this.list.getFocus();if(0===t.length)return;const s=this.view.domElement(t[0]);if(!s)return;const i=s.querySelector("[tabIndex]");if(!(i&&i instanceof HTMLElement&&-1!==i.tabIndex))return;const o=window.getComputedStyle(i);"hidden"!==o.visibility&&"none"!==o.display&&(e.preventDefault(),e.stopPropagation(),i.focus())}dispose(){this.disposables.dispose()}}function H(e){return y.dz?e.browserEvent.metaKey:e.browserEvent.ctrlKey}function O(e){return e.browserEvent.shiftKey}const M={isSelectionSingleChangeEvent:H,isSelectionRangeChangeEvent:O};class K{constructor(e){this.list=e,this.disposables=new f.SL,this._onPointer=new g.Q5,this.onPointer=this._onPointer.event,!1!==e.options.multipleSelectionSupport&&(this.multipleSelectionController=this.list.options.multipleSelectionController||M),this.mouseSupport=void 0===e.options.mouseSupport||!!e.options.mouseSupport,this.mouseSupport&&(e.onMouseDown(this.onMouseDown,this,this.disposables),e.onContextMenu(this.onContextMenu,this,this.disposables),e.onMouseDblClick(this.onDoubleClick,this,this.disposables),e.onTouchStart(this.onMouseDown,this,this.disposables),this.disposables.add(c.o.addTarget(e.getHTMLElement()))),g.ju.any(e.onMouseClick,e.onMouseMiddleClick,e.onTap)(this.onViewPointer,this,this.disposables)}updateOptions(e){void 0!==e.multipleSelectionSupport&&(this.multipleSelectionController=void 0,e.multipleSelectionSupport&&(this.multipleSelectionController=this.list.options.multipleSelectionController||M))}isSelectionSingleChangeEvent(e){return!!this.multipleSelectionController&&this.multipleSelectionController.isSelectionSingleChangeEvent(e)}isSelectionRangeChangeEvent(e){return!!this.multipleSelectionController&&this.multipleSelectionController.isSelectionRangeChangeEvent(e)}isSelectionChangeEvent(e){return this.isSelectionSingleChangeEvent(e)||this.isSelectionRangeChangeEvent(e)}onMouseDown(e){$(e.browserEvent.target)||document.activeElement!==e.browserEvent.target&&this.list.domFocus()}onContextMenu(e){if($(e.browserEvent.target))return;const t=void 0===e.index?[]:[e.index];this.list.setFocus(t,e.browserEvent)}onViewPointer(e){if(!this.mouseSupport)return;if(P(e.browserEvent.target)||$(e.browserEvent.target))return;const t=e.index;return void 0===t?(this.list.setFocus([],e.browserEvent),this.list.setSelection([],e.browserEvent),void this.list.setAnchor(void 0)):this.isSelectionRangeChangeEvent(e)||this.isSelectionChangeEvent(e)?this.changeSelection(e):(this.list.setFocus([t],e.browserEvent),this.list.setAnchor(t),(s=e.browserEvent)instanceof MouseEvent&&2===s.button||this.list.setSelection([t],e.browserEvent),void this._onPointer.fire(e));var s}onDoubleClick(e){if(P(e.browserEvent.target)||$(e.browserEvent.target))return;if(this.isSelectionChangeEvent(e))return;const t=this.list.getFocus();this.list.setSelection(t,e.browserEvent)}changeSelection(e){const t=e.index;let s=this.list.getAnchor();if(this.isSelectionRangeChangeEvent(e)){if(void 0===s){const e=this.list.getFocus()[0];s=null!=e?e:t,this.list.setAnchor(s)}const i=Math.min(s,t),o=Math.max(s,t),n=(0,d.w6)(i,o+1),r=this.list.getSelection(),l=function(e,t){const s=e.indexOf(t);if(-1===s)return[];const i=[];let o=s-1;for(;o>=0&&e[o]===t-(s-o);)i.push(e[o--]);i.reverse(),o=s;for(;o<e.length&&e[o]===t+(o-s);)i.push(e[o++]);return i}(Y(r,[s]),s);if(0===l.length)return;const c=Y(n,function(e,t){const s=[];let i=0,o=0;for(;i<e.length||o<t.length;)if(i>=e.length)s.push(t[o++]);else if(o>=t.length)s.push(e[i++]);else{if(e[i]===t[o]){i++,o++;continue}e[i]<t[o]?s.push(e[i++]):o++}return s}(r,l));this.list.setSelection(c,e.browserEvent),this.list.setFocus([t],e.browserEvent)}else if(this.isSelectionSingleChangeEvent(e)){const s=this.list.getSelection(),i=s.filter((e=>e!==t));this.list.setFocus([t]),this.list.setAnchor(t),s.length===i.length?this.list.setSelection([...i,t],e.browserEvent):this.list.setSelection(i,e.browserEvent)}}dispose(){this.disposables.dispose()}}class j{constructor(e,t){this.styleElement=e,this.selectorSuffix=t}style(e){const t=this.selectorSuffix&&`.${this.selectorSuffix}`,s=[];e.listBackground&&(e.listBackground.isOpaque()?s.push(`.monaco-list${t} .monaco-list-rows { background: ${e.listBackground}; }`):y.dz),e.listFocusBackground&&(s.push(`.monaco-list${t}:focus .monaco-list-row.focused { background-color: ${e.listFocusBackground}; }`),s.push(`.monaco-list${t}:focus .monaco-list-row.focused:hover { background-color: ${e.listFocusBackground}; }`)),e.listFocusForeground&&s.push(`.monaco-list${t}:focus .monaco-list-row.focused { color: ${e.listFocusForeground}; }`),e.listActiveSelectionBackground&&(s.push(`.monaco-list${t}:focus .monaco-list-row.selected { background-color: ${e.listActiveSelectionBackground}; }`),s.push(`.monaco-list${t}:focus .monaco-list-row.selected:hover { background-color: ${e.listActiveSelectionBackground}; }`)),e.listActiveSelectionForeground&&s.push(`.monaco-list${t}:focus .monaco-list-row.selected { color: ${e.listActiveSelectionForeground}; }`),e.listActiveSelectionIconForeground&&s.push(`.monaco-list${t}:focus .monaco-list-row.selected .codicon { color: ${e.listActiveSelectionIconForeground}; }`),e.listFocusAndSelectionOutline&&s.push(`.monaco-list${t}:focus .monaco-list-row.selected { outline-color: ${e.listFocusAndSelectionOutline} !important; }`),e.listFocusAndSelectionBackground&&s.push(`\n\t\t\t\t.monaco-drag-image,\n\t\t\t\t.monaco-list${t}:focus .monaco-list-row.selected.focused { background-color: ${e.listFocusAndSelectionBackground}; }\n\t\t\t`),e.listFocusAndSelectionForeground&&s.push(`\n\t\t\t\t.monaco-drag-image,\n\t\t\t\t.monaco-list${t}:focus .monaco-list-row.selected.focused { color: ${e.listFocusAndSelectionForeground}; }\n\t\t\t`),e.listInactiveFocusForeground&&(s.push(`.monaco-list${t} .monaco-list-row.focused { color:  ${e.listInactiveFocusForeground}; }`),s.push(`.monaco-list${t} .monaco-list-row.focused:hover { color:  ${e.listInactiveFocusForeground}; }`)),e.listInactiveSelectionIconForeground&&s.push(`.monaco-list${t} .monaco-list-row.focused .codicon { color:  ${e.listInactiveSelectionIconForeground}; }`),e.listInactiveFocusBackground&&(s.push(`.monaco-list${t} .monaco-list-row.focused { background-color:  ${e.listInactiveFocusBackground}; }`),s.push(`.monaco-list${t} .monaco-list-row.focused:hover { background-color:  ${e.listInactiveFocusBackground}; }`)),e.listInactiveSelectionBackground&&(s.push(`.monaco-list${t} .monaco-list-row.selected { background-color:  ${e.listInactiveSelectionBackground}; }`),s.push(`.monaco-list${t} .monaco-list-row.selected:hover { background-color:  ${e.listInactiveSelectionBackground}; }`)),e.listInactiveSelectionForeground&&s.push(`.monaco-list${t} .monaco-list-row.selected { color: ${e.listInactiveSelectionForeground}; }`),e.listHoverBackground&&s.push(`.monaco-list${t}:not(.drop-target) .monaco-list-row:hover:not(.selected):not(.focused) { background-color: ${e.listHoverBackground}; }`),e.listHoverForeground&&s.push(`.monaco-list${t} .monaco-list-row:hover:not(.selected):not(.focused) { color:  ${e.listHoverForeground}; }`),e.listSelectionOutline&&s.push(`.monaco-list${t} .monaco-list-row.selected { outline: 1px dotted ${e.listSelectionOutline}; outline-offset: -1px; }`),e.listFocusOutline&&s.push(`\n\t\t\t\t.monaco-drag-image,\n\t\t\t\t.monaco-list${t}:focus .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }\n\t\t\t\t.monaco-workbench.context-menu-visible .monaco-list${t}.last-focused .monaco-list-row.focused { outline: 1px solid ${e.listFocusOutline}; outline-offset: -1px; }\n\t\t\t`),e.listInactiveFocusOutline&&s.push(`.monaco-list${t} .monaco-list-row.focused { outline: 1px dotted ${e.listInactiveFocusOutline}; outline-offset: -1px; }`),e.listHoverOutline&&s.push(`.monaco-list${t} .monaco-list-row:hover { outline: 1px dashed ${e.listHoverOutline}; outline-offset: -1px; }`),e.listDropBackground&&s.push(`\n\t\t\t\t.monaco-list${t}.drop-target,\n\t\t\t\t.monaco-list${t} .monaco-list-rows.drop-target,\n\t\t\t\t.monaco-list${t} .monaco-list-row.drop-target { background-color: ${e.listDropBackground} !important; color: inherit !important; }\n\t\t\t`),e.tableColumnsBorder&&s.push(`\n\t\t\t\t.monaco-table:hover > .monaco-split-view2,\n\t\t\t\t.monaco-table:hover > .monaco-split-view2 .monaco-sash.vertical::before {\n\t\t\t\t\tborder-color: ${e.tableColumnsBorder};\n\t\t\t}`),e.tableOddRowsBackgroundColor&&s.push(`\n\t\t\t\t.monaco-table .monaco-list-row[data-parity=odd]:not(.focused):not(.selected):not(:hover) .monaco-table-tr,\n\t\t\t\t.monaco-table .monaco-list:not(:focus) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr,\n\t\t\t\t.monaco-table .monaco-list:not(.focused) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr {\n\t\t\t\t\tbackground-color: ${e.tableOddRowsBackgroundColor};\n\t\t\t\t}\n\t\t\t`),this.styleElement.textContent=s.join("\n")}}const R={listFocusBackground:p.Il.fromHex("#7FB0D0"),listActiveSelectionBackground:p.Il.fromHex("#0E639C"),listActiveSelectionForeground:p.Il.fromHex("#FFFFFF"),listActiveSelectionIconForeground:p.Il.fromHex("#FFFFFF"),listFocusAndSelectionOutline:p.Il.fromHex("#90C2F9"),listFocusAndSelectionBackground:p.Il.fromHex("#094771"),listFocusAndSelectionForeground:p.Il.fromHex("#FFFFFF"),listInactiveSelectionBackground:p.Il.fromHex("#3F3F46"),listInactiveSelectionIconForeground:p.Il.fromHex("#FFFFFF"),listHoverBackground:p.Il.fromHex("#2A2D2E"),listDropBackground:p.Il.fromHex("#383B3D"),treeIndentGuidesStroke:p.Il.fromHex("#a9a9a9"),tableColumnsBorder:p.Il.fromHex("#cccccc").transparent(.2),tableOddRowsBackgroundColor:p.Il.fromHex("#cccccc").transparent(.04)},U={keyboardSupport:!0,mouseSupport:!0,multipleSelectionSupport:!0,dnd:{getDragURI(){return null},onDragStart(){},onDragOver(){return!1},drop(){}}};function Y(e,t){const s=[];let i=0,o=0;for(;i<e.length||o<t.length;)if(i>=e.length)s.push(t[o++]);else if(o>=t.length)s.push(e[i++]);else{if(e[i]===t[o]){s.push(e[i]),i++,o++;continue}e[i]<t[o]?s.push(e[i++]):s.push(t[o++])}return s}const V=(e,t)=>e-t;class z{constructor(e,t){this._templateId=e,this.renderers=t}get templateId(){return this._templateId}renderTemplate(e){return this.renderers.map((t=>t.renderTemplate(e)))}renderElement(e,t,s,i){let o=0;for(const n of this.renderers)n.renderElement(e,t,s[o++],i)}disposeElement(e,t,s,i){var o;let n=0;for(const r of this.renderers)null===(o=r.disposeElement)||void 0===o||o.call(r,e,t,s[n],i),n+=1}disposeTemplate(e){let t=0;for(const s of this.renderers)s.disposeTemplate(e[t++])}}class Q{constructor(e){this.accessibilityProvider=e,this.templateId="a18n"}renderTemplate(e){return e}renderElement(e,t,s){const i=this.accessibilityProvider.getAriaLabel(e);i?s.setAttribute("aria-label",i):s.removeAttribute("aria-label");const o=this.accessibilityProvider.getAriaLevel&&this.accessibilityProvider.getAriaLevel(e);"number"==typeof o?s.setAttribute("aria-level",`${o}`):s.removeAttribute("aria-level")}disposeTemplate(e){}}class W{constructor(e,t){this.list=e,this.dnd=t}getDragElements(e){const t=this.list.getSelectedElements();return t.indexOf(e)>-1?t:[e]}getDragURI(e){return this.dnd.getDragURI(e)}getDragLabel(e,t){if(this.dnd.getDragLabel)return this.dnd.getDragLabel(e,t)}onDragStart(e,t){var s,i;null===(i=(s=this.dnd).onDragStart)||void 0===i||i.call(s,e,t)}onDragOver(e,t,s,i){return this.dnd.onDragOver(e,t,s,i)}onDragLeave(e,t,s,i){var o,n;null===(n=(o=this.dnd).onDragLeave)||void 0===n||n.call(o,e,t,s,i)}onDragEnd(e){var t,s;null===(s=(t=this.dnd).onDragEnd)||void 0===s||s.call(t,e)}drop(e,t,s,i){this.dnd.drop(e,t,s,i)}}class X{constructor(e,t,s,i,o=U){var r,l,c,a;this.user=e,this._options=o,this.focus=new k("focused"),this.anchor=new k("anchor"),this.eventBufferer=new g.E7,this._ariaLabel="",this.disposables=new f.SL,this._onDidDispose=new g.Q5,this.onDidDispose=this._onDidDispose.event;const d=this._options.accessibilityProvider&&this._options.accessibilityProvider.getWidgetRole?null===(r=this._options.accessibilityProvider)||void 0===r?void 0:r.getWidgetRole():"list";this.selection=new I("listbox"!==d),(0,b.jB)(o,R,!1);const u=[this.focus.renderer,this.selection.renderer];this.accessibilityProvider=o.accessibilityProvider,this.accessibilityProvider&&(u.push(new Q(this.accessibilityProvider)),null===(c=(l=this.accessibilityProvider).onDidChangeActiveDescendant)||void 0===c||c.call(l,this.onDidChangeActiveDescendant,this,this.disposables)),i=i.map((e=>new z(e.templateId,[...u,e])));const p=Object.assign(Object.assign({},o),{dnd:o.dnd&&new W(this,o.dnd)});if(this.view=new C.Bv(t,s,i,p),this.view.domNode.setAttribute("role",d),o.styleController)this.styleController=o.styleController(this.view.domId);else{const e=(0,n.dS)(this.view.domNode);this.styleController=new j(e,this.view.domId)}if(this.spliceable=new h.J([new A(this.focus,this.view,o.identityProvider),new A(this.selection,this.view,o.identityProvider),new A(this.anchor,this.view,o.identityProvider),this.view]),this.disposables.add(this.focus),this.disposables.add(this.selection),this.disposables.add(this.anchor),this.disposables.add(this.view),this.disposables.add(this._onDidDispose),this.disposables.add(new B(this,this.view)),("boolean"!=typeof o.keyboardSupport||o.keyboardSupport)&&(this.keyboardController=new L(this,this.view,o),this.disposables.add(this.keyboardController)),o.keyboardNavigationLabelProvider){const e=o.keyboardNavigationDelegate||T;this.typeNavigationController=new _(this,this.view,o.keyboardNavigationLabelProvider,null!==(a=o.keyboardNavigationEventFilter)&&void 0!==a?a:()=>!0,e),this.disposables.add(this.typeNavigationController)}this.mouseController=this.createMouseController(o),this.disposables.add(this.mouseController),this.onDidChangeFocus(this._onFocusChange,this,this.disposables),this.onDidChangeSelection(this._onSelectionChange,this,this.disposables),this.accessibilityProvider&&(this.ariaLabel=this.accessibilityProvider.getWidgetAriaLabel()),!1!==this._options.multipleSelectionSupport&&this.view.domNode.setAttribute("aria-multiselectable","true")}get onDidChangeFocus(){return g.ju.map(this.eventBufferer.wrapEvent(this.focus.onChange),(e=>this.toListEvent(e)),this.disposables)}get onDidChangeSelection(){return g.ju.map(this.eventBufferer.wrapEvent(this.selection.onChange),(e=>this.toListEvent(e)),this.disposables)}get domId(){return this.view.domId}get onMouseClick(){return this.view.onMouseClick}get onMouseDblClick(){return this.view.onMouseDblClick}get onMouseMiddleClick(){return this.view.onMouseMiddleClick}get onPointer(){return this.mouseController.onPointer}get onMouseDown(){return this.view.onMouseDown}get onMouseOver(){return this.view.onMouseOver}get onTouchStart(){return this.view.onTouchStart}get onTap(){return this.view.onTap}get onContextMenu(){let e=!1;const t=this.disposables.add(g.ju.chain(this.disposables.add(new r.Y(this.view.domNode,"keydown")).event)).map((e=>new l.y(e))).filter((t=>e=58===t.keyCode||t.shiftKey&&68===t.keyCode)).map(r.p).filter((()=>!1)).event,s=this.disposables.add(g.ju.chain(this.disposables.add(new r.Y(this.view.domNode,"keyup")).event)).forEach((()=>e=!1)).map((e=>new l.y(e))).filter((e=>58===e.keyCode||e.shiftKey&&68===e.keyCode)).map(r.p).map((({browserEvent:e})=>{const t=this.getFocus(),s=t.length?t[0]:void 0;return{index:s,element:void 0!==s?this.view.element(s):void 0,anchor:void 0!==s?this.view.domElement(s):this.view.domNode,browserEvent:e}})).event,i=this.disposables.add(g.ju.chain(this.view.onContextMenu)).filter((t=>!e)).map((({element:e,index:t,browserEvent:s})=>({element:e,index:t,anchor:{x:s.pageX+1,y:s.pageY},browserEvent:s}))).event;return g.ju.any(t,s,i)}get onKeyDown(){return this.disposables.add(new r.Y(this.view.domNode,"keydown")).event}get onDidFocus(){return g.ju.signal(this.disposables.add(new r.Y(this.view.domNode,"focus",!0)).event)}createMouseController(e){return new K(this)}updateOptions(e={}){var t,s;this._options=Object.assign(Object.assign({},this._options),e),null===(t=this.typeNavigationController)||void 0===t||t.updateOptions(this._options),void 0!==this._options.multipleSelectionController&&(this._options.multipleSelectionSupport?this.view.domNode.setAttribute("aria-multiselectable","true"):this.view.domNode.removeAttribute("aria-multiselectable")),this.mouseController.updateOptions(e),null===(s=this.keyboardController)||void 0===s||s.updateOptions(e),this.view.updateOptions(e)}get options(){return this._options}splice(e,t,s=[]){if(e<0||e>this.view.length)throw new F.A(this.user,`Invalid start index: ${e}`);if(t<0)throw new F.A(this.user,`Invalid delete count: ${t}`);0===t&&0===s.length||this.eventBufferer.bufferEvents((()=>this.spliceable.splice(e,t,s)))}rerender(){this.view.rerender()}element(e){return this.view.element(e)}get length(){return this.view.length}get contentHeight(){return this.view.contentHeight}get scrollTop(){return this.view.getScrollTop()}set scrollTop(e){this.view.setScrollTop(e)}get ariaLabel(){return this._ariaLabel}set ariaLabel(e){this._ariaLabel=e,this.view.domNode.setAttribute("aria-label",e)}domFocus(){this.view.domNode.focus({preventScroll:!0})}layout(e,t){this.view.layout(e,t)}setSelection(e,t){for(const t of e)if(t<0||t>=this.length)throw new F.A(this.user,`Invalid index ${t}`);this.selection.set(e,t)}getSelection(){return this.selection.get()}getSelectedElements(){return this.getSelection().map((e=>this.view.element(e)))}setAnchor(e){if(void 0!==e){if(e<0||e>=this.length)throw new F.A(this.user,`Invalid index ${e}`);this.anchor.set([e])}else this.anchor.set([])}getAnchor(){return(0,d.Xh)(this.anchor.get(),void 0)}getAnchorElement(){const e=this.getAnchor();return void 0===e?void 0:this.element(e)}setFocus(e,t){for(const t of e)if(t<0||t>=this.length)throw new F.A(this.user,`Invalid index ${t}`);this.focus.set(e,t)}focusNext(e=1,t=!1,s,i){if(0===this.length)return;const o=this.focus.get(),n=this.findNextIndex(o.length>0?o[0]+e:0,t,i);n>-1&&this.setFocus([n],s)}focusPrevious(e=1,t=!1,s,i){if(0===this.length)return;const o=this.focus.get(),n=this.findPreviousIndex(o.length>0?o[0]-e:0,t,i);n>-1&&this.setFocus([n],s)}focusNextPage(e,t){return x(this,void 0,void 0,(function*(){let s=this.view.indexAt(this.view.getScrollTop()+this.view.renderHeight);s=0===s?0:s-1;const i=this.getFocus()[0];if(i!==s&&(void 0===i||s>i)){const o=this.findPreviousIndex(s,!1,t);o>-1&&i!==o?this.setFocus([o],e):this.setFocus([s],e)}else{const o=this.view.getScrollTop();let n=o+this.view.renderHeight;s>i&&(n-=this.view.elementHeight(s)),this.view.setScrollTop(n),this.view.getScrollTop()!==o&&(this.setFocus([]),yield(0,u.Vs)(0),yield this.focusNextPage(e,t))}}))}focusPreviousPage(e,t){return x(this,void 0,void 0,(function*(){let s;const i=this.view.getScrollTop();s=0===i?this.view.indexAt(i):this.view.indexAfter(i-1);const o=this.getFocus()[0];if(o!==s&&(void 0===o||o>=s)){const i=this.findNextIndex(s,!1,t);i>-1&&o!==i?this.setFocus([i],e):this.setFocus([s],e)}else{const s=i;this.view.setScrollTop(i-this.view.renderHeight),this.view.getScrollTop()!==s&&(this.setFocus([]),yield(0,u.Vs)(0),yield this.focusPreviousPage(e,t))}}))}focusLast(e,t){if(0===this.length)return;const s=this.findPreviousIndex(this.length-1,!1,t);s>-1&&this.setFocus([s],e)}focusFirst(e,t){this.focusNth(0,e,t)}focusNth(e,t,s){if(0===this.length)return;const i=this.findNextIndex(e,!1,s);i>-1&&this.setFocus([i],t)}findNextIndex(e,t=!1,s){for(let i=0;i<this.length;i++){if(e>=this.length&&!t)return-1;if(e%=this.length,!s||s(this.element(e)))return e;e++}return-1}findPreviousIndex(e,t=!1,s){for(let i=0;i<this.length;i++){if(e<0&&!t)return-1;if(e=(this.length+e%this.length)%this.length,!s||s(this.element(e)))return e;e--}return-1}getFocus(){return this.focus.get()}getFocusedElements(){return this.getFocus().map((e=>this.view.element(e)))}reveal(e,t){if(e<0||e>=this.length)throw new F.A(this.user,`Invalid index ${e}`);const s=this.view.getScrollTop(),i=this.view.elementTop(e),o=this.view.elementHeight(e);if((0,S.hj)(t)){const e=o-this.view.renderHeight;this.view.setScrollTop(e*(0,w.uZ)(t,0,1)+i)}else{const e=i+o,t=s+this.view.renderHeight;i<s&&e>=t||(i<s||e>=t&&o>=this.view.renderHeight?this.view.setScrollTop(i):e>=t&&this.view.setScrollTop(e-this.view.renderHeight))}}getHTMLElement(){return this.view.domNode}getElementID(e){return this.view.getElementDomId(e)}style(e){this.styleController.style(e)}toListEvent({indexes:e,browserEvent:t}){return{indexes:e,elements:e.map((e=>this.view.element(e))),browserEvent:t}}_onFocusChange(){const e=this.focus.get();this.view.domNode.classList.toggle("element-focused",e.length>0),this.onDidChangeActiveDescendant()}onDidChangeActiveDescendant(){var e;const t=this.focus.get();if(t.length>0){let s;(null===(e=this.accessibilityProvider)||void 0===e?void 0:e.getActiveDescendantId)&&(s=this.accessibilityProvider.getActiveDescendantId(this.view.element(t[0]))),this.view.domNode.setAttribute("aria-activedescendant",s||this.view.getElementDomId(t[0]))}else this.view.domNode.removeAttribute("aria-activedescendant")}_onSelectionChange(){const e=this.selection.get();this.view.domNode.classList.toggle("selection-none",0===e.length),this.view.domNode.classList.toggle("selection-single",1===e.length),this.view.domNode.classList.toggle("selection-multiple",e.length>1)}dispose(){this._onDidDispose.fire(),this.disposables.dispose(),this._onDidDispose.dispose()}}D([v.H],X.prototype,"onDidChangeFocus",null),D([v.H],X.prototype,"onDidChangeSelection",null),D([v.H],X.prototype,"onContextMenu",null),D([v.H],X.prototype,"onKeyDown",null),D([v.H],X.prototype,"onDidFocus",null)}}]);