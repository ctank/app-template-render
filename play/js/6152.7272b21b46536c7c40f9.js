"use strict";(self.webpackChunkapp_template_builder=self.webpackChunkapp_template_builder||[]).push([[6152],{92108:function(e,i,n){n.d(i,{A:function(){return o}});var t=n(5139);class o{constructor(e,i,n){this.configuration=e,this.theme=new t.b(i),this.viewModel=n,this.viewLayout=n.viewLayout}addEventHandler(e){this.viewModel.addViewEventHandler(e)}removeEventHandler(e){this.viewModel.removeViewEventHandler(e)}}},82807:function(e,i,n){n.d(i,{$t:function(){return u},CU:function(){return l},Fd:function(){return d},zg:function(){return a}});var t=n(8964),o=n(50038),s=n(71278),r=n(70054);class l{constructor(e,i,n,t,o){this.editorId=e,this.model=i,this.configuration=n,this._linesCollection=t,this._coordinatesConverter=o,this._decorationsCache=Object.create(null),this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}_clearCachedModelDecorationsResolver(){this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}dispose(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}reset(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onModelDecorationsChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onLineMappingChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}_getOrCreateViewModelDecoration(e){const i=e.id;let n=this._decorationsCache[i];if(!n){const r=e.range,l=e.options;let d;if(l.isWholeLine){const e=this._coordinatesConverter.convertModelPositionToViewPosition(new t.L(r.startLineNumber,1),0),i=this._coordinatesConverter.convertModelPositionToViewPosition(new t.L(r.endLineNumber,this.model.getLineMaxColumn(r.endLineNumber)),1);d=new o.e(e.lineNumber,e.column,i.lineNumber,i.column)}else d=this._coordinatesConverter.convertModelRangeToViewRange(r,1);n=new s.$l(d,l),this._decorationsCache[i]=n}return n}getDecorationsViewportData(e){let i=null!==this._cachedModelDecorationsResolver;return i=i&&e.equalsRange(this._cachedModelDecorationsResolverViewRange),i||(this._cachedModelDecorationsResolver=this._getDecorationsInRange(e),this._cachedModelDecorationsResolverViewRange=e),this._cachedModelDecorationsResolver}getInlineDecorationsOnLine(e){const i=new o.e(e,this._linesCollection.getViewLineMinColumn(e),e,this._linesCollection.getViewLineMaxColumn(e));return this._getDecorationsInRange(i).inlineDecorations[0]}_getDecorationsInRange(e){const i=this._linesCollection.getDecorationsInRange(e,this.editorId,(0,r.$J)(this.configuration.options)),n=e.startLineNumber,t=e.endLineNumber,l=[];let u=0;const a=[];for(let e=n;e<=t;e++)a[e-n]=[];for(let e=0,r=i.length;e<r;e++){const r=i[e],m=r.options;if(!d(this.model,r))continue;const c=this._getOrCreateViewModelDecoration(r),L=c.range;if(l[u++]=c,m.inlineClassName){const e=new s.$t(L,m.inlineClassName,m.inlineClassNameAffectsLetterSpacing?3:0),i=Math.max(n,L.startLineNumber),o=Math.min(t,L.endLineNumber);for(let t=i;t<=o;t++)a[t-n].push(e)}if(m.beforeContentClassName&&n<=L.startLineNumber&&L.startLineNumber<=t){const e=new s.$t(new o.e(L.startLineNumber,L.startColumn,L.startLineNumber,L.startColumn),m.beforeContentClassName,1);a[L.startLineNumber-n].push(e)}if(m.afterContentClassName&&n<=L.endLineNumber&&L.endLineNumber<=t){const e=new s.$t(new o.e(L.endLineNumber,L.endColumn,L.endLineNumber,L.endColumn),m.afterContentClassName,2);a[L.endLineNumber-n].push(e)}}return{decorations:l,inlineDecorations:a}}}function d(e,i){return(!i.options.hideInCommentTokens||!u(e,i))&&(!i.options.hideInStringTokens||!a(e,i))}function u(e,i){return m(e,i.range,(e=>1===e))}function a(e,i){return m(e,i.range,(e=>2===e))}function m(e,i,n){for(let t=i.startLineNumber;t<=i.endLineNumber;t++){const o=e.tokenization.getLineTokens(t),s=t===i.startLineNumber,r=t===i.endLineNumber;let l=s?o.findTokenIndexAtOffset(i.startColumn-1):0;for(;l<o.getCount();){if(r){if(o.getStartOffset(l)>i.endColumn-1)break}if(!n(o.getStandardTokenType(l)))return!1;l++}}return!0}},92426:function(e,i,n){n.d(i,{M:function(){return V},U:function(){return L}});var t=n(16308),o=n(8964),s=n(50038),r=n(79777),l=n(132),d=n(30828),u=n(84658),a=n(90197),m=n(82808),c=n(71278);class L{constructor(e,i,n,t,o,s,r,l,d){this._editorId=e,this.model=i,this._validModelVersionId=-1,this._domLineBreaksComputerFactory=n,this._monospaceLineBreaksComputerFactory=t,this.fontInfo=o,this.tabSize=s,this.wrappingStrategy=r,this.wrappingColumn=l,this.wrappingIndent=d,this._constructLines(!0,null)}dispose(){this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[])}createCoordinatesConverter(){return new w(this)}_constructLines(e,i){this.modelLineProjections=[],e&&(this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[]));const n=this.model.getLinesContent(),o=this.model.getInjectedTextDecorations(this._editorId),r=n.length,l=this.createLineBreaksComputer(),u=new t.H9(d.gk.fromDecorations(o));for(let e=0;e<r;e++){const t=u.takeWhile((i=>i.lineNumber===e+1));l.addRequest(n[e],t,i?i[e]:null)}const c=l.finalize(),L=[],h=this.hiddenAreasDecorationIds.map((e=>this.model.getDecorationRange(e))).sort(s.e.compareRangesUsingStarts);let g=1,w=0,V=-1,b=V+1<h.length?w+1:r+2;for(let e=0;e<r;e++){const i=e+1;i===b&&(V++,g=h[V].startLineNumber,w=h[V].endLineNumber,b=V+1<h.length?w+1:r+2);const n=i>=g&&i<=w,t=(0,a.W)(c[e],!n);L[e]=t.getViewLineCount(),this.modelLineProjections[e]=t}this._validModelVersionId=this.model.getVersionId(),this.projectedModelLineLineCounts=new m.Ck(L)}getHiddenAreas(){return this.hiddenAreasDecorationIds.map((e=>this.model.getDecorationRange(e)))}setHiddenAreas(e){const i=function(e){if(0===e.length)return[];const i=e.slice();i.sort(s.e.compareRangesUsingStarts);const n=[];let t=i[0].startLineNumber,o=i[0].endLineNumber;for(let e=1,r=i.length;e<r;e++){const r=i[e];r.startLineNumber>o+1?(n.push(new s.e(t,1,o,1)),t=r.startLineNumber,o=r.endLineNumber):r.endLineNumber>o&&(o=r.endLineNumber)}return n.push(new s.e(t,1,o,1)),n}(e.map((e=>this.model.validateRange(e)))),n=this.hiddenAreasDecorationIds.map((e=>this.model.getDecorationRange(e))).sort(s.e.compareRangesUsingStarts);if(i.length===n.length){let e=!1;for(let t=0;t<i.length;t++)if(!i[t].equalsRange(n[t])){e=!0;break}if(!e)return!1}const t=i.map((e=>({range:e,options:l.qx.EMPTY})));this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,t);const o=i;let r=1,d=0,u=-1,a=u+1<o.length?d+1:this.modelLineProjections.length+2,m=!1;for(let e=0;e<this.modelLineProjections.length;e++){const i=e+1;i===a&&(u++,r=o[u].startLineNumber,d=o[u].endLineNumber,a=u+1<o.length?d+1:this.modelLineProjections.length+2);let n=!1;if(i>=r&&i<=d?this.modelLineProjections[e].isVisible()&&(this.modelLineProjections[e]=this.modelLineProjections[e].setVisible(!1),n=!0):(m=!0,this.modelLineProjections[e].isVisible()||(this.modelLineProjections[e]=this.modelLineProjections[e].setVisible(!0),n=!0)),n){const i=this.modelLineProjections[e].getViewLineCount();this.projectedModelLineLineCounts.setValue(e,i)}}return m||this.setHiddenAreas([]),!0}modelPositionIsVisible(e,i){return!(e<1||e>this.modelLineProjections.length)&&this.modelLineProjections[e-1].isVisible()}getModelLineViewLineCount(e){return e<1||e>this.modelLineProjections.length?1:this.modelLineProjections[e-1].getViewLineCount()}setTabSize(e){return this.tabSize!==e&&(this.tabSize=e,this._constructLines(!1,null),!0)}setWrappingSettings(e,i,n,t){const o=this.fontInfo.equals(e),s=this.wrappingStrategy===i,r=this.wrappingColumn===n,l=this.wrappingIndent===t;if(o&&s&&r&&l)return!1;const d=o&&s&&!r&&l;this.fontInfo=e,this.wrappingStrategy=i,this.wrappingColumn=n,this.wrappingIndent=t;let u=null;if(d){u=[];for(let e=0,i=this.modelLineProjections.length;e<i;e++)u[e]=this.modelLineProjections[e].getProjectionData()}return this._constructLines(!1,u),!0}createLineBreaksComputer(){return("advanced"===this.wrappingStrategy?this._domLineBreaksComputerFactory:this._monospaceLineBreaksComputerFactory).createLineBreaksComputer(this.fontInfo,this.tabSize,this.wrappingColumn,this.wrappingIndent)}onModelFlushed(){this._constructLines(!0,null)}onModelLinesDeleted(e,i,n){if(!e||e<=this._validModelVersionId)return null;const t=1===i?1:this.projectedModelLineLineCounts.getPrefixSum(i-1)+1,o=this.projectedModelLineLineCounts.getPrefixSum(n);return this.modelLineProjections.splice(i-1,n-i+1),this.projectedModelLineLineCounts.removeValues(i-1,n-i+1),new u.vk(t,o)}onModelLinesInserted(e,i,n,t){if(!e||e<=this._validModelVersionId)return null;const o=i>2&&!this.modelLineProjections[i-2].isVisible(),s=1===i?1:this.projectedModelLineLineCounts.getPrefixSum(i-1)+1;let r=0;const l=[],d=[];for(let e=0,i=t.length;e<i;e++){const i=(0,a.W)(t[e],!o);l.push(i);const n=i.getViewLineCount();r+=n,d[e]=n}return this.modelLineProjections=this.modelLineProjections.slice(0,i-1).concat(l).concat(this.modelLineProjections.slice(i-1)),this.projectedModelLineLineCounts.insertValues(i-1,d),new u.K9(s,s+r-1)}onModelLineChanged(e,i,n){if(null!==e&&e<=this._validModelVersionId)return[!1,null,null,null];const t=i-1,o=this.modelLineProjections[t].getViewLineCount(),s=this.modelLineProjections[t].isVisible(),r=(0,a.W)(n,s);this.modelLineProjections[t]=r;const l=this.modelLineProjections[t].getViewLineCount();let d=!1,m=0,c=-1,L=0,h=-1,g=0,w=-1;o>l?(m=this.projectedModelLineLineCounts.getPrefixSum(i-1)+1,c=m+l-1,g=c+1,w=g+(o-l)-1,d=!0):o<l?(m=this.projectedModelLineLineCounts.getPrefixSum(i-1)+1,c=m+o-1,L=c+1,h=L+(l-o)-1,d=!0):(m=this.projectedModelLineLineCounts.getPrefixSum(i-1)+1,c=m+l-1),this.projectedModelLineLineCounts.setValue(t,l);return[d,m<=c?new u.il(m,c-m+1):null,L<=h?new u.K9(L,h):null,g<=w?new u.vk(g,w):null]}acceptVersionId(e){this._validModelVersionId=e,1!==this.modelLineProjections.length||this.modelLineProjections[0].isVisible()||this.setHiddenAreas([])}getViewLineCount(){return this.projectedModelLineLineCounts.getTotalSum()}_toValidViewLineNumber(e){if(e<1)return 1;const i=this.getViewLineCount();return e>i?i:0|e}getActiveIndentGuide(e,i,n){e=this._toValidViewLineNumber(e),i=this._toValidViewLineNumber(i),n=this._toValidViewLineNumber(n);const t=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),o=this.convertViewPositionToModelPosition(i,this.getViewLineMinColumn(i)),s=this.convertViewPositionToModelPosition(n,this.getViewLineMinColumn(n)),r=this.model.guides.getActiveIndentGuide(t.lineNumber,o.lineNumber,s.lineNumber),l=this.convertModelPositionToViewPosition(r.startLineNumber,1),d=this.convertModelPositionToViewPosition(r.endLineNumber,this.model.getLineMaxColumn(r.endLineNumber));return{startLineNumber:l.lineNumber,endLineNumber:d.lineNumber,indent:r.indent}}getViewLineInfo(e){e=this._toValidViewLineNumber(e);const i=this.projectedModelLineLineCounts.getIndexOf(e-1),n=i.index,t=i.remainder;return new h(n+1,t)}getMinColumnOfViewLine(e){return this.modelLineProjections[e.modelLineNumber-1].getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}getMaxColumnOfViewLine(e){return this.modelLineProjections[e.modelLineNumber-1].getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}getModelStartPositionOfViewLine(e){const i=this.modelLineProjections[e.modelLineNumber-1],n=i.getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),t=i.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,n);return new o.L(e.modelLineNumber,t)}getModelEndPositionOfViewLine(e){const i=this.modelLineProjections[e.modelLineNumber-1],n=i.getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),t=i.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,n);return new o.L(e.modelLineNumber,t)}getViewLineInfosGroupedByModelRanges(e,i){const n=this.getViewLineInfo(e),t=this.getViewLineInfo(i),r=new Array;let l=this.getModelStartPositionOfViewLine(n),d=new Array;for(let e=n.modelLineNumber;e<=t.modelLineNumber;e++){const i=this.modelLineProjections[e-1];if(i.isVisible()){const o=e===n.modelLineNumber?n.modelLineWrappedLineIdx:0,s=e===t.modelLineNumber?t.modelLineWrappedLineIdx+1:i.getViewLineCount();for(let i=o;i<s;i++)d.push(new h(e,i))}if(!i.isVisible()&&l){const i=new o.L(e-1,this.model.getLineMaxColumn(e-1)+1),n=s.e.fromPositions(l,i);r.push(new g(n,d)),d=[],l=null}else i.isVisible()&&!l&&(l=new o.L(e,1))}if(l){const e=s.e.fromPositions(l,this.getModelEndPositionOfViewLine(t));r.push(new g(e,d))}return r}getViewLinesBracketGuides(e,i,n,t){const o=n?this.convertViewPositionToModelPosition(n.lineNumber,n.column):null,s=[];for(const n of this.getViewLineInfosGroupedByModelRanges(e,i)){const e=n.modelRange.startLineNumber,i=this.model.guides.getLinesBracketGuides(e,n.modelRange.endLineNumber,o,t);for(const t of n.viewLines){const n=i[t.modelLineNumber-e].map((e=>{if(-1!==e.forWrappedLinesAfterColumn){if(this.modelLineProjections[t.modelLineNumber-1].getViewPositionOfModelPosition(0,e.forWrappedLinesAfterColumn).lineNumber>=t.modelLineWrappedLineIdx)return}if(-1!==e.forWrappedLinesBeforeOrAtColumn){if(this.modelLineProjections[t.modelLineNumber-1].getViewPositionOfModelPosition(0,e.forWrappedLinesBeforeOrAtColumn).lineNumber<t.modelLineWrappedLineIdx)return}if(!e.horizontalLine)return e;let i=-1;if(-1!==e.column){const n=this.modelLineProjections[t.modelLineNumber-1].getViewPositionOfModelPosition(0,e.column);if(n.lineNumber===t.modelLineWrappedLineIdx)i=n.column;else if(n.lineNumber<t.modelLineWrappedLineIdx)i=this.getMinColumnOfViewLine(t);else if(n.lineNumber>t.modelLineWrappedLineIdx)return}const n=this.convertModelPositionToViewPosition(t.modelLineNumber,e.horizontalLine.endColumn),o=this.modelLineProjections[t.modelLineNumber-1].getViewPositionOfModelPosition(0,e.horizontalLine.endColumn);return o.lineNumber===t.modelLineWrappedLineIdx?new r.UO(e.visibleColumn,i,e.className,new r.vW(e.horizontalLine.top,n.column),-1,-1):o.lineNumber<t.modelLineWrappedLineIdx||-1!==e.visibleColumn?void 0:new r.UO(e.visibleColumn,i,e.className,new r.vW(e.horizontalLine.top,this.getMaxColumnOfViewLine(t)),-1,-1)}));s.push(n.filter((e=>!!e)))}}return s}getViewLinesIndentGuides(e,i){e=this._toValidViewLineNumber(e),i=this._toValidViewLineNumber(i);const n=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),t=this.convertViewPositionToModelPosition(i,this.getViewLineMaxColumn(i));let s=[];const r=[],l=[],d=n.lineNumber-1,u=t.lineNumber-1;let a=null;for(let e=d;e<=u;e++){const i=this.modelLineProjections[e];if(i.isVisible()){const t=i.getViewLineNumberOfModelPosition(0,e===d?n.column:1),s=i.getViewLineNumberOfModelPosition(0,this.model.getLineMaxColumn(e+1)),u=s-t+1;let m=0;u>1&&1===i.getViewLineMinColumn(this.model,e+1,s)&&(m=0===t?1:2),r.push(u),l.push(m),null===a&&(a=new o.L(e+1,0))}else null!==a&&(s=s.concat(this.model.guides.getLinesIndentGuides(a.lineNumber,e)),a=null)}null!==a&&(s=s.concat(this.model.guides.getLinesIndentGuides(a.lineNumber,t.lineNumber)),a=null);const m=i-e+1,c=new Array(m);let L=0;for(let e=0,i=s.length;e<i;e++){let i=s[e];const n=Math.min(m-L,r[e]),t=l[e];let o;o=2===t?0:1===t?1:n;for(let e=0;e<n;e++)e===o&&(i=0),c[L++]=i}return c}getViewLineContent(e){const i=this.getViewLineInfo(e);return this.modelLineProjections[i.modelLineNumber-1].getViewLineContent(this.model,i.modelLineNumber,i.modelLineWrappedLineIdx)}getViewLineLength(e){const i=this.getViewLineInfo(e);return this.modelLineProjections[i.modelLineNumber-1].getViewLineLength(this.model,i.modelLineNumber,i.modelLineWrappedLineIdx)}getViewLineMinColumn(e){const i=this.getViewLineInfo(e);return this.modelLineProjections[i.modelLineNumber-1].getViewLineMinColumn(this.model,i.modelLineNumber,i.modelLineWrappedLineIdx)}getViewLineMaxColumn(e){const i=this.getViewLineInfo(e);return this.modelLineProjections[i.modelLineNumber-1].getViewLineMaxColumn(this.model,i.modelLineNumber,i.modelLineWrappedLineIdx)}getViewLineData(e){const i=this.getViewLineInfo(e);return this.modelLineProjections[i.modelLineNumber-1].getViewLineData(this.model,i.modelLineNumber,i.modelLineWrappedLineIdx)}getViewLinesData(e,i,n){e=this._toValidViewLineNumber(e),i=this._toValidViewLineNumber(i);const t=this.projectedModelLineLineCounts.getIndexOf(e-1);let o=e;const s=t.index,r=t.remainder,l=[];for(let t=s,d=this.model.getLineCount();t<d;t++){const d=this.modelLineProjections[t];if(!d.isVisible())continue;const u=t===s?r:0;let a=d.getViewLineCount()-u,m=!1;if(o+a>i&&(m=!0,a=i-o+1),d.getViewLinesData(this.model,t+1,u,a,o-e,n,l),o+=a,m)break}return l}validateViewPosition(e,i,n){e=this._toValidViewLineNumber(e);const t=this.projectedModelLineLineCounts.getIndexOf(e-1),s=t.index,r=t.remainder,l=this.modelLineProjections[s],d=l.getViewLineMinColumn(this.model,s+1,r),u=l.getViewLineMaxColumn(this.model,s+1,r);i<d&&(i=d),i>u&&(i=u);const a=l.getModelColumnOfViewPosition(r,i);return this.model.validatePosition(new o.L(s+1,a)).equals(n)?new o.L(e,i):this.convertModelPositionToViewPosition(n.lineNumber,n.column)}validateViewRange(e,i){const n=this.validateViewPosition(e.startLineNumber,e.startColumn,i.getStartPosition()),t=this.validateViewPosition(e.endLineNumber,e.endColumn,i.getEndPosition());return new s.e(n.lineNumber,n.column,t.lineNumber,t.column)}convertViewPositionToModelPosition(e,i){const n=this.getViewLineInfo(e),t=this.modelLineProjections[n.modelLineNumber-1].getModelColumnOfViewPosition(n.modelLineWrappedLineIdx,i);return this.model.validatePosition(new o.L(n.modelLineNumber,t))}convertViewRangeToModelRange(e){const i=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),n=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);return new s.e(i.lineNumber,i.column,n.lineNumber,n.column)}convertModelPositionToViewPosition(e,i,n=2){const t=this.model.validatePosition(new o.L(e,i)),s=t.lineNumber,r=t.column;let l=s-1,d=!1;for(;l>0&&!this.modelLineProjections[l].isVisible();)l--,d=!0;if(0===l&&!this.modelLineProjections[l].isVisible())return new o.L(1,1);const u=1+this.projectedModelLineLineCounts.getPrefixSum(l);let a;return a=d?this.modelLineProjections[l].getViewPositionOfModelPosition(u,this.model.getLineMaxColumn(l+1),n):this.modelLineProjections[s-1].getViewPositionOfModelPosition(u,r,n),a}convertModelRangeToViewRange(e,i=0){if(e.isEmpty()){const n=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,i);return s.e.fromPositions(n)}{const i=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,1),n=this.convertModelPositionToViewPosition(e.endLineNumber,e.endColumn,0);return new s.e(i.lineNumber,i.column,n.lineNumber,n.column)}}getViewLineNumberOfModelPosition(e,i){let n=e-1;if(this.modelLineProjections[n].isVisible()){const e=1+this.projectedModelLineLineCounts.getPrefixSum(n);return this.modelLineProjections[n].getViewLineNumberOfModelPosition(e,i)}for(;n>0&&!this.modelLineProjections[n].isVisible();)n--;if(0===n&&!this.modelLineProjections[n].isVisible())return 1;const t=1+this.projectedModelLineLineCounts.getPrefixSum(n);return this.modelLineProjections[n].getViewLineNumberOfModelPosition(t,this.model.getLineMaxColumn(n+1))}getDecorationsInRange(e,i,n){const t=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),r=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);if(r.lineNumber-t.lineNumber<=e.endLineNumber-e.startLineNumber)return this.model.getDecorationsInRange(new s.e(t.lineNumber,1,r.lineNumber,r.column),i,n);let l=[];const d=t.lineNumber-1,u=r.lineNumber-1;let a=null;for(let e=d;e<=u;e++){if(this.modelLineProjections[e].isVisible())null===a&&(a=new o.L(e+1,e===d?t.column:1));else if(null!==a){const t=this.model.getLineMaxColumn(e);l=l.concat(this.model.getDecorationsInRange(new s.e(a.lineNumber,a.column,e,t),i,n)),a=null}}null!==a&&(l=l.concat(this.model.getDecorationsInRange(new s.e(a.lineNumber,a.column,r.lineNumber,r.column),i,n)),a=null),l.sort(((e,i)=>{const n=s.e.compareRangesUsingStarts(e.range,i.range);return 0===n?e.id<i.id?-1:e.id>i.id?1:0:n}));const m=[];let c=0,L=null;for(const e of l){const i=e.id;L!==i&&(L=i,m[c++]=e)}return m}getInjectedTextAt(e){const i=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[i.modelLineNumber-1].getInjectedTextAt(i.modelLineWrappedLineIdx,e.column)}normalizePosition(e,i){const n=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[n.modelLineNumber-1].normalizePosition(n.modelLineWrappedLineIdx,e,i)}getLineIndentColumn(e){const i=this.getViewLineInfo(e);return 0===i.modelLineWrappedLineIdx?this.model.getLineIndentColumn(i.modelLineNumber):0}}class h{constructor(e,i){this.modelLineNumber=e,this.modelLineWrappedLineIdx=i}}class g{constructor(e,i){this.modelRange=e,this.viewLines=i}}class w{constructor(e){this._lines=e}convertViewPositionToModelPosition(e){return this._lines.convertViewPositionToModelPosition(e.lineNumber,e.column)}convertViewRangeToModelRange(e){return this._lines.convertViewRangeToModelRange(e)}validateViewPosition(e,i){return this._lines.validateViewPosition(e.lineNumber,e.column,i)}validateViewRange(e,i){return this._lines.validateViewRange(e,i)}convertModelPositionToViewPosition(e,i){return this._lines.convertModelPositionToViewPosition(e.lineNumber,e.column,i)}convertModelRangeToViewRange(e,i){return this._lines.convertModelRangeToViewRange(e,i)}modelPositionIsVisible(e){return this._lines.modelPositionIsVisible(e.lineNumber,e.column)}getModelLineViewLineCount(e){return this._lines.getModelLineViewLineCount(e)}getViewLineNumberOfModelPosition(e,i){return this._lines.getViewLineNumberOfModelPosition(e,i)}}class V{constructor(e){this.model=e}dispose(){}createCoordinatesConverter(){return new b(this)}getHiddenAreas(){return[]}setHiddenAreas(e){return!1}setTabSize(e){return!1}setWrappingSettings(e,i,n,t){return!1}createLineBreaksComputer(){const e=[];return{addRequest:(i,n,t)=>{e.push(null)},finalize:()=>e}}onModelFlushed(){}onModelLinesDeleted(e,i,n){return new u.vk(i,n)}onModelLinesInserted(e,i,n,t){return new u.K9(i,n)}onModelLineChanged(e,i,n){return[!1,new u.il(i,1),null,null]}acceptVersionId(e){}getViewLineCount(){return this.model.getLineCount()}getActiveIndentGuide(e,i,n){return{startLineNumber:e,endLineNumber:e,indent:0}}getViewLinesBracketGuides(e,i,n){return new Array(i-e+1).fill([])}getViewLinesIndentGuides(e,i){const n=i-e+1,t=new Array(n);for(let e=0;e<n;e++)t[e]=0;return t}getViewLineContent(e){return this.model.getLineContent(e)}getViewLineLength(e){return this.model.getLineLength(e)}getViewLineMinColumn(e){return this.model.getLineMinColumn(e)}getViewLineMaxColumn(e){return this.model.getLineMaxColumn(e)}getViewLineData(e){const i=this.model.tokenization.getLineTokens(e),n=i.getLineContent();return new c.IP(n,!1,1,n.length+1,0,i.inflate(),null)}getViewLinesData(e,i,n){const t=this.model.getLineCount();e=Math.min(Math.max(1,e),t),i=Math.min(Math.max(1,i),t);const o=[];for(let t=e;t<=i;t++){const i=t-e;o[i]=n[i]?this.getViewLineData(t):null}return o}getDecorationsInRange(e,i,n){return this.model.getDecorationsInRange(e,i,n)}normalizePosition(e,i){return this.model.normalizePosition(e,i)}getLineIndentColumn(e){return this.model.getLineIndentColumn(e)}getInjectedTextAt(e){return null}}class b{constructor(e){this._lines=e}_validPosition(e){return this._lines.model.validatePosition(e)}_validRange(e){return this._lines.model.validateRange(e)}convertViewPositionToModelPosition(e){return this._validPosition(e)}convertViewRangeToModelRange(e){return this._validRange(e)}validateViewPosition(e,i){return this._validPosition(i)}validateViewRange(e,i){return this._validRange(i)}convertModelPositionToViewPosition(e){return this._validPosition(e)}convertModelRangeToViewRange(e){return this._validRange(e)}modelPositionIsVisible(e){const i=this._lines.model.getLineCount();return!(e.lineNumber<1||e.lineNumber>i)}getModelLineViewLineCount(e){return 1}getViewLineNumberOfModelPosition(e,i){return e}}}}]);