"use strict";(self.webpackChunkapp_template_builder=self.webpackChunkapp_template_builder||[]).push([[9433],{36949:function(t,e,i){i.d(e,{O:function(){return w}});var s=i(34441),n=i(6544),o=i(67235),h=i(43403),a=i(64404),c=i(19111),l=i(64283),r=i(98299),u=i(16308),d=i(13484),p=i(97464),m=i(407),g=i(56709),b=i(38431),y=i(11138),k=i(87068),v=i(14818),_=i(62256),B=i(94304),f=i(26386),C=i(8057),I=i(84575),D=function(t,e,i,s){return new(i||(i=Promise))((function(n,o){function h(t){try{c(s.next(t))}catch(t){o(t)}}function a(t){try{c(s.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?n(t.value):(e=t.value,e instanceof i?e:new i((function(t){t(e)}))).then(h,a)}c((s=s.apply(t,e||[])).next())}))};const S=s.$,L={iconClass:m.lA.quickInputBack.classNames,tooltip:(0,f.NC)("quickInput.back","Back"),handle:-1};class x extends b.JT{constructor(t){super(),this.ui=t,this.visible=!1,this._enabled=!0,this._busy=!1,this._ignoreFocusOut=!1,this._buttons=[],this.noValidationMessage=x.noPromptMessage,this._severity=k.Z.Ignore,this.buttonsUpdated=!1,this.onDidTriggerButtonEmitter=this._register(new g.Q5),this.onDidHideEmitter=this._register(new g.Q5),this.onDisposeEmitter=this._register(new g.Q5),this.visibleDisposables=this._register(new b.SL),this.onDidHide=this.onDidHideEmitter.event}get title(){return this._title}set title(t){this._title=t,this.update()}get description(){return this._description}set description(t){this._description=t,this.update()}get step(){return this._steps}set step(t){this._steps=t,this.update()}get totalSteps(){return this._totalSteps}set totalSteps(t){this._totalSteps=t,this.update()}get enabled(){return this._enabled}set enabled(t){this._enabled=t,this.update()}get contextKey(){return this._contextKey}set contextKey(t){this._contextKey=t,this.update()}get busy(){return this._busy}set busy(t){this._busy=t,this.update()}get ignoreFocusOut(){return this._ignoreFocusOut}set ignoreFocusOut(t){const e=this._ignoreFocusOut!==t&&!y.gn;this._ignoreFocusOut=t&&!y.gn,e&&this.update()}get buttons(){return this._buttons}set buttons(t){this._buttons=t,this.buttonsUpdated=!0,this.update()}get validationMessage(){return this._validationMessage}set validationMessage(t){this._validationMessage=t,this.update()}get severity(){return this._severity}set severity(t){this._severity=t,this.update()}show(){this.visible||(this.visibleDisposables.add(this.ui.onDidTriggerButton((t=>{-1!==this.buttons.indexOf(t)&&this.onDidTriggerButtonEmitter.fire(t)}))),this.ui.show(this),this.visible=!0,this._lastValidationMessage=void 0,this._lastSeverity=void 0,this.buttons.length&&(this.buttonsUpdated=!0),this.update())}hide(){this.visible&&this.ui.hide()}didHide(t=B.Jq.Other){this.visible=!1,this.visibleDisposables.clear(),this.onDidHideEmitter.fire({reason:t})}update(){if(!this.visible)return;const t=this.getTitle();t&&this.ui.title.textContent!==t?this.ui.title.textContent=t:t||"&nbsp;"===this.ui.title.innerHTML||(this.ui.title.innerText="Â ");const e=this.getDescription();if(this.ui.description1.textContent!==e&&(this.ui.description1.textContent=e),this.ui.description2.textContent!==e&&(this.ui.description2.textContent=e),this.busy&&!this.busyDelay&&(this.busyDelay=new d._F,this.busyDelay.setIfNotSet((()=>{this.visible&&this.ui.progressBar.infinite()}),800)),!this.busy&&this.busyDelay&&(this.ui.progressBar.stop(),this.busyDelay.cancel(),this.busyDelay=void 0),this.buttonsUpdated){this.buttonsUpdated=!1,this.ui.leftActionBar.clear();const t=this.buttons.filter((t=>t===L));this.ui.leftActionBar.push(t.map(((t,e)=>{const i=new r.aU(`id-${e}`,"",t.iconClass||(0,_.Q)(t.iconPath),!0,(()=>D(this,void 0,void 0,(function*(){this.onDidTriggerButtonEmitter.fire(t)}))));return i.tooltip=t.tooltip||"",i})),{icon:!0,label:!1}),this.ui.rightActionBar.clear();const e=this.buttons.filter((t=>t!==L));this.ui.rightActionBar.push(e.map(((t,e)=>{const i=new r.aU(`id-${e}`,"",t.iconClass||(0,_.Q)(t.iconPath),!0,(()=>D(this,void 0,void 0,(function*(){this.onDidTriggerButtonEmitter.fire(t)}))));return i.tooltip=t.tooltip||"",i})),{icon:!0,label:!1})}this.ui.ignoreFocusOut=this.ignoreFocusOut,this.ui.setEnabled(this.enabled),this.ui.setContextKey(this.contextKey);const i=this.validationMessage||this.noValidationMessage;this._lastValidationMessage!==i&&(this._lastValidationMessage=i,s.mc(this.ui.message,...(0,c.T)(i))),this._lastSeverity!==this.severity&&(this._lastSeverity=this.severity,this.showMessageDecoration(this.severity))}getTitle(){return this.title&&this.step?`${this.title} (${this.getSteps()})`:this.title?this.title:this.step?this.getSteps():""}getDescription(){return this.description||""}getSteps(){return this.step&&this.totalSteps?(0,f.NC)("quickInput.steps","{0}/{1}",this.step,this.totalSteps):this.step?String(this.step):""}showMessageDecoration(t){if(this.ui.inputBox.showDecoration(t),t!==k.Z.Ignore){const e=this.ui.inputBox.stylesForType(t);this.ui.message.style.color=e.foreground?`${e.foreground}`:"",this.ui.message.style.backgroundColor=e.background?`${e.background}`:"",this.ui.message.style.border=e.border?`1px solid ${e.border}`:"",this.ui.message.style.marginBottom="-2px"}else this.ui.message.style.color="",this.ui.message.style.backgroundColor="",this.ui.message.style.border="",this.ui.message.style.marginBottom=""}dispose(){this.hide(),this.onDisposeEmitter.fire(),super.dispose()}}x.noPromptMessage=(0,f.NC)("inputModeEntry","Press 'Enter' to confirm your input or 'Escape' to cancel");class A extends x{constructor(){super(...arguments),this._value="",this.onDidChangeValueEmitter=this._register(new g.Q5),this.onWillAcceptEmitter=this._register(new g.Q5),this.onDidAcceptEmitter=this._register(new g.Q5),this.onDidCustomEmitter=this._register(new g.Q5),this._items=[],this.itemsUpdated=!1,this._canSelectMany=!1,this._canAcceptInBackground=!1,this._matchOnDescription=!1,this._matchOnDetail=!1,this._matchOnLabel=!0,this._matchOnLabelMode="fuzzy",this._sortByLabel=!0,this._autoFocusOnList=!0,this._keepScrollPosition=!1,this._itemActivation=this.ui.isScreenReaderOptimized()?B.jG.NONE:B.jG.FIRST,this._activeItems=[],this.activeItemsUpdated=!1,this.activeItemsToConfirm=[],this.onDidChangeActiveEmitter=this._register(new g.Q5),this._selectedItems=[],this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=[],this.onDidChangeSelectionEmitter=this._register(new g.Q5),this.onDidTriggerItemButtonEmitter=this._register(new g.Q5),this.valueSelectionUpdated=!0,this._ok="default",this._customButton=!1,this.filterValue=t=>t,this.onDidChangeValue=this.onDidChangeValueEmitter.event,this.onWillAccept=this.onWillAcceptEmitter.event,this.onDidAccept=this.onDidAcceptEmitter.event,this.onDidChangeActive=this.onDidChangeActiveEmitter.event,this.onDidChangeSelection=this.onDidChangeSelectionEmitter.event,this.onDidTriggerItemButton=this.onDidTriggerItemButtonEmitter.event}get quickNavigate(){return this._quickNavigate}set quickNavigate(t){this._quickNavigate=t,this.update()}get value(){return this._value}set value(t){this.doSetValue(t)}doSetValue(t,e){if(this._value!==t){if(this._value=t,e||this.update(),this.visible){this.ui.list.filter(this.filterValue(this._value))&&this.trySelectFirst()}this.onDidChangeValueEmitter.fire(this._value)}}set ariaLabel(t){this._ariaLabel=t,this.update()}get ariaLabel(){return this._ariaLabel}get placeholder(){return this._placeholder}set placeholder(t){this._placeholder=t,this.update()}get items(){return this._items}get scrollTop(){return this.ui.list.scrollTop}set scrollTop(t){this.ui.list.scrollTop=t}set items(t){this._items=t,this.itemsUpdated=!0,this.update()}get canSelectMany(){return this._canSelectMany}set canSelectMany(t){this._canSelectMany=t,this.update()}get canAcceptInBackground(){return this._canAcceptInBackground}set canAcceptInBackground(t){this._canAcceptInBackground=t}get matchOnDescription(){return this._matchOnDescription}set matchOnDescription(t){this._matchOnDescription=t,this.update()}get matchOnDetail(){return this._matchOnDetail}set matchOnDetail(t){this._matchOnDetail=t,this.update()}get matchOnLabel(){return this._matchOnLabel}set matchOnLabel(t){this._matchOnLabel=t,this.update()}get matchOnLabelMode(){return this._matchOnLabelMode}set matchOnLabelMode(t){this._matchOnLabelMode=t,this.update()}get sortByLabel(){return this._sortByLabel}set sortByLabel(t){this._sortByLabel=t,this.update()}get autoFocusOnList(){return this._autoFocusOnList}set autoFocusOnList(t){this._autoFocusOnList=t,this.update()}get keepScrollPosition(){return this._keepScrollPosition}set keepScrollPosition(t){this._keepScrollPosition=t}get itemActivation(){return this._itemActivation}set itemActivation(t){this._itemActivation=t}get activeItems(){return this._activeItems}set activeItems(t){this._activeItems=t,this.activeItemsUpdated=!0,this.update()}get selectedItems(){return this._selectedItems}set selectedItems(t){this._selectedItems=t,this.selectedItemsUpdated=!0,this.update()}get keyMods(){return this._quickNavigate?B.X5:this.ui.keyMods}set valueSelection(t){this._valueSelection=t,this.valueSelectionUpdated=!0,this.update()}get customButton(){return this._customButton}set customButton(t){this._customButton=t,this.update()}get customLabel(){return this._customButtonLabel}set customLabel(t){this._customButtonLabel=t,this.update()}get customHover(){return this._customButtonHover}set customHover(t){this._customButtonHover=t,this.update()}get ok(){return this._ok}set ok(t){this._ok=t,this.update()}get hideInput(){return!!this._hideInput}set hideInput(t){this._hideInput=t,this.update()}trySelectFirst(){this.autoFocusOnList&&(this.canSelectMany||this.ui.list.focus(I.og.First))}show(){this.visible||(this.visibleDisposables.add(this.ui.inputBox.onDidChange((t=>{this.doSetValue(t,!0)}))),this.visibleDisposables.add(this.ui.inputBox.onMouseDown((t=>{this.autoFocusOnList||this.ui.list.clearFocus()}))),this.visibleDisposables.add((this._hideInput?this.ui.list:this.ui.inputBox).onKeyDown((t=>{switch(t.keyCode){case 18:this.ui.list.focus(I.og.Next),this.canSelectMany&&this.ui.list.domFocus(),s.zB.stop(t,!0);break;case 16:this.ui.list.getFocusedElements().length?this.ui.list.focus(I.og.Previous):this.ui.list.focus(I.og.Last),this.canSelectMany&&this.ui.list.domFocus(),s.zB.stop(t,!0);break;case 12:this.ui.list.focus(I.og.NextPage),this.canSelectMany&&this.ui.list.domFocus(),s.zB.stop(t,!0);break;case 11:this.ui.list.focus(I.og.PreviousPage),this.canSelectMany&&this.ui.list.domFocus(),s.zB.stop(t,!0);break;case 17:if(!this._canAcceptInBackground)return;if(!this.ui.inputBox.isSelectionAtEnd())return;this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!0));break;case 14:!t.ctrlKey&&!t.metaKey||t.shiftKey||t.altKey||(this.ui.list.focus(I.og.First),s.zB.stop(t,!0));break;case 13:!t.ctrlKey&&!t.metaKey||t.shiftKey||t.altKey||(this.ui.list.focus(I.og.Last),s.zB.stop(t,!0))}}))),this.visibleDisposables.add(this.ui.onDidAccept((()=>{this.canSelectMany?this.ui.list.getCheckedElements().length||(this._selectedItems=[],this.onDidChangeSelectionEmitter.fire(this.selectedItems)):this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems)),this.handleAccept(!1)}))),this.visibleDisposables.add(this.ui.onDidCustom((()=>{this.onDidCustomEmitter.fire()}))),this.visibleDisposables.add(this.ui.list.onDidChangeFocus((t=>{this.activeItemsUpdated||this.activeItemsToConfirm!==this._activeItems&&(0,u.fS)(t,this._activeItems,((t,e)=>t===e))||(this._activeItems=t,this.onDidChangeActiveEmitter.fire(t))}))),this.visibleDisposables.add(this.ui.list.onDidChangeSelection((({items:t,event:e})=>{this.canSelectMany?t.length&&this.ui.list.setSelectedElements([]):this.selectedItemsToConfirm!==this._selectedItems&&(0,u.fS)(t,this._selectedItems,((t,e)=>t===e))||(this._selectedItems=t,this.onDidChangeSelectionEmitter.fire(t),t.length&&this.handleAccept(e instanceof MouseEvent&&1===e.button))}))),this.visibleDisposables.add(this.ui.list.onChangedCheckedElements((t=>{this.canSelectMany&&(this.selectedItemsToConfirm!==this._selectedItems&&(0,u.fS)(t,this._selectedItems,((t,e)=>t===e))||(this._selectedItems=t,this.onDidChangeSelectionEmitter.fire(t)))}))),this.visibleDisposables.add(this.ui.list.onButtonTriggered((t=>this.onDidTriggerItemButtonEmitter.fire(t)))),this.visibleDisposables.add(this.registerQuickNavigation()),this.valueSelectionUpdated=!0),super.show()}handleAccept(t){let e=!1;this.onWillAcceptEmitter.fire({veto:()=>e=!0}),e||this.onDidAcceptEmitter.fire({inBackground:t})}registerQuickNavigation(){return s.nm(this.ui.container,s.tw.KEY_UP,(t=>{if(this.canSelectMany||!this._quickNavigate)return;const e=new n.y(t),i=e.keyCode;this._quickNavigate.keybindings.some((t=>{const[s,n]=t.getParts();return!n&&(s.shiftKey&&4===i?!(e.ctrlKey||e.altKey||e.metaKey):!(!s.altKey||6!==i)||(!(!s.ctrlKey||5!==i)||!(!s.metaKey||57!==i)))}))&&(this.activeItems[0]&&(this._selectedItems=[this.activeItems[0]],this.onDidChangeSelectionEmitter.fire(this.selectedItems),this.handleAccept(!1)),this._quickNavigate=void 0)}))}update(){if(!this.visible)return;const t=this.keepScrollPosition?this.scrollTop:0,e=!!this._hideInput&&this._items.length>0;this.ui.container.classList.toggle("hidden-input",e&&!this.description);const i={title:!!this.title||!!this.step||!!this.buttons.length,description:!!this.description,checkAll:this.canSelectMany&&!this._hideCheckAll,checkBox:this.canSelectMany,inputBox:!e,progressBar:!e,visibleCount:!0,count:this.canSelectMany,ok:"default"===this.ok?this.canSelectMany:this.ok,list:!0,message:!!this.validationMessage,customButton:this.customButton};this.ui.setVisibilities(i),super.update(),this.ui.inputBox.value!==this.value&&(this.ui.inputBox.value=this.value),this.valueSelectionUpdated&&(this.valueSelectionUpdated=!1,this.ui.inputBox.select(this._valueSelection&&{start:this._valueSelection[0],end:this._valueSelection[1]})),this.ui.inputBox.placeholder!==(this.placeholder||"")&&(this.ui.inputBox.placeholder=this.placeholder||"");let s=this.ariaLabel;if(s||(s=this.placeholder||A.DEFAULT_ARIA_LABEL,this.title&&(s+=` - ${this.title}`)),this.ui.inputBox.ariaLabel!==s&&(this.ui.inputBox.ariaLabel=s),this.ui.list.matchOnDescription=this.matchOnDescription,this.ui.list.matchOnDetail=this.matchOnDetail,this.ui.list.matchOnLabel=this.matchOnLabel,this.ui.list.matchOnLabelMode=this.matchOnLabelMode,this.ui.list.sortByLabel=this.sortByLabel,this.itemsUpdated)switch(this.itemsUpdated=!1,this.ui.list.setElements(this.items),this.ui.list.filter(this.filterValue(this.ui.inputBox.value)),this.ui.checkAll.checked=this.ui.list.getAllVisibleChecked(),this.ui.visibleCount.setCount(this.ui.list.getVisibleCount()),this.ui.count.setCount(this.ui.list.getCheckedCount()),this._itemActivation){case B.jG.NONE:this._itemActivation=B.jG.FIRST;break;case B.jG.SECOND:this.ui.list.focus(I.og.Second),this._itemActivation=B.jG.FIRST;break;case B.jG.LAST:this.ui.list.focus(I.og.Last),this._itemActivation=B.jG.FIRST;break;default:this.trySelectFirst()}this.ui.container.classList.contains("show-checkboxes")!==!!this.canSelectMany&&(this.canSelectMany?this.ui.list.clearFocus():this.trySelectFirst()),this.activeItemsUpdated&&(this.activeItemsUpdated=!1,this.activeItemsToConfirm=this._activeItems,this.ui.list.setFocusedElements(this.activeItems),this.activeItemsToConfirm===this._activeItems&&(this.activeItemsToConfirm=null)),this.selectedItemsUpdated&&(this.selectedItemsUpdated=!1,this.selectedItemsToConfirm=this._selectedItems,this.canSelectMany?this.ui.list.setCheckedElements(this.selectedItems):this.ui.list.setSelectedElements(this.selectedItems),this.selectedItemsToConfirm===this._selectedItems&&(this.selectedItemsToConfirm=null)),this.ui.customButton.label=this.customLabel||"",this.ui.customButton.element.title=this.customHover||"",this.ui.setComboboxAccessibility(!0),i.inputBox||(this.ui.list.domFocus(),this.canSelectMany&&this.ui.list.focus(I.og.First)),this.keepScrollPosition&&(this.scrollTop=t)}}A.DEFAULT_ARIA_LABEL=(0,f.NC)("quickInputBox.ariaLabel","Type to narrow down results.");class w extends b.JT{constructor(t){super(),this.options=t,this.comboboxAccessibility=!1,this.enabled=!0,this.onDidAcceptEmitter=this._register(new g.Q5),this.onDidCustomEmitter=this._register(new g.Q5),this.onDidTriggerButtonEmitter=this._register(new g.Q5),this.keyMods={ctrlCmd:!1,alt:!1},this.controller=null,this.onShowEmitter=this._register(new g.Q5),this.onShow=this.onShowEmitter.event,this.onHideEmitter=this._register(new g.Q5),this.onHide=this.onHideEmitter.event,this.idPrefix=t.idPrefix,this.parentElement=t.container,this.styles=t.styles,this.registerKeyModsListeners()}registerKeyModsListeners(){const t=t=>{this.keyMods.ctrlCmd=t.ctrlKey||t.metaKey,this.keyMods.alt=t.altKey};this._register(s.nm(window,s.tw.KEY_DOWN,t,!0)),this._register(s.nm(window,s.tw.KEY_UP,t,!0)),this._register(s.nm(window,s.tw.MOUSE_DOWN,t,!0))}getUI(){if(this.ui)return this.ui;const t=s.R3(this.parentElement,S(".quick-input-widget.show-file-icons"));t.tabIndex=-1,t.style.display="none";const e=s.dS(t),i=s.R3(t,S(".quick-input-titlebar")),c=this._register(new o.o(i));c.domNode.classList.add("quick-input-left-action-bar");const r=s.R3(i,S(".quick-input-title")),u=this._register(new o.o(i));u.domNode.classList.add("quick-input-right-action-bar");const d=s.R3(t,S(".quick-input-description")),p=s.R3(t,S(".quick-input-header")),m=s.R3(p,S("input.quick-input-check-all"));m.type="checkbox",m.setAttribute("aria-label",(0,f.NC)("quickInput.checkAll","Toggle all checkboxes")),this._register(s.mu(m,s.tw.CHANGE,(t=>{const e=m.checked;M.setAllVisibleChecked(e)}))),this._register(s.nm(m,s.tw.CLICK,(t=>{(t.x||t.y)&&k.setFocus()})));const g=s.R3(p,S(".quick-input-description")),b=s.R3(p,S(".quick-input-and-message")),y=s.R3(b,S(".quick-input-filter")),k=this._register(new C.z(y));k.setAttribute("aria-describedby",`${this.idPrefix}message`);const v=s.R3(y,S(".quick-input-visible-count"));v.setAttribute("aria-live","polite"),v.setAttribute("aria-atomic","true");const _=new a.Z(v,{countFormat:(0,f.NC)({key:"quickInput.visibleCount",comment:["This tells the user how many items are shown in a list of items to select from. The items can be anything. Currently not visible, but read by screen readers."]},"{0} Results")}),D=s.R3(y,S(".quick-input-count"));D.setAttribute("aria-live","polite");const L=new a.Z(D,{countFormat:(0,f.NC)({key:"quickInput.countSelected",comment:["This tells the user how many items are selected in a list of items to select from. The items can be anything."]},"{0} Selected")}),x=s.R3(p,S(".quick-input-action")),w=new h.z(x);w.label=(0,f.NC)("ok","OK"),this._register(w.onDidClick((t=>{this.onDidAcceptEmitter.fire()})));const E=s.R3(p,S(".quick-input-action")),O=new h.z(E);O.label=(0,f.NC)("custom","Custom"),this._register(O.onDidClick((t=>{this.onDidCustomEmitter.fire()})));const F=s.R3(b,S(`#${this.idPrefix}message.quick-input-message`)),M=this._register(new I.xY(t,this.idPrefix+"list",this.options));this._register(M.onChangedAllVisibleChecked((t=>{m.checked=t}))),this._register(M.onChangedVisibleCount((t=>{_.setCount(t)}))),this._register(M.onChangedCheckedCount((t=>{L.setCount(t)}))),this._register(M.onLeave((()=>{setTimeout((()=>{k.setFocus(),this.controller instanceof A&&this.controller.canSelectMany&&M.clearFocus()}),0)}))),this._register(M.onDidChangeFocus((()=>{this.comboboxAccessibility&&this.getUI().inputBox.setAttribute("aria-activedescendant",this.getUI().list.getActiveDescendant()||"")})));const T=new l.k(t);T.getContainer().classList.add("quick-input-progress");const q=s.go(t);return this._register(q),this._register(s.nm(t,s.tw.FOCUS,(t=>{this.previousFocusElement=t.relatedTarget instanceof HTMLElement?t.relatedTarget:void 0}),!0)),this._register(q.onDidBlur((()=>{this.getUI().ignoreFocusOut||this.options.ignoreFocusOut()||this.hide(B.Jq.Blur),this.previousFocusElement=void 0}))),this._register(s.nm(t,s.tw.FOCUS,(t=>{k.setFocus()}))),this._register(s.nm(t,s.tw.KEY_DOWN,(e=>{const i=new n.y(e);switch(i.keyCode){case 3:s.zB.stop(e,!0),this.onDidAcceptEmitter.fire();break;case 9:s.zB.stop(e,!0),this.hide(B.Jq.Gesture);break;case 2:if(!i.altKey&&!i.ctrlKey&&!i.metaKey){const n=[".action-label.codicon"];t.classList.contains("show-checkboxes")?n.push("input"):n.push("input[type=text]"),this.getUI().list.isDisplayed()&&n.push(".monaco-list");const o=t.querySelectorAll(n.join(", "));i.shiftKey&&i.target===o[0]?(s.zB.stop(e,!0),o[o.length-1].focus()):i.shiftKey||i.target!==o[o.length-1]||(s.zB.stop(e,!0),o[0].focus())}}}))),this.ui={container:t,styleSheet:e,leftActionBar:c,titleBar:i,title:r,description1:d,description2:g,rightActionBar:u,checkAll:m,filterContainer:y,inputBox:k,visibleCountContainer:v,visibleCount:_,countContainer:D,count:L,okContainer:x,ok:w,message:F,customButtonContainer:E,customButton:O,list:M,progressBar:T,onDidAccept:this.onDidAcceptEmitter.event,onDidCustom:this.onDidCustomEmitter.event,onDidTriggerButton:this.onDidTriggerButtonEmitter.event,ignoreFocusOut:!1,keyMods:this.keyMods,isScreenReaderOptimized:()=>this.options.isScreenReaderOptimized(),show:t=>this.show(t),hide:()=>this.hide(),setVisibilities:t=>this.setVisibilities(t),setComboboxAccessibility:t=>this.setComboboxAccessibility(t),setEnabled:t=>this.setEnabled(t),setContextKey:t=>this.options.setContextKey(t)},this.updateStyles(),this.ui}pick(t,e={},i=p.T.None){return new Promise(((s,n)=>{let o=t=>{var i;o=s,null===(i=e.onKeyMods)||void 0===i||i.call(e,h.keyMods),s(t)};if(i.isCancellationRequested)return void o(void 0);const h=this.createQuickPick();let a;const c=[h,h.onDidAccept((()=>{if(h.canSelectMany)o(h.selectedItems.slice()),h.hide();else{const t=h.activeItems[0];t&&(o(t),h.hide())}})),h.onDidChangeActive((t=>{const i=t[0];i&&e.onDidFocus&&e.onDidFocus(i)})),h.onDidChangeSelection((t=>{if(!h.canSelectMany){const e=t[0];e&&(o(e),h.hide())}})),h.onDidTriggerItemButton((t=>e.onDidTriggerItemButton&&e.onDidTriggerItemButton(Object.assign(Object.assign({},t),{removeItem:()=>{const e=h.items.indexOf(t.item);if(-1!==e){const t=h.items.slice(),i=t.splice(e,1),s=h.activeItems.filter((t=>t!==i[0])),n=h.keepScrollPosition;h.keepScrollPosition=!0,h.items=t,s&&(h.activeItems=s),h.keepScrollPosition=n}}})))),h.onDidChangeValue((t=>{!a||t||1===h.activeItems.length&&h.activeItems[0]===a||(h.activeItems=[a])})),i.onCancellationRequested((()=>{h.hide()})),h.onDidHide((()=>{(0,b.B9)(c),o(void 0)}))];h.title=e.title,h.canSelectMany=!!e.canPickMany,h.placeholder=e.placeHolder,h.ignoreFocusOut=!!e.ignoreFocusLost,h.matchOnDescription=!!e.matchOnDescription,h.matchOnDetail=!!e.matchOnDetail,h.matchOnLabel=void 0===e.matchOnLabel||e.matchOnLabel,h.autoFocusOnList=void 0===e.autoFocusOnList||e.autoFocusOnList,h.quickNavigate=e.quickNavigate,h.hideInput=!!e.hideInput,h.contextKey=e.contextKey,h.busy=!0,Promise.all([t,e.activeItem]).then((([t,e])=>{a=e,h.busy=!1,h.items=t,h.canSelectMany&&(h.selectedItems=t.filter((t=>"separator"!==t.type&&t.picked))),a&&(h.activeItems=[a])})),h.show(),Promise.resolve(t).then(void 0,(t=>{n(t),h.hide()}))}))}createQuickPick(){const t=this.getUI();return new A(t)}show(t){const e=this.getUI();this.onShowEmitter.fire();const i=this.controller;this.controller=t,i&&i.didHide(),this.setEnabled(!0),e.leftActionBar.clear(),e.title.textContent="",e.description1.textContent="",e.description2.textContent="",e.rightActionBar.clear(),e.checkAll.checked=!1,e.inputBox.placeholder="",e.inputBox.password=!1,e.inputBox.showDecoration(k.Z.Ignore),e.visibleCount.setCount(0),e.count.setCount(0),s.mc(e.message),e.progressBar.stop(),e.list.setElements([]),e.list.matchOnDescription=!1,e.list.matchOnDetail=!1,e.list.matchOnLabel=!0,e.list.sortByLabel=!0,e.ignoreFocusOut=!1,this.setComboboxAccessibility(!1),e.inputBox.ariaLabel="";const n=this.options.backKeybindingLabel();L.tooltip=n?(0,f.NC)("quickInput.backWithKeybinding","Back ({0})",n):(0,f.NC)("quickInput.back","Back"),e.container.style.display="",this.updateLayout(),e.inputBox.setFocus()}setVisibilities(t){const e=this.getUI();e.title.style.display=t.title?"":"none",e.description1.style.display=t.description&&(t.inputBox||t.checkAll)?"":"none",e.description2.style.display=!t.description||t.inputBox||t.checkAll?"none":"",e.checkAll.style.display=t.checkAll?"":"none",e.filterContainer.style.display=t.inputBox?"":"none",e.visibleCountContainer.style.display=t.visibleCount?"":"none",e.countContainer.style.display=t.count?"":"none",e.okContainer.style.display=t.ok?"":"none",e.customButtonContainer.style.display=t.customButton?"":"none",e.message.style.display=t.message?"":"none",e.progressBar.getContainer().style.display=t.progressBar?"":"none",e.list.display(!!t.list),e.container.classList[t.checkBox?"add":"remove"]("show-checkboxes"),this.updateLayout()}setComboboxAccessibility(t){if(t!==this.comboboxAccessibility){const e=this.getUI();this.comboboxAccessibility=t,this.comboboxAccessibility?(e.inputBox.setAttribute("role","combobox"),e.inputBox.setAttribute("aria-haspopup","true"),e.inputBox.setAttribute("aria-autocomplete","list"),e.inputBox.setAttribute("aria-activedescendant",e.list.getActiveDescendant()||"")):(e.inputBox.removeAttribute("role"),e.inputBox.removeAttribute("aria-haspopup"),e.inputBox.removeAttribute("aria-autocomplete"),e.inputBox.removeAttribute("aria-activedescendant"))}}setEnabled(t){if(t!==this.enabled){this.enabled=t;for(const e of this.getUI().leftActionBar.viewItems)e.getAction().enabled=t;for(const e of this.getUI().rightActionBar.viewItems)e.getAction().enabled=t;this.getUI().checkAll.disabled=!t,this.getUI().ok.enabled=t,this.getUI().list.enabled=t}}hide(t){var e;const i=this.controller;if(i){const s=!(null===(e=this.ui)||void 0===e?void 0:e.container.contains(document.activeElement));if(this.controller=null,this.onHideEmitter.fire(),this.getUI().container.style.display="none",!s){let t=this.previousFocusElement;for(;t&&!t.offsetParent;)t=(0,v.f6)(t.parentElement);(null==t?void 0:t.offsetParent)?(t.focus(),this.previousFocusElement=void 0):this.options.returnFocus()}i.didHide(t)}}layout(t,e){this.dimension=t,this.titleBarOffset=e,this.updateLayout()}updateLayout(){if(this.ui){this.ui.container.style.top=`${this.titleBarOffset}px`;const t=this.ui.container.style,e=Math.min(.62*this.dimension.width,w.MAX_WIDTH);t.width=e+"px",t.marginLeft="-"+e/2+"px",this.ui.inputBox.layout(),this.ui.list.layout(this.dimension&&.4*this.dimension.height)}}applyStyles(t){this.styles=t,this.updateStyles()}updateStyles(){if(this.ui){const{quickInputTitleBackground:t,quickInputBackground:e,quickInputForeground:i,contrastBorder:s,widgetShadow:n}=this.styles.widget;this.ui.titleBar.style.backgroundColor=t?t.toString():"",this.ui.container.style.backgroundColor=e?e.toString():"",this.ui.container.style.color=i?i.toString():"",this.ui.container.style.border=s?`1px solid ${s}`:"",this.ui.container.style.boxShadow=n?`0 0 8px 2px ${n}`:"",this.ui.inputBox.style(this.styles.inputBox),this.ui.count.style(this.styles.countBadge),this.ui.ok.style(this.styles.button),this.ui.customButton.style(this.styles.button),this.ui.progressBar.style(this.styles.progressBar),this.ui.list.style(this.styles.list);const o=[];this.styles.list.pickerGroupBorder&&o.push(`.quick-input-list .quick-input-list-entry { border-top-color:  ${this.styles.list.pickerGroupBorder}; }`),this.styles.list.pickerGroupForeground&&o.push(`.quick-input-list .quick-input-list-separator { color:  ${this.styles.list.pickerGroupForeground}; }`),(this.styles.keybindingLabel.keybindingLabelBackground||this.styles.keybindingLabel.keybindingLabelBorder||this.styles.keybindingLabel.keybindingLabelBottomBorder||this.styles.keybindingLabel.keybindingLabelShadow||this.styles.keybindingLabel.keybindingLabelForeground)&&(o.push(".quick-input-list .monaco-keybinding > .monaco-keybinding-key {"),this.styles.keybindingLabel.keybindingLabelBackground&&o.push(`background-color: ${this.styles.keybindingLabel.keybindingLabelBackground};`),this.styles.keybindingLabel.keybindingLabelBorder&&o.push(`border-color: ${this.styles.keybindingLabel.keybindingLabelBorder};`),this.styles.keybindingLabel.keybindingLabelBottomBorder&&o.push(`border-bottom-color: ${this.styles.keybindingLabel.keybindingLabelBottomBorder};`),this.styles.keybindingLabel.keybindingLabelShadow&&o.push(`box-shadow: inset 0 -1px 0 ${this.styles.keybindingLabel.keybindingLabelShadow};`),this.styles.keybindingLabel.keybindingLabelForeground&&o.push(`color: ${this.styles.keybindingLabel.keybindingLabelForeground};`),o.push("}"));const h=o.join("\n");h!==this.ui.styleSheet.textContent&&(this.ui.styleSheet.textContent=h)}}}w.MAX_WIDTH=600}}]);